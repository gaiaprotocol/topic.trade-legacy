(()=>{var e,t,n,s,r,i,a,o={4354:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Headers:()=>a,Request:()=>o,Response:()=>c,default:()=>i,fetch:()=>r});var s=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("unable to locate global object")}();const r=s.fetch,i=s.fetch.bind(s),a=s.Headers,o=s.Request,c=s.Response},9151:(e,t,n)=>{const s=n(5763),r={};for(const e of Object.keys(s))r[s[e]]=e;const i={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};e.exports=i;for(const e of Object.keys(i)){if(!("channels"in i[e]))throw new Error("missing channels property: "+e);if(!("labels"in i[e]))throw new Error("missing channel labels property: "+e);if(i[e].labels.length!==i[e].channels)throw new Error("channel and label counts mismatch: "+e);const{channels:t,labels:n}=i[e];delete i[e].channels,delete i[e].labels,Object.defineProperty(i[e],"channels",{value:t}),Object.defineProperty(i[e],"labels",{value:n})}i.rgb.hsl=function(e){const t=e[0]/255,n=e[1]/255,s=e[2]/255,r=Math.min(t,n,s),i=Math.max(t,n,s),a=i-r;let o,c;i===r?o=0:t===i?o=(n-s)/a:n===i?o=2+(s-t)/a:s===i&&(o=4+(t-n)/a),o=Math.min(60*o,360),o<0&&(o+=360);const l=(r+i)/2;return c=i===r?0:l<=.5?a/(i+r):a/(2-i-r),[o,100*c,100*l]},i.rgb.hsv=function(e){let t,n,s,r,i;const a=e[0]/255,o=e[1]/255,c=e[2]/255,l=Math.max(a,o,c),u=l-Math.min(a,o,c),h=function(e){return(l-e)/6/u+.5};return 0===u?(r=0,i=0):(i=u/l,t=h(a),n=h(o),s=h(c),a===l?r=s-n:o===l?r=1/3+t-s:c===l&&(r=2/3+n-t),r<0?r+=1:r>1&&(r-=1)),[360*r,100*i,100*l]},i.rgb.hwb=function(e){const t=e[0],n=e[1];let s=e[2];const r=i.rgb.hsl(e)[0],a=1/255*Math.min(t,Math.min(n,s));return s=1-1/255*Math.max(t,Math.max(n,s)),[r,100*a,100*s]},i.rgb.cmyk=function(e){const t=e[0]/255,n=e[1]/255,s=e[2]/255,r=Math.min(1-t,1-n,1-s);return[100*((1-t-r)/(1-r)||0),100*((1-n-r)/(1-r)||0),100*((1-s-r)/(1-r)||0),100*r]},i.rgb.keyword=function(e){const t=r[e];if(t)return t;let n,i=1/0;for(const t of Object.keys(s)){const r=s[t],c=(o=r,((a=e)[0]-o[0])**2+(a[1]-o[1])**2+(a[2]-o[2])**2);c<i&&(i=c,n=t)}var a,o;return n},i.keyword.rgb=function(e){return s[e]},i.rgb.xyz=function(e){let t=e[0]/255,n=e[1]/255,s=e[2]/255;t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,n=n>.04045?((n+.055)/1.055)**2.4:n/12.92,s=s>.04045?((s+.055)/1.055)**2.4:s/12.92;return[100*(.4124*t+.3576*n+.1805*s),100*(.2126*t+.7152*n+.0722*s),100*(.0193*t+.1192*n+.9505*s)]},i.rgb.lab=function(e){const t=i.rgb.xyz(e);let n=t[0],s=t[1],r=t[2];n/=95.047,s/=100,r/=108.883,n=n>.008856?n**(1/3):7.787*n+16/116,s=s>.008856?s**(1/3):7.787*s+16/116,r=r>.008856?r**(1/3):7.787*r+16/116;return[116*s-16,500*(n-s),200*(s-r)]},i.hsl.rgb=function(e){const t=e[0]/360,n=e[1]/100,s=e[2]/100;let r,i,a;if(0===n)return a=255*s,[a,a,a];r=s<.5?s*(1+n):s+n-s*n;const o=2*s-r,c=[0,0,0];for(let e=0;e<3;e++)i=t+1/3*-(e-1),i<0&&i++,i>1&&i--,a=6*i<1?o+6*(r-o)*i:2*i<1?r:3*i<2?o+(r-o)*(2/3-i)*6:o,c[e]=255*a;return c},i.hsl.hsv=function(e){const t=e[0];let n=e[1]/100,s=e[2]/100,r=n;const i=Math.max(s,.01);s*=2,n*=s<=1?s:2-s,r*=i<=1?i:2-i;return[t,100*(0===s?2*r/(i+r):2*n/(s+n)),100*((s+n)/2)]},i.hsv.rgb=function(e){const t=e[0]/60,n=e[1]/100;let s=e[2]/100;const r=Math.floor(t)%6,i=t-Math.floor(t),a=255*s*(1-n),o=255*s*(1-n*i),c=255*s*(1-n*(1-i));switch(s*=255,r){case 0:return[s,c,a];case 1:return[o,s,a];case 2:return[a,s,c];case 3:return[a,o,s];case 4:return[c,a,s];case 5:return[s,a,o]}},i.hsv.hsl=function(e){const t=e[0],n=e[1]/100,s=e[2]/100,r=Math.max(s,.01);let i,a;a=(2-n)*s;const o=(2-n)*r;return i=n*r,i/=o<=1?o:2-o,i=i||0,a/=2,[t,100*i,100*a]},i.hwb.rgb=function(e){const t=e[0]/360;let n=e[1]/100,s=e[2]/100;const r=n+s;let i;r>1&&(n/=r,s/=r);const a=Math.floor(6*t),o=1-s;i=6*t-a,0!=(1&a)&&(i=1-i);const c=n+i*(o-n);let l,u,h;switch(a){default:case 6:case 0:l=o,u=c,h=n;break;case 1:l=c,u=o,h=n;break;case 2:l=n,u=o,h=c;break;case 3:l=n,u=c,h=o;break;case 4:l=c,u=n,h=o;break;case 5:l=o,u=n,h=c}return[255*l,255*u,255*h]},i.cmyk.rgb=function(e){const t=e[0]/100,n=e[1]/100,s=e[2]/100,r=e[3]/100;return[255*(1-Math.min(1,t*(1-r)+r)),255*(1-Math.min(1,n*(1-r)+r)),255*(1-Math.min(1,s*(1-r)+r))]},i.xyz.rgb=function(e){const t=e[0]/100,n=e[1]/100,s=e[2]/100;let r,i,a;return r=3.2406*t+-1.5372*n+-.4986*s,i=-.9689*t+1.8758*n+.0415*s,a=.0557*t+-.204*n+1.057*s,r=r>.0031308?1.055*r**(1/2.4)-.055:12.92*r,i=i>.0031308?1.055*i**(1/2.4)-.055:12.92*i,a=a>.0031308?1.055*a**(1/2.4)-.055:12.92*a,r=Math.min(Math.max(0,r),1),i=Math.min(Math.max(0,i),1),a=Math.min(Math.max(0,a),1),[255*r,255*i,255*a]},i.xyz.lab=function(e){let t=e[0],n=e[1],s=e[2];t/=95.047,n/=100,s/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,n=n>.008856?n**(1/3):7.787*n+16/116,s=s>.008856?s**(1/3):7.787*s+16/116;return[116*n-16,500*(t-n),200*(n-s)]},i.lab.xyz=function(e){let t,n,s;n=(e[0]+16)/116,t=e[1]/500+n,s=n-e[2]/200;const r=n**3,i=t**3,a=s**3;return n=r>.008856?r:(n-16/116)/7.787,t=i>.008856?i:(t-16/116)/7.787,s=a>.008856?a:(s-16/116)/7.787,t*=95.047,n*=100,s*=108.883,[t,n,s]},i.lab.lch=function(e){const t=e[0],n=e[1],s=e[2];let r;r=360*Math.atan2(s,n)/2/Math.PI,r<0&&(r+=360);return[t,Math.sqrt(n*n+s*s),r]},i.lch.lab=function(e){const t=e[0],n=e[1],s=e[2]/360*2*Math.PI;return[t,n*Math.cos(s),n*Math.sin(s)]},i.rgb.ansi16=function(e,t=null){const[n,s,r]=e;let a=null===t?i.rgb.hsv(e)[2]:t;if(a=Math.round(a/50),0===a)return 30;let o=30+(Math.round(r/255)<<2|Math.round(s/255)<<1|Math.round(n/255));return 2===a&&(o+=60),o},i.hsv.ansi16=function(e){return i.rgb.ansi16(i.hsv.rgb(e),e[2])},i.rgb.ansi256=function(e){const t=e[0],n=e[1],s=e[2];if(t===n&&n===s)return t<8?16:t>248?231:Math.round((t-8)/247*24)+232;return 16+36*Math.round(t/255*5)+6*Math.round(n/255*5)+Math.round(s/255*5)},i.ansi16.rgb=function(e){let t=e%10;if(0===t||7===t)return e>50&&(t+=3.5),t=t/10.5*255,[t,t,t];const n=.5*(1+~~(e>50));return[(1&t)*n*255,(t>>1&1)*n*255,(t>>2&1)*n*255]},i.ansi256.rgb=function(e){if(e>=232){const t=10*(e-232)+8;return[t,t,t]}let t;e-=16;return[Math.floor(e/36)/5*255,Math.floor((t=e%36)/6)/5*255,t%6/5*255]},i.rgb.hex=function(e){const t=(((255&Math.round(e[0]))<<16)+((255&Math.round(e[1]))<<8)+(255&Math.round(e[2]))).toString(16).toUpperCase();return"000000".substring(t.length)+t},i.hex.rgb=function(e){const t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];let n=t[0];3===t[0].length&&(n=n.split("").map((e=>e+e)).join(""));const s=parseInt(n,16);return[s>>16&255,s>>8&255,255&s]},i.rgb.hcg=function(e){const t=e[0]/255,n=e[1]/255,s=e[2]/255,r=Math.max(Math.max(t,n),s),i=Math.min(Math.min(t,n),s),a=r-i;let o,c;return o=a<1?i/(1-a):0,c=a<=0?0:r===t?(n-s)/a%6:r===n?2+(s-t)/a:4+(t-n)/a,c/=6,c%=1,[360*c,100*a,100*o]},i.hsl.hcg=function(e){const t=e[1]/100,n=e[2]/100,s=n<.5?2*t*n:2*t*(1-n);let r=0;return s<1&&(r=(n-.5*s)/(1-s)),[e[0],100*s,100*r]},i.hsv.hcg=function(e){const t=e[1]/100,n=e[2]/100,s=t*n;let r=0;return s<1&&(r=(n-s)/(1-s)),[e[0],100*s,100*r]},i.hcg.rgb=function(e){const t=e[0]/360,n=e[1]/100,s=e[2]/100;if(0===n)return[255*s,255*s,255*s];const r=[0,0,0],i=t%1*6,a=i%1,o=1-a;let c=0;switch(Math.floor(i)){case 0:r[0]=1,r[1]=a,r[2]=0;break;case 1:r[0]=o,r[1]=1,r[2]=0;break;case 2:r[0]=0,r[1]=1,r[2]=a;break;case 3:r[0]=0,r[1]=o,r[2]=1;break;case 4:r[0]=a,r[1]=0,r[2]=1;break;default:r[0]=1,r[1]=0,r[2]=o}return c=(1-n)*s,[255*(n*r[0]+c),255*(n*r[1]+c),255*(n*r[2]+c)]},i.hcg.hsv=function(e){const t=e[1]/100,n=t+e[2]/100*(1-t);let s=0;return n>0&&(s=t/n),[e[0],100*s,100*n]},i.hcg.hsl=function(e){const t=e[1]/100,n=e[2]/100*(1-t)+.5*t;let s=0;return n>0&&n<.5?s=t/(2*n):n>=.5&&n<1&&(s=t/(2*(1-n))),[e[0],100*s,100*n]},i.hcg.hwb=function(e){const t=e[1]/100,n=t+e[2]/100*(1-t);return[e[0],100*(n-t),100*(1-n)]},i.hwb.hcg=function(e){const t=e[1]/100,n=1-e[2]/100,s=n-t;let r=0;return s<1&&(r=(n-s)/(1-s)),[e[0],100*s,100*r]},i.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},i.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},i.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},i.gray.hsl=function(e){return[0,0,e[0]]},i.gray.hsv=i.gray.hsl,i.gray.hwb=function(e){return[0,100,e[0]]},i.gray.cmyk=function(e){return[0,0,0,e[0]]},i.gray.lab=function(e){return[e[0],0,0]},i.gray.hex=function(e){const t=255&Math.round(e[0]/100*255),n=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(n.length)+n},i.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]}},4701:(e,t,n)=>{const s=n(9151),r=n(1784),i={};Object.keys(s).forEach((e=>{i[e]={},Object.defineProperty(i[e],"channels",{value:s[e].channels}),Object.defineProperty(i[e],"labels",{value:s[e].labels});const t=r(e);Object.keys(t).forEach((n=>{const s=t[n];i[e][n]=function(e){const t=function(...t){const n=t[0];if(null==n)return n;n.length>1&&(t=n);const s=e(t);if("object"==typeof s)for(let e=s.length,t=0;t<e;t++)s[t]=Math.round(s[t]);return s};return"conversion"in e&&(t.conversion=e.conversion),t}(s),i[e][n].raw=function(e){const t=function(...t){const n=t[0];return null==n?n:(n.length>1&&(t=n),e(t))};return"conversion"in e&&(t.conversion=e.conversion),t}(s)}))})),e.exports=i},1784:(e,t,n)=>{const s=n(9151);function r(e){const t=function(){const e={},t=Object.keys(s);for(let n=t.length,s=0;s<n;s++)e[t[s]]={distance:-1,parent:null};return e}(),n=[e];for(t[e].distance=0;n.length;){const e=n.pop(),r=Object.keys(s[e]);for(let s=r.length,i=0;i<s;i++){const s=r[i],a=t[s];-1===a.distance&&(a.distance=t[e].distance+1,a.parent=e,n.unshift(s))}}return t}function i(e,t){return function(n){return t(e(n))}}function a(e,t){const n=[t[e].parent,e];let r=s[t[e].parent][e],a=t[e].parent;for(;t[a].parent;)n.unshift(t[a].parent),r=i(s[t[a].parent][a],r),a=t[a].parent;return r.conversion=n,r}e.exports=function(e){const t=r(e),n={},s=Object.keys(t);for(let e=s.length,r=0;r<e;r++){const e=s[r];null!==t[e].parent&&(n[e]=a(e,t))}return n}},5763:e=>{"use strict";e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},3774:(e,t,n)=>{var s=n(5763),r=n(6152),i=Object.hasOwnProperty,a=Object.create(null);for(var o in s)i.call(s,o)&&(a[s[o]]=o);var c=e.exports={to:{},get:{}};function l(e,t,n){return Math.min(Math.max(t,e),n)}function u(e){var t=Math.round(e).toString(16).toUpperCase();return t.length<2?"0"+t:t}c.get=function(e){var t,n;switch(e.substring(0,3).toLowerCase()){case"hsl":t=c.get.hsl(e),n="hsl";break;case"hwb":t=c.get.hwb(e),n="hwb";break;default:t=c.get.rgb(e),n="rgb"}return t?{model:n,value:t}:null},c.get.rgb=function(e){if(!e)return null;var t,n,r,a=[0,0,0,1];if(t=e.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(r=t[2],t=t[1],n=0;n<3;n++){var o=2*n;a[n]=parseInt(t.slice(o,o+2),16)}r&&(a[3]=parseInt(r,16)/255)}else if(t=e.match(/^#([a-f0-9]{3,4})$/i)){for(r=(t=t[1])[3],n=0;n<3;n++)a[n]=parseInt(t[n]+t[n],16);r&&(a[3]=parseInt(r+r,16)/255)}else if(t=e.match(/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)){for(n=0;n<3;n++)a[n]=parseInt(t[n+1],0);t[4]&&(t[5]?a[3]=.01*parseFloat(t[4]):a[3]=parseFloat(t[4]))}else{if(!(t=e.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)))return(t=e.match(/^(\w+)$/))?"transparent"===t[1]?[0,0,0,0]:i.call(s,t[1])?((a=s[t[1]])[3]=1,a):null:null;for(n=0;n<3;n++)a[n]=Math.round(2.55*parseFloat(t[n+1]));t[4]&&(t[5]?a[3]=.01*parseFloat(t[4]):a[3]=parseFloat(t[4]))}for(n=0;n<3;n++)a[n]=l(a[n],0,255);return a[3]=l(a[3],0,1),a},c.get.hsl=function(e){if(!e)return null;var t=e.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(t){var n=parseFloat(t[4]);return[(parseFloat(t[1])%360+360)%360,l(parseFloat(t[2]),0,100),l(parseFloat(t[3]),0,100),l(isNaN(n)?1:n,0,1)]}return null},c.get.hwb=function(e){if(!e)return null;var t=e.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(t){var n=parseFloat(t[4]);return[(parseFloat(t[1])%360+360)%360,l(parseFloat(t[2]),0,100),l(parseFloat(t[3]),0,100),l(isNaN(n)?1:n,0,1)]}return null},c.to.hex=function(){var e=r(arguments);return"#"+u(e[0])+u(e[1])+u(e[2])+(e[3]<1?u(Math.round(255*e[3])):"")},c.to.rgb=function(){var e=r(arguments);return e.length<4||1===e[3]?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"},c.to.rgb.percent=function(){var e=r(arguments),t=Math.round(e[0]/255*100),n=Math.round(e[1]/255*100),s=Math.round(e[2]/255*100);return e.length<4||1===e[3]?"rgb("+t+"%, "+n+"%, "+s+"%)":"rgba("+t+"%, "+n+"%, "+s+"%, "+e[3]+")"},c.to.hsl=function(){var e=r(arguments);return e.length<4||1===e[3]?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"},c.to.hwb=function(){var e=r(arguments),t="";return e.length>=4&&1!==e[3]&&(t=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+t+")"},c.to.keyword=function(e){return a[e.slice(0,3)]}},9406:(e,t,n)=>{const s=n(3774),r=n(4701),i=["keyword","gray","hex"],a={};for(const e of Object.keys(r))a[[...r[e].labels].sort().join("")]=e;const o={};function c(e,t){if(!(this instanceof c))return new c(e,t);if(t&&t in i&&(t=null),t&&!(t in r))throw new Error("Unknown model: "+t);let n,l;if(null==e)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(e instanceof c)this.model=e.model,this.color=[...e.color],this.valpha=e.valpha;else if("string"==typeof e){const t=s.get(e);if(null===t)throw new Error("Unable to parse color from string: "+e);this.model=t.model,l=r[this.model].channels,this.color=t.value.slice(0,l),this.valpha="number"==typeof t.value[l]?t.value[l]:1}else if(e.length>0){this.model=t||"rgb",l=r[this.model].channels;const n=Array.prototype.slice.call(e,0,l);this.color=d(n,l),this.valpha="number"==typeof e[l]?e[l]:1}else if("number"==typeof e)this.model="rgb",this.color=[e>>16&255,e>>8&255,255&e],this.valpha=1;else{this.valpha=1;const t=Object.keys(e);"alpha"in e&&(t.splice(t.indexOf("alpha"),1),this.valpha="number"==typeof e.alpha?e.alpha:0);const s=t.sort().join("");if(!(s in a))throw new Error("Unable to parse color from object: "+JSON.stringify(e));this.model=a[s];const{labels:i}=r[this.model],o=[];for(n=0;n<i.length;n++)o.push(e[i[n]]);this.color=d(o)}if(o[this.model])for(l=r[this.model].channels,n=0;n<l;n++){const e=o[this.model][n];e&&(this.color[n]=e(this.color[n]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}c.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(e){let t=this.model in s.to?this:this.rgb();t=t.round("number"==typeof e?e:1);const n=1===t.valpha?t.color:[...t.color,this.valpha];return s.to[t.model](n)},percentString(e){const t=this.rgb().round("number"==typeof e?e:1),n=1===t.valpha?t.color:[...t.color,this.valpha];return s.to.rgb.percent(n)},array(){return 1===this.valpha?[...this.color]:[...this.color,this.valpha]},object(){const e={},{channels:t}=r[this.model],{labels:n}=r[this.model];for(let s=0;s<t;s++)e[n[s]]=this.color[s];return 1!==this.valpha&&(e.alpha=this.valpha),e},unitArray(){const e=this.rgb().color;return e[0]/=255,e[1]/=255,e[2]/=255,1!==this.valpha&&e.push(this.valpha),e},unitObject(){const e=this.rgb().object();return e.r/=255,e.g/=255,e.b/=255,1!==this.valpha&&(e.alpha=this.valpha),e},round(e){return e=Math.max(e||0,0),new c([...this.color.map(l(e)),this.valpha],this.model)},alpha(e){return void 0!==e?new c([...this.color,Math.max(0,Math.min(1,e))],this.model):this.valpha},red:u("rgb",0,h(255)),green:u("rgb",1,h(255)),blue:u("rgb",2,h(255)),hue:u(["hsl","hsv","hsl","hwb","hcg"],0,(e=>(e%360+360)%360)),saturationl:u("hsl",1,h(100)),lightness:u("hsl",2,h(100)),saturationv:u("hsv",1,h(100)),value:u("hsv",2,h(100)),chroma:u("hcg",1,h(100)),gray:u("hcg",2,h(100)),white:u("hwb",1,h(100)),wblack:u("hwb",2,h(100)),cyan:u("cmyk",0,h(100)),magenta:u("cmyk",1,h(100)),yellow:u("cmyk",2,h(100)),black:u("cmyk",3,h(100)),x:u("xyz",0,h(95.047)),y:u("xyz",1,h(100)),z:u("xyz",2,h(108.833)),l:u("lab",0,h(100)),a:u("lab",1),b:u("lab",2),keyword(e){return void 0!==e?new c(e):r[this.model].keyword(this.color)},hex(e){return void 0!==e?new c(e):s.to.hex(this.rgb().round().color)},hexa(e){if(void 0!==e)return new c(e);const t=this.rgb().round().color;let n=Math.round(255*this.valpha).toString(16).toUpperCase();return 1===n.length&&(n="0"+n),s.to.hex(t)+n},rgbNumber(){const e=this.rgb().color;return(255&e[0])<<16|(255&e[1])<<8|255&e[2]},luminosity(){const e=this.rgb().color,t=[];for(const[n,s]of e.entries()){const e=s/255;t[n]=e<=.04045?e/12.92:((e+.055)/1.055)**2.4}return.2126*t[0]+.7152*t[1]+.0722*t[2]},contrast(e){const t=this.luminosity(),n=e.luminosity();return t>n?(t+.05)/(n+.05):(n+.05)/(t+.05)},level(e){const t=this.contrast(e);return t>=7?"AAA":t>=4.5?"AA":""},isDark(){const e=this.rgb().color;return(2126*e[0]+7152*e[1]+722*e[2])/1e4<128},isLight(){return!this.isDark()},negate(){const e=this.rgb();for(let t=0;t<3;t++)e.color[t]=255-e.color[t];return e},lighten(e){const t=this.hsl();return t.color[2]+=t.color[2]*e,t},darken(e){const t=this.hsl();return t.color[2]-=t.color[2]*e,t},saturate(e){const t=this.hsl();return t.color[1]+=t.color[1]*e,t},desaturate(e){const t=this.hsl();return t.color[1]-=t.color[1]*e,t},whiten(e){const t=this.hwb();return t.color[1]+=t.color[1]*e,t},blacken(e){const t=this.hwb();return t.color[2]+=t.color[2]*e,t},grayscale(){const e=this.rgb().color,t=.3*e[0]+.59*e[1]+.11*e[2];return c.rgb(t,t,t)},fade(e){return this.alpha(this.valpha-this.valpha*e)},opaquer(e){return this.alpha(this.valpha+this.valpha*e)},rotate(e){const t=this.hsl();let n=t.color[0];return n=(n+e)%360,n=n<0?360+n:n,t.color[0]=n,t},mix(e,t){if(!e||!e.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof e);const n=e.rgb(),s=this.rgb(),r=void 0===t?.5:t,i=2*r-1,a=n.alpha()-s.alpha(),o=((i*a==-1?i:(i+a)/(1+i*a))+1)/2,l=1-o;return c.rgb(o*n.red()+l*s.red(),o*n.green()+l*s.green(),o*n.blue()+l*s.blue(),n.alpha()*r+s.alpha()*(1-r))}};for(const e of Object.keys(r)){if(i.includes(e))continue;const{channels:t}=r[e];c.prototype[e]=function(...t){return this.model===e?new c(this):t.length>0?new c(t,e):new c([...(n=r[this.model][e].raw(this.color),Array.isArray(n)?n:[n]),this.valpha],e);var n},c[e]=function(...n){let s=n[0];return"number"==typeof s&&(s=d(n,t)),new c(s,e)}}function l(e){return function(t){return function(e,t){return Number(e.toFixed(t))}(t,e)}}function u(e,t,n){e=Array.isArray(e)?e:[e];for(const s of e)(o[s]||(o[s]=[]))[t]=n;return e=e[0],function(s){let r;return void 0!==s?(n&&(s=n(s)),r=this[e](),r.color[t]=s,r):(r=this[e]().color[t],n&&(r=n(r)),r)}}function h(e){return function(t){return Math.max(0,Math.min(e,t))}}function d(e,t){for(let n=0;n<t;n++)"number"!=typeof e[n]&&(e[n]=0);return e}e.exports=c},6759:e=>{e.exports=function(e){return!(!e||"string"==typeof e)&&(e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&"String"!==e.constructor.name))}},5112:e=>{var t=function(e){null==e&&(e=(new Date).getTime()),this.N=624,this.M=397,this.MATRIX_A=2567483615,this.UPPER_MASK=2147483648,this.LOWER_MASK=2147483647,this.mt=new Array(this.N),this.mti=this.N+1,e.constructor==Array?this.init_by_array(e,e.length):this.init_seed(e)};t.prototype.init_seed=function(e){for(this.mt[0]=e>>>0,this.mti=1;this.mti<this.N;this.mti++){e=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30;this.mt[this.mti]=(1812433253*((4294901760&e)>>>16)<<16)+1812433253*(65535&e)+this.mti,this.mt[this.mti]>>>=0}},t.prototype.init_by_array=function(e,t){var n,s,r;for(this.init_seed(19650218),n=1,s=0,r=this.N>t?this.N:t;r;r--){var i=this.mt[n-1]^this.mt[n-1]>>>30;this.mt[n]=(this.mt[n]^(1664525*((4294901760&i)>>>16)<<16)+1664525*(65535&i))+e[s]+s,this.mt[n]>>>=0,s++,++n>=this.N&&(this.mt[0]=this.mt[this.N-1],n=1),s>=t&&(s=0)}for(r=this.N-1;r;r--){i=this.mt[n-1]^this.mt[n-1]>>>30;this.mt[n]=(this.mt[n]^(1566083941*((4294901760&i)>>>16)<<16)+1566083941*(65535&i))-n,this.mt[n]>>>=0,++n>=this.N&&(this.mt[0]=this.mt[this.N-1],n=1)}this.mt[0]=2147483648},t.prototype.random_int=function(){var e,t=new Array(0,this.MATRIX_A);if(this.mti>=this.N){var n;for(this.mti==this.N+1&&this.init_seed(5489),n=0;n<this.N-this.M;n++)e=this.mt[n]&this.UPPER_MASK|this.mt[n+1]&this.LOWER_MASK,this.mt[n]=this.mt[n+this.M]^e>>>1^t[1&e];for(;n<this.N-1;n++)e=this.mt[n]&this.UPPER_MASK|this.mt[n+1]&this.LOWER_MASK,this.mt[n]=this.mt[n+(this.M-this.N)]^e>>>1^t[1&e];e=this.mt[this.N-1]&this.UPPER_MASK|this.mt[0]&this.LOWER_MASK,this.mt[this.N-1]=this.mt[this.M-1]^e>>>1^t[1&e],this.mti=0}return e=this.mt[this.mti++],e^=e>>>11,e^=e<<7&2636928640,e^=e<<15&4022730752,(e^=e>>>18)>>>0},t.prototype.random_int31=function(){return this.random_int()>>>1},t.prototype.random_incl=function(){return this.random_int()*(1/4294967295)},t.prototype.random=function(){return this.random_int()*(1/4294967296)},t.prototype.random_excl=function(){return(this.random_int()+.5)*(1/4294967296)},t.prototype.random_long=function(){return(67108864*(this.random_int()>>>5)+(this.random_int()>>>6))*(1/9007199254740992)},e.exports=t},6152:(e,t,n)=>{"use strict";var s=n(6759),r=Array.prototype.concat,i=Array.prototype.slice,a=e.exports=function(e){for(var t=[],n=0,a=e.length;n<a;n++){var o=e[n];s(o)?t=r.call(t,i.call(o)):t.push(o)}return t};a.wrap=function(e){return function(){return e(a(arguments))}}},8132:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(3759);function r(e,t,n){return void 0===t&&(t=new Uint8Array(2)),void 0===n&&(n=0),t[n+0]=e>>>8,t[n+1]=e>>>0,t}function i(e,t,n){return void 0===t&&(t=new Uint8Array(2)),void 0===n&&(n=0),t[n+0]=e>>>0,t[n+1]=e>>>8,t}function a(e,t){return void 0===t&&(t=0),e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function o(e,t){return void 0===t&&(t=0),(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}function c(e,t){return void 0===t&&(t=0),e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]}function l(e,t){return void 0===t&&(t=0),(e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t])>>>0}function u(e,t,n){return void 0===t&&(t=new Uint8Array(4)),void 0===n&&(n=0),t[n+0]=e>>>24,t[n+1]=e>>>16,t[n+2]=e>>>8,t[n+3]=e>>>0,t}function h(e,t,n){return void 0===t&&(t=new Uint8Array(4)),void 0===n&&(n=0),t[n+0]=e>>>0,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24,t}function d(e,t,n){return void 0===t&&(t=new Uint8Array(8)),void 0===n&&(n=0),u(e/4294967296>>>0,t,n),u(e>>>0,t,n+4),t}function p(e,t,n){return void 0===t&&(t=new Uint8Array(8)),void 0===n&&(n=0),h(e>>>0,t,n),h(e/4294967296>>>0,t,n+4),t}t.readInt16BE=function(e,t){return void 0===t&&(t=0),(e[t+0]<<8|e[t+1])<<16>>16},t.readUint16BE=function(e,t){return void 0===t&&(t=0),(e[t+0]<<8|e[t+1])>>>0},t.readInt16LE=function(e,t){return void 0===t&&(t=0),(e[t+1]<<8|e[t])<<16>>16},t.readUint16LE=function(e,t){return void 0===t&&(t=0),(e[t+1]<<8|e[t])>>>0},t.writeUint16BE=r,t.writeInt16BE=r,t.writeUint16LE=i,t.writeInt16LE=i,t.readInt32BE=a,t.readUint32BE=o,t.readInt32LE=c,t.readUint32LE=l,t.writeUint32BE=u,t.writeInt32BE=u,t.writeUint32LE=h,t.writeInt32LE=h,t.readInt64BE=function(e,t){void 0===t&&(t=0);var n=a(e,t),s=a(e,t+4);return 4294967296*n+s-4294967296*(s>>31)},t.readUint64BE=function(e,t){return void 0===t&&(t=0),4294967296*o(e,t)+o(e,t+4)},t.readInt64LE=function(e,t){void 0===t&&(t=0);var n=c(e,t);return 4294967296*c(e,t+4)+n-4294967296*(n>>31)},t.readUint64LE=function(e,t){void 0===t&&(t=0);var n=l(e,t);return 4294967296*l(e,t+4)+n},t.writeUint64BE=d,t.writeInt64BE=d,t.writeUint64LE=p,t.writeInt64LE=p,t.readUintBE=function(e,t,n){if(void 0===n&&(n=0),e%8!=0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(e/8>t.length-n)throw new Error("readUintBE: array is too short for the given bitLength");for(var s=0,r=1,i=e/8+n-1;i>=n;i--)s+=t[i]*r,r*=256;return s},t.readUintLE=function(e,t,n){if(void 0===n&&(n=0),e%8!=0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(e/8>t.length-n)throw new Error("readUintLE: array is too short for the given bitLength");for(var s=0,r=1,i=n;i<n+e/8;i++)s+=t[i]*r,r*=256;return s},t.writeUintBE=function(e,t,n,r){if(void 0===n&&(n=new Uint8Array(e/8)),void 0===r&&(r=0),e%8!=0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!s.isSafeInteger(t))throw new Error("writeUintBE value must be an integer");for(var i=1,a=e/8+r-1;a>=r;a--)n[a]=t/i&255,i*=256;return n},t.writeUintLE=function(e,t,n,r){if(void 0===n&&(n=new Uint8Array(e/8)),void 0===r&&(r=0),e%8!=0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!s.isSafeInteger(t))throw new Error("writeUintLE value must be an integer");for(var i=1,a=r;a<r+e/8;a++)n[a]=t/i&255,i*=256;return n},t.readFloat32BE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat32(t)},t.readFloat32LE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat32(t,!0)},t.readFloat64BE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat64(t)},t.readFloat64LE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat64(t,!0)},t.writeFloat32BE=function(e,t,n){return void 0===t&&(t=new Uint8Array(4)),void 0===n&&(n=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat32(n,e),t},t.writeFloat32LE=function(e,t,n){return void 0===t&&(t=new Uint8Array(4)),void 0===n&&(n=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat32(n,e,!0),t},t.writeFloat64BE=function(e,t,n){return void 0===t&&(t=new Uint8Array(8)),void 0===n&&(n=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat64(n,e),t},t.writeFloat64LE=function(e,t,n){return void 0===t&&(t=new Uint8Array(8)),void 0===n&&(n=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat64(n,e,!0),t}},8258:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(8132),r=n(635),i=20;function a(e,t,n){for(var r=1634760805,a=857760878,o=2036477234,c=1797285236,l=n[3]<<24|n[2]<<16|n[1]<<8|n[0],u=n[7]<<24|n[6]<<16|n[5]<<8|n[4],h=n[11]<<24|n[10]<<16|n[9]<<8|n[8],d=n[15]<<24|n[14]<<16|n[13]<<8|n[12],p=n[19]<<24|n[18]<<16|n[17]<<8|n[16],f=n[23]<<24|n[22]<<16|n[21]<<8|n[20],g=n[27]<<24|n[26]<<16|n[25]<<8|n[24],m=n[31]<<24|n[30]<<16|n[29]<<8|n[28],y=t[3]<<24|t[2]<<16|t[1]<<8|t[0],b=t[7]<<24|t[6]<<16|t[5]<<8|t[4],w=t[11]<<24|t[10]<<16|t[9]<<8|t[8],v=t[15]<<24|t[14]<<16|t[13]<<8|t[12],E=r,A=a,k=o,_=c,P=l,x=u,S=h,I=d,C=p,T=f,O=g,N=m,j=y,L=b,B=w,R=v,M=0;M<i;M+=2)P=(P^=C=C+(j=(j^=E=E+P|0)>>>16|j<<16)|0)>>>20|P<<12,x=(x^=T=T+(L=(L^=A=A+x|0)>>>16|L<<16)|0)>>>20|x<<12,S=(S^=O=O+(B=(B^=k=k+S|0)>>>16|B<<16)|0)>>>20|S<<12,I=(I^=N=N+(R=(R^=_=_+I|0)>>>16|R<<16)|0)>>>20|I<<12,S=(S^=O=O+(B=(B^=k=k+S|0)>>>24|B<<8)|0)>>>25|S<<7,I=(I^=N=N+(R=(R^=_=_+I|0)>>>24|R<<8)|0)>>>25|I<<7,x=(x^=T=T+(L=(L^=A=A+x|0)>>>24|L<<8)|0)>>>25|x<<7,P=(P^=C=C+(j=(j^=E=E+P|0)>>>24|j<<8)|0)>>>25|P<<7,x=(x^=O=O+(R=(R^=E=E+x|0)>>>16|R<<16)|0)>>>20|x<<12,S=(S^=N=N+(j=(j^=A=A+S|0)>>>16|j<<16)|0)>>>20|S<<12,I=(I^=C=C+(L=(L^=k=k+I|0)>>>16|L<<16)|0)>>>20|I<<12,P=(P^=T=T+(B=(B^=_=_+P|0)>>>16|B<<16)|0)>>>20|P<<12,I=(I^=C=C+(L=(L^=k=k+I|0)>>>24|L<<8)|0)>>>25|I<<7,P=(P^=T=T+(B=(B^=_=_+P|0)>>>24|B<<8)|0)>>>25|P<<7,S=(S^=N=N+(j=(j^=A=A+S|0)>>>24|j<<8)|0)>>>25|S<<7,x=(x^=O=O+(R=(R^=E=E+x|0)>>>24|R<<8)|0)>>>25|x<<7;s.writeUint32LE(E+r|0,e,0),s.writeUint32LE(A+a|0,e,4),s.writeUint32LE(k+o|0,e,8),s.writeUint32LE(_+c|0,e,12),s.writeUint32LE(P+l|0,e,16),s.writeUint32LE(x+u|0,e,20),s.writeUint32LE(S+h|0,e,24),s.writeUint32LE(I+d|0,e,28),s.writeUint32LE(C+p|0,e,32),s.writeUint32LE(T+f|0,e,36),s.writeUint32LE(O+g|0,e,40),s.writeUint32LE(N+m|0,e,44),s.writeUint32LE(j+y|0,e,48),s.writeUint32LE(L+b|0,e,52),s.writeUint32LE(B+w|0,e,56),s.writeUint32LE(R+v|0,e,60)}function o(e,t,n,s,i){if(void 0===i&&(i=0),32!==e.length)throw new Error("ChaCha: key size must be 32 bytes");if(s.length<n.length)throw new Error("ChaCha: destination is shorter than source");var o,l;if(0===i){if(8!==t.length&&12!==t.length)throw new Error("ChaCha nonce must be 8 or 12 bytes");l=(o=new Uint8Array(16)).length-t.length,o.set(t,l)}else{if(16!==t.length)throw new Error("ChaCha nonce with counter must be 16 bytes");o=t,l=i}for(var u=new Uint8Array(64),h=0;h<n.length;h+=64){a(u,o,e);for(var d=h;d<h+64&&d<n.length;d++)s[d]=n[d]^u[d-h];c(o,0,l)}return r.wipe(u),0===i&&r.wipe(o),s}function c(e,t,n){for(var s=1;n--;)s=s+(255&e[t])|0,e[t]=255&s,s>>>=8,t++;if(s>0)throw new Error("ChaCha: counter overflow")}t.streamXOR=o,t.stream=function(e,t,n,s){return void 0===s&&(s=0),r.wipe(n),o(e,t,n,n,s)}},1063:(e,t,n)=>{"use strict";var s=n(8258),r=n(329),i=n(635),a=n(8132),o=n(7143);t.Cv=32,t.WH=12,t.pg=16;var c=new Uint8Array(16),l=function(){function e(e){if(this.nonceLength=t.WH,this.tagLength=t.pg,e.length!==t.Cv)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(e)}return e.prototype.seal=function(e,t,n,r){if(e.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var a=new Uint8Array(16);a.set(e,a.length-e.length);var o=new Uint8Array(32);s.stream(this._key,a,o,4);var c,l=t.length+this.tagLength;if(r){if(r.length!==l)throw new Error("ChaCha20Poly1305: incorrect destination length");c=r}else c=new Uint8Array(l);return s.streamXOR(this._key,a,t,c,4),this._authenticate(c.subarray(c.length-this.tagLength,c.length),o,c.subarray(0,c.length-this.tagLength),n),i.wipe(a),c},e.prototype.open=function(e,t,n,r){if(e.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(t.length<this.tagLength)return null;var a=new Uint8Array(16);a.set(e,a.length-e.length);var c=new Uint8Array(32);s.stream(this._key,a,c,4);var l=new Uint8Array(this.tagLength);if(this._authenticate(l,c,t.subarray(0,t.length-this.tagLength),n),!o.equal(l,t.subarray(t.length-this.tagLength,t.length)))return null;var u,h=t.length-this.tagLength;if(r){if(r.length!==h)throw new Error("ChaCha20Poly1305: incorrect destination length");u=r}else u=new Uint8Array(h);return s.streamXOR(this._key,a,t.subarray(0,t.length-this.tagLength),u,4),i.wipe(a),u},e.prototype.clean=function(){return i.wipe(this._key),this},e.prototype._authenticate=function(e,t,n,s){var o=new r.Poly1305(t);s&&(o.update(s),s.length%16>0&&o.update(c.subarray(s.length%16))),o.update(n),n.length%16>0&&o.update(c.subarray(n.length%16));var l=new Uint8Array(8);s&&a.writeUint64LE(s.length,l),o.update(l),a.writeUint64LE(n.length,l),o.update(l);for(var u=o.digest(),h=0;h<u.length;h++)e[h]=u[h];o.clean(),i.wipe(u),i.wipe(l)},e}();t.OK=l},7143:(e,t)=>{"use strict";function n(e,t){if(e.length!==t.length)return 0;for(var n=0,s=0;s<e.length;s++)n|=e[s]^t[s];return 1&n-1>>>8}Object.defineProperty(t,"__esModule",{value:!0}),t.select=function(e,t,n){return~(e-1)&t|e-1&n},t.lessOrEqual=function(e,t){return(0|e)-(0|t)-1>>>31&1},t.compare=n,t.equal=function(e,t){return 0!==e.length&&0!==t.length&&0!==n(e,t)}},4985:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSerializableHash=function(e){return void 0!==e.saveState&&void 0!==e.restoreState&&void 0!==e.cleanSavedState}},5067:(e,t,n)=>{"use strict";var s=n(9498),r=n(635),i=function(){function e(e,t,n,r){void 0===n&&(n=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=r;var i=s.hmac(this._hash,n,t);this._hmac=new s.HMAC(e,i),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return e.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(0===e)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},e.prototype.expand=function(e){for(var t=new Uint8Array(e),n=0;n<t.length;n++)this._bufpos===this._buffer.length&&this._fillBuffer(),t[n]=this._buffer[this._bufpos++];return t},e.prototype.clean=function(){this._hmac.clean(),r.wipe(this._buffer),r.wipe(this._counter),this._bufpos=0},e}();t.t=i},9498:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(4985),r=n(7143),i=n(635),a=function(){function e(e,t){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var n=new Uint8Array(this.blockSize);t.length>this.blockSize?this._inner.update(t).finish(n).clean():n.set(t);for(var r=0;r<n.length;r++)n[r]^=54;this._inner.update(n);for(r=0;r<n.length;r++)n[r]^=106;this._outer.update(n),s.isSerializableHash(this._inner)&&s.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),i.wipe(n)}return e.prototype.reset=function(){if(!s.isSerializableHash(this._inner)||!s.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},e.prototype.clean=function(){s.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),s.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},e.prototype.update=function(e){return this._inner.update(e),this},e.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},e.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},e.prototype.saveState=function(){if(!s.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},e.prototype.restoreState=function(e){if(!s.isSerializableHash(this._inner)||!s.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},e.prototype.cleanSavedState=function(e){if(!s.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},e}();t.HMAC=a,t.hmac=function(e,t,n){var s=new a(e,t);s.update(n);var r=s.digest();return s.clean(),r},t.equal=r.equal},3759:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mul=Math.imul||function(e,t){var n=65535&e,s=65535&t;return n*s+((e>>>16&65535)*s+n*(t>>>16&65535)<<16>>>0)|0},t.add=function(e,t){return e+t|0},t.sub=function(e,t){return e-t|0},t.rotl=function(e,t){return e<<t|e>>>32-t},t.rotr=function(e,t){return e<<32-t|e>>>t},t.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(e){return t.isInteger(e)&&e>=-t.MAX_SAFE_INTEGER&&e<=t.MAX_SAFE_INTEGER}},329:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(7143),r=n(635);t.DIGEST_LENGTH=16;var i=function(){function e(e){this.digestLength=t.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var n=e[0]|e[1]<<8;this._r[0]=8191&n;var s=e[2]|e[3]<<8;this._r[1]=8191&(n>>>13|s<<3);var r=e[4]|e[5]<<8;this._r[2]=7939&(s>>>10|r<<6);var i=e[6]|e[7]<<8;this._r[3]=8191&(r>>>7|i<<9);var a=e[8]|e[9]<<8;this._r[4]=255&(i>>>4|a<<12),this._r[5]=a>>>1&8190;var o=e[10]|e[11]<<8;this._r[6]=8191&(a>>>14|o<<2);var c=e[12]|e[13]<<8;this._r[7]=8065&(o>>>11|c<<5);var l=e[14]|e[15]<<8;this._r[8]=8191&(c>>>8|l<<8),this._r[9]=l>>>5&127,this._pad[0]=e[16]|e[17]<<8,this._pad[1]=e[18]|e[19]<<8,this._pad[2]=e[20]|e[21]<<8,this._pad[3]=e[22]|e[23]<<8,this._pad[4]=e[24]|e[25]<<8,this._pad[5]=e[26]|e[27]<<8,this._pad[6]=e[28]|e[29]<<8,this._pad[7]=e[30]|e[31]<<8}return e.prototype._blocks=function(e,t,n){for(var s=this._fin?0:2048,r=this._h[0],i=this._h[1],a=this._h[2],o=this._h[3],c=this._h[4],l=this._h[5],u=this._h[6],h=this._h[7],d=this._h[8],p=this._h[9],f=this._r[0],g=this._r[1],m=this._r[2],y=this._r[3],b=this._r[4],w=this._r[5],v=this._r[6],E=this._r[7],A=this._r[8],k=this._r[9];n>=16;){var _=e[t+0]|e[t+1]<<8;r+=8191&_;var P=e[t+2]|e[t+3]<<8;i+=8191&(_>>>13|P<<3);var x=e[t+4]|e[t+5]<<8;a+=8191&(P>>>10|x<<6);var S=e[t+6]|e[t+7]<<8;o+=8191&(x>>>7|S<<9);var I=e[t+8]|e[t+9]<<8;c+=8191&(S>>>4|I<<12),l+=I>>>1&8191;var C=e[t+10]|e[t+11]<<8;u+=8191&(I>>>14|C<<2);var T=e[t+12]|e[t+13]<<8;h+=8191&(C>>>11|T<<5);var O=e[t+14]|e[t+15]<<8,N=0,j=N;j+=r*f,j+=i*(5*k),j+=a*(5*A),j+=o*(5*E),N=(j+=c*(5*v))>>>13,j&=8191,j+=l*(5*w),j+=u*(5*b),j+=h*(5*y),j+=(d+=8191&(T>>>8|O<<8))*(5*m);var L=N+=(j+=(p+=O>>>5|s)*(5*g))>>>13;L+=r*g,L+=i*f,L+=a*(5*k),L+=o*(5*A),N=(L+=c*(5*E))>>>13,L&=8191,L+=l*(5*v),L+=u*(5*w),L+=h*(5*b),L+=d*(5*y),N+=(L+=p*(5*m))>>>13,L&=8191;var B=N;B+=r*m,B+=i*g,B+=a*f,B+=o*(5*k),N=(B+=c*(5*A))>>>13,B&=8191,B+=l*(5*E),B+=u*(5*v),B+=h*(5*w),B+=d*(5*b);var R=N+=(B+=p*(5*y))>>>13;R+=r*y,R+=i*m,R+=a*g,R+=o*f,N=(R+=c*(5*k))>>>13,R&=8191,R+=l*(5*A),R+=u*(5*E),R+=h*(5*v),R+=d*(5*w);var M=N+=(R+=p*(5*b))>>>13;M+=r*b,M+=i*y,M+=a*m,M+=o*g,N=(M+=c*f)>>>13,M&=8191,M+=l*(5*k),M+=u*(5*A),M+=h*(5*E),M+=d*(5*v);var U=N+=(M+=p*(5*w))>>>13;U+=r*w,U+=i*b,U+=a*y,U+=o*m,N=(U+=c*g)>>>13,U&=8191,U+=l*f,U+=u*(5*k),U+=h*(5*A),U+=d*(5*E);var D=N+=(U+=p*(5*v))>>>13;D+=r*v,D+=i*w,D+=a*b,D+=o*y,N=(D+=c*m)>>>13,D&=8191,D+=l*g,D+=u*f,D+=h*(5*k),D+=d*(5*A);var F=N+=(D+=p*(5*E))>>>13;F+=r*E,F+=i*v,F+=a*w,F+=o*b,N=(F+=c*y)>>>13,F&=8191,F+=l*m,F+=u*g,F+=h*f,F+=d*(5*k);var $=N+=(F+=p*(5*A))>>>13;$+=r*A,$+=i*E,$+=a*v,$+=o*w,N=($+=c*b)>>>13,$&=8191,$+=l*y,$+=u*m,$+=h*g,$+=d*f;var G=N+=($+=p*(5*k))>>>13;G+=r*k,G+=i*A,G+=a*E,G+=o*v,N=(G+=c*w)>>>13,G&=8191,G+=l*b,G+=u*y,G+=h*m,G+=d*g,r=j=8191&(N=(N=((N+=(G+=p*f)>>>13)<<2)+N|0)+(j&=8191)|0),i=L+=N>>>=13,a=B&=8191,o=R&=8191,c=M&=8191,l=U&=8191,u=D&=8191,h=F&=8191,d=$&=8191,p=G&=8191,t+=16,n-=16}this._h[0]=r,this._h[1]=i,this._h[2]=a,this._h[3]=o,this._h[4]=c,this._h[5]=l,this._h[6]=u,this._h[7]=h,this._h[8]=d,this._h[9]=p},e.prototype.finish=function(e,t){void 0===t&&(t=0);var n,s,r,i,a=new Uint16Array(10);if(this._leftover){for(i=this._leftover,this._buffer[i++]=1;i<16;i++)this._buffer[i]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(n=this._h[1]>>>13,this._h[1]&=8191,i=2;i<10;i++)this._h[i]+=n,n=this._h[i]>>>13,this._h[i]&=8191;for(this._h[0]+=5*n,n=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=n,n=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=n,a[0]=this._h[0]+5,n=a[0]>>>13,a[0]&=8191,i=1;i<10;i++)a[i]=this._h[i]+n,n=a[i]>>>13,a[i]&=8191;for(a[9]-=8192,s=(1^n)-1,i=0;i<10;i++)a[i]&=s;for(s=~s,i=0;i<10;i++)this._h[i]=this._h[i]&s|a[i];for(this._h[0]=65535&(this._h[0]|this._h[1]<<13),this._h[1]=65535&(this._h[1]>>>3|this._h[2]<<10),this._h[2]=65535&(this._h[2]>>>6|this._h[3]<<7),this._h[3]=65535&(this._h[3]>>>9|this._h[4]<<4),this._h[4]=65535&(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14),this._h[5]=65535&(this._h[6]>>>2|this._h[7]<<11),this._h[6]=65535&(this._h[7]>>>5|this._h[8]<<8),this._h[7]=65535&(this._h[8]>>>8|this._h[9]<<5),r=this._h[0]+this._pad[0],this._h[0]=65535&r,i=1;i<8;i++)r=(this._h[i]+this._pad[i]|0)+(r>>>16)|0,this._h[i]=65535&r;return e[t+0]=this._h[0]>>>0,e[t+1]=this._h[0]>>>8,e[t+2]=this._h[1]>>>0,e[t+3]=this._h[1]>>>8,e[t+4]=this._h[2]>>>0,e[t+5]=this._h[2]>>>8,e[t+6]=this._h[3]>>>0,e[t+7]=this._h[3]>>>8,e[t+8]=this._h[4]>>>0,e[t+9]=this._h[4]>>>8,e[t+10]=this._h[5]>>>0,e[t+11]=this._h[5]>>>8,e[t+12]=this._h[6]>>>0,e[t+13]=this._h[6]>>>8,e[t+14]=this._h[7]>>>0,e[t+15]=this._h[7]>>>8,this._finished=!0,this},e.prototype.update=function(e){var t,n=0,s=e.length;if(this._leftover){(t=16-this._leftover)>s&&(t=s);for(var r=0;r<t;r++)this._buffer[this._leftover+r]=e[n+r];if(s-=t,n+=t,this._leftover+=t,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(s>=16&&(t=s-s%16,this._blocks(e,n,t),n+=t,s-=t),s){for(r=0;r<s;r++)this._buffer[this._leftover+r]=e[n+r];this._leftover+=s}return this},e.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var e=new Uint8Array(16);return this.finish(e),e},e.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},e}();t.Poly1305=i,t.oneTimeAuth=function(e,t){var n=new i(e);n.update(t);var s=n.digest();return n.clean(),s},t.equal=function(e,n){return e.length===t.DIGEST_LENGTH&&n.length===t.DIGEST_LENGTH&&s.equal(e,n)}},7261:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.randomStringForEntropy=t.randomString=t.randomUint32=t.randomBytes=t.defaultRandomSource=void 0;const s=n(745),r=n(8132),i=n(635);function a(e,n=t.defaultRandomSource){return n.randomBytes(e)}t.defaultRandomSource=new s.SystemRandomSource,t.randomBytes=a,t.randomUint32=function(e=t.defaultRandomSource){const n=a(4,e),s=(0,r.readUint32LE)(n);return(0,i.wipe)(n),s};const o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function c(e,n=o,s=t.defaultRandomSource){if(n.length<2)throw new Error("randomString charset is too short");if(n.length>256)throw new Error("randomString charset is too long");let r="";const c=n.length,l=256-256%c;for(;e>0;){const t=a(Math.ceil(256*e/l),s);for(let s=0;s<t.length&&e>0;s++){const i=t[s];i<l&&(r+=n.charAt(i%c),e--)}(0,i.wipe)(t)}return r}t.randomString=c,t.randomStringForEntropy=function(e,n=o,s=t.defaultRandomSource){return c(Math.ceil(e/(Math.log(n.length)/Math.LN2)),n,s)}},1811:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserRandomSource=void 0;t.BrowserRandomSource=class{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e="undefined"!=typeof self?self.crypto||self.msCrypto:null;e&&void 0!==e.getRandomValues&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const t=new Uint8Array(e);for(let e=0;e<t.length;e+=65536)this._crypto.getRandomValues(t.subarray(e,e+Math.min(t.length-e,65536)));return t}}},8752:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeRandomSource=void 0;const s=n(635);t.NodeRandomSource=class{constructor(){this.isAvailable=!1,this.isInstantiated=!1;{const e=n(1042);e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let t=this._crypto.randomBytes(e);if(t.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const n=new Uint8Array(e);for(let e=0;e<n.length;e++)n[e]=t[e];return(0,s.wipe)(t),n}}},745:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SystemRandomSource=void 0;const s=n(1811),r=n(8752);t.SystemRandomSource=class{constructor(){return this.isAvailable=!1,this.name="",this._source=new s.BrowserRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Browser")):(this._source=new r.NodeRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Node")):void 0)}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}},6655:(e,t,n)=>{"use strict";var s=n(8132),r=n(635);t.k=32,t.cn=64;var i=function(){function e(){this.digestLength=t.k,this.blockSize=t.cn,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return e.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},e.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},e.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._temp),this.reset()},e.prototype.update=function(e,t){if(void 0===t&&(t=e.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var n=0;if(this._bytesHashed+=t,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&t>0;)this._buffer[this._bufferLength++]=e[n++],t--;this._bufferLength===this.blockSize&&(o(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(t>=this.blockSize&&(n=o(this._temp,this._state,e,n,t),t%=this.blockSize);t>0;)this._buffer[this._bufferLength++]=e[n++],t--;return this},e.prototype.finish=function(e){if(!this._finished){var t=this._bytesHashed,n=this._bufferLength,r=t/536870912|0,i=t<<3,a=t%64<56?64:128;this._buffer[n]=128;for(var c=n+1;c<a-8;c++)this._buffer[c]=0;s.writeUint32BE(r,this._buffer,a-8),s.writeUint32BE(i,this._buffer,a-4),o(this._temp,this._state,this._buffer,0,a),this._finished=!0}for(c=0;c<this.digestLength/4;c++)s.writeUint32BE(this._state[c],e,4*c);return this},e.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},e.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},e.prototype.restoreState=function(e){return this._state.set(e.state),this._bufferLength=e.bufferLength,e.buffer&&this._buffer.set(e.buffer),this._bytesHashed=e.bytesHashed,this._finished=!1,this},e.prototype.cleanSavedState=function(e){r.wipe(e.state),e.buffer&&r.wipe(e.buffer),e.bufferLength=0,e.bytesHashed=0},e}();t.mE=i;var a=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function o(e,t,n,r,i){for(;i>=64;){for(var o=t[0],c=t[1],l=t[2],u=t[3],h=t[4],d=t[5],p=t[6],f=t[7],g=0;g<16;g++){var m=r+4*g;e[g]=s.readUint32BE(n,m)}for(g=16;g<64;g++){var y=e[g-2],b=(y>>>17|y<<15)^(y>>>19|y<<13)^y>>>10,w=((y=e[g-15])>>>7|y<<25)^(y>>>18|y<<14)^y>>>3;e[g]=(b+e[g-7]|0)+(w+e[g-16]|0)}for(g=0;g<64;g++){b=(((h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7))+(h&d^~h&p)|0)+(f+(a[g]+e[g]|0)|0)|0,w=((o>>>2|o<<30)^(o>>>13|o<<19)^(o>>>22|o<<10))+(o&c^o&l^c&l)|0;f=p,p=d,d=h,h=u+b|0,u=l,l=c,c=o,o=b+w|0}t[0]+=o,t[1]+=c,t[2]+=l,t[3]+=u,t[4]+=h,t[5]+=d,t[6]+=p,t[7]+=f,r+=64,i-=64}return r}t.vp=function(e){var t=new i;t.update(e);var n=t.digest();return t.clean(),n}},635:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wipe=function(e){for(var t=0;t<e.length;t++)e[t]=0;return e}},2899:(e,t,n)=>{"use strict";t.gi=t.Au=t.KS=t.kz=void 0;const s=n(7261),r=n(635);function i(e){const t=new Float64Array(16);if(e)for(let n=0;n<e.length;n++)t[n]=e[n];return t}t.kz=32,t.KS=32;const a=new Uint8Array(32);a[0]=9;const o=i([56129,1]);function c(e){let t=1;for(let n=0;n<16;n++){let s=e[n]+t+65535;t=Math.floor(s/65536),e[n]=s-65536*t}e[0]+=t-1+37*(t-1)}function l(e,t,n){const s=~(n-1);for(let n=0;n<16;n++){const r=s&(e[n]^t[n]);e[n]^=r,t[n]^=r}}function u(e,t,n){for(let s=0;s<16;s++)e[s]=t[s]+n[s]}function h(e,t,n){for(let s=0;s<16;s++)e[s]=t[s]-n[s]}function d(e,t,n){let s,r,i=0,a=0,o=0,c=0,l=0,u=0,h=0,d=0,p=0,f=0,g=0,m=0,y=0,b=0,w=0,v=0,E=0,A=0,k=0,_=0,P=0,x=0,S=0,I=0,C=0,T=0,O=0,N=0,j=0,L=0,B=0,R=n[0],M=n[1],U=n[2],D=n[3],F=n[4],$=n[5],G=n[6],H=n[7],z=n[8],W=n[9],q=n[10],V=n[11],K=n[12],J=n[13],Q=n[14],Y=n[15];s=t[0],i+=s*R,a+=s*M,o+=s*U,c+=s*D,l+=s*F,u+=s*$,h+=s*G,d+=s*H,p+=s*z,f+=s*W,g+=s*q,m+=s*V,y+=s*K,b+=s*J,w+=s*Q,v+=s*Y,s=t[1],a+=s*R,o+=s*M,c+=s*U,l+=s*D,u+=s*F,h+=s*$,d+=s*G,p+=s*H,f+=s*z,g+=s*W,m+=s*q,y+=s*V,b+=s*K,w+=s*J,v+=s*Q,E+=s*Y,s=t[2],o+=s*R,c+=s*M,l+=s*U,u+=s*D,h+=s*F,d+=s*$,p+=s*G,f+=s*H,g+=s*z,m+=s*W,y+=s*q,b+=s*V,w+=s*K,v+=s*J,E+=s*Q,A+=s*Y,s=t[3],c+=s*R,l+=s*M,u+=s*U,h+=s*D,d+=s*F,p+=s*$,f+=s*G,g+=s*H,m+=s*z,y+=s*W,b+=s*q,w+=s*V,v+=s*K,E+=s*J,A+=s*Q,k+=s*Y,s=t[4],l+=s*R,u+=s*M,h+=s*U,d+=s*D,p+=s*F,f+=s*$,g+=s*G,m+=s*H,y+=s*z,b+=s*W,w+=s*q,v+=s*V,E+=s*K,A+=s*J,k+=s*Q,_+=s*Y,s=t[5],u+=s*R,h+=s*M,d+=s*U,p+=s*D,f+=s*F,g+=s*$,m+=s*G,y+=s*H,b+=s*z,w+=s*W,v+=s*q,E+=s*V,A+=s*K,k+=s*J,_+=s*Q,P+=s*Y,s=t[6],h+=s*R,d+=s*M,p+=s*U,f+=s*D,g+=s*F,m+=s*$,y+=s*G,b+=s*H,w+=s*z,v+=s*W,E+=s*q,A+=s*V,k+=s*K,_+=s*J,P+=s*Q,x+=s*Y,s=t[7],d+=s*R,p+=s*M,f+=s*U,g+=s*D,m+=s*F,y+=s*$,b+=s*G,w+=s*H,v+=s*z,E+=s*W,A+=s*q,k+=s*V,_+=s*K,P+=s*J,x+=s*Q,S+=s*Y,s=t[8],p+=s*R,f+=s*M,g+=s*U,m+=s*D,y+=s*F,b+=s*$,w+=s*G,v+=s*H,E+=s*z,A+=s*W,k+=s*q,_+=s*V,P+=s*K,x+=s*J,S+=s*Q,I+=s*Y,s=t[9],f+=s*R,g+=s*M,m+=s*U,y+=s*D,b+=s*F,w+=s*$,v+=s*G,E+=s*H,A+=s*z,k+=s*W,_+=s*q,P+=s*V,x+=s*K,S+=s*J,I+=s*Q,C+=s*Y,s=t[10],g+=s*R,m+=s*M,y+=s*U,b+=s*D,w+=s*F,v+=s*$,E+=s*G,A+=s*H,k+=s*z,_+=s*W,P+=s*q,x+=s*V,S+=s*K,I+=s*J,C+=s*Q,T+=s*Y,s=t[11],m+=s*R,y+=s*M,b+=s*U,w+=s*D,v+=s*F,E+=s*$,A+=s*G,k+=s*H,_+=s*z,P+=s*W,x+=s*q,S+=s*V,I+=s*K,C+=s*J,T+=s*Q,O+=s*Y,s=t[12],y+=s*R,b+=s*M,w+=s*U,v+=s*D,E+=s*F,A+=s*$,k+=s*G,_+=s*H,P+=s*z,x+=s*W,S+=s*q,I+=s*V,C+=s*K,T+=s*J,O+=s*Q,N+=s*Y,s=t[13],b+=s*R,w+=s*M,v+=s*U,E+=s*D,A+=s*F,k+=s*$,_+=s*G,P+=s*H,x+=s*z,S+=s*W,I+=s*q,C+=s*V,T+=s*K,O+=s*J,N+=s*Q,j+=s*Y,s=t[14],w+=s*R,v+=s*M,E+=s*U,A+=s*D,k+=s*F,_+=s*$,P+=s*G,x+=s*H,S+=s*z,I+=s*W,C+=s*q,T+=s*V,O+=s*K,N+=s*J,j+=s*Q,L+=s*Y,s=t[15],v+=s*R,E+=s*M,A+=s*U,k+=s*D,_+=s*F,P+=s*$,x+=s*G,S+=s*H,I+=s*z,C+=s*W,T+=s*q,O+=s*V,N+=s*K,j+=s*J,L+=s*Q,B+=s*Y,i+=38*E,a+=38*A,o+=38*k,c+=38*_,l+=38*P,u+=38*x,h+=38*S,d+=38*I,p+=38*C,f+=38*T,g+=38*O,m+=38*N,y+=38*j,b+=38*L,w+=38*B,r=1,s=i+r+65535,r=Math.floor(s/65536),i=s-65536*r,s=a+r+65535,r=Math.floor(s/65536),a=s-65536*r,s=o+r+65535,r=Math.floor(s/65536),o=s-65536*r,s=c+r+65535,r=Math.floor(s/65536),c=s-65536*r,s=l+r+65535,r=Math.floor(s/65536),l=s-65536*r,s=u+r+65535,r=Math.floor(s/65536),u=s-65536*r,s=h+r+65535,r=Math.floor(s/65536),h=s-65536*r,s=d+r+65535,r=Math.floor(s/65536),d=s-65536*r,s=p+r+65535,r=Math.floor(s/65536),p=s-65536*r,s=f+r+65535,r=Math.floor(s/65536),f=s-65536*r,s=g+r+65535,r=Math.floor(s/65536),g=s-65536*r,s=m+r+65535,r=Math.floor(s/65536),m=s-65536*r,s=y+r+65535,r=Math.floor(s/65536),y=s-65536*r,s=b+r+65535,r=Math.floor(s/65536),b=s-65536*r,s=w+r+65535,r=Math.floor(s/65536),w=s-65536*r,s=v+r+65535,r=Math.floor(s/65536),v=s-65536*r,i+=r-1+37*(r-1),r=1,s=i+r+65535,r=Math.floor(s/65536),i=s-65536*r,s=a+r+65535,r=Math.floor(s/65536),a=s-65536*r,s=o+r+65535,r=Math.floor(s/65536),o=s-65536*r,s=c+r+65535,r=Math.floor(s/65536),c=s-65536*r,s=l+r+65535,r=Math.floor(s/65536),l=s-65536*r,s=u+r+65535,r=Math.floor(s/65536),u=s-65536*r,s=h+r+65535,r=Math.floor(s/65536),h=s-65536*r,s=d+r+65535,r=Math.floor(s/65536),d=s-65536*r,s=p+r+65535,r=Math.floor(s/65536),p=s-65536*r,s=f+r+65535,r=Math.floor(s/65536),f=s-65536*r,s=g+r+65535,r=Math.floor(s/65536),g=s-65536*r,s=m+r+65535,r=Math.floor(s/65536),m=s-65536*r,s=y+r+65535,r=Math.floor(s/65536),y=s-65536*r,s=b+r+65535,r=Math.floor(s/65536),b=s-65536*r,s=w+r+65535,r=Math.floor(s/65536),w=s-65536*r,s=v+r+65535,r=Math.floor(s/65536),v=s-65536*r,i+=r-1+37*(r-1),e[0]=i,e[1]=a,e[2]=o,e[3]=c,e[4]=l,e[5]=u,e[6]=h,e[7]=d,e[8]=p,e[9]=f,e[10]=g,e[11]=m,e[12]=y,e[13]=b,e[14]=w,e[15]=v}function p(e,t){d(e,t,t)}function f(e,t){const n=new Uint8Array(32),s=new Float64Array(80),r=i(),a=i(),f=i(),g=i(),m=i(),y=i();for(let t=0;t<31;t++)n[t]=e[t];n[31]=127&e[31]|64,n[0]&=248,function(e,t){for(let n=0;n<16;n++)e[n]=t[2*n]+(t[2*n+1]<<8);e[15]&=32767}(s,t);for(let e=0;e<16;e++)a[e]=s[e];r[0]=g[0]=1;for(let e=254;e>=0;--e){const t=n[e>>>3]>>>(7&e)&1;l(r,a,t),l(f,g,t),u(m,r,f),h(r,r,f),u(f,a,g),h(a,a,g),p(g,m),p(y,r),d(r,f,r),d(f,a,m),u(m,r,f),h(r,r,f),p(a,r),h(f,g,y),d(r,f,o),u(r,r,g),d(f,f,r),d(r,g,y),d(g,a,s),p(a,m),l(r,a,t),l(f,g,t)}for(let e=0;e<16;e++)s[e+16]=r[e],s[e+32]=f[e],s[e+48]=a[e],s[e+64]=g[e];const b=s.subarray(32),w=s.subarray(16);!function(e,t){const n=i();for(let e=0;e<16;e++)n[e]=t[e];for(let e=253;e>=0;e--)p(n,n),2!==e&&4!==e&&d(n,n,t);for(let t=0;t<16;t++)e[t]=n[t]}(b,b),d(w,w,b);const v=new Uint8Array(32);return function(e,t){const n=i(),s=i();for(let e=0;e<16;e++)s[e]=t[e];c(s),c(s),c(s);for(let e=0;e<2;e++){n[0]=s[0]-65517;for(let e=1;e<15;e++)n[e]=s[e]-65535-(n[e-1]>>16&1),n[e-1]&=65535;n[15]=s[15]-32767-(n[14]>>16&1);const e=n[15]>>16&1;n[14]&=65535,l(s,n,1-e)}for(let t=0;t<16;t++)e[2*t]=255&s[t],e[2*t+1]=s[t]>>8}(v,w),v}function g(e){return f(e,a)}function m(e){if(e.length!==t.KS)throw new Error(`x25519: seed must be ${t.KS} bytes`);const n=new Uint8Array(e);return{publicKey:g(n),secretKey:n}}t.Au=function(e){const t=(0,s.randomBytes)(32,e),n=m(t);return(0,r.wipe)(t),n},t.gi=function(e,n,s=!1){if(e.length!==t.kz)throw new Error("X25519: incorrect secret key length");if(n.length!==t.kz)throw new Error("X25519: incorrect public key length");const r=f(e,n);if(s){let e=0;for(let t=0;t<r.length;t++)e|=r[t];if(0===e)throw new Error("X25519: invalid shared key")}return r}},9577:()=>{},4499:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=n(2775);s.__exportStar(n(4067),t),s.__exportStar(n(9002),t)},4067:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_THOUSAND=t.ONE_HUNDRED=void 0,t.ONE_HUNDRED=100,t.ONE_THOUSAND=1e3},9002:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=5*t.ONE_MINUTE,t.TEN_MINUTES=10*t.ONE_MINUTE,t.THIRTY_MINUTES=30*t.ONE_MINUTE,t.SIXTY_MINUTES=60*t.ONE_MINUTE,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=3*t.ONE_HOUR,t.SIX_HOURS=6*t.ONE_HOUR,t.TWELVE_HOURS=12*t.ONE_HOUR,t.TWENTY_FOUR_HOURS=24*t.ONE_HOUR,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=3*t.ONE_DAY,t.FIVE_DAYS=5*t.ONE_DAY,t.SEVEN_DAYS=7*t.ONE_DAY,t.THIRTY_DAYS=30*t.ONE_DAY,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=2*t.ONE_WEEK,t.THREE_WEEKS=3*t.ONE_WEEK,t.FOUR_WEEKS=4*t.ONE_WEEK,t.ONE_YEAR=365*t.ONE_DAY},4622:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=n(2775);s.__exportStar(n(7051),t),s.__exportStar(n(3416),t),s.__exportStar(n(9232),t),s.__exportStar(n(4499),t)},9232:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});n(2775).__exportStar(n(8982),t)},8982:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IWatch=void 0;t.IWatch=class{}},7713:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fromMiliseconds=t.toMiliseconds=void 0;const s=n(4499);t.toMiliseconds=function(e){return e*s.ONE_THOUSAND},t.fromMiliseconds=function(e){return Math.floor(e/s.ONE_THOUSAND)}},8544:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.delay=void 0,t.delay=function(e){return new Promise((t=>{setTimeout((()=>{t(!0)}),e)}))}},7051:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=n(2775);s.__exportStar(n(8544),t),s.__exportStar(n(7713),t)},3416:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Watch=void 0;class n{constructor(){this.timestamps=new Map}start(e){if(this.timestamps.has(e))throw new Error(`Watch already started for label: ${e}`);this.timestamps.set(e,{started:Date.now()})}stop(e){const t=this.get(e);if(void 0!==t.elapsed)throw new Error(`Watch already stopped for label: ${e}`);const n=Date.now()-t.started;this.timestamps.set(e,{started:t.started,elapsed:n})}get(e){const t=this.timestamps.get(e);if(void 0===t)throw new Error(`No timestamp found for label: ${e}`);return t}elapsed(e){const t=this.get(e);return t.elapsed||Date.now()-t.started}}t.Watch=n,t.default=n},2775:(e,t,n)=>{"use strict";n.r(t),n.d(t,{__assign:()=>i,__asyncDelegator:()=>v,__asyncGenerator:()=>w,__asyncValues:()=>E,__await:()=>b,__awaiter:()=>u,__classPrivateFieldGet:()=>P,__classPrivateFieldSet:()=>x,__createBinding:()=>d,__decorate:()=>o,__exportStar:()=>p,__extends:()=>r,__generator:()=>h,__importDefault:()=>_,__importStar:()=>k,__makeTemplateObject:()=>A,__metadata:()=>l,__param:()=>c,__read:()=>g,__rest:()=>a,__spread:()=>m,__spreadArrays:()=>y,__values:()=>f});var s=function(e,t){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},s(e,t)};function r(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return i=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)};function a(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(n[s[r]]=e[s[r]])}return n}function o(e,t,n,s){var r,i=arguments.length,a=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function c(e,t){return function(n,s){t(n,s,e)}}function l(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,n,s){return new(n||(n=Promise))((function(r,i){function a(e){try{c(s.next(e))}catch(e){i(e)}}function o(e){try{c(s.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}c((s=s.apply(e,t||[])).next())}))}function h(e,t){var n,s,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,s&&(r=2&i[0]?s.return:i[0]?s.throw||((r=s.return)&&r.call(s),0):s.next)&&!(r=r.call(s,i[1])).done)return r;switch(s=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,s=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],s=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}}function d(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}function p(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])}function f(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],s=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&s>=e.length&&(e=void 0),{value:e&&e[s++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var s,r,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(s=i.next()).done;)a.push(s.value)}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return a}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g(arguments[t]));return e}function y(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var s=Array(e),r=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,o=i.length;a<o;a++,r++)s[r]=i[a];return s}function b(e){return this instanceof b?(this.v=e,this):new b(e)}function w(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,r=n.apply(e,t||[]),i=[];return s={},a("next"),a("throw"),a("return"),s[Symbol.asyncIterator]=function(){return this},s;function a(e){r[e]&&(s[e]=function(t){return new Promise((function(n,s){i.push([e,t,n,s])>1||o(e,t)}))})}function o(e,t){try{(n=r[e](t)).value instanceof b?Promise.resolve(n.value.v).then(c,l):u(i[0][2],n)}catch(e){u(i[0][3],e)}var n}function c(e){o("next",e)}function l(e){o("throw",e)}function u(e,t){e(t),i.shift(),i.length&&o(i[0][0],i[0][1])}}function v(e){var t,n;return t={},s("next"),s("throw",(function(e){throw e})),s("return"),t[Symbol.iterator]=function(){return this},t;function s(s,r){t[s]=e[s]?function(t){return(n=!n)?{value:b(e[s](t)),done:"return"===s}:r?r(t):t}:r}}function E(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=f(e),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(n){t[n]=e[n]&&function(t){return new Promise((function(s,r){(function(e,t,n,s){Promise.resolve(s).then((function(t){e({value:t,done:n})}),t)})(s,r,(t=e[n](t)).done,t.value)}))}}}function A(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function k(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _(e){return e&&e.__esModule?e:{default:e}}function P(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function x(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}},2006:(e,t,n)=>{"use strict";n.d(t,{AW:()=>L,O6:()=>zt,rV:()=>U,gn:()=>Se,H1:()=>Ee,hF:()=>Ae,WG:()=>K,pe:()=>Q,m$:()=>W,vB:()=>Y,HI:()=>J,E0:()=>Ce,Gq:()=>Pe,$0:()=>ye,Z4:()=>_e,Bv:()=>We,Au:()=>H,jd:()=>z,gu:()=>O,D:()=>ge,X_:()=>fe,bW:()=>Ne,Z7:()=>ct,cO:()=>Be,_H:()=>Le,fc:()=>nt,D6:()=>lt,Hh:()=>Oe,Ym:()=>q,rj:()=>V,jU:()=>de,gp:()=>st,rF:()=>Ut,Bw:()=>Ie,UG:()=>ue,Gg:()=>$t,xW:()=>bt,b$:()=>he,Ih:()=>gt,h1:()=>wt,Q8:()=>ee,o8:()=>dt,qt:()=>ut,Dd:()=>vt,$t:()=>Ot,nf:()=>Lt,Q0:()=>Ct,in:()=>xt,p8:()=>Bt,sI:()=>Mt,al:()=>Rt,L5:()=>ht,EJ:()=>Tt,Z2:()=>St,PM:()=>It,hH:()=>Nt,ON:()=>Ft,n:()=>Pt,JT:()=>jt,M_:()=>pt,jv:()=>yt,KC:()=>we,eG:()=>Te,fK:()=>it,IP:()=>ve,DQ:()=>T,iP:()=>xe,M:()=>rt,he:()=>He,uw:()=>Gt,Ll:()=>Z,EN:()=>X});var s=n(1063),r=n(5067),i=n(7261),a=n(6655),o=n(2899),c=n(1627),l=n(3939),u=function(e,t,n){if(n||2===arguments.length)for(var s,r=0,i=t.length;r<i;r++)!s&&r in t||(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))},h=function(e,t,n){this.name=e,this.version=t,this.os=n,this.type="browser"},d=function(e){this.version=e,this.type="node",this.name="node",this.os=l.platform},p=function(e,t,n,s){this.name=e,this.version=t,this.os=n,this.bot=s,this.type="bot-device"},f=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},g=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},m=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,y=3,b=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],w=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function v(e){return e?A(e):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new g:"undefined"!=typeof navigator?A(navigator.userAgent):void 0!==l&&l.version?new d(l.version.slice(1)):null}function E(e){return""!==e&&b.reduce((function(t,n){var s=n[0],r=n[1];if(t)return t;var i=r.exec(e);return!!i&&[s,i]}),!1)}function A(e){var t=E(e);if(!t)return null;var n=t[0],s=t[1];if("searchbot"===n)return new f;var r=s[1]&&s[1].split(".").join("_").split("_").slice(0,3);r?r.length<y&&(r=u(u([],r,!0),function(e){for(var t=[],n=0;n<e;n++)t.push("0");return t}(y-r.length),!0)):r=[];var i=r.join("."),a=function(e){for(var t=0,n=w.length;t<n;t++){var s=w[t],r=s[0];if(s[1].exec(e))return r}return null}(e),o=m.exec(e);return o&&o[1]?new p(n,i,a,o[1]):new h(n,i,a)}var k=n(4622),_=n(5785),P=n(303),x=n(6107);n(9577);const S={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};var I=n(3939);const C=":";function T(e){const[t,n]=e.split(C);return{namespace:t,reference:n}}function O(e,t=[]){const n=[];return Object.keys(e).forEach((s=>{if(t.length&&!t.includes(s))return;const r=e[s];n.push(...r.accounts)})),n}function N(e,t){return e.includes(":")?[e]:t.chains||[]}const j="base10",L="base16",B="base64pad",R="utf8",M=0,U=1,D=0,F=1,$=12,G=32;function H(){const e=o.Au();return{privateKey:(0,c.BB)(e.secretKey,L),publicKey:(0,c.BB)(e.publicKey,L)}}function z(){const e=(0,i.randomBytes)(G);return(0,c.BB)(e,L)}function W(e,t){const n=o.gi((0,c.mL)(e,L),(0,c.mL)(t,L),!0),s=new r.t(a.mE,n).expand(G);return(0,c.BB)(s,L)}function q(e){const t=(0,a.vp)((0,c.mL)(e,L));return(0,c.BB)(t,L)}function V(e){const t=(0,a.vp)((0,c.mL)(e,R));return(0,c.BB)(t,L)}function K(e){return Number((0,c.BB)(e,j))}function J(e){const t=function(e){return(0,c.mL)(`${e}`,j)}(typeof e.type<"u"?e.type:M);if(K(t)===U&&typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof e.senderPublicKey<"u"?(0,c.mL)(e.senderPublicKey,L):void 0,r=typeof e.iv<"u"?(0,c.mL)(e.iv,L):(0,i.randomBytes)($);return function(e){if(K(e.type)===U){if(typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return(0,c.BB)((0,c.zo)([e.type,e.senderPublicKey,e.iv,e.sealed]),B)}return(0,c.BB)((0,c.zo)([e.type,e.iv,e.sealed]),B)}({type:t,sealed:new s.OK((0,c.mL)(e.symKey,L)).seal(r,(0,c.mL)(e.message,R)),iv:r,senderPublicKey:n})}function Q(e){const t=new s.OK((0,c.mL)(e.symKey,L)),{sealed:n,iv:r}=Y(e.encoded),i=t.open(r,n);if(null===i)throw new Error("Failed to decrypt");return(0,c.BB)(i,R)}function Y(e){const t=(0,c.mL)(e,B),n=t.slice(D,F),s=F;if(K(n)===U){const e=s+G,r=e+$,i=t.slice(s,e),a=t.slice(e,r);return{type:n,sealed:t.slice(r),iv:a,senderPublicKey:i}}const r=s+$,i=t.slice(s,r);return{type:n,sealed:t.slice(r),iv:i}}function Z(e,t){const n=Y(e);return X({type:K(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?(0,c.BB)(n.senderPublicKey,L):void 0,receiverPublicKey:t?.receiverPublicKey})}function X(e){const t=e?.type||M;if(t===U){if(typeof e?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof e?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:e?.senderPublicKey,receiverPublicKey:e?.receiverPublicKey}}function ee(e){return e.type===U&&"string"==typeof e.senderPublicKey&&"string"==typeof e.receiverPublicKey}var te=Object.defineProperty,ne=Object.getOwnPropertySymbols,se=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable,ie=(e,t,n)=>t in e?te(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ae=(e,t)=>{for(var n in t||(t={}))se.call(t,n)&&ie(e,n,t[n]);if(ne)for(var n of ne(t))re.call(t,n)&&ie(e,n,t[n]);return e};const oe="ReactNative",ce={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},le="js";function ue(){return typeof I<"u"&&typeof I.versions<"u"&&typeof I.versions.node<"u"}function he(){return!(0,_.getDocument)()&&!!(0,_.getNavigator)()&&navigator.product===oe}function de(){return!ue()&&!!(0,_.getNavigator)()&&!!(0,_.getDocument)()}function pe(){return he()?ce.reactNative:ue()?ce.node:de()?ce.browser:ce.unknown}function fe(){var e;try{return he()&&typeof n.g<"u"&&typeof(null==n.g?void 0:n.g.Application)<"u"?null==(e=n.g.Application)?void 0:e.applicationId:void 0}catch{return}}function ge(){return(0,P.D)()||{name:"",description:"",url:"",icons:[""]}}function me(e,t,s){const r=function(){if(pe()===ce.reactNative&&typeof n.g<"u"&&typeof(null==n.g?void 0:n.g.Platform)<"u"){const{OS:e,Version:t}=n.g.Platform;return[e,t].join("-")}const e=v();if(null===e)return"unknown";const t=e.os?e.os.replace(" ","").toLowerCase():"unknown";return"browser"===e.type?[t,e.name,e.version].join("-"):[t,e.version].join("-")}(),i=function(){var e;const t=pe();return t===ce.browser?[t,(null==(e=(0,_.getLocation)())?void 0:e.host)||"unknown"].join(":"):t}();return[[e,t].join("-"),[le,s].join("-"),r,i].join("/")}function ye({protocol:e,version:t,relayUrl:n,sdkVersion:s,auth:r,projectId:i,useOnCloseEvent:a,bundleId:o}){const c=n.split("?"),l={auth:r,ua:me(e,t,s),projectId:i,useOnCloseEvent:a||void 0,origin:o||void 0},u=function(e,t){let n=x.parse(e);return n=ae(ae({},n),t),x.stringify(n)}(c[1]||"",l);return c[0]+"?"+u}function be(e,t){return e.filter((e=>t.includes(e))).length===e.length}function we(e){return Object.fromEntries(e.entries())}function ve(e){return new Map(Object.entries(e))}function Ee(e=k.FIVE_MINUTES,t){const n=(0,k.toMiliseconds)(e||k.FIVE_MINUTES);let s,r,i;return{resolve:e=>{i&&s&&(clearTimeout(i),s(e))},reject:e=>{i&&r&&(clearTimeout(i),r(e))},done:()=>new Promise(((e,a)=>{i=setTimeout((()=>{a(new Error(t))}),n),s=e,r=a}))}}function Ae(e,t,n){return new Promise((async(s,r)=>{const i=setTimeout((()=>r(new Error(n))),t);try{s(await e)}catch(e){r(e)}clearTimeout(i)}))}function ke(e,t){if("string"==typeof t&&t.startsWith(`${e}:`))return t;if("topic"===e.toLowerCase()){if("string"!=typeof t)throw new Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}if("id"===e.toLowerCase()){if("number"!=typeof t)throw new Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${e}`)}function _e(e){return ke("topic",e)}function Pe(e){return ke("id",e)}function xe(e){const[t,n]=e.split(":"),s={id:void 0,topic:void 0};if("topic"===t&&"string"==typeof n)s.topic=n;else{if("id"!==t||!Number.isInteger(Number(n)))throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${n}`);s.id=Number(n)}return s}function Se(e,t){return(0,k.fromMiliseconds)((t||Date.now())+(0,k.toMiliseconds)(e))}function Ie(e){return Date.now()>=(0,k.toMiliseconds)(e)}function Ce(e,t){return`${e}${t?`:${t}`:""}`}function Te(e=[],t=[]){return[...new Set([...e,...t])]}async function Oe({id:e,topic:t,wcDeepLink:s}){try{if(!s)return;const r="string"==typeof s?JSON.parse(s):s;let i=r?.href;if("string"!=typeof i)return;i.endsWith("/")&&(i=i.slice(0,-1));const a=`${i}/wc?requestId=${e}&sessionTopic=${t}`,o=pe();o===ce.browser?a.startsWith("https://")?window.open(a,"_blank","noreferrer noopener"):window.open(a,"_self","noreferrer noopener"):o===ce.reactNative&&typeof(null==n.g?void 0:n.g.Linking)<"u"&&await n.g.Linking.openURL(a)}catch(e){console.error(e)}}async function Ne(e,t){try{return await e.getItem(t)||(de()?localStorage.getItem(t):void 0)}catch(e){console.error(e)}}const je="irn";function Le(e){return e?.relay||{protocol:je}}function Be(e){const t=S[e];if(typeof t>"u")throw new Error(`Relay Protocol not supported: ${e}`);return t}var Re=Object.defineProperty,Me=Object.getOwnPropertySymbols,Ue=Object.prototype.hasOwnProperty,De=Object.prototype.propertyIsEnumerable,Fe=(e,t,n)=>t in e?Re(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,$e=(e,t)=>{for(var n in t||(t={}))Ue.call(t,n)&&Fe(e,n,t[n]);if(Me)for(var n of Me(t))De.call(t,n)&&Fe(e,n,t[n]);return e};function Ge(e,t="-"){const n={},s="relay"+t;return Object.keys(e).forEach((t=>{if(t.startsWith(s)){const r=t.replace(s,""),i=e[t];n[r]=i}})),n}function He(e){const t=(e=(e=e.includes("wc://")?e.replace("wc://",""):e).includes("wc:")?e.replace("wc:",""):e).indexOf(":"),n=-1!==e.indexOf("?")?e.indexOf("?"):void 0,s=e.substring(0,t),r=e.substring(t+1,n).split("@"),i=typeof n<"u"?e.substring(n):"",a=x.parse(i);return{protocol:s,topic:ze(r[0]),version:parseInt(r[1],10),symKey:a.symKey,relay:Ge(a)}}function ze(e){return e.startsWith("//")?e.substring(2):e}function We(e){return`${e.protocol}:${e.topic}@${e.version}?`+x.stringify($e({symKey:e.symKey},function(e,t="-"){const n={};return Object.keys(e).forEach((s=>{const r="relay"+t+s;e[s]&&(n[r]=e[s])})),n}(e.relay)))}var qe=Object.defineProperty,Ve=Object.defineProperties,Ke=Object.getOwnPropertyDescriptors,Je=Object.getOwnPropertySymbols,Qe=Object.prototype.hasOwnProperty,Ye=Object.prototype.propertyIsEnumerable,Ze=(e,t,n)=>t in e?qe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Xe=(e,t)=>{for(var n in t||(t={}))Qe.call(t,n)&&Ze(e,n,t[n]);if(Je)for(var n of Je(t))Ye.call(t,n)&&Ze(e,n,t[n]);return e},et=(e,t)=>Ve(e,Ke(t));function tt(e){const t=[];return e.forEach((e=>{const[n,s]=e.split(":");t.push(`${n}:${s}`)})),t}function nt(e,t){const n=xt(e,t);if(n)throw new Error(n.message);const s={};for(const[t,n]of Object.entries(e))s[t]={methods:n.methods,events:n.events,chains:n.accounts.map((e=>`${e.split(":")[0]}:${e.split(":")[1]}`))};return s}function st(e){return e.includes(":")}function rt(e){return st(e)?e.split(":")[0]:e}function it(e){var t,n,s;const r={};if(!ht(e))return r;for(const[i,a]of Object.entries(e)){const e=st(i)?[i]:a.chains,o=a.methods||[],c=a.events||[],l=rt(i);r[l]=et(Xe({},r[l]),{chains:Te(e,null==(t=r[l])?void 0:t.chains),methods:Te(o,null==(n=r[l])?void 0:n.methods),events:Te(c,null==(s=r[l])?void 0:s.events)})}return r}const at={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},ot={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function ct(e,t){const{message:n,code:s}=ot[e];return{message:t?`${n} ${t}`:n,code:s}}function lt(e,t){const{message:n,code:s}=at[e];return{message:t?`${n} ${t}`:n,code:s}}function ut(e,t){return!!Array.isArray(e)&&(!(typeof t<"u"&&e.length)||e.every(t))}function ht(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function dt(e){return typeof e>"u"}function pt(e,t){return!(!t||!dt(e))||"string"==typeof e&&!!e.trim().length}function ft(e,t){return!(!t||!dt(e))||"number"==typeof e&&!isNaN(e)}function gt(e,t){const{requiredNamespaces:n}=t,s=Object.keys(e.namespaces),r=Object.keys(n);let i=!0;return!!be(r,s)&&(s.forEach((t=>{const{accounts:s,methods:r,events:a}=e.namespaces[t],o=tt(s),c=n[t];be(N(t,c),o)&&be(c.methods,r)&&be(c.events,a)||(i=!1)})),i)}function mt(e){return!(!pt(e,!1)||!e.includes(":"))&&2===e.split(":").length}function yt(e){if(pt(e,!1))try{return typeof new URL(e)<"u"}catch{return!1}return!1}function bt(e){var t;return null==(t=e?.proposer)?void 0:t.publicKey}function wt(e){return e?.topic}function vt(e,t){let n=null;return pt(e?.publicKey,!1)||(n=ct("MISSING_OR_INVALID",`${t} controller public key should be a string`)),n}function Et(e){let t=!0;return ut(e)?e.length&&(t=e.every((e=>pt(e,!1)))):t=!1,t}function At(e,t,n){let s=null;return Object.entries(e).forEach((([e,r])=>{if(s)return;const i=function(e,t,n){let s=null;return ut(t)&&t.length?t.forEach((e=>{s||mt(e)||(s=lt("UNSUPPORTED_CHAINS",`${n}, chain ${e} should be a string and conform to "namespace:chainId" format`))})):mt(e)||(s=lt("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),s}(e,N(e,r),`${t} ${n}`);i&&(s=i)})),s}function kt(e,t){let n=null;return ut(e)?e.forEach((e=>{n||function(e){if(pt(e,!1)&&e.includes(":")){const t=e.split(":");if(3===t.length){const e=t[0]+":"+t[1];return!!t[2]&&mt(e)}}return!1}(e)||(n=lt("UNSUPPORTED_ACCOUNTS",`${t}, account ${e} should be a string and conform to "namespace:chainId:address" format`))})):n=lt("UNSUPPORTED_ACCOUNTS",`${t}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function _t(e,t){let n=null;return Object.values(e).forEach((e=>{if(n)return;const s=function(e,t){let n=null;return Et(e?.methods)?Et(e?.events)||(n=lt("UNSUPPORTED_EVENTS",`${t}, events should be an array of strings or empty array for no events`)):n=lt("UNSUPPORTED_METHODS",`${t}, methods should be an array of strings or empty array for no methods`),n}(e,`${t}, namespace`);s&&(n=s)})),n}function Pt(e,t,n){let s=null;if(e&&ht(e)){const r=_t(e,t);r&&(s=r);const i=At(e,t,n);i&&(s=i)}else s=ct("MISSING_OR_INVALID",`${t}, ${n} should be an object with data`);return s}function xt(e,t){let n=null;if(e&&ht(e)){const s=_t(e,t);s&&(n=s);const r=function(e,t){let n=null;return Object.values(e).forEach((e=>{if(n)return;const s=kt(e?.accounts,`${t} namespace`);s&&(n=s)})),n}(e,t);r&&(n=r)}else n=ct("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return n}function St(e){return pt(e.protocol,!0)}function It(e,t){let n=!1;return t&&!e?n=!0:e&&ut(e)&&e.length&&e.forEach((e=>{n=St(e)})),n}function Ct(e){return"number"==typeof e}function Tt(e){return typeof e<"u"&&null!==typeof e}function Ot(e){return!!(e&&"object"==typeof e&&e.code&&ft(e.code,!1)&&e.message&&pt(e.message,!1))}function Nt(e){return!(dt(e)||!pt(e.method,!1))}function jt(e){return!(dt(e)||dt(e.result)&&dt(e.error)||!ft(e.id,!1)||!pt(e.jsonrpc,!1))}function Lt(e){return!(dt(e)||!pt(e.name,!1))}function Bt(e,t){return!(!mt(t)||!function(e){const t=[];return Object.values(e).forEach((e=>{t.push(...tt(e.accounts))})),t}(e).includes(t))}function Rt(e,t,n){return!!pt(n,!1)&&function(e,t){const n=[];return Object.values(e).forEach((e=>{tt(e.accounts).includes(t)&&n.push(...e.methods)})),n}(e,t).includes(n)}function Mt(e,t,n){return!!pt(n,!1)&&function(e,t){const n=[];return Object.values(e).forEach((e=>{tt(e.accounts).includes(t)&&n.push(...e.events)})),n}(e,t).includes(n)}function Ut(e,t,n){let s=null;const r=function(e){const t={};return Object.keys(e).forEach((n=>{var s;n.includes(":")?t[n]=e[n]:null==(s=e[n].chains)||s.forEach((s=>{t[s]={methods:e[n].methods,events:e[n].events}}))})),t}(e),i=function(e){const t={};return Object.keys(e).forEach((n=>{if(n.includes(":"))t[n]=e[n];else{const s=tt(e[n].accounts);s?.forEach((s=>{t[s]={accounts:e[n].accounts.filter((e=>e.includes(`${s}:`))),methods:e[n].methods,events:e[n].events}}))}})),t}(t),a=Object.keys(r),o=Object.keys(i),c=Dt(Object.keys(e)),l=Dt(Object.keys(t)),u=c.filter((e=>!l.includes(e)));return u.length&&(s=ct("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.\n      Required: ${u.toString()}\n      Received: ${Object.keys(t).toString()}`)),be(a,o)||(s=ct("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.\n      Required: ${a.toString()}\n      Approved: ${o.toString()}`)),Object.keys(t).forEach((e=>{if(!e.includes(":")||s)return;const r=tt(t[e].accounts);r.includes(e)||(s=ct("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${e}\n        Required: ${e}\n        Approved: ${r.toString()}`))})),a.forEach((e=>{s||(be(r[e].methods,i[e].methods)?be(r[e].events,i[e].events)||(s=ct("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${e}`)):s=ct("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${e}`))})),s}function Dt(e){return[...new Set(e.map((e=>e.includes(":")?e.split(":")[0]:e)))]}function Ft(e,t){return ft(e,!1)&&e<=t.max&&e>=t.min}function $t(){const e=pe();return new Promise((t=>{switch(e){case ce.browser:t(de()&&navigator?.onLine);break;case ce.reactNative:t(async function(){if(he()&&typeof n.g<"u"&&null!=n.g&&n.g.NetInfo){const e=await(null==n.g?void 0:n.g.NetInfo.fetch());return e?.isConnected}return!0}());break;case ce.node:default:t(!0)}}))}function Gt(e){switch(pe()){case ce.browser:!function(e){!he()&&de()&&(window.addEventListener("online",(()=>e(!0))),window.addEventListener("offline",(()=>e(!1))))}(e);break;case ce.reactNative:!function(e){he()&&typeof n.g<"u"&&null!=n.g&&n.g.NetInfo&&n.g?.NetInfo.addEventListener((t=>e(t?.isConnected)))}(e);case ce.node:}}const Ht={};class zt{static get(e){return Ht[e]}static set(e,t){Ht[e]=t}static delete(e){delete Ht[e]}}},6107:(e,t,n)=>{"use strict";const s=n(3342),r=n(8222),i=n(6932),a=n(9968),o=Symbol("encodeFragmentIdentifier");function c(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function l(e,t){return t.encode?t.strict?s(e):encodeURIComponent(e):e}function u(e,t){return t.decode?r(e):e}function h(e){return Array.isArray(e)?e.sort():"object"==typeof e?h(Object.keys(e)).sort(((e,t)=>Number(e)-Number(t))).map((t=>e[t])):e}function d(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function p(e){const t=(e=d(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function f(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function g(e,t){c((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const n=function(e){let t;switch(e.arrayFormat){case"index":return(e,n,s)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===s[e]&&(s[e]={}),s[e][t[1]]=n):s[e]=n};case"bracket":return(e,n,s)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==s[e]?s[e]=[].concat(s[e],n):s[e]=[n]:s[e]=n};case"colon-list-separator":return(e,n,s)=>{t=/(:list)$/.exec(e),e=e.replace(/:list$/,""),t?void 0!==s[e]?s[e]=[].concat(s[e],n):s[e]=[n]:s[e]=n};case"comma":case"separator":return(t,n,s)=>{const r="string"==typeof n&&n.includes(e.arrayFormatSeparator),i="string"==typeof n&&!r&&u(n,e).includes(e.arrayFormatSeparator);n=i?u(n,e):n;const a=r||i?n.split(e.arrayFormatSeparator).map((t=>u(t,e))):null===n?n:u(n,e);s[t]=a};case"bracket-separator":return(t,n,s)=>{const r=/(\[\])$/.test(t);if(t=t.replace(/\[\]$/,""),!r)return void(s[t]=n?u(n,e):n);const i=null===n?[]:n.split(e.arrayFormatSeparator).map((t=>u(t,e)));void 0!==s[t]?s[t]=[].concat(s[t],i):s[t]=i};default:return(e,t,n)=>{void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t),s=Object.create(null);if("string"!=typeof e)return s;if(!(e=e.trim().replace(/^[?#&]/,"")))return s;for(const r of e.split("&")){if(""===r)continue;let[e,a]=i(t.decode?r.replace(/\+/g," "):r,"=");a=void 0===a?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?a:u(a,t),n(u(e,t),a,s)}for(const e of Object.keys(s)){const n=s[e];if("object"==typeof n&&null!==n)for(const e of Object.keys(n))n[e]=f(n[e],t);else s[e]=f(n,t)}return!1===t.sort?s:(!0===t.sort?Object.keys(s).sort():Object.keys(s).sort(t.sort)).reduce(((e,t)=>{const n=s[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=h(n):e[t]=n,e}),Object.create(null))}t.extract=p,t.parse=g,t.stringify=(e,t)=>{if(!e)return"";c((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const n=n=>t.skipNull&&null==e[n]||t.skipEmptyString&&""===e[n],s=function(e){switch(e.arrayFormat){case"index":return t=>(n,s)=>{const r=n.length;return void 0===s||e.skipNull&&null===s||e.skipEmptyString&&""===s?n:null===s?[...n,[l(t,e),"[",r,"]"].join("")]:[...n,[l(t,e),"[",l(r,e),"]=",l(s,e)].join("")]};case"bracket":return t=>(n,s)=>void 0===s||e.skipNull&&null===s||e.skipEmptyString&&""===s?n:null===s?[...n,[l(t,e),"[]"].join("")]:[...n,[l(t,e),"[]=",l(s,e)].join("")];case"colon-list-separator":return t=>(n,s)=>void 0===s||e.skipNull&&null===s||e.skipEmptyString&&""===s?n:null===s?[...n,[l(t,e),":list="].join("")]:[...n,[l(t,e),":list=",l(s,e)].join("")];case"comma":case"separator":case"bracket-separator":{const t="bracket-separator"===e.arrayFormat?"[]=":"=";return n=>(s,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?s:(r=null===r?"":r,0===s.length?[[l(n,e),t,l(r,e)].join("")]:[[s,l(r,e)].join(e.arrayFormatSeparator)])}default:return t=>(n,s)=>void 0===s||e.skipNull&&null===s||e.skipEmptyString&&""===s?n:null===s?[...n,l(t,e)]:[...n,[l(t,e),"=",l(s,e)].join("")]}}(t),r={};for(const t of Object.keys(e))n(t)||(r[t]=e[t]);const i=Object.keys(r);return!1!==t.sort&&i.sort(t.sort),i.map((n=>{const r=e[n];return void 0===r?"":null===r?l(n,t):Array.isArray(r)?0===r.length&&"bracket-separator"===t.arrayFormat?l(n,t)+"[]":r.reduce(s(n),[]).join("&"):l(n,t)+"="+l(r,t)})).filter((e=>e.length>0)).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[n,s]=i(e,"#");return Object.assign({url:n.split("?")[0]||"",query:g(p(e),t)},t&&t.parseFragmentIdentifier&&s?{fragmentIdentifier:u(s,t)}:{})},t.stringifyUrl=(e,n)=>{n=Object.assign({encode:!0,strict:!0,[o]:!0},n);const s=d(e.url).split("?")[0]||"",r=t.extract(e.url),i=t.parse(r,{sort:!1}),a=Object.assign(i,e.query);let c=t.stringify(a,n);c&&(c=`?${c}`);let u=function(e){let t="";const n=e.indexOf("#");return-1!==n&&(t=e.slice(n)),t}(e.url);return e.fragmentIdentifier&&(u=`#${n[o]?l(e.fragmentIdentifier,n):e.fragmentIdentifier}`),`${s}${c}${u}`},t.pick=(e,n,s)=>{s=Object.assign({parseFragmentIdentifier:!0,[o]:!1},s);const{url:r,query:i,fragmentIdentifier:c}=t.parseUrl(e,s);return t.stringifyUrl({url:r,query:a(i,n),fragmentIdentifier:c},s)},t.exclude=(e,n,s)=>{const r=Array.isArray(n)?e=>!n.includes(e):(e,t)=>!n(e,t);return t.pick(e,r,s)}},5785:(e,t)=>{"use strict";function n(e){let t;return"undefined"!=typeof window&&void 0!==window[e]&&(t=window[e]),t}function s(e){const t=n(e);if(!t)throw new Error(`${e} is not defined in Window`);return t}Object.defineProperty(t,"__esModule",{value:!0}),t.getLocalStorage=t.getLocalStorageOrThrow=t.getCrypto=t.getCryptoOrThrow=t.getLocation=t.getLocationOrThrow=t.getNavigator=t.getNavigatorOrThrow=t.getDocument=t.getDocumentOrThrow=t.getFromWindowOrThrow=t.getFromWindow=void 0,t.getFromWindow=n,t.getFromWindowOrThrow=s,t.getDocumentOrThrow=function(){return s("document")},t.getDocument=function(){return n("document")},t.getNavigatorOrThrow=function(){return s("navigator")},t.getNavigator=function(){return n("navigator")},t.getLocationOrThrow=function(){return s("location")},t.getLocation=function(){return n("location")},t.getCryptoOrThrow=function(){return s("crypto")},t.getCrypto=function(){return n("crypto")},t.getLocalStorageOrThrow=function(){return s("localStorage")},t.getLocalStorage=function(){return n("localStorage")}},303:(e,t,n)=>{"use strict";t.D=void 0;const s=n(5785);t.D=function(){let e,t;try{e=s.getDocumentOrThrow(),t=s.getLocationOrThrow()}catch(e){return null}function n(...t){const n=e.getElementsByTagName("meta");for(let e=0;e<n.length;e++){const s=n[e],r=["itemprop","property","name"].map((e=>s.getAttribute(e))).filter((e=>!!e&&t.includes(e)));if(r.length&&r){const e=s.getAttribute("content");if(e)return e}}return""}const r=function(){let t=n("name","og:site_name","og:title","twitter:title");return t||(t=e.title),t}();return{description:n("description","og:description","twitter:description","keywords"),url:t.origin,icons:function(){const n=e.getElementsByTagName("link"),s=[];for(let e=0;e<n.length;e++){const r=n[e],i=r.getAttribute("rel");if(i&&i.toLowerCase().indexOf("icon")>-1){const e=r.getAttribute("href");if(e)if(-1===e.toLowerCase().indexOf("https:")&&-1===e.toLowerCase().indexOf("http:")&&0!==e.indexOf("//")){let n=t.protocol+"//"+t.host;if(0===e.indexOf("/"))n+=e;else{const s=t.pathname.split("/");s.pop();n+=s.join("/")+"/"+e}s.push(n)}else if(0===e.indexOf("//")){const n=t.protocol+e;s.push(n)}else s.push(e)}}return s}(),name:r}}},8222:e=>{"use strict";var t="%[a-f0-9]{2}",n=new RegExp("("+t+")|([^%]+?)","gi"),s=new RegExp("("+t+")+","gi");function r(e,t){try{return[decodeURIComponent(e.join(""))]}catch(e){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),s=e.slice(t);return Array.prototype.concat.call([],r(n),r(s))}function i(e){try{return decodeURIComponent(e)}catch(i){for(var t=e.match(n)||[],s=1;s<t.length;s++)t=(e=r(t,s).join("")).match(n)||[];return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"","%FF%FE":""},n=s.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch(e){var r=i(n[0]);r!==n[0]&&(t[n[0]]=r)}n=s.exec(e)}t["%C2"]="";for(var a=Object.keys(t),o=0;o<a.length;o++){var c=a[o];e=e.replace(new RegExp(c,"g"),t[c])}return e}(e)}}},8290:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function s(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(e,t,s,i,a){if("function"!=typeof s)throw new TypeError("The listener must be a function");var o=new r(s,i||e,a),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],o]:e._events[c].push(o):(e._events[c]=o,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new s:delete e._events[t]}function o(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),(new s).__proto__||(n=!1)),o.prototype.eventNames=function(){var e,s,r=[];if(0===this._eventsCount)return r;for(s in e=this._events)t.call(e,s)&&r.push(n?s.slice(1):s);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},o.prototype.listeners=function(e){var t=n?n+e:e,s=this._events[t];if(!s)return[];if(s.fn)return[s.fn];for(var r=0,i=s.length,a=new Array(i);r<i;r++)a[r]=s[r].fn;return a},o.prototype.listenerCount=function(e){var t=n?n+e:e,s=this._events[t];return s?s.fn?1:s.length:0},o.prototype.emit=function(e,t,s,r,i,a){var o=n?n+e:e;if(!this._events[o])return!1;var c,l,u=this._events[o],h=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),h){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,s),!0;case 4:return u.fn.call(u.context,t,s,r),!0;case 5:return u.fn.call(u.context,t,s,r,i),!0;case 6:return u.fn.call(u.context,t,s,r,i,a),!0}for(l=1,c=new Array(h-1);l<h;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var d,p=u.length;for(l=0;l<p;l++)switch(u[l].once&&this.removeListener(e,u[l].fn,void 0,!0),h){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,t);break;case 3:u[l].fn.call(u[l].context,t,s);break;case 4:u[l].fn.call(u[l].context,t,s,r);break;default:if(!c)for(d=1,c=new Array(h-1);d<h;d++)c[d-1]=arguments[d];u[l].fn.apply(u[l].context,c)}}return!0},o.prototype.on=function(e,t,n){return i(this,e,t,n,!1)},o.prototype.once=function(e,t,n){return i(this,e,t,n,!0)},o.prototype.removeListener=function(e,t,s,r){var i=n?n+e:e;if(!this._events[i])return this;if(!t)return a(this,i),this;var o=this._events[i];if(o.fn)o.fn!==t||r&&!o.once||s&&o.context!==s||a(this,i);else{for(var c=0,l=[],u=o.length;c<u;c++)(o[c].fn!==t||r&&!o[c].once||s&&o[c].context!==s)&&l.push(o[c]);l.length?this._events[i]=1===l.length?l[0]:l:a(this,i)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new s,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o},9968:e=>{"use strict";e.exports=function(e,t){for(var n={},s=Object.keys(e),r=Array.isArray(t),i=0;i<s.length;i++){var a=s[i],o=e[a];(r?-1!==t.indexOf(a):t(a,o,e))&&(n[a]=o)}return n}},3939:e=>{var t,n,s=e.exports={};function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(e){t=r}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(e){n=i}}();var o,c=[],l=!1,u=-1;function h(){l&&o&&(l=!1,o.length?c=o.concat(c):u=-1,c.length&&d())}function d(){if(!l){var e=a(h);l=!0;for(var t=c.length;t;){for(o=c,c=[];++u<t;)o&&o[u].run();u=-1,t=c.length}o=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function f(){}s.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||l||a(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=f,s.addListener=f,s.once=f,s.off=f,s.removeListener=f,s.removeAllListeners=f,s.emit=f,s.prependListener=f,s.prependOnceListener=f,s.listeners=function(e){return[]},s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},7104:(e,t,n)=>{"use strict";n.d(t,{jc:()=>c,o5:()=>o});Symbol();const s=Symbol();const r=Object.getPrototypeOf,i=new WeakMap,a=e=>e&&(i.has(e)?i.get(e):r(e)===Object.prototype||r(e)===Array.prototype),o=e=>a(e)&&e[s]||null,c=(e,t=!0)=>{i.set(e,t)}},6932:e=>{"use strict";e.exports=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const n=e.indexOf(t);return-1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]}},3342:e=>{"use strict";e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`))},4155:e=>{var t,n,s=e.exports={};function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(e){t=r}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(e){n=i}}();var o,c=[],l=!1,u=-1;function h(){l&&o&&(l=!1,o.length?c=o.concat(c):u=-1,c.length&&d())}function d(){if(!l){var e=a(h);l=!0;for(var t=c.length;t;){for(o=c,c=[];++u<t;)o&&o[u].run();u=-1,t=c.length}o=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function f(){}s.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||l||a(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=f,s.addListener=f,s.once=f,s.off=f,s.removeListener=f,s.removeAllListeners=f,s.emit=f,s.prependListener=f,s.prependOnceListener=f,s.listeners=function(e){return[]},s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},9536:(e,t,n)=>{"use strict";n.d(t,{Z:()=>N});var s=n(6342),r=n(9990),i=n(1155);function a(e,t={}){const{fees:n=e.fees,formatters:s=e.formatters,serializers:r=e.serializers}=t;return{...e,fees:n,formatters:s,serializers:r}}class o extends Error{constructor(e,t={}){super(),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ViemError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:"viem@1.21.3"});const n=t.cause instanceof o?t.cause.details:t.cause?.message?t.cause.message:t.details,s=t.cause instanceof o&&t.cause.docsPath||t.docsPath;this.message=[e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...s?[`Docs: https://viem.sh${s}.html${t.docsSlug?`#${t.docsSlug}`:""}`]:[],...n?[`Details: ${n}`]:[],`Version: ${this.version}`].join("\n"),t.cause&&(this.cause=t.cause),this.details=n,this.docsPath=s,this.metaMessages=t.metaMessages,this.shortMessage=e}walk(e){return c(this,e)}}function c(e,t){return t?.(e)?e:e&&"object"==typeof e&&"cause"in e?c(e.cause,t):t?null:e}class l extends o{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SizeOverflowError"})}}function u(e){return function(e,{strict:t=!0}={}){return!!e&&"string"==typeof e&&(t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x"))}(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}function h(e,{size:t}){if(u(e)>t)throw new l({givenSize:u(e),maxSize:t})}function d(e,t={}){const{signed:n}=t;t.size&&h(e,{size:t.size});const s=BigInt(e);if(!n)return s;const r=(e.length-2)/2;return s<=(1n<<8n*BigInt(r)-1n)-1n?s:s-BigInt(`0x${"f".padStart(2*r,"f")}`)-1n}function p(e,t={}){return Number(d(e,t))}function f(e,t){return({exclude:n,format:s})=>({exclude:n,format:e=>{const r=t(e);if(n)for(const e of n)delete r[e];return{...r,...s(e)}},type:e})}const g={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559"};function m(e){const t={...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,chainId:e.chainId?p(e.chainId):void 0,gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,maxFeePerGas:e.maxFeePerGas?BigInt(e.maxFeePerGas):void 0,maxPriorityFeePerGas:e.maxPriorityFeePerGas?BigInt(e.maxPriorityFeePerGas):void 0,nonce:e.nonce?p(e.nonce):void 0,to:e.to?e.to:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,type:e.type?g[e.type]:void 0,typeHex:e.type?e.type:void 0,value:e.value?BigInt(e.value):void 0,v:e.v?BigInt(e.v):void 0};return t.yParity=(()=>{if(e.yParity)return Number(e.yParity);if("bigint"==typeof t.v){if(0n===t.v||27n===t.v)return 0;if(1n===t.v||28n===t.v)return 1;if(t.v>=35n)return t.v%2n===0n?1:0}})(),"legacy"===t.type&&(delete t.accessList,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas,delete t.yParity),"eip2930"===t.type&&(delete t.maxFeePerGas,delete t.maxPriorityFeePerGas),t}const y=f("transaction",m);function b(e){const t=e.transactions?.map((e=>"string"==typeof e?e:m(e)));return{...e,baseFeePerGas:e.baseFeePerGas?BigInt(e.baseFeePerGas):null,difficulty:e.difficulty?BigInt(e.difficulty):void 0,gasLimit:e.gasLimit?BigInt(e.gasLimit):void 0,gasUsed:e.gasUsed?BigInt(e.gasUsed):void 0,hash:e.hash?e.hash:null,logsBloom:e.logsBloom?e.logsBloom:null,nonce:e.nonce?e.nonce:null,number:e.number?BigInt(e.number):null,size:e.size?BigInt(e.size):void 0,timestamp:e.timestamp?BigInt(e.timestamp):void 0,transactions:t,totalDifficulty:e.totalDifficulty?BigInt(e.totalDifficulty):null}}const w=f("block",b);const v={"0x0":"reverted","0x1":"success"};function E(e){return{...e,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,contractAddress:e.contractAddress?e.contractAddress:null,cumulativeGasUsed:e.cumulativeGasUsed?BigInt(e.cumulativeGasUsed):null,effectiveGasPrice:e.effectiveGasPrice?BigInt(e.effectiveGasPrice):null,gasUsed:e.gasUsed?BigInt(e.gasUsed):null,logs:e.logs?e.logs.map((e=>function(e,{args:t,eventName:n}={}){return{...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,logIndex:e.logIndex?Number(e.logIndex):null,transactionHash:e.transactionHash?e.transactionHash:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,...n?{args:t,eventName:n}:{}}}(e))):null,to:e.to?e.to:null,transactionIndex:e.transactionIndex?p(e.transactionIndex):null,status:e.status?v[e.status]:null,type:e.type?g[e.type]||e.type:null}}const A=f("transactionReceipt",E),k={block:w({format(e){const t=e.transactions?.map((e=>{if("string"==typeof e)return e;const t=m(e);return"0x7e"===t.typeHex&&(t.isSystemTx=e.isSystemTx,t.mint=e.mint?d(e.mint):void 0,t.sourceHash=e.sourceHash,t.type="deposit"),t}));return{transactions:t,stateRoot:e.stateRoot}}}),transaction:y({format(e){const t={};return"0x7e"===e.type&&(t.isSystemTx=e.isSystemTx,t.mint=e.mint?d(e.mint):void 0,t.sourceHash=e.sourceHash,t.type="deposit"),t}}),transactionReceipt:A({format:e=>({l1GasPrice:e.l1GasPrice?d(e.l1GasPrice):null,l1GasUsed:e.l1GasUsed?d(e.l1GasUsed):null,l1Fee:e.l1Fee?d(e.l1Fee):null,l1FeeScalar:e.l1FeeScalar?Number(e.l1FeeScalar):null})})},_=a({id:8453,network:"base",name:"Base",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{alchemy:{http:["https://base-mainnet.g.alchemy.com/v2"],webSocket:["wss://base-mainnet.g.alchemy.com/v2"]},infura:{http:["https://base-mainnet.infura.io/v3"],webSocket:["wss://base-mainnet.infura.io/ws/v3"]},default:{http:["https://mainnet.base.org"]},public:{http:["https://mainnet.base.org"]}},blockExplorers:{blockscout:{name:"Basescout",url:"https://base.blockscout.com"},default:{name:"Basescan",url:"https://basescan.org"},etherscan:{name:"Basescan",url:"https://basescan.org"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:5022}}},{formatters:k}),P=a({id:84532,network:"base-sepolia",name:"Base Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{alchemy:{http:["https://base-sepolia.g.alchemy.com/v2"],webSocket:["wss://base-sepolia.g.alchemy.com/v2"]},default:{http:["https://sepolia.base.org"]},public:{http:["https://sepolia.base.org"]}},blockExplorers:{blockscout:{name:"Blockscout",url:"https://base-sepolia.blockscout.com"},default:{name:"Blockscout",url:"https://base-sepolia.blockscout.com"}},testnet:!0,sourceId:11155111},{formatters:k});class x extends s.Jg{constructor(){super(".app-tab.activity-tab"),this.append((0,s.el)("h1","Activities"),(0,s.el)("main",new i.bV))}}class S extends s.Jg{hashtagList;constructor(){super(".app-tab.chats-tab"),this.append((0,s.el)("h1","Chats"),new i.Kk,(0,s.el)("main",this.hashtagList=new i.Kd))}activeHashtag(e){this.hashtagList.activeHashtag(e)}deactiveHashtag(){this.hashtagList.deactiveHashtag()}}class I extends s.Jg{hashtagLeaderboard;constructor(){super(".app-tab.leaderboard-tab"),this.append((0,s.el)("h1","Leaderboard"),new i.Kk,(0,s.el)("main",this.hashtagLeaderboard=new i.yB))}activeHashtag(e){this.hashtagLeaderboard.activeHashtag(e)}deactiveHashtag(){this.hashtagLeaderboard.deactiveHashtag()}}class C extends s.Jg{mePanel;constructor(){super(".app-tab.settings-tab"),this.append((0,s.el)("h1","Settings"),(0,s.el)("main",this.mePanel=new i._l))}activeHashtag(e){this.mePanel.activeHashtag(e)}deactiveHashtag(){this.mePanel.deactiveHashtag()}}class T extends s.G7{chatsTab;leaderboardTab;activityTab;settingsTab;tabs;roomSection;room;constructor(e,t,n){let r;super(),i.Bd.user?(r=(0,s.el)(".avatar"),s.VM.selectLoadable(r,[i.Bd.user.avatar_thumb,i.Bd.user.stored_avatar_thumb])):r=new s.OL("settings"),s.Wl.append((0,s.el)("section.app",this.chatsTab=new S,this.leaderboardTab=new I,this.activityTab=new x,this.settingsTab=new C,this.tabs=new s.VA(i.dn.dev?"test":void 0,[{id:"chats",icon:new s.OL("forum")},{id:"leaderboard",icon:new s.OL("leaderboard")},{id:"activity",icon:new s.OL("browse_activity")},{id:"settings",icon:r}])),this.roomSection=(0,s.el)("section.room",{"data-empty-message":"Select a topic to start messaging"})),this.tabs.on("select",(e=>{[this.chatsTab,this.leaderboardTab,this.activityTab,this.settingsTab].forEach((e=>e.deactivate())),"chats"===e?this.chatsTab.activate():"leaderboard"===e?this.leaderboardTab.activate():"activity"===e?this.activityTab.activate():"settings"===e&&this.settingsTab.activate()})).init(),e.topic&&(this.room=new i.GM(e.topic,n).appendTo(this.roomSection),[this.chatsTab,this.leaderboardTab,this.settingsTab].forEach((t=>t.activeHashtag(e.topic))),this.checkAvailableTopic(e.topic))}changeParams(e,t,n){e.topic?(this.room?this.room.enter(e.topic,n):this.room=new i.GM(e.topic,n).appendTo(this.roomSection),[this.chatsTab,this.leaderboardTab,this.settingsTab].forEach((t=>t.activeHashtag(e.topic))),this.checkAvailableTopic(e.topic)):(this.room?.delete(),this.room=void 0,[this.chatsTab,this.leaderboardTab,this.settingsTab].forEach((e=>e.deactiveHashtag())))}checkAvailableTopic(e){i.Tb.available(e)?r.iy.closeAllNotifications(`hashtag_${e}`):setTimeout((()=>s.F0.goNoHistory("/")))}}class O extends s.GI{store=new s.yh("welcome");constructor(){super(".welcome-popup",{barrierDismissible:!1}),this.store.set("skip",!0,!0),this.header.append((0,s.el)("h1","Welcome to topic.trade!")),this.main.append((0,s.el)("p","Discover a new way to engage with the hottest topics in the crypto world. At topic.trade, you can discuss, trade, and earn from the most talked-about subjects in the ecosystem.")),this.footer.append(new s.zx({icon:new s.OL("open_in_new"),title:"Learn more",href:i.dn.overviewUrl,target:"_blank"}),new s.zx({tag:".close",title:(0,s.WI)("cancel-button"),click:()=>this.delete()}))}static launch(){!0!==new s.yh("welcome").get("skip")&&new O}}async function N(e){(0,i.Lv)(),i.dn.init({dev:e.dev,serviceName:"topic.trade",overviewUrl:"https://gaiaprotocol.notion.site/topic-trade-Leading-the-New-Trends-in-the-Crypto-World-8c67f745819946369b42ca371caec79d?pvs=4",socialUrls:{github:"https://github.com/gaiaprotocol/topictrade",x:"https://x.com/topictrade",discord:"https://discord.gg/gaia-protocol-931958830873575474"},messageForWalletLinking:"Link Wallet to topic.trade",chains:e.chains,defaultChain:e.defaultChain,contractAddresses:e.contractAddresses,hashtagOptions:{unit:"topic",baseUri:""}}),s.RS.initialize(e.dev,e.supabaseUrl,e.supabaseAnonKey),i.z9.init(e.coinbasePayAppId),!s.yO.isMobileDevice||s.yO.installed||window.ethereum||"/"!==location.pathname?O.launch():new r.KW(i.dn.serviceName,i.dn.overviewUrl).appendTo(s.Wl),i.UK.init(e.walletConnectProjectId,[_,P]),r.iy.init({apiKey:"AIzaSyBZCRpj9smnz-yIpXC4KVi9RFs23qcxH7M",authDomain:"topictrade-8b711.firebaseapp.com",projectId:"topictrade-8b711",storageBucket:"topictrade-8b711.appspot.com",messagingSenderId:"993631591207",appId:"1:993631591207:web:d7bec5f0e54efdfe2ee702",measurementId:"G-9CNQ54G1CY"},"BKhZmi9lpQlQhFXwyMNujFGfjXQEfWKNML8S2gzu6hcFGr1pL-vPOTPU5YwtFHJ4poW-Ax7qm9xeR-7AB76eGl4"),await s.oD.load((0,s.el)("img",{src:"/images/logo-transparent.png"}),[i.dX.init(),i.Bd.init((e=>i.v9.loadSignedUserSubscribedHashtags(e)))]),i.wT.init(),i.v7.init(),i.Tf.init(),s.F0.route(["","{topic}"],T),s.Z5.checkEmailAccess(),i.Bd.signed&&!i.Bd.walletLinked&&new i.Sm,navigator.serviceWorker.addEventListener("message",(e=>{if("notificationclick"===e.data.action){const t=e.data.data?.FCM_MSG?.data;t?.redirectTo&&s.F0.go(t.redirectTo)}})),s.yO.isWindows&&s.Wl.addClass("windows"),s.FY.fixMSWindowsEmojiDisplay()}},5168:(e,t,n)=>{"use strict";n.a(e,(async(e,t)=>{try{var s=n(1155),r=n(9536);await(0,r.Z)({dev:!1,supabaseUrl:"https://aixmhhlmhynxarubznjv.supabase.co",supabaseAnonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFpeG1oaGxtaHlueGFydWJ6bmp2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTEyODE0ODYsImV4cCI6MjAyNjg1NzQ4Nn0.R6P0m5AoeYOTnat0mZHBm2oFzYM9IXW_pDDLwW4mKVs",chains:{base:{id:8453,rpc:"https://mainnet.base.org",blockTime:2,symbol:"ETH",assetBaseDivider:16000n,assetFeePercent:100000000000000000n,bridgeUrl:"https://bridge.base.org",explorerUrl:"https://basescan.org"}},defaultChain:"base",contractAddresses:{base:{[s.RJ.HashtagTrade]:"0x14a4D7e4E3DF2AEF1464D84Bac9d27605eC78725"}},walletConnectProjectId:"7fd590b8ac5e9f5f2e4cd99a07a54783",coinbasePayAppId:"2487ea29-e7cd-4e1c-9d48-80ca328e6d46"}),t()}catch(e){t(e)}}),1)},1042:()=>{},6342:(e,t,n)=>{"use strict";n.d(t,{Jg:()=>Yt,SN:()=>mn,bZ:()=>rn,RS:()=>Mt,Z5:()=>Gn,pp:()=>Xt,gT:()=>Zt,VM:()=>Hn,Wl:()=>Ot,VA:()=>On,yO:()=>Ft,zx:()=>Vt,L$:()=>sn,I4:()=>dn,gz:()=>$t,Em:()=>zn,AE:()=>Tt,h_:()=>en,hW:()=>Jt,nd:()=>St,Ao:()=>xn,_j:()=>tn,td:()=>_n,vE:()=>Pn,TK:()=>qt,OL:()=>Wt,QI:()=>Wn,y2:()=>Un,FY:()=>qn,GI:()=>Kt,NL:()=>gn,Fi:()=>Sn,F0:()=>Rt,oD:()=>Qt,yh:()=>Dt,m7:()=>Vn,JA:()=>It,TZ:()=>Ln,mQ:()=>jn,Ve:()=>Mn,kj:()=>Cn,c7:()=>Dn,KD:()=>Fn,G7:()=>Kn,el:()=>zt,WI:()=>hn,nL:()=>un});class s extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class r extends s{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class i extends s{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class a extends s{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var o;!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(o||(o={}));var c=function(e,t,n,s){return new(n||(n=Promise))((function(r,i){function a(e){try{c(s.next(e))}catch(e){i(e)}}function o(e){try{c(s.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}c((s=s.apply(e,t||[])).next())}))};class l{constructor(e,{headers:t={},customFetch:s,region:r=o.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=(e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Promise.resolve().then(n.bind(n,4354)).then((({default:t})=>t(...e))):fetch),(...e)=>t(...e)})(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var n;return c(this,void 0,void 0,(function*(){try{const{headers:s,method:o,body:c}=t;let l,u={},{region:h}=t;h||(h=this.region),h&&"any"!==h&&(u["x-region"]=h),c&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&("undefined"!=typeof Blob&&c instanceof Blob||c instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",l=c):"string"==typeof c?(u["Content-Type"]="text/plain",l=c):"undefined"!=typeof FormData&&c instanceof FormData?l=c:(u["Content-Type"]="application/json",l=JSON.stringify(c)));const d=yield this.fetch(`${this.url}/${e}`,{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),s),body:l}).catch((e=>{throw new r(e)})),p=d.headers.get("x-relay-error");if(p&&"true"===p)throw new i(d);if(!d.ok)throw new a(d);let f,g=(null!==(n=d.headers.get("Content-Type"))&&void 0!==n?n:"text/plain").split(";")[0].trim();return f="application/json"===g?yield d.json():"application/octet-stream"===g?yield d.blob():"multipart/form-data"===g?yield d.formData():yield d.text(),{data:f,error:null}}catch(e){return{data:null,error:e}}}))}}var u=n(4354);class h extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}class d{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:"undefined"==typeof fetch?this.fetch=u.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let n=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then((async e=>{var t,n,s;let r=null,i=null,a=null,o=e.status,c=e.statusText;if(e.ok){if("HEAD"!==this.method){const t=await e.text();""===t||(i="text/csv"===this.headers.Accept||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?t:JSON.parse(t))}const s=null===(t=this.headers.Prefer)||void 0===t?void 0:t.match(/count=(exact|planned|estimated)/),l=null===(n=e.headers.get("content-range"))||void 0===n?void 0:n.split("/");s&&l&&l.length>1&&(a=parseInt(l[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(i)&&(i.length>1?(r={code:"PGRST116",details:`Results contain ${i.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},i=null,a=null,o=406,c="Not Acceptable"):i=1===i.length?i[0]:null)}else{const t=await e.text();try{r=JSON.parse(t),Array.isArray(r)&&404===e.status&&(i=[],r=null,o=200,c="OK")}catch(n){404===e.status&&""===t?(o=204,c="No Content"):r={message:t}}if(r&&this.isMaybeSingle&&(null===(s=null==r?void 0:r.details)||void 0===s?void 0:s.includes("0 rows"))&&(r=null,o=200,c="OK"),r&&this.shouldThrowOnError)throw new h(r)}return{error:r,data:i,count:a,status:o,statusText:c}}));return this.shouldThrowOnError||(n=n.catch((e=>{var t,n,s;return{error:{message:`${null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null==e?void 0:e.message}`,details:`${null!==(n=null==e?void 0:e.stack)&&void 0!==n?n:""}`,hint:"",code:`${null!==(s=null==e?void 0:e.code)&&void 0!==s?s:""}`},data:null,count:null,status:0,statusText:""}}))),n.then(e,t)}}class p extends d{select(e){let t=!1;const n=(null!=e?e:"*").split("").map((e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e))).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:s,referencedTable:r=s}={}){const i=r?`${r}.order`:"order",a=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${void 0===n?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const s=void 0===n?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:s=n}={}){const r=void 0===s?"offset":`${s}.offset`,i=void 0===s?"limit":`${s}.limit`;return this.url.searchParams.set(r,`${e}`),this.url.searchParams.set(i,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return"GET"===this.method?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:s=!1,wal:r=!1,format:i="text"}={}){var a;const o=[e?"analyze":null,t?"verbose":null,n?"settings":null,s?"buffers":null,r?"wal":null].filter(Boolean).join("|"),c=null!==(a=this.headers.Accept)&&void 0!==a?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${i}; for="${c}"; options=${o};`,this}rollback(){var e;return(null!==(e=this.headers.Prefer)&&void 0!==e?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class f extends p{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map((e=>"string"==typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`)).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:s}={}){let r="";"plain"===s?r="pl":"phrase"===s?r="ph":"websearch"===s&&(r="w");const i=void 0===n?"":`(${n})`;return this.url.searchParams.append(e,`${r}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach((([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)})),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}}class g{constructor(e,{headers:t={},schema:n,fetch:s}){this.url=e,this.headers=t,this.schema=n,this.fetch=s}select(e,{head:t=!1,count:n}={}){const s=t?"HEAD":"GET";let r=!1;const i=(null!=e?e:"*").split("").map((e=>/\s/.test(e)&&!r?"":('"'===e&&(r=!r),e))).join("");return this.url.searchParams.set("select",i),n&&(this.headers.Prefer=`count=${n}`),new f({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:n=!0}={}){const s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),t&&s.push(`count=${t}`),n||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){const t=e.reduce(((e,t)=>e.concat(Object.keys(t))),[]);if(t.length>0){const e=[...new Set(t)].map((e=>`"${e}"`));this.url.searchParams.set("columns",e.join(","))}}return new f({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:s,defaultToNull:r=!0}={}){const i=[`resolution=${n?"ignore":"merge"}-duplicates`];if(void 0!==t&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&i.push(this.headers.Prefer),s&&i.push(`count=${s}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const t=e.reduce(((e,t)=>e.concat(Object.keys(t))),[]);if(t.length>0){const e=[...new Set(t)].map((e=>`"${e}"`));this.url.searchParams.set("columns",e.join(","))}}return new f({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push(`count=${t}`),this.headers.Prefer=n.join(","),new f({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t=[];return e&&t.push(`count=${e}`),this.headers.Prefer&&t.unshift(this.headers.Prefer),this.headers.Prefer=t.join(","),new f({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const m={"X-Client-Info":"postgrest-js/1.11.0"};class y{constructor(e,{headers:t={},schema:n,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},m),t),this.schemaName=n,this.fetch=s}from(e){const t=new URL(`${this.url}/${e}`);return new g(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new y(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:n=!1,count:s}={}){let r;const i=new URL(`${this.url}/rpc/${e}`);let a;n?(r="HEAD",Object.entries(t).forEach((([e,t])=>{i.searchParams.append(e,`${t}`)}))):(r="POST",a=t);const o=Object.assign({},this.headers);return s&&(o.Prefer=`count=${s}`),new f({method:r,url:i,headers:o,schema:this.schemaName,body:a,fetch:this.fetch,allowEmpty:!1})}}const b={"X-Client-Info":"realtime-js/2.9.3"};var w,v,E,A,k,_,P;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(w||(w={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(v||(v={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(E||(E={})),function(e){e.websocket="websocket"}(A||(A={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(k||(k={}));class x{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout((()=>{this.tries=this.tries+1,this.callback()}),this.timerCalc(this.tries+1))}}class S{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"==typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const s=t.getUint8(1),r=t.getUint8(2);let i=this.HEADER_LENGTH+2;const a=n.decode(e.slice(i,i+s));i+=s;const o=n.decode(e.slice(i,i+r));i+=r;return{ref:null,topic:a,event:o,payload:JSON.parse(n.decode(e.slice(i,e.byteLength)))}}}class I{constructor(e,t,n={},s=1e4){this.channel=e,this.event=t,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t(null===(n=this.receivedResp)||void 0===n?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},(e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)})),this.timeoutTimer=setTimeout((()=>{this.trigger("timeout",{})}),this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter((t=>t.status===e)).forEach((e=>e.callback(t)))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(_||(_={}));class C{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},(e=>{const{onJoin:t,onLeave:n,onSync:s}=this.caller;this.joinRef=this.channel._joinRef(),this.state=C.syncState(this.state,e,t,n),this.pendingDiffs.forEach((e=>{this.state=C.syncDiff(this.state,e,t,n)})),this.pendingDiffs=[],s()})),this.channel._on(n.diff,{},(e=>{const{onJoin:t,onLeave:n,onSync:s}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=C.syncDiff(this.state,e,t,n),s())})),this.onJoin(((e,t,n)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:n})})),this.onLeave(((e,t,n)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:n})})),this.onSync((()=>{this.channel._trigger("presence",{event:"sync"})}))}static syncState(e,t,n,s){const r=this.cloneDeep(e),i=this.transformState(t),a={},o={};return this.map(r,((e,t)=>{i[e]||(o[e]=t)})),this.map(i,((e,t)=>{const n=r[e];if(n){const s=t.map((e=>e.presence_ref)),r=n.map((e=>e.presence_ref)),i=t.filter((e=>r.indexOf(e.presence_ref)<0)),c=n.filter((e=>s.indexOf(e.presence_ref)<0));i.length>0&&(a[e]=i),c.length>0&&(o[e]=c)}else a[e]=t})),this.syncDiff(r,{joins:a,leaves:o},n,s)}static syncDiff(e,t,n,s){const{joins:r,leaves:i}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(r,((t,s)=>{var r;const i=null!==(r=e[t])&&void 0!==r?r:[];if(e[t]=this.cloneDeep(s),i.length>0){const n=e[t].map((e=>e.presence_ref)),s=i.filter((e=>n.indexOf(e.presence_ref)<0));e[t].unshift(...s)}n(t,i,s)})),this.map(i,((t,n)=>{let r=e[t];if(!r)return;const i=n.map((e=>e.presence_ref));r=r.filter((e=>i.indexOf(e.presence_ref)<0)),e[t]=r,s(t,r,n),0===r.length&&delete e[t]})),e}static map(e,t){return Object.getOwnPropertyNames(e).map((n=>t(n,e[n])))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce(((t,n)=>{const s=e[n];return t[n]="metas"in s?s.metas.map((e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e))):s,t}),{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(P||(P={}));const T=(e,t,n={})=>{var s;const r=null!==(s=n.skipTypes)&&void 0!==s?s:[];return Object.keys(t).reduce(((n,s)=>(n[s]=O(s,e,t,r),n)),{})},O=(e,t,n,s)=>{const r=t.find((t=>t.name===e)),i=null==r?void 0:r.type,a=n[e];return i&&!s.includes(i)?N(i,a):j(a)},N=(e,t)=>{if("_"===e.charAt(0)){const n=e.slice(1,e.length);return M(t,n)}switch(e){case P.bool:return L(t);case P.float4:case P.float8:case P.int2:case P.int4:case P.int8:case P.numeric:case P.oid:return B(t);case P.json:case P.jsonb:return R(t);case P.timestamp:return U(t);case P.abstime:case P.date:case P.daterange:case P.int4range:case P.int8range:case P.money:case P.reltime:case P.text:case P.time:case P.timestamptz:case P.timetz:case P.tsrange:case P.tstzrange:default:return j(t)}},j=e=>e,L=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},B=e=>{if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},R=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},M=(e,t)=>{if("string"!=typeof e)return e;const n=e.length-1,s=e[n];if("{"===e[0]&&"}"===s){let s;const r=e.slice(1,n);try{s=JSON.parse("["+r+"]")}catch(e){s=r?r.split(","):[]}return s.map((e=>N(t,e)))}return e},U=e=>"string"==typeof e?e.replace(" ","T"):e;var D,F,$;!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(D||(D={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes"}(F||(F={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}($||($={}));class G{constructor(e,t={config:{}},n){this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=v.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},t.config),this.timeout=this.socket.timeout,this.joinPush=new I(this,E.join,this.params,this.timeout),this.rejoinTimer=new x((()=>this._rejoinUntilConnected()),this.socket.reconnectAfterMs),this.joinPush.receive("ok",(()=>{this.state=v.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach((e=>e.send())),this.pushBuffer=[]})),this._onClose((()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=v.closed,this.socket._remove(this)})),this._onError((e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=v.errored,this.rejoinTimer.scheduleTimeout())})),this.joinPush.receive("timeout",(()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=v.errored,this.rejoinTimer.scheduleTimeout())})),this._on(E.reply,{},((e,t)=>{this._trigger(this._replyEventName(t),e)})),this.presence=new C(this),this.broadcastEndpointURL=this._broadcastEndpointURL()}subscribe(e,t=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:r,presence:i}}=this.params;this._onError((t=>e&&e("CHANNEL_ERROR",t))),this._onClose((()=>e&&e("CLOSED")));const a={},o={broadcast:r,presence:i,postgres_changes:null!==(s=null===(n=this.bindings.postgres_changes)||void 0===n?void 0:n.map((e=>e.filter)))&&void 0!==s?s:[]};this.socket.accessToken&&(a.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:o},a)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",(({postgres_changes:t})=>{var n;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),void 0!==t){const s=this.bindings.postgres_changes,r=null!==(n=null==s?void 0:s.length)&&void 0!==n?n:0,i=[];for(let n=0;n<r;n++){const r=s[n],{filter:{event:a,schema:o,table:c,filter:l}}=r,u=t&&t[n];if(!u||u.event!==a||u.schema!==o||u.table!==c||u.filter!==l)return this.unsubscribe(),void(e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes")));i.push(Object.assign(Object.assign({},r),{id:u.id}))}return this.bindings.postgres_changes=i,void(e&&e("SUBSCRIBED"))}e&&e("SUBSCRIBED")})).receive("error",(t=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(t).join(", ")||"error")))})).receive("timeout",(()=>{e&&e("TIMED_OUT")}))}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this._on(e,t,n)}async send(e,t={}){var n,s;if(this._canPush()||"broadcast"!==e.type)return new Promise((n=>{var s,r,i;const a=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(i=null===(r=null===(s=this.params)||void 0===s?void 0:s.config)||void 0===r?void 0:r.broadcast)||void 0===i?void 0:i.ack)||n("ok"),a.receive("ok",(()=>n("ok"))),a.receive("timeout",(()=>n("timed out")))}));{const{event:r,payload:i}=e,a={method:"POST",headers:{apikey:null!==(n=this.socket.apiKey)&&void 0!==n?n:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:i}]})};try{return(await this._fetchWithTimeout(this.broadcastEndpointURL,a,null!==(s=t.timeout)&&void 0!==s?s:this.timeout)).ok?"ok":"error"}catch(e){return"AbortError"===e.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=v.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(E.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise((n=>{const s=new I(this,E.leave,{},e);s.receive("ok",(()=>{t(),n("ok")})).receive("timeout",(()=>{t(),n("timed out")})).receive("error",(()=>{n("error")})),s.send(),this._canPush()||s.trigger("ok",{})}))}_broadcastEndpointURL(){let e=this.socket.endPoint;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"}async _fetchWithTimeout(e,t,n){const s=new AbortController,r=setTimeout((()=>s.abort()),n),i=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(r),i}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new I(this,e,t,n);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var s,r;const i=e.toLocaleLowerCase(),{close:a,error:o,leave:c,join:l}=E;if(n&&[a,o,c,l].indexOf(i)>=0&&n!==this._joinRef())return;let u=this._onMessage(i,t,n);if(t&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?null===(s=this.bindings.postgres_changes)||void 0===s||s.filter((e=>{var t,n,s;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(s=null===(n=e.filter)||void 0===n?void 0:n.event)||void 0===s?void 0:s.toLocaleLowerCase())===i})).map((e=>e.callback(u,n))):null===(r=this.bindings[i])||void 0===r||r.filter((e=>{var n,s,r,a,o,c;if(["broadcast","presence","postgres_changes"].includes(i)){if("id"in e){const i=e.id,a=null===(n=e.filter)||void 0===n?void 0:n.event;return i&&(null===(s=t.ids)||void 0===s?void 0:s.includes(i))&&("*"===a||(null==a?void 0:a.toLocaleLowerCase())===(null===(r=t.data)||void 0===r?void 0:r.type.toLocaleLowerCase()))}{const n=null===(o=null===(a=null==e?void 0:e.filter)||void 0===a?void 0:a.event)||void 0===o?void 0:o.toLocaleLowerCase();return"*"===n||n===(null===(c=null==t?void 0:t.event)||void 0===c?void 0:c.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===i})).map((e=>{if("object"==typeof u&&"ids"in u){const e=u.data,{schema:t,table:n,commit_timestamp:s,type:r,errors:i}=e,a={schema:t,table:n,commit_timestamp:s,eventType:r,new:{},old:{},errors:i};u=Object.assign(Object.assign({},a),this._getPayloadRecords(e))}e.callback(u,n)}))}_isClosed(){return this.state===v.closed}_isJoined(){return this.state===v.joined}_isJoining(){return this.state===v.joining}_isLeaving(){return this.state===v.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const s=e.toLocaleLowerCase(),r={type:s,filter:t,callback:n};return this.bindings[s]?this.bindings[s].push(r):this.bindings[s]=[r],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter((e=>{var s;return!((null===(s=e.type)||void 0===s?void 0:s.toLocaleLowerCase())===n&&G.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(E.close,{},e)}_onError(e){this._on(E.error,{},(t=>e(t)))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=v.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=T(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=T(e.columns,e.old_record)),t}}const H=()=>{},z="undefined"!=typeof WebSocket;class W{constructor(e,t){var s;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.headers=b,this.params={},this.timeout=1e4,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=H,this.conn=null,this.sendBuffer=[],this.serializer=new S,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Promise.resolve().then(n.bind(n,4354)).then((({default:t})=>t(...e))):fetch),(...e)=>t(...e)},this.endPoint=`${e}/${A.websocket}`,(null==t?void 0:t.transport)?this.transport=t.transport:this.transport=null,(null==t?void 0:t.params)&&(this.params=t.params),(null==t?void 0:t.headers)&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),(null==t?void 0:t.timeout)&&(this.timeout=t.timeout),(null==t?void 0:t.logger)&&(this.logger=t.logger),(null==t?void 0:t.heartbeatIntervalMs)&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const r=null===(s=null==t?void 0:t.params)||void 0===s?void 0:s.apikey;r&&(this.accessToken=r,this.apiKey=r),this.reconnectAfterMs=(null==t?void 0:t.reconnectAfterMs)?t.reconnectAfterMs:e=>[1e3,2e3,5e3,1e4][e-1]||1e4,this.encode=(null==t?void 0:t.encode)?t.encode:(e,t)=>t(JSON.stringify(e)),this.decode=(null==t?void 0:t.decode)?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new x((async()=>{this.disconnect(),this.connect()}),this.reconnectAfterMs),this.fetch=this._resolveFetch(null==t?void 0:t.fetch)}connect(){if(!this.conn)if(this.transport)this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});else{if(z)return this.conn=new WebSocket(this._endPointURL()),void this.setupConnection();this.conn=new q(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),n.e(228).then(n.t.bind(n,5228,23)).then((({default:e})=>{this.conn=new e(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()}))}}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,null!=t?t:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map((e=>e.unsubscribe())));return this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case w.connecting:return k.Connecting;case w.open:return k.Open;case w.closing:return k.Closing;default:return k.Closed}}isConnected(){return this.connectionState()===k.Open}channel(e,t={config:{}}){const n=new G(`realtime:${e}`,t,this);return this.channels.push(n),n}push(e){const{topic:t,event:n,payload:s,ref:r}=e,i=()=>{this.encode(e,(e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)}))};this.log("push",`${t} ${n} (${r})`,s),this.isConnected()?i():this.sendBuffer.push(i)}setAuth(e){this.accessToken=e,this.channels.forEach((t=>{e&&t.updateJoinPayload({access_token:e}),t.joinedOnce&&t._isJoined()&&t._push(E.access_token,{access_token:e})}))}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find((t=>t.topic===e&&(t._isJoined()||t._isJoining())));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter((t=>t._joinRef()!==e._joinRef()))}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}_onConnMessage(e){this.decode(e.data,(e=>{let{topic:t,event:n,payload:s,ref:r}=e;(r&&r===this.pendingHeartbeatRef||n===(null==s?void 0:s.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${t} ${n} ${r&&"("+r+")"||""}`,s),this.channels.filter((e=>e._isMember(t))).forEach((e=>e._trigger(n,s,r))),this.stateChangeCallbacks.message.forEach((t=>t(e)))}))}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval((()=>this._sendHeartbeat()),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach((e=>e()))}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach((t=>t(e)))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach((t=>t(e)))}_triggerChanError(){this.channels.forEach((e=>e._trigger(E.error)))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const n=e.match(/\?/)?"&":"?";return`${e}${n}${new URLSearchParams(t)}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach((e=>e())),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),void(null===(e=this.conn)||void 0===e||e.close(1e3,"hearbeat timeout"));this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class q{constructor(e,t,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=w.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=n.close}}class V extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function K(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class J extends V{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Q extends V{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Y=function(e,t,n,s){return new(n||(n=Promise))((function(r,i){function a(e){try{c(s.next(e))}catch(e){i(e)}}function o(e){try{c(s.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}c((s=s.apply(e,t||[])).next())}))};const Z=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Promise.resolve().then(n.bind(n,4354)).then((({default:t})=>t(...e))):fetch),(...e)=>t(...e)};var X=function(e,t,n,s){return new(n||(n=Promise))((function(r,i){function a(e){try{c(s.next(e))}catch(e){i(e)}}function o(e){try{c(s.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}c((s=s.apply(e,t||[])).next())}))};const ee=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),te=(e,t)=>X(void 0,void 0,void 0,(function*(){const s=yield Y(void 0,void 0,void 0,(function*(){return"undefined"==typeof Response?(yield Promise.resolve().then(n.bind(n,4354))).Response:Response}));e instanceof s?e.json().then((n=>{t(new J(ee(n),e.status||500))})).catch((e=>{t(new Q(ee(e),e))})):t(new Q(ee(e),e))})),ne=(e,t,n,s)=>{const r={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?r:(r.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),r.body=JSON.stringify(s),Object.assign(Object.assign({},r),n))};function se(e,t,n,s,r,i){return X(this,void 0,void 0,(function*(){return new Promise(((a,o)=>{e(n,ne(t,s,r,i)).then((e=>{if(!e.ok)throw e;return(null==s?void 0:s.noResolveJson)?e:e.json()})).then((e=>a(e))).catch((e=>te(e,o)))}))}))}function re(e,t,n,s){return X(this,void 0,void 0,(function*(){return se(e,"GET",t,n,s)}))}function ie(e,t,n,s,r){return X(this,void 0,void 0,(function*(){return se(e,"POST",t,s,r,n)}))}function ae(e,t,n,s,r){return X(this,void 0,void 0,(function*(){return se(e,"DELETE",t,s,r,n)}))}var oe=function(e,t,n,s){return new(n||(n=Promise))((function(r,i){function a(e){try{c(s.next(e))}catch(e){i(e)}}function o(e){try{c(s.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}c((s=s.apply(e,t||[])).next())}))};const ce={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},le={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class ue{constructor(e,t={},n,s){this.url=e,this.headers=t,this.bucketId=n,this.fetch=Z(s)}uploadOrUpdate(e,t,n,s){return oe(this,void 0,void 0,(function*(){try{let r;const i=Object.assign(Object.assign({},le),s),a=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(i.upsert)});"undefined"!=typeof Blob&&n instanceof Blob?(r=new FormData,r.append("cacheControl",i.cacheControl),r.append("",n)):"undefined"!=typeof FormData&&n instanceof FormData?(r=n,r.append("cacheControl",i.cacheControl)):(r=n,a["cache-control"]=`max-age=${i.cacheControl}`,a["content-type"]=i.contentType);const o=this._removeEmptyFolders(t),c=this._getFinalPath(o),l=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:r,headers:a},(null==i?void 0:i.duplex)?{duplex:i.duplex}:{})),u=yield l.json();if(l.ok)return{data:{path:o,id:u.Id,fullPath:u.Key},error:null};return{data:null,error:u}}catch(e){if(K(e))return{data:null,error:e};throw e}}))}upload(e,t,n){return oe(this,void 0,void 0,(function*(){return this.uploadOrUpdate("POST",e,t,n)}))}uploadToSignedUrl(e,t,n,s){return oe(this,void 0,void 0,(function*(){const r=this._removeEmptyFolders(e),i=this._getFinalPath(r),a=new URL(this.url+`/object/upload/sign/${i}`);a.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:le.upsert},s),i=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!=typeof Blob&&n instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",n)):"undefined"!=typeof FormData&&n instanceof FormData?(e=n,e.append("cacheControl",t.cacheControl)):(e=n,i["cache-control"]=`max-age=${t.cacheControl}`,i["content-type"]=t.contentType);const o=yield this.fetch(a.toString(),{method:"PUT",body:e,headers:i}),c=yield o.json();if(o.ok)return{data:{path:r,fullPath:c.Key},error:null};return{data:null,error:c}}catch(e){if(K(e))return{data:null,error:e};throw e}}))}createSignedUploadUrl(e){return oe(this,void 0,void 0,(function*(){try{let t=this._getFinalPath(e);const n=yield ie(this.fetch,`${this.url}/object/upload/sign/${t}`,{},{headers:this.headers}),s=new URL(this.url+n.url),r=s.searchParams.get("token");if(!r)throw new V("No token returned by API");return{data:{signedUrl:s.toString(),path:e,token:r},error:null}}catch(e){if(K(e))return{data:null,error:e};throw e}}))}update(e,t,n){return oe(this,void 0,void 0,(function*(){return this.uploadOrUpdate("PUT",e,t,n)}))}move(e,t){return oe(this,void 0,void 0,(function*(){try{return{data:yield ie(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(e){if(K(e))return{data:null,error:e};throw e}}))}copy(e,t){return oe(this,void 0,void 0,(function*(){try{return{data:{path:(yield ie(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers})).Key},error:null}}catch(e){if(K(e))return{data:null,error:e};throw e}}))}createSignedUrl(e,t,n){return oe(this,void 0,void 0,(function*(){try{let s=this._getFinalPath(e),r=yield ie(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},(null==n?void 0:n.transform)?{transform:n.transform}:{}),{headers:this.headers});const i=(null==n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return r={signedUrl:encodeURI(`${this.url}${r.signedURL}${i}`)},{data:r,error:null}}catch(e){if(K(e))return{data:null,error:e};throw e}}))}createSignedUrls(e,t,n){return oe(this,void 0,void 0,(function*(){try{const s=yield ie(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),r=(null==n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return{data:s.map((e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${r}`):null}))),error:null}}catch(e){if(K(e))return{data:null,error:e};throw e}}))}download(e,t){return oe(this,void 0,void 0,(function*(){const n=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",s=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),r=s?`?${s}`:"";try{const t=this._getFinalPath(e),s=yield re(this.fetch,`${this.url}/${n}/${t}${r}`,{headers:this.headers,noResolveJson:!0});return{data:yield s.blob(),error:null}}catch(e){if(K(e))return{data:null,error:e};throw e}}))}getPublicUrl(e,t){const n=this._getFinalPath(e),s=[],r=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==r&&s.push(r);const i=void 0!==(null==t?void 0:t.transform)?"render/image":"object",a=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==a&&s.push(a);let o=s.join("&");return""!==o&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${n}${o}`)}}}remove(e){return oe(this,void 0,void 0,(function*(){try{return{data:yield ae(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(e){if(K(e))return{data:null,error:e};throw e}}))}list(e,t,n){return oe(this,void 0,void 0,(function*(){try{const s=Object.assign(Object.assign(Object.assign({},ce),t),{prefix:e||""});return{data:yield ie(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(e){if(K(e))return{data:null,error:e};throw e}}))}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const he={"X-Client-Info":"storage-js/2.5.5"};var de=function(e,t,n,s){return new(n||(n=Promise))((function(r,i){function a(e){try{c(s.next(e))}catch(e){i(e)}}function o(e){try{c(s.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}c((s=s.apply(e,t||[])).next())}))};class pe{constructor(e,t={},n){this.url=e,this.headers=Object.assign(Object.assign({},he),t),this.fetch=Z(n)}listBuckets(){return de(this,void 0,void 0,(function*(){try{return{data:yield re(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(K(e))return{data:null,error:e};throw e}}))}getBucket(e){return de(this,void 0,void 0,(function*(){try{return{data:yield re(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(e){if(K(e))return{data:null,error:e};throw e}}))}createBucket(e,t={public:!1}){return de(this,void 0,void 0,(function*(){try{return{data:yield ie(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(e){if(K(e))return{data:null,error:e};throw e}}))}updateBucket(e,t){return de(this,void 0,void 0,(function*(){try{const n=yield function(e,t,n,s,r){return X(this,void 0,void 0,(function*(){return se(e,"PUT",t,s,r,n)}))}(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers});return{data:n,error:null}}catch(e){if(K(e))return{data:null,error:e};throw e}}))}emptyBucket(e){return de(this,void 0,void 0,(function*(){try{return{data:yield ie(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(K(e))return{data:null,error:e};throw e}}))}deleteBucket(e){return de(this,void 0,void 0,(function*(){try{return{data:yield ae(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(e){if(K(e))return{data:null,error:e};throw e}}))}}class fe extends pe{constructor(e,t={},n){super(e,t,n)}from(e){return new ue(this.url,this.headers,e,this.fetch)}}let ge="";ge="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const me={"X-Client-Info":`supabase-js-${ge}/2.39.3`};var ye=function(e,t,n,s){return new(n||(n=Promise))((function(r,i){function a(e){try{c(s.next(e))}catch(e){i(e)}}function o(e){try{c(s.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}c((s=s.apply(e,t||[])).next())}))};const be=e=>{let t;return t=e||("undefined"==typeof fetch?u.default:fetch),(...e)=>t(...e)},we=(e,t,n)=>{const s=be(n),r="undefined"==typeof Headers?u.Headers:Headers;return(n,i)=>ye(void 0,void 0,void 0,(function*(){var a;const o=null!==(a=yield t())&&void 0!==a?a:e;let c=new r(null==i?void 0:i.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${o}`),s(n,Object.assign(Object.assign({},i),{headers:c}))}))};const ve=()=>"undefined"!=typeof document,Ee={tested:!1,writable:!1},Ae=()=>{if(!ve())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(e){return!1}if(Ee.tested)return Ee.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Ee.tested=!0,Ee.writable=!0}catch(e){Ee.tested=!0,Ee.writable=!1}return Ee.writable};function ke(e){const t={},n=new URL(e);if(n.hash&&"#"===n.hash[0])try{new URLSearchParams(n.hash.substring(1)).forEach(((e,n)=>{t[n]=e}))}catch(e){}return n.searchParams.forEach(((e,n)=>{t[n]=e})),t}const _e=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Promise.resolve().then(n.bind(n,4354)).then((({default:t})=>t(...e))):fetch),(...e)=>t(...e)},Pe=e=>"object"==typeof e&&null!==e&&"status"in e&&"ok"in e&&"json"in e&&"function"==typeof e.json,xe=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Se=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch(e){return n}},Ie=async(e,t)=>{await e.removeItem(t)};class Ce{constructor(){this.promise=new Ce.promiseConstructor(((e,t)=>{this.resolve=e,this.reject=t}))}}function Te(e){const t=e.split(".");if(3!==t.length)throw new Error("JWT is not valid: not a JWT structure");if(!/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const n=t[1];return JSON.parse(function(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n,s,r,i,a,o,c,l="",u=0;for(e=e.replace("-","+").replace("_","/");u<e.length;)i=t.indexOf(e.charAt(u++)),a=t.indexOf(e.charAt(u++)),o=t.indexOf(e.charAt(u++)),c=t.indexOf(e.charAt(u++)),n=i<<2|a>>4,s=(15&a)<<4|o>>2,r=(3&o)<<6|c,l+=String.fromCharCode(n),64!=o&&0!=s&&(l+=String.fromCharCode(s)),64!=c&&0!=r&&(l+=String.fromCharCode(r));return l}(n))}function Oe(e){return("0"+e.toString(16)).substr(-2)}function Ne(){const e=new Uint32Array(56);if("undefined"==typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let n="";for(let s=0;s<56;s++)n+=e.charAt(Math.floor(Math.random()*t));return n}return crypto.getRandomValues(e),Array.from(e,Oe).join("")}async function je(e){if(!("undefined"!=typeof crypto&&void 0!==crypto.subtle&&"undefined"!=typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),n=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(n);return Array.from(s).map((e=>String.fromCharCode(e))).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}Ce.promiseConstructor=Promise;class Le extends Error{constructor(e,t){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t}}function Be(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class Re extends Le{constructor(e,t){super(e,t),this.name="AuthApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Me extends Le{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Ue extends Le{constructor(e,t,n){super(e),this.name=t,this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class De extends Ue{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}}class Fe extends Ue{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500)}}class $e extends Ue{constructor(e){super(e,"AuthInvalidCredentialsError",400)}}class Ge extends Ue{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class He extends Ue{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ze extends Ue{constructor(e,t){super(e,"AuthRetryableFetchError",t)}}function We(e){return Be(e)&&"AuthRetryableFetchError"===e.name}class qe extends Ue{constructor(e,t,n){super(e,"AuthWeakPasswordError",t),this.reasons=n}}var Ve=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(n[s[r]]=e[s[r]])}return n};const Ke=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Je=[502,503,504];async function Qe(e){if(!Pe(e))throw new ze(Ke(e),0);if(Je.includes(e.status))throw new ze(Ke(e),e.status);let t;try{t=await e.json()}catch(e){throw new Me(Ke(e),e)}if("object"==typeof t&&t&&"object"==typeof t.weak_password&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce(((e,t)=>e&&"string"==typeof t),!0))throw new qe(Ke(t),e.status,t.weak_password.reasons);throw new Re(Ke(t),e.status||500)}const Ye=(e,t,n,s)=>{const r={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==t?void 0:t.headers),r.body=JSON.stringify(s),Object.assign(Object.assign({},r),n))};async function Ze(e,t,n,s){var r;const i=Object.assign({},null==s?void 0:s.headers);(null==s?void 0:s.jwt)&&(i.Authorization=`Bearer ${s.jwt}`);const a=null!==(r=null==s?void 0:s.query)&&void 0!==r?r:{};(null==s?void 0:s.redirectTo)&&(a.redirect_to=s.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await async function(e,t,n,s,r,i){const a=Ye(t,s,r,i);let o;try{o=await e(n,a)}catch(e){throw console.error(e),new ze(Ke(e),0)}o.ok||await Qe(o);if(null==s?void 0:s.noResolveJson)return o;try{return await o.json()}catch(e){await Qe(e)}}(e,t,n+o,{headers:i,noResolveJson:null==s?void 0:s.noResolveJson},{},null==s?void 0:s.body);return(null==s?void 0:s.xform)?null==s?void 0:s.xform(c):{data:Object.assign({},c),error:null}}function Xe(e){var t;let n=null;var s;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=(s=e.expires_in,Math.round(Date.now()/1e3)+s)));return{data:{session:n,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function et(e){const t=Xe(e);return!t.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce(((e,t)=>e&&"string"==typeof t),!0)&&(t.data.weak_password=e.weak_password),t}function tt(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function nt(e){return{data:e,error:null}}function st(e){const{action_link:t,email_otp:n,hashed_token:s,redirect_to:r,verification_type:i}=e,a=Ve(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:n,hashed_token:s,redirect_to:r,verification_type:i},user:Object.assign({},a)},error:null}}function rt(e){return e}var it=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(n[s[r]]=e[s[r]])}return n};class at{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=_e(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await Ze(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(e){if(Be(e))return{data:null,error:e};throw e}}async inviteUserByEmail(e,t={}){try{return await Ze(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:tt})}catch(e){if(Be(e))return{data:{user:null},error:e};throw e}}async generateLink(e){try{const{options:t}=e,n=it(e,["options"]),s=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(s.new_email=null==n?void 0:n.newEmail,delete s.newEmail),await Ze(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:st,redirectTo:null==t?void 0:t.redirectTo})}catch(e){if(Be(e))return{data:{properties:null,user:null},error:e};throw e}}async createUser(e){try{return await Ze(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:tt})}catch(e){if(Be(e))return{data:{user:null},error:e};throw e}}async listUsers(e){var t,n,s,r,i,a,o;try{const c={nextPage:null,lastPage:0,total:0},l=await Ze(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(r=null===(s=null==e?void 0:e.perPage)||void 0===s?void 0:s.toString())&&void 0!==r?r:""},xform:rt});if(l.error)throw l.error;const u=await l.json(),h=null!==(i=l.headers.get("x-total-count"))&&void 0!==i?i:0,d=null!==(o=null===(a=l.headers.get("link"))||void 0===a?void 0:a.split(","))&&void 0!==o?o:[];return d.length>0&&(d.forEach((e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);c[`${n}Page`]=t})),c.total=parseInt(h)),{data:Object.assign(Object.assign({},u),c),error:null}}catch(e){if(Be(e))return{data:{users:[]},error:e};throw e}}async getUserById(e){try{return await Ze(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:tt})}catch(e){if(Be(e))return{data:{user:null},error:e};throw e}}async updateUserById(e,t){try{return await Ze(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:tt})}catch(e){if(Be(e))return{data:{user:null},error:e};throw e}}async deleteUser(e,t=!1){try{return await Ze(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:tt})}catch(e){if(Be(e))return{data:{user:null},error:e};throw e}}async _listFactors(e){try{const{data:t,error:n}=await Ze(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:n}}catch(e){if(Be(e))return{data:null,error:e};throw e}}async _deleteFactor(e){try{return{data:await Ze(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(e){if(Be(e))return{data:null,error:e};throw e}}}const ot="0.0.0",ct={"X-Client-Info":`gotrue-js/${ot}`},lt={getItem:e=>Ae()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{Ae()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{Ae()&&globalThis.localStorage.removeItem(e)}};function ut(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const ht=!!(globalThis&&Ae()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class dt extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class pt extends dt{}async function ft(e,t,n){ht&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const s=new globalThis.AbortController;return t>0&&setTimeout((()=>{s.abort(),ht&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)}),t),await globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},(async s=>{if(!s){if(0===t)throw ht&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new pt(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(ht)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(e){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",e)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}ht&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{ht&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}))}!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!=typeof self&&(self.globalThis=self)}}();const gt={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ct,flowType:"implicit",debug:!1},mt=3e4;async function yt(e,t,n){return await n()}class bt{constructor(e){var t,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=bt.nextInstanceID,bt.nextInstanceID+=1,this.instanceID>0&&ve()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},gt),e);if(this.logDebugMessages=!!s.debug,"function"==typeof s.debug&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new at({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=_e(s.fetch),this.lock=s.lock||yt,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,s.lock?this.lock=s.lock:ve()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=ft:this.lock=yt,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:Ae()?this.storage=lt:(this.memoryStorage={},this.storage=ut(this.memoryStorage)):(this.memoryStorage={},this.storage=ut(this.memoryStorage)),ve()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(e){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",e)}null===(n=this.broadcastChannel)||void 0===n||n.addEventListener("message",(async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)}))}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${ot}) ${(new Date).toISOString()}`,...e),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,(async()=>await this._initialize())))()),await this.initializePromise}async _initialize(){try{const e=!!ve()&&await this._isPKCEFlow();if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:t,error:n}=await this._getSessionFromURL(e);if(n)return this._debug("#_initialize()","error detecting session from URL",n),"Identity is already linked"===(null==n?void 0:n.message)||"Identity is already linked to another user"===(null==n?void 0:n.message)||await this._removeSession(),{error:n};const{session:s,redirectType:r}=t;return this._debug("#_initialize()","detected session in URL",s,"redirect type",r),await this._saveSession(s),setTimeout((async()=>{"recovery"===r?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)}),0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return Be(e)?{error:e}:{error:new Me("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signUp(e){var t,n,s;try{let r;if(await this._removeSession(),"email"in e){const{email:n,password:s,options:i}=e;let a=null,o=null;if("pkce"===this.flowType){const e=Ne();await xe(this.storage,`${this.storageKey}-code-verifier`,e),a=await je(e),o=e===a?"plain":"s256"}r=await Ze(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==i?void 0:i.emailRedirectTo,body:{email:n,password:s,data:null!==(t=null==i?void 0:i.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken},code_challenge:a,code_challenge_method:o},xform:Xe})}else{if(!("phone"in e))throw new $e("You must provide either an email or phone number and a password");{const{phone:t,password:i,options:a}=e;r=await Ze(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:i,data:null!==(n=null==a?void 0:a.data)&&void 0!==n?n:{},channel:null!==(s=null==a?void 0:a.channel)&&void 0!==s?s:"sms",gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},xform:Xe})}}const{data:i,error:a}=r;if(a||!i)return{data:{user:null,session:null},error:a};const o=i.session,c=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:c,session:o},error:null}}catch(e){if(Be(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithPassword(e){try{let t;if(await this._removeSession(),"email"in e){const{email:n,password:s,options:r}=e;t=await Ze(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:n,password:s,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken}},xform:et})}else{if(!("phone"in e))throw new $e("You must provide either an email or phone number and a password");{const{phone:n,password:s,options:r}=e;t=await Ze(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:n,password:s,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken}},xform:et})}}const{data:n,error:s}=t;return s?{data:{user:null,session:null},error:s}:n&&n.session&&n.user?(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s}):{data:{user:null,session:null},error:new Fe}}catch(e){if(Be(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithOAuth(e){var t,n,s,r;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(s=e.options)||void 0===s?void 0:s.queryParams,skipBrowserRedirect:null===(r=e.options)||void 0===r?void 0:r.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,(async()=>this._exchangeCodeForSession(e)))}async _exchangeCodeForSession(e){const t=await Se(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(null!=t?t:"").split("/"),{data:r,error:i}=await Ze(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Xe});return await Ie(this.storage,`${this.storageKey}-code-verifier`),i?{data:{user:null,session:null,redirectType:null},error:i}:r&&r.session&&r.user?(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign(Object.assign({},r),{redirectType:null!=s?s:null}),error:i}):{data:{user:null,session:null,redirectType:null},error:new Fe}}async signInWithIdToken(e){await this._removeSession();try{const{options:t,provider:n,token:s,access_token:r,nonce:i}=e,a=await Ze(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:r,nonce:i,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:Xe}),{data:o,error:c}=a;return c?{data:{user:null,session:null},error:c}:o&&o.session&&o.user?(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:c}):{data:{user:null,session:null},error:new Fe}}catch(e){if(Be(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithOtp(e){var t,n,s,r,i;try{if(await this._removeSession(),"email"in e){const{email:s,options:r}=e;let i=null,a=null;if("pkce"===this.flowType){const e=Ne();await xe(this.storage,`${this.storageKey}-code-verifier`,e),i=await je(e),a=e===i?"plain":"s256"}const{error:o}=await Ze(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:s,data:null!==(t=null==r?void 0:r.data)&&void 0!==t?t:{},create_user:null===(n=null==r?void 0:r.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken},code_challenge:i,code_challenge_method:a},redirectTo:null==r?void 0:r.emailRedirectTo});return{data:{user:null,session:null},error:o}}if("phone"in e){const{phone:t,options:n}=e,{data:a,error:o}=await Ze(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(s=null==n?void 0:n.data)&&void 0!==s?s:{},create_user:null===(r=null==n?void 0:n.shouldCreateUser)||void 0===r||r,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken},channel:null!==(i=null==n?void 0:n.channel)&&void 0!==i?i:"sms"}});return{data:{user:null,session:null,messageId:null==a?void 0:a.message_id},error:o}}throw new $e("You must provide either an email or phone number.")}catch(e){if(Be(e))return{data:{user:null,session:null},error:e};throw e}}async verifyOtp(e){var t,n;try{let s,r;"email_change"!==e.type&&"phone_change"!==e.type&&await this._removeSession(),"options"in e&&(s=null===(t=e.options)||void 0===t?void 0:t.redirectTo,r=null===(n=e.options)||void 0===n?void 0:n.captchaToken);const{data:i,error:a}=await Ze(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:r}}),redirectTo:s,xform:Xe});if(a)throw a;if(!i)throw new Error("An error occurred on token verification.");const o=i.session,c=i.user;return(null==o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:c,session:o},error:null}}catch(e){if(Be(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithSSO(e){var t,n,s;try{await this._removeSession();let r=null,i=null;if("pkce"===this.flowType){const e=Ne();await xe(this.storage,`${this.storageKey}-code-verifier`,e),r=await je(e),i=e===r?"plain":"s256"}return await Ze(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==n?n:void 0}),(null===(s=null==e?void 0:e.options)||void 0===s?void 0:s.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:r,code_challenge_method:i}),headers:this.headers,xform:nt})}catch(e){if(Be(e))return{data:null,error:e};throw e}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._reauthenticate()))}async _reauthenticate(){try{return await this._useSession((async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new De;const{error:s}=await Ze(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:s}}))}catch(e){if(Be(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{"email_change"!=e.type&&"phone_change"!=e.type&&await this._removeSession();const t=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:r}=e,{error:i}=await Ze(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken}},redirectTo:null==r?void 0:r.emailRedirectTo});return{data:{user:null,session:null},error:i}}if("phone"in e){const{phone:n,type:s,options:r}=e,{data:i,error:a}=await Ze(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken}}});return{data:{user:null,session:null,messageId:null==i?void 0:i.message_id},error:a}}throw new $e("You must provide either an email or phone number and a type")}catch(e){if(Be(e))return{data:{user:null,session:null},error:e};throw e}}async getSession(){return await this.initializePromise,this._acquireLock(-1,(async()=>this._useSession((async e=>e))))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch(e){}})()),n}return await this.lock(`lock:${this.storageKey}`,e,(async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(e){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await Se(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=!!e.expires_at&&e.expires_at<=Date.now()/1e3;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n)return{data:{session:e},error:null};const{session:s,error:r}=await this._callRefreshToken(e.refresh_token);return r?{data:{session:null},error:r}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,this._acquireLock(-1,(async()=>await this._getUser())))}async _getUser(e){try{return e?await Ze(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:tt}):await this._useSession((async e=>{var t,n;const{data:s,error:r}=e;if(r)throw r;return await Ze(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(n=null===(t=s.session)||void 0===t?void 0:t.access_token)&&void 0!==n?n:void 0,xform:tt})}))}catch(e){if(Be(e))return{data:{user:null},error:e};throw e}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._updateUser(e,t)))}async _updateUser(e,t={}){try{return await this._useSession((async n=>{const{data:s,error:r}=n;if(r)throw r;if(!s.session)throw new De;const i=s.session;let a=null,o=null;if("pkce"===this.flowType&&null!=e.email){const e=Ne();await xe(this.storage,`${this.storageKey}-code-verifier`,e),a=await je(e),o=e===a?"plain":"s256"}const{data:c,error:l}=await Ze(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:o}),jwt:i.access_token,xform:tt});if(l)throw l;return i.user=c.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}}))}catch(e){if(Be(e))return{data:{user:null},error:e};throw e}}_decodeJWT(e){return Te(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._setSession(e)))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new De;const t=Date.now()/1e3;let n=t,s=!0,r=null;const i=Te(e.access_token);if(i.exp&&(n=i.exp,s=n<=t),s){const{session:t,error:n}=await this._callRefreshToken(e.refresh_token);if(n)return{data:{user:null,session:null},error:n};if(!t)return{data:{user:null,session:null},error:null};r=t}else{const{data:s,error:i}=await this._getUser(e.access_token);if(i)throw i;r={access_token:e.access_token,refresh_token:e.refresh_token,user:s.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)}return{data:{user:r.user,session:r},error:null}}catch(e){if(Be(e))return{data:{session:null,user:null},error:e};throw e}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._refreshSession(e)))}async _refreshSession(e){try{return await this._useSession((async t=>{var n;if(!e){const{data:s,error:r}=t;if(r)throw r;e=null!==(n=s.session)&&void 0!==n?n:void 0}if(!(null==e?void 0:e.refresh_token))throw new De;const{session:s,error:r}=await this._callRefreshToken(e.refresh_token);return r?{data:{user:null,session:null},error:r}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}}))}catch(e){if(Be(e))return{data:{user:null,session:null},error:e};throw e}}async _getSessionFromURL(e){try{if(!ve())throw new Ge("No browser detected.");if("implicit"===this.flowType&&!this._isImplicitGrantFlow())throw new Ge("Not a valid implicit grant flow url.");if("pkce"==this.flowType&&!e)throw new He("Not a valid PKCE flow url.");const t=ke(window.location.href);if(e){if(!t.code)throw new He("No code detected.");const{data:e,error:n}=await this._exchangeCodeForSession(t.code);if(n)throw n;const s=new URL(window.location.href);return s.searchParams.delete("code"),window.history.replaceState(window.history.state,"",s.toString()),{data:{session:e.session,redirectType:null},error:null}}if(t.error||t.error_description||t.error_code)throw new Ge(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});const{provider_token:n,provider_refresh_token:s,access_token:r,refresh_token:i,expires_in:a,expires_at:o,token_type:c}=t;if(!(r&&a&&i&&c))throw new Ge("No session defined in URL");const l=Math.round(Date.now()/1e3),u=parseInt(a);let h=l+u;o&&(h=parseInt(o));const d=h-l;1e3*d<=mt&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${d}s, should have been closer to ${u}s`);const p=h-u;l-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,h,l):l-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",p,h,l);const{data:f,error:g}=await this._getUser(r);if(g)throw g;const m={provider_token:n,provider_refresh_token:s,access_token:r,expires_in:u,expires_at:h,refresh_token:i,token_type:c,user:f.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:m,redirectType:t.type},error:null}}catch(e){if(Be(e))return{data:{session:null,redirectType:null},error:e};throw e}}_isImplicitGrantFlow(){const e=ke(window.location.href);return!(!ve()||!e.access_token&&!e.error_description)}async _isPKCEFlow(){const e=ke(window.location.href),t=await Se(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._signOut(e)))}async _signOut({scope:e}={scope:"global"}){return await this._useSession((async t=>{var n;const{data:s,error:r}=t;if(r)return{error:r};const i=null===(n=s.session)||void 0===n?void 0:n.access_token;if(i){const{error:t}=await this.admin.signOut(i,e);if(t&&(!function(e){return Be(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await Ie(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}}))}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>{await this.initializePromise,await this._acquireLock(-1,(async()=>{this._emitInitialSession(t)}))})(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession((async t=>{var n,s;try{const{data:{session:s},error:r}=t;if(r)throw r;await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(t){await(null===(s=this.stateChangeEmitters.get(e))||void 0===s?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",t),console.error(t)}}))}async resetPasswordForEmail(e,t={}){let n=null,s=null;if("pkce"===this.flowType){const e=Ne();await xe(this.storage,`${this.storageKey}-code-verifier`,`${e}/PASSWORD_RECOVERY`),n=await je(e),s=e===n?"plain":"s256"}try{return await Ze(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(e){if(Be(e))return{data:null,error:e};throw e}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(e){if(Be(e))return{data:null,error:e};throw e}}async linkIdentity(e){var t;try{const{data:n,error:s}=await this._useSession((async t=>{var n,s,r,i,a;const{data:o,error:c}=t;if(c)throw c;const l=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(n=e.options)||void 0===n?void 0:n.redirectTo,scopes:null===(s=e.options)||void 0===s?void 0:s.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:!0});return await Ze(this.fetch,"GET",l,{headers:this.headers,jwt:null!==(a=null===(i=o.session)||void 0===i?void 0:i.access_token)&&void 0!==a?a:void 0})}));if(s)throw s;return ve()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null==n?void 0:n.url),{data:{provider:e.provider,url:null==n?void 0:n.url},error:null}}catch(t){if(Be(t))return{data:{provider:e.provider,url:null},error:t};throw t}}async unlinkIdentity(e){try{return await this._useSession((async t=>{var n,s;const{data:r,error:i}=t;if(i)throw i;return await Ze(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(s=null===(n=r.session)||void 0===n?void 0:n.access_token)&&void 0!==s?s:void 0})}))}catch(e){if(Be(e))return{data:null,error:e};throw e}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await(n=async n=>(await async function(e){return await new Promise((t=>{setTimeout((()=>t(null)),e)}))}(200*n),this._debug(t,"refreshing attempt",n),await Ze(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Xe})),s=(e,t,n)=>n&&n.error&&We(n.error)&&Date.now()+200*(e+1)-r<mt,new Promise(((e,t)=>{(async()=>{for(let r=0;r<1/0;r++)try{const t=await n(r);if(!s(r,null,t))return void e(t)}catch(e){if(!s(r,e))return void t(e)}})()})))}catch(e){if(this._debug(t,"error",e),Be(e))return{data:{session:null,user:null},error:e};throw e}finally{this._debug(t,"end")}var n,s}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),ve()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const n=await Se(this.storage,this.storageKey);if(this._debug(t,"session from storage",n),!this._isValidSession(n))return this._debug(t,"session is not valid"),void(null!==n&&await this._removeSession());const s=Math.round(Date.now()/1e3),r=(null!==(e=n.expires_at)&&void 0!==e?e:1/0)<s+10;if(this._debug(t,`session has${r?"":" not"} expired with margin of 10s`),r){if(this.autoRefreshToken&&n.refresh_token){const{error:e}=await this._callRefreshToken(n.refresh_token);e&&(console.error(e),We(e)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(e){return this._debug(t,"error",e),void console.error(e)}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new De;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Ce;const{data:t,error:n}=await this._refreshAccessToken(e);if(n)throw n;if(!t.session)throw new De;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const s={session:t.session,error:null};return this.refreshingDeferred.resolve(s),s}catch(e){if(this._debug(s,"error",e),Be(e)){const n={session:null,error:e};return We(e)||(await this._removeSession(),await this._notifyAllSubscribers("SIGNED_OUT",null)),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(n),n}throw null===(n=this.refreshingDeferred)||void 0===n||n.reject(e),e}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],r=Array.from(this.stateChangeEmitters.values()).map((async n=>{try{await n.callback(e,t)}catch(e){s.push(e)}}));if(await Promise.all(r),s.length>0){for(let e=0;e<s.length;e+=1)console.error(s[e]);throw s[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),await xe(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Ie(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ve()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(e){console.error("removing visibilitychange callback failed",e)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval((()=>this._autoRefreshTokenTick()),mt);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout((async()=>{await this.initializePromise,await this._autoRefreshTokenTick()}),0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,(async()=>{try{const e=Date.now();try{return await this._useSession((async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const s=Math.floor((1e3*n.expires_at-e)/mt);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),s<=3&&await this._callRefreshToken(n.refresh_token)}))}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(e){if(!(e.isAcquireTimeout||e instanceof dt))throw e;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ve()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,(async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")})))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const s=[`provider=${encodeURIComponent(t)}`];if((null==n?void 0:n.redirectTo)&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),(null==n?void 0:n.scopes)&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),"pkce"===this.flowType){const e=Ne();await xe(this.storage,`${this.storageKey}-code-verifier`,e);const t=await je(e),n=e===t?"plain":"s256";this._debug("PKCE","code verifier",`${e.substring(0,5)}...`,"code challenge",t,"method",n);const r=new URLSearchParams({code_challenge:`${encodeURIComponent(t)}`,code_challenge_method:`${encodeURIComponent(n)}`});s.push(r.toString())}if(null==n?void 0:n.queryParams){const e=new URLSearchParams(n.queryParams);s.push(e.toString())}return(null==n?void 0:n.skipBrowserRedirect)&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession((async t=>{var n;const{data:s,error:r}=t;return r?{data:null,error:r}:await Ze(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(n=null==s?void 0:s.session)||void 0===n?void 0:n.access_token})}))}catch(e){if(Be(e))return{data:null,error:e};throw e}}async _enroll(e){try{return await this._useSession((async t=>{var n,s;const{data:r,error:i}=t;if(i)return{data:null,error:i};const{data:a,error:o}=await Ze(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:null===(n=null==r?void 0:r.session)||void 0===n?void 0:n.access_token});return o?{data:null,error:o}:((null===(s=null==a?void 0:a.totp)||void 0===s?void 0:s.qr_code)&&(a.totp.qr_code=`data:image/svg+xml;utf-8,${a.totp.qr_code}`),{data:a,error:null})}))}catch(e){if(Be(e))return{data:null,error:e};throw e}}async _verify(e){return this._acquireLock(-1,(async()=>{try{return await this._useSession((async t=>{var n;const{data:s,error:r}=t;if(r)return{data:null,error:r};const{data:i,error:a}=await Ze(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(n=null==s?void 0:s.session)||void 0===n?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:a})}))}catch(e){if(Be(e))return{data:null,error:e};throw e}}))}async _challenge(e){return this._acquireLock(-1,(async()=>{try{return await this._useSession((async t=>{var n;const{data:s,error:r}=t;return r?{data:null,error:r}:await Ze(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:null===(n=null==s?void 0:s.session)||void 0===n?void 0:n.access_token})}))}catch(e){if(Be(e))return{data:null,error:e};throw e}}))}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(null==e?void 0:e.factors)||[],s=n.filter((e=>"totp"===e.factor_type&&"verified"===e.status));return{data:{all:n,totp:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,(async()=>await this._useSession((async e=>{var t,n;const{data:{session:s},error:r}=e;if(r)return{data:null,error:r};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const i=this._decodeJWT(s.access_token);let a=null;i.aal&&(a=i.aal);let o=a;(null!==(n=null===(t=s.user.factors)||void 0===t?void 0:t.filter((e=>"verified"===e.status)))&&void 0!==n?n:[]).length>0&&(o="aal2");return{data:{currentLevel:a,nextLevel:o,currentAuthenticationMethods:i.amr||[]},error:null}}))))}}bt.nextInstanceID=0;class wt extends bt{constructor(e){super(e)}}var vt=function(e,t,n,s){return new(n||(n=Promise))((function(r,i){function a(e){try{c(s.next(e))}catch(e){i(e)}}function o(e){try{c(s.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}c((s=s.apply(e,t||[])).next())}))};const Et={headers:me},At={schema:"public"},kt={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},_t={};class Pt{constructor(e,t,n){var s,r,i,a,o,c,l,u;if(this.supabaseUrl=e,this.supabaseKey=t,this.from=e=>this.rest.from(e),this.schema=e=>this.rest.schema(e),this.rpc=(e,t={},n)=>this.rest.rpc(e,t,n),!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const h=e.replace(/\/$/,"");this.realtimeUrl=`${h}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${h}/auth/v1`,this.storageUrl=`${h}/storage/v1`,this.functionsUrl=`${h}/functions/v1`;const d=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,p=function(e,t){const{db:n,auth:s,realtime:r,global:i}=e,{db:a,auth:o,realtime:c,global:l}=t;return{db:Object.assign(Object.assign({},a),n),auth:Object.assign(Object.assign({},o),s),realtime:Object.assign(Object.assign({},c),r),global:Object.assign(Object.assign({},l),i)}}(null!=n?n:{},{db:At,realtime:_t,auth:Object.assign(Object.assign({},kt),{storageKey:d}),global:Et});this.storageKey=null!==(r=null===(s=p.auth)||void 0===s?void 0:s.storageKey)&&void 0!==r?r:"",this.headers=null!==(a=null===(i=p.global)||void 0===i?void 0:i.headers)&&void 0!==a?a:{},this.auth=this._initSupabaseAuthClient(null!==(o=p.auth)&&void 0!==o?o:{},this.headers,null===(c=p.global)||void 0===c?void 0:c.fetch),this.fetch=we(t,this._getAccessToken.bind(this),null===(l=p.global)||void 0===l?void 0:l.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},p.realtime)),this.rest=new y(`${h}/rest/v1`,{headers:this.headers,schema:null===(u=p.db)||void 0===u?void 0:u.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new l(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new fe(this.storageUrl,this.headers,this.fetch)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return vt(this,void 0,void 0,(function*(){const{data:n}=yield this.auth.getSession();return null!==(t=null===(e=n.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:null}))}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:s,storageKey:r,flowType:i,debug:a},o,c){const l={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new wt({url:this.authUrl,headers:Object.assign(Object.assign({},l),o),storageKey:r,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:s,flowType:i,debug:a,fetch:c})}_initRealtimeClient(e){return new W(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange(((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)}))}_handleTokenChanged(e,t,n){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===n?"SIGNED_OUT"===e&&(this.realtime.setAuth(this.supabaseKey),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):(this.realtime.setAuth(null!=n?n:null),this.changedAccessToken=n)}}const xt=new class{pull(e,...t){const n=new Set(t);for(let t=e.length-1;t>=0;t--)n.has(e[t])&&e.splice(t,1)}insert(e,t,n){e.splice(t,0,n)}shuffle(e){let t=e.length;for(;0!==t;){const n=Math.floor(Math.random()*t);t-=1,[e[t],e[n]]=[e[n],e[t]]}return e}checkSame(e,t){if(e.length!==t.length)return!1;const n=new Set(t);for(const t of e)if(!n.has(t))return!1;return!0}};class St{static NEXT_ID=0;id=St.NEXT_ID++;allowedEvents=["delete"];eventMap={};delegateEvents=[];deleted=!1;addAllowedEvents(...e){this.allowedEvents.push(...e)}addEventHandler(e,t){if(!this.allowedEvents.includes(e))throw new Error(`EventContainer ${this.constructor.name} does not allow event ${e}`);void 0===this.eventMap[e]&&(this.eventMap[e]=[]),this.eventMap[e].push(t)}removeDelegateEvents(e){for(const[t,n]of Object.entries(e.events))for(const s of n)e.delegate.off(t,s);xt.pull(this.delegateEvents,e)}on(e,t){if(Array.isArray(e))for(const n of e)this.addEventHandler(n,t);else this.addEventHandler(e,t);return this}once(e,t){const n=(...s)=>{this.off(e,n),t(...s)};this.addEventHandler(e,n)}off(e,t){void 0!==this.eventMap?.[e]&&(xt.pull(this.eventMap[e],t),0===this.eventMap[e].length&&delete this.eventMap[e])}async fireEvent(e,...t){if(!this.allowedEvents.includes(e))throw new Error(`EventContainer ${this.constructor.name} does not allow event ${e}`);const n=[],s=[],r=this.eventMap[e];if(void 0!==r)for(const e of[...r])if(r.includes(e)){const r=e(...t);r instanceof Promise?s.push(r):n.push(r)}return n.concat(await Promise.all(s))}onDelegate(e,t,n){let s=this.delegateEvents.find((t=>t.delegate===e));void 0===s&&(s={delegate:e,events:{}},this.delegateEvents.push(s)),"string"==typeof t&&(t=[t]);for(const r of t)void 0===s.events[r]&&(s.events[r]=[]),s.events[r].push(n),e.on(r,n)}offDelegate(e){const t=this.delegateEvents.find((t=>t.delegate===e));void 0!==t&&this.removeDelegateEvents(t)}offAll(){this.eventMap={};for(const e of[...this.delegateEvents])this.removeDelegateEvents(e);this.delegateEvents=[]}delete(){for(const e of[...this.delegateEvents])this.removeDelegateEvents(e);this.delegateEvents=void 0,this.fireEvent("delete"),this.allowedEvents=void 0,this.eventMap=void 0,this.deleted=!0}}const It=new class extends St{client;devMode=!1;supabaseUrl="";supabaseKey="";connect(e,t,n,s){this.devMode=e,this.supabaseUrl=t,this.supabaseKey=n,this.reconnect(s)}reconnect(e){var t,n,s;this.client?.removeAllChannels(),this.client=(t=this.supabaseUrl,n=this.supabaseKey,s={auth:{autoRefreshToken:!0,persistSession:!0},...e?{global:{headers:{Authorization:`Bearer ${e}`}}}:{}},new Pt(t,n,s))}async signIn(e){await this.client.auth.signInWithOAuth({provider:e,options:this.devMode?{redirectTo:"http://localhost:8413"}:void 0})}async signOut(){const{error:e}=await this.client.auth.signOut();if(e)throw e}convertNullToUndefined(e){Object.keys(e).forEach((t=>{null===e[t]?e[t]=void 0:"object"==typeof e[t]&&null!==e[t]&&this.convertNullToUndefined(e[t])}))}safeResult(e){return Array.isArray(e)?e.forEach((e=>this.convertNullToUndefined(e))):this.convertNullToUndefined(e),e}async safeFetch(e,t){const{data:n,error:s}=await t(this.client.from(e));if(s)throw s;return this.safeResult(n)}};class Ct extends St{parent;children=[];append(...e){for(const t of e)void 0!==t&&t.appendTo(this);return this}appendTo(e,t){return this.parent===e&&void 0!==t&&this.parent.children.indexOf(this)<t&&(t-=1),this.removeFromParent(),void 0!==t&&t<e.children.length?e.children.splice(t,0,this):e.children.push(this),this.parent=e,this}removeFromParent(){void 0!==this.parent&&(xt.pull(this.parent.children,this),this.parent=void 0)}empty(){for(;this.children.length>0;)this.children[0].delete();return this}checkChild(e){const t=[...this.children];for(;t.length>0;){const n=t.pop();if(n===e)return!0;t.push(...n.children)}return!1}delete(){super.delete(),this.removeFromParent(),this.empty(),this.children=void 0}}class Tt extends Ct{static NUMBER_STYLE_KEY=["zIndex","opacity","flexGrow","flexShrink","gridGap","order","zoom"];static keyframesCount=0;static createElement(e){let t;const n=e.indexOf("#");if(-1!==n){t=e.substring(n+1),e=e.substring(0,n);const s=t.indexOf(".");-1!==s&&(e+=t.substring(s),t=t.substring(0,s))}let s;const r=e.indexOf(".");-1!==r&&(s=e.substring(r+1).replace(/\./g," "),e=e.substring(0,r)),""===e&&(e="div");const i=document.createElement(e);return void 0!==t&&(i.id=t),void 0!==s&&(i.className=s),i}children=[];domEventMap={};windowEventMap={};domElement;constructor(e,...t){super(),this.addAllowedEvents("visible"),e instanceof HTMLElement?this.domElement=e:this.domElement=Tt.createElement(e),this.append(...t)}style(e){for(const[t,n]of Object.entries(e))void 0===n?this.domElement.style[t]=null:"number"==typeof n&&!0!==Tt.NUMBER_STYLE_KEY.includes(t)?this.domElement.style[t]=`${n}px`:this.domElement.style[t]=n;return this}get rect(){return this.domElement.getBoundingClientRect()}get innerScrollPosition(){let e=0,t=0;if(this.domElement!==document.body){let n=this.domElement.parentNode;for(;n!==document.body&&null!==n;)n instanceof HTMLElement&&(e+=n.scrollLeft,t+=n.scrollTop),n=n.parentNode}return{left:e,top:t}}onDom(e,t){void 0===this.domEventMap[e]&&(this.domEventMap[e]=[]);const n=e=>t(e,this);this.domEventMap[e].push({eventHandler:t,domEventHandler:n}),this.domElement.addEventListener(e,n)}onWindow(e,t){void 0===this.windowEventMap[e]&&(this.windowEventMap[e]=[]);const n=e=>t(e,this);this.windowEventMap[e].push({eventHandler:t,domEventHandler:n}),window.addEventListener(e,n)}offWindow(e,t){const n=this.windowEventMap[e];if(void 0!==n){const s=n.find((e=>e.eventHandler===t));void 0!==s&&(window.removeEventListener(e,s.domEventHandler),xt.pull(n,s),0===n.length&&delete this.windowEventMap[e])}}offDom(e,t){const n=this.domEventMap[e];if(void 0!==n){const s=n.find((e=>e.eventHandler===t));void 0!==s&&(this.domElement.removeEventListener(e,s.domEventHandler),xt.pull(n,s),0===n.length&&delete this.domEventMap[e])}}fireDomEvent(e){this.domElement.dispatchEvent(new Event(e))}appendText(e){if("TEXTAREA"===this.domElement.tagName)this.domElement.append(e);else{const t=new DocumentFragment,n=e.split("\n");for(const[e,s]of n.entries())e>0&&t.append(document.createElement("br")),t.append(s);this.domElement.append(t)}return this}set text(e){this.empty(),e&&this.appendText(e)}append(...e){for(const t of e)if(void 0!==t)if("string"==typeof t)this.appendText(t);else if(t instanceof Tt)t.appendTo(this);else for(const[e,n]of Object.entries(t))"function"==typeof n?this.onDom(e,n):"style"===e&&"object"==typeof n?this.style(n):void 0===n?this.domElement.removeAttribute(e):this.domElement.setAttribute(e,String(n));return this}prepend(...e){for(const t of e)if(void 0!==t)if("string"==typeof t)this.domElement.prepend(t);else if(t instanceof Tt)t.appendTo(this,0);else for(const[e,n]of Object.entries(t))"function"==typeof n?this.onDom(e,n):"style"===e&&"object"==typeof n?this.style(n):void 0===n?this.domElement.removeAttribute(e):this.domElement.setAttribute(e,String(n));return this}checkVisible(){return void 0!==this.parent&&(this.parent.domElement===document.body||this.parent.checkVisible())}fireVisible(){this.fireEvent("visible");for(const e of this.children)e.fireVisible()}appendTo(e,t){void 0!==t&&t<e.children.length?e.domElement.insertBefore(this.domElement,e.children[t].domElement):e.domElement.append(this.domElement);const n=super.appendTo(e,t);return!0===this.checkVisible()&&this.fireVisible(),n}empty(){for(super.empty();this.domElement.firstChild;)this.domElement.removeChild(this.domElement.firstChild);return this}addClass(e){return this.domElement.classList.add(e),this}deleteClass(...e){return this.domElement.classList.remove(...e),this}hasClass(e){return this.domElement.classList.contains(e)}toggleClass(e){this.domElement.classList.toggle(e)}clone(){return new Tt(this.domElement.cloneNode(!0))}delete(){this.domElement.remove(),this.domEventMap=void 0;for(const[e,t]of Object.entries(this.windowEventMap))for(const n of t)window.removeEventListener(e,n.domEventHandler);this.windowEventMap=void 0,super.delete(),this.domElement=void 0}animate({keyframes:e,duration:t=.5,timingFunction:n="ease",delay:s=0,iterationCount:r=1,direction:i="normal",onEnd:a=(()=>{})}){const o="__KEYFRAMES_"+Tt.keyframesCount++;let c="",l={};for(const[t,n]of Object.entries(e)){c+=`${t}{`;for(let[e,t]of Object.entries(n))"number"!=typeof t||["zIndex","opacity"].includes(e)||(t+="px"),c+=`${e.replace(/([A-Z])/g,"-$1").toLowerCase()}:${t};`;c+="}","from"===t||"0%"===t?l={...l,...n}:"to"!==t&&"100%"!==t||(l={...l,...n})}const u=document.createElement("style");u.setAttribute("type","text/css"),u.appendChild(document.createTextNode(`@keyframes ${o}{${c}}`)),document.head.appendChild(u),l={...l,animation:`${o} ${t}s ${n} ${s}s ${r} ${i}`},this.style(l),1===r&&setTimeout((()=>{this.deleted||a(),u.remove()}),1e3*t)}}const Ot=new class extends Tt{constructor(){super(document.body)}};class Nt extends Tt{options;constructor(e,t){super(".exitable"+e),this.options=t,!0===t.barrierDismissible&&this.onDom("click",(e=>{e.target===this.domElement&&this.delete()})),Ot.append(this)}delete(){this.addClass("hide"),this.container.addClass("hide"),setTimeout((()=>{this.deleted||super.delete()}),300)}}const jt=new class{paramRegex=/{(.+)}/;match(e,t,n){for(let s=0;s<e.length;s++){const r=t[s];if(void 0===r)return!1;let i=e[s];if("**"===r)return!0;const a=this.paramRegex.exec(r);if(!r.startsWith("{")){const e=r.indexOf("{");if(i.substring(0,e)!==r.substring(0,e))return!1;i=i.substring(e)}if(i&&a)n&&(n[a[1]]=i);else if("*"!==r&&r!==i)return!1;if(s===e.length-1&&s<t.length-1&&""!==t[t.length-1])return!1}return!0}parse(e,t,n){const s=e.split("/"),r=t.split("/");return this.match(s,r,n)}},Lt=e=>decodeURIComponent(e.endsWith("/")?e.slice(0,-1).substring(1):e.substring(1)),Bt=(e,t,n,s)=>t.some((t=>jt.match(e,t.split("/"),s)))&&!n.some((t=>jt.match(e,t.split("/"))));const Rt=new class extends St{routes=[];redirects=[];openingViews=[];forwarding=!1;constructor(){super(),this.addAllowedEvents("go"),window.addEventListener("popstate",(e=>{if(!0===this.forwarding)this.forwarding=!1;else{const t=Ot.children.findLast((e=>e instanceof Nt));t?(this.forwarding=!0,window.history.forward(),t.delete()):this.check(e.state??void 0)}for(const e of Ot.children)e.hasClass("dropdown-menu")&&e.delete()})),window.addEventListener("keydown",(e=>{if("Escape"===e.key){const e=Ot.children.findLast((e=>e instanceof Nt));e?.delete()}}))}deleteAllExitable(){for(const e of Ot.children)e instanceof Nt&&e.delete()}check(e,t){const n=Lt(location.pathname),s=n.split("/");let r=!1;const i=[];for(const{patterns:n,excludes:r,to:i}of this.redirects){const a=e?{...e}:{};if(Bt(s,n,r,a)){let e=i;for(const[t,n]of Object.entries(a))e=e.replace(new RegExp(`{${t}}`,"g"),n??"");return void this.goNoHistory(`/${e}`,a,t)}}for(const{patterns:a,excludes:o,viewType:c}of this.routes){const l=e?{...e}:{},u=this.openingViews.find((e=>e instanceof c));Bt(s,a,o,l)?void 0===u?(this.openingViews.push(new c(l,n,t)),r=!0):u.changeParams(l,n,t):void 0!==u&&(i.push(u),xt.pull(this.openingViews,u))}for(const e of i.reverse())e.close();!0===r&&this.fireEvent("go")}route(e,t,n=[]){"string"==typeof e&&(e=[e]),this.routes.push({patterns:e,excludes:n,viewType:t});const s=Lt(location.pathname),r=s.split("/"),i={};Bt(r,e,n,i)&&this.openingViews.push(new t(i,s))}redirect(e,t,n=[]){"string"==typeof e&&(e=[e]),this.redirects.push({patterns:e,excludes:n,to:t});const s=Lt(location.pathname).split("/"),r={};if(Bt(s,e,n,r)){let e=t;for(const[t,n]of Object.entries(r))e=e.replace(new RegExp(`{${t}}`,"g"),n??"");this.goNoHistory(`/${e}`)}}go(e,t,n){location.pathname!==e&&(history.pushState(void 0,"",e),this.check(t,n),window.scrollTo(0,0))}changeUri(e){history.replaceState(void 0,"",e)}goNoHistory(e,t,n){location.pathname!==e&&(history.replaceState(void 0,"",e),this.check(t,n),window.scrollTo(0,0))}waitAndGo(e,t,n){setTimeout((()=>this.go(e,t,n)))}refresh(){for(const e of this.openingViews.reverse())e.close();this.openingViews=[];const e=Lt(location.pathname),t=e.split("/");for(const{patterns:n,excludes:s,viewType:r}of this.routes){const i={};Bt(t,n,s,i)&&this.openingViews.push(new r(i,e))}}};const Mt=new class{initialize(e,t,n,s){sessionStorage.__spa_path&&(Rt.goNoHistory(sessionStorage.__spa_path),sessionStorage.removeItem("__spa_path")),It.connect(e,t,n,s),It.client.auth.onAuthStateChange((e=>{"SIGNED_IN"===e&&It.client.functions.invoke("store-user-avatar")}))}};const Ut=new class{parseWithUndefined(e){if(null!==e)return JSON.parse(e,((e,t)=>null===t?void 0:t))}};class Dt{name;constructor(e){this.name=e}selectStorage(e){return e?localStorage:sessionStorage}getKey(e){return`${this.name}/${e}`}set(e,t,n=!1){this.selectStorage(!n).removeItem(this.getKey(e));const s=this.selectStorage(n);try{s.setItem(this.getKey(e),JSON.stringify(t))}catch(e){if(!(e instanceof DOMException)||22!==e.code&&1014!==e.code&&"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name)throw e;s.clear(),location.reload()}}get(e,t){let n=sessionStorage.getItem(this.getKey(e))||localStorage.getItem(this.getKey(e));if(null===n)return t;try{return Ut.parseWithUndefined(n)}catch(s){return console.error(`Failed to parse ${this.getKey(e)}: ${n}`),console.error(s),t}}getAll(){const e={};for(let t=0;t<sessionStorage.length;t++){const n=sessionStorage.key(t);n&&n.startsWith(this.name)&&(e[n.substring(this.name.length+1)]=Ut.parseWithUndefined(sessionStorage.getItem(n)))}for(let t=0;t<localStorage.length;t++){const n=localStorage.key(t);n&&n.startsWith(this.name)&&(e[n.substring(this.name.length+1)]=Ut.parseWithUndefined(localStorage.getItem(n)))}return e}checkPermanently(e){return null!==localStorage.getItem(this.getKey(e))}delete(e){sessionStorage.removeItem(this.getKey(e)),localStorage.removeItem(this.getKey(e))}clear(){for(let e=0;e<sessionStorage.length;e++){const t=sessionStorage.key(e);t&&t.startsWith(this.name)&&sessionStorage.removeItem(t)}for(let e=0;e<localStorage.length;e++){const t=localStorage.key(e);t&&t.startsWith(this.name)&&localStorage.removeItem(t)}}}const Ft=new class{store=new Dt("__BROWSER_INFO_STORE");normalizeLanguage(e){return-1!==e.indexOf("-")&&"zh-TW"!==e&&"zh-HK"!==e&&(e=e.substring(0,e.indexOf("-"))),e}get language(){let e=this.store.get("lang")||navigator.language;return this.normalizeLanguage(e)}set language(e){this.store.set("lang",this.normalizeLanguage(e))}changeLanguage(e){if(!e)throw new Error("Invalid language code.");this.language=e,Rt.refresh()}get isPhoneSize(){return window.innerWidth<=859}get installed(){return navigator.standalone||window.matchMedia("(display-mode: standalone)").matches}get isWindows(){return!!navigator.platform&&navigator.platform.indexOf("Win")>-1}get isAndroid(){return/Android/i.test(navigator.userAgent)}get isIOS(){return/iPhone|iPad|iPod/i.test(navigator.userAgent)}get isMobileDevice(){return this.isAndroid||this.isIOS}get isDarkMode(){return window.matchMedia("(prefers-color-scheme: dark)").matches}},$t={UNIX_EPOCH_START_DATE:"1970-01-01T00:00:00.000Z",NEGATIVE_INFINITY:"-infinity"};class Gt extends Tt{constructor(e,...t){super(e+".component"),this.append(...t)}}class Ht extends Gt{constructor(e){super(".splash-screen"),this.append(e).appendTo(Ot)}}const zt=(e,...t)=>new Tt(Tt.createElement(e),...t);class Wt extends Gt{constructor(e){super("span.icon.material-icon.material-symbols-outlined.notranslate."+e),this.text=e}}class qt extends Gt{constructor(){super(".loading-spinner")}}class Vt extends Gt{options;_icon;titleContainer;constructor(e){super("button"+(void 0!==e.type?"."+e.type:".text")+(e.tag??"")),this.options=e,void 0!==e.icon&&this.append(this._icon=e.icon.clone()),void 0!==e.title&&this.append(this.titleContainer=zt("span.title",e.title)),e.decapitalize&&this.style({textTransform:"none"}),void 0!==e.href&&this.onDom("click",(()=>{"_blank"===e.target?window.open(e.href):window.location.href=e.href})),!0===e.disabled&&this.disable(),void 0!==e.click&&this.onDom("click",(t=>{!0!==this.hasClass("disabled")&&e.click(t,this)}))}set type(e){this.deleteClass("contained","outlined","text"),this.addClass(e)}set title(e){void 0!==this.titleContainer?this.titleContainer.empty().append(e):this.append(this.titleContainer=zt("span.title",e))}set icon(e){this._icon?.delete(),this._icon=e.appendTo(this,0)}disable(){return this.domElement.setAttribute("disabled","disabled"),this.addClass("disabled"),this}enable(){return this.domElement.removeAttribute("disabled"),this.deleteClass("disabled"),this}set loading(e){e?(this.disable(),this.addClass("loading"),this.options.icon?this.icon=new qt:this.title=new qt):(this.enable(),this.deleteClass("loading"),this.options.icon?this.icon=this.options.icon.clone():this.title=this.options.title??"")}}class Kt extends Nt{container;header;main;footer;constructor(e,t){super(".popup-overlay",t),this.container=new Gt(".popup"+e,this.header=zt("header"),this.main=zt("main"),this.footer=zt("footer")).appendTo(this)}}class Jt extends Kt{constructor(e){super(".error-alert",{barrierDismissible:!0}),this.header.append(zt("h1",new Wt("error"),e.title)),this.main.append(zt("p",e.message)),this.footer.append(new Vt({tag:".confirm",title:e.confirmTitle??"OK",click:()=>this.delete()}))}}const Qt=new class{async load(e,t){const n=new Ht(e);try{await Promise.all(t)}catch(e){throw new Jt({title:"Error",message:e.message}),e}n.delete()}};class Yt extends Gt{constructor(e){super(e+".activatable")}activate(){this.addClass("active")}deactivate(){this.deleteClass("active")}}class Zt extends Gt{}class Xt extends Gt{sortItems(e=!0){const t=this.domElement,n=[...this.children].sort(((t,n)=>e?t.sortValue-n.sortValue:n.sortValue-t.sortValue));let s=null;for(const e of n){const n=e.domElement,r=s?s.nextSibling:t.firstChild;n!==r&&t.insertBefore(n,r),s=n}}}class en extends Gt{ul;constructor(e){super(".dropdown-menu"+(e.tag??"")),this.append(this.ul=zt("ul"),e.footer);for(const t of e.items)this.ul.append(zt("li",zt("button",t.icon,t.title,{click:e=>{e.stopPropagation(),t.click(),this.delete()}})));this.style({left:e.left,top:e.top}),this.on("visible",(()=>{const e=this.rect;e.left+e.width>window.innerWidth&&this.style({left:window.innerWidth-e.width}),e.top+e.height>window.innerHeight&&this.style({top:window.innerHeight-e.height})})),window.getSelection()?.empty();for(const e of Ot.children)e instanceof en&&e.delete();Ot.append(this),this.onWindow("click",(e=>{this.domElement.contains(e.target)||this.delete()})),this.onWindow("touchstart",(e=>{this.domElement.contains(e.target)||this.delete()})),this.onWindow("keydown",(e=>{"Escape"===e.key&&this.delete()}))}}n(9406),n(5112);class tn extends Gt{loaded=!1;constructor(e){super(e+".lazy-loading-component"),this.addClass("hidden")}show(){this.deleteClass("hidden"),this.loaded||(this.load(),this.loaded=!0)}hide(){this.addClass("hidden")}}var nn;!function(e){e.Contained="contained",e.Outlined="outlined",e.Circle="circle"}(nn||(nn={}));const sn=nn;class rn extends Kt{constructor(e,t){super(".alert",{barrierDismissible:!0}),this.header.append(zt("h1",e.icon,e.title)),this.main.append(zt("p",e.message)),this.footer.append(new Vt({tag:".confirm",title:e.confirmTitle??"OK",click:async()=>{t&&await t(),this.delete()}}))}}const an={};function on(){let e="",t="";return 2===Ft.language.length?e=Ft.language.toLowerCase():(e=Ft.language.substring(0,2).toLowerCase(),t=Ft.language.substring(3).toLowerCase()),{language:e,locale:t}}function cn(e,t){const n="string"==typeof e?an[e]:e;if(void 0!==n){let e=n[Ft.language];if(void 0===e){const{language:t,locale:s}=on();e=n[t],"object"==typeof e&&(e=void 0!==e[s]?e[s]:e[Object.keys(e)[0]])}if(void 0===e){const s=n[t];e=void 0!==s?s:n[Object.keys(n)[0]]}return void 0!==e&&"object"==typeof e&&(e=e[Object.keys(e)[0]]),void 0===e?"":e}return console.error(`message "${e}" not exists.`),""}function ln(e,t={},n="en"){let s=cn(e,n);for(const[e,n]of Object.entries(t)){const t=new RegExp(`{${e}}`,"g");s=s.replace(t,String(n??""))}return s}function un(e,t={},n="en"){const s=cn(e,n).split(/\{|\}/),r=[];for(let e=0;e<s.length;e++){const n=s[e];e%2==0?r.push(n):r.push(t[n])}return r}ln.setMessages=async e=>{for(const[t,n]of Object.entries(e))if(n)for(const[e,s]of Object.entries(n))void 0===an[e]&&(an[e]={}),an[e][t]=s},ln.setMessages({en:{"cancel-button":"Cancel","confirm-button":"Confirm","error-alert-title":"Error","x-account-email-required-popup-title":"Add Your Email to X Account","x-account-email-required-popup-message-1":"Follow these simple steps to link an email address to your X account.","x-account-email-required-popup-step-1":'Navigate to "More" on the left-hand menu.',"x-account-email-required-popup-step-2":'Select "Settings and privacy."',"x-account-email-required-popup-step-3":'In "Settings," tap "Your account" and then "Account information" to manage your contact information.',"x-account-email-required-popup-step-4":'Choose the "Email" section to update or add your email address.',"x-account-email-required-popup-step-5":'Select "Add email address" and enter your preferred email into the pop-up window.',"x-account-email-required-popup-step-6":"Look out for a verification code sent to the provided email and enter it in the designated field.","x-account-email-required-popup-step-7":'Finalize the process by clicking "Verify," securely linking your email to your X account.',"x-account-email-required-popup-message-2":"Once you've completed these steps, your email should be added and verified on your X account."},ko:{"confirm-button":""},es:{"confirm-button":"Confirmar"},fr:{"confirm-button":"Confirmer"},de:{"confirm-button":"Besttigen"},it:{"confirm-button":"Conferma"},pt:{"confirm-button":"Confirmar"},ru:{"confirm-button":""},zh:{"confirm-button":""},"zh-tw":{"confirm-button":""},"zh-hk":{"confirm-button":""},ja:{"confirm-button":""}}),ln.getMessages=e=>an[e],ln.getLangMessages=(e,t="en")=>{const{language:n,locale:s}=on(),r="string"==typeof e?an[e]:e;if(void 0!==r){let e=r[Ft.language];if(void 0===e&&(e=r[n],void 0!==e&&"object"==typeof e&&(e=void 0!==e[s]?e[s]:e[Object.keys(e)[0]])),void 0===e){const n=r[t];e=void 0!==n?n:r[Object.keys(r)[0]]}return void 0!==e&&"object"==typeof e&&(e=e[Object.keys(e)[0]]),{[n]:void 0===e?"":e}}return console.error(`message "${e}" not exists.`),{[n]:""}};const hn=ln;class dn extends Kt{resolve;reject;constructor(e,t,n){super(".confirm",{barrierDismissible:!0}),this.header.append(zt("h1",e.icon,e.title)),this.main.append(zt("p",e.message)),this.footer.append(new Vt({tag:".cancel",title:e.cancelTitle??hn("cancel-button"),click:()=>{n&&n(),this.delete()}}),new Vt({type:sn.Contained,tag:".confirm",title:e.confirmTitle??hn("confirm-button"),click:async(e,n)=>{n.loading=!0;try{t&&await t(),this.resolve?.(),this.reject=void 0,this.delete()}catch(e){console.error(e),n.loading=!1}}})),this.on("delete",(()=>this.reject?.("Canceled by user")))}async wait(){return new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class pn extends Gt{input;previousValue="";constructor(e){super("label.input"+(!0===e.disabled?".disabled":"")+(!0===e.required?".required":"")+(e.tag??"")),this.addAllowedEvents("change","enter"),this.append(zt("span.label",e.label),this.input=zt(!0===e.multiline?"textarea":"input",{type:e.type,placeholder:e.placeholder,disabled:!0===e.disabled?"disabled":void 0,required:!0===e.required?"required":void 0,readonly:!0===e.readonly?"readonly":void 0,keydown:e=>{"Enter"===e.key&&this.fireEvent("enter")},keyup:()=>{this.value!==this.previousValue&&(this.fireEvent("change"),this.previousValue=this.value)}})),void 0!==e.value&&(this.value=e.value)}get value(){return this.input.domElement.value}set value(e){this.input.domElement.value!==e&&(this.input.domElement.value=e,this.fireEvent("change"))}select(){this.input.domElement.select()}}class fn extends Gt{constructor(e){super((e.tag??"")+".message-box.warning-message-box"),this.append(new Wt("warning"),zt("p",...Array.isArray(e.message)?e.message:[e.message]))}}class gn extends Kt{input;confirmButton;resolve;reject;constructor(e,t,n){super(".prompt",{barrierDismissible:!0}),this.header.append(zt("h1",e.icon,e.title)),this.main.append(zt("p",e.message),this.input=new pn({placeholder:e.placeholder,value:e.value,multiline:e.multiline}),e.info?new fn({message:e.info}):void 0),this.footer.append(new Vt({tag:".cancel",title:e.cancelTitle??hn("cancel-button"),click:()=>{n&&n(),this.delete()}}),this.confirmButton=new Vt({type:sn.Contained,tag:".confirm",title:e.confirmTitle??hn("confirm-button"),click:async(e,n)=>{n.loading=!0;try{await t(this.input.value),this.resolve?.(this.input.value),this.reject=void 0,this.delete()}catch(e){console.error(e),n.loading=!1,this.reject?.()}}})),this.on("delete",(()=>this.reject?.())),this.input.select(),e.multiline||this.input.on("enter",(()=>this.confirmButton.fireDomEvent("click")))}set value(e){this.input.value=e}async wait(){return new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class mn extends Nt{container;titleDisplay;main;constructor(e,t){super(".adaptive-modal-overlay",t),this.container=new Gt(".adaptive-modal"+e,zt("header",new Vt({tag:".back",type:sn.Circle,icon:new Wt("arrow_back"),click:()=>this.delete()}),this.titleDisplay=zt("h1.title"),new Vt({tag:".close",type:sn.Circle,icon:new Wt("close"),click:()=>this.delete()})),this.main=zt("main"),zt("footer",new Vt({tag:".cancel",title:hn("cancel-button"),click:()=>this.delete()}))).appendTo(this)}set title(e){this.titleDisplay.empty().append(...Array.isArray(e)?e:[e])}}const yn={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let bn;const wn=new Uint8Array(16);function vn(){if(!bn&&(bn="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!bn))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return bn(wn)}const En=[];for(let e=0;e<256;++e)En.push((e+256).toString(16).slice(1));function An(e,t=0){return En[e[t+0]]+En[e[t+1]]+En[e[t+2]]+En[e[t+3]]+"-"+En[e[t+4]]+En[e[t+5]]+"-"+En[e[t+6]]+En[e[t+7]]+"-"+En[e[t+8]]+En[e[t+9]]+"-"+En[e[t+10]]+En[e[t+11]]+En[e[t+12]]+En[e[t+13]]+En[e[t+14]]+En[e[t+15]]}const kn=function(e,t,n){if(yn.randomUUID&&!t&&!e)return yn.randomUUID();const s=(e=e||{}).random||(e.rng||vn)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=s[e];return t}return An(s)};class _n extends Gt{constructor(){super(".list-loading-bar")}}class Pn extends Gt{constructor(){super(".loading-content")}}class xn extends Gt{constructor(e,t){super(e.tag+".file-drop-area"),e.contenteditable&&(this.domElement.contentEditable="true",this.onDom("paste",(e=>{e.preventDefault();const t=e.clipboardData?.getData("text/plain");document.execCommand("insertText",!1,t)}))),this.onDom("dragenter",(e=>{e.preventDefault(),this.highlight()})),this.onDom("dragover",(e=>{e.preventDefault(),e.dataTransfer.dropEffect="copy",this.highlight()})),this.onDom("dragleave",(()=>this.unhighlight())),this.onDom("drop",(e=>{e.preventDefault(),t(Array.from(e.dataTransfer.files)),this.unhighlight()}))}highlight(){this.addClass("highlight")}unhighlight(){this.deleteClass("highlight")}}class Sn extends Gt{static NOT_FOUND_IMAGE="/images/image-not-found.png";uploadingSpinners=[];constructor(e,t){if(super(".rich-display"),this.addAllowedEvents("imageLoaded"),e.files)for(const n of e.files)if(n.fileType.startsWith("image/")){let e=!1;const s=new qt,r=zt(".image-container.loading",s).appendTo(this),i=zt("img.hidden",{src:n.url,alt:n.fileName,load:()=>{this.deleted||(i.deleteClass("hidden"),this.fireEvent("imageLoaded",i.domElement.height),s.deleted||s.delete(),r.deleteClass("loading"))}});let a;i.domElement.onerror=()=>{i.deleteClass("hidden"),i.domElement.onerror=null,i.domElement.src=Sn.NOT_FOUND_IMAGE,e=!0,s.deleted||s.delete(),r.deleteClass("loading")},r.append(zt("a",i,{click:t=>{t.stopPropagation(),e||this.openImage(n)}},t?a=new qt:void 0)),a&&this.uploadingSpinners.push(a)}}openImage(e){window.open(e.url,"_blank")}uploadDone(){for(const e of this.uploadingSpinners)e.delete()}}const In=new class{async isAnimatedGif(e){const t=await fetch(URL.createObjectURL(e)),n=await t.arrayBuffer(),s=new Uint8Array(n);if(71!==s[0]||73!==s[1]||70!==s[2])throw new Error("Not a GIF file");let r=0;for(let e=0;e<s.length;e++)if(33===s[e]&&249===s[e+1]&&4===s[e+2]&&(r++,r>1))return!0;return!1}async compress(e,t,n){if("image/gif"===e.type){if(await this.isAnimatedGif(e))return console.log("Animated GIFs are not compressed."),e}return new Promise(((s,r)=>{const i=new FileReader;i.onload=i=>{const a=new Image;a.onload=()=>{const i=document.createElement("canvas"),o=i.getContext("2d"),c=a.width<=t&&a.height<=n?1:Math.min(t/a.width,n/a.height);i.width=a.width*c,i.height=a.height*c,o?.drawImage(a,0,0,i.width,i.height),i.toBlob((t=>{if(t)if(t.size<e.size){const n=e.name.replace(/(\.[^\.]+)$/,".jpg"),r=new File([t],n,{type:"image/jpeg"});s(r)}else s(e);else r(new Error("Canvas to Blob conversion failed"))}),"image/jpeg")},a.onerror=e=>r(e),a.src=i.target?.result},i.onerror=e=>r(e),i.readAsDataURL(e)}))}};class Cn extends Gt{toUploadFiles=[];uploadPreviewArea;constructor(e){super(e+".upload-form")}uploadInput=zt("input.upload",{type:"file",multiple:!0,change:()=>{const e=this.uploadInput.domElement.files;e&&this.appendFiles(Array.from(e)),this.uploadInput.domElement.value=""}});openFileSelector(){this.uploadInput.domElement.click()}async appendFiles(e){for(const t of e){const e=await In.compress(t,1024,1024);this.toUploadFiles.push(e),this.appendPreview(e)}}appendPreview(e){if(this.uploadPreviewArea){const t=zt("a.preview",zt("button.x",new Wt("close"),{click:n=>{n.preventDefault(),this.toUploadFiles=this.toUploadFiles.filter((t=>t!==e)),t.delete()}}),{href:URL.createObjectURL(e),download:e.name,target:"_blank"}).appendTo(this.uploadPreviewArea);e.type.startsWith("image/")?t.addClass("image").style({backgroundImage:`url(${URL.createObjectURL(e)})`}):t.addClass("file").append(e.name)}}clearUploads(){this.toUploadFiles=[],this.uploadPreviewArea?.empty()}}class Tn extends Gt{_id;constructor(e,t){super("li.tab"),this._id=e,this.append(t)}set active(e){e?this.addClass("active"):this.deleteClass("active")}get active(){return this.hasClass("active")}}class On extends Gt{store;children=[];constructor(e,t){super("ul.bottom-menu-tabs"),this.addAllowedEvents("select"),e&&(this.store=new Dt(`bottom-menu-tabs-${e}`));for(const e of t){const t=new Tn(e.id,e.icon);t.onDom("click",(()=>this.select(e.id))),this.append(t)}}init(e){if(e)this.select(e);else if(this.store?.get("selected"))this.select(this.store.get("selected"));else{const e=this.children[0]?._id;e&&this.select(e)}return this}select(e){let t=!1;for(const n of this.children)n._id===e?(n.active=!0,t=!0):n.active&&(n.active=!1);if(t)this.store?.set("selected",e,!0),this.fireEvent("select",e);else{const e=this.children[0]?._id;e&&this.select(e)}}}class Nn extends Gt{_id;constructor(e,t){super("li.tab"),this._id=e,this.append(...Array.isArray(t)?t:[t])}set active(e){e?this.addClass("active"):this.deleteClass("active")}get active(){return this.hasClass("active")}}class jn extends Gt{tabs;defaultTab;store;ul;prevButton;nextButton;currentTab;constructor(e,t,n){super(".tabs"),this.tabs=t,this.defaultTab=n,this.addAllowedEvents("select"),e&&(this.store=new Dt(`tabs-${e}`)),this.prevButton=new Vt({tag:".prev",type:sn.Circle,icon:new Wt("arrow_back_ios_new"),click:()=>{const e=this.ul.domElement.scrollLeft,t=-this.ul.domElement.clientWidth;e+t<0?this.ul.domElement.scrollBy(0-e,0):this.ul.domElement.scrollBy(t,0)}}).appendTo(this),this.ul=zt("ul").appendTo(this);for(const e of t){const t=new Nn(e.id,e.label);t.onDom("click",(()=>this.select(e.id))),this.ul.append(t)}this.nextButton=new Vt({tag:".next",type:sn.Circle,icon:new Wt("arrow_forward_ios"),click:()=>{const e=this.ul.domElement.scrollLeft,t=this.ul.domElement.clientWidth,n=this.ul.domElement.scrollWidth-this.ul.domElement.clientWidth;e+t>n?this.ul.domElement.scrollBy(n-e,0):this.ul.domElement.scrollBy(t,0)}}).appendTo(this),this.on("visible",(()=>this.checkScroll())),this.ul.onDom("scroll",(()=>this.checkScroll())),this.onWindow("resize",(()=>this.checkScroll()))}checkScroll(){const e=this.ul.domElement;e.scrollWidth>e.clientWidth?(this.addClass("scrollable"),0===e.scrollLeft?this.prevButton.disable():this.prevButton.enable(),e.scrollWidth-e.clientWidth<=e.scrollLeft?this.nextButton.disable():this.nextButton.enable()):this.deleteClass("scrollable")}init(e){if(e)this.select(e);else if(this.store?.get("selected"))this.select(this.store.get("selected"));else if(this.defaultTab)this.select(this.defaultTab);else{const e=this.ul.children[0]?._id;e&&this.select(e)}return this}select(e){let t=!1;for(const n of this.ul.children)n._id===e?(n.active=!0,t=!0):n.active&&(n.active=!1);if(t)this.store?.set("selected",e,!0),this.currentTab=e,this.fireEvent("select",e);else{const e=this.ul.children[0]?._id;e&&this.select(e)}}get data(){return this.tabs.find((e=>e.id===this.currentTab))?.data}}class Ln extends St{tableName;selectQuery;fetchLimit;constructor(e,t,n){super(),this.tableName=e,this.selectQuery=t,this.fetchLimit=n}async safeSelect(e,t=this.fetchLimit,n=this.selectQuery){return await It.safeFetch(this.tableName,(s=>e(-1===t?s.select(n):s.select(n).limit(t))))??[]}async safeSelectSingle(e){const t=await It.safeFetch(this.tableName,(t=>e(t.select(this.selectQuery).limit(1))));return t?.[0]}async safeExists(e){const{data:t,error:n}=await e(It.client.from(this.tableName).select("*").limit(1));if(n)throw n;return t.length>0}async safeInsert(e){const{error:t}=await It.client.from(this.tableName).insert(e);if(t)throw t}async safeInsertAndSelect(e){return await It.safeFetch(this.tableName,(t=>t.insert(e).select(this.selectQuery).single()))}async safeUpdate(e,t){const{error:n}=await e(It.client.from(this.tableName).update(t));if(n)throw n}async safeUpsert(e,t){const{error:n}=await e(It.client.from(this.tableName).upsert(t));if(n)throw n}async safeDelete(e){const{error:t}=await e(It.client.from(this.tableName).delete());if(t)throw t}}var Bn;!function(e){e.Auto="auto",e.Dark="dark",e.Light="light"}(Bn||(Bn={}));const Rn=Bn;const Mn=new class extends St{store=new Dt("__THEME_MANAGER_STORE");constructor(){super(),this.addAllowedEvents("change")}init(){this.theme=this.theme}get theme(){const e=this.store.get("theme");return void 0===e?Rn.Auto:e}set theme(e){this.store.set("theme",e),document.documentElement.setAttribute("data-theme",this.showingTheme),this.fireEvent("change")}get showingTheme(){const e=this.theme;return e===Rn.Auto?!0===Ft.isDarkMode?Rn.Dark:Rn.Light:e}};class Un extends St{channel;onlineUsers={};constructor(){super(),this.addAllowedEvents("onlineUsersChanged")}init(){this.channel=It.client.channel("online_users").on("presence",{event:"sync"},(()=>{const e=this.channel.presenceState();this.onlineUsers={};for(const t of Object.values(e))for(const e of t)this.onlineUsers[e.user_id]||(this.onlineUsers[e.user_id]=e);this.fireEvent("onlineUsersChanged")})).subscribe((async(e,t)=>{"SUBSCRIBED"===e&&await this.track(),t&&console.error(t)}))}checkOnline(e){return void 0!==this.onlineUsers[e]}}const Dn=new class{async _uploadFile(e,t,n){const{data:s,error:r}=await It.client.storage.from(e).upload(`${t}/${kn()}_${n.name.replace(/[^(\w\/!-.*'() &@$=;:+,?)]/g,"")}`,n,{cacheControl:"31536000"});if(r)throw r;return s.path}async createSignedUrl(e,t,n){const{data:s,error:r}=await It.client.storage.from(e).createSignedUrl(t,n);if(r)throw r;return s.signedUrl}async uploadAttachment(e,t,n,s){return await this.createSignedUrl(e,await this._uploadFile(e,t,n),s)}async uploadPublicFile(e,t,n){const s=await this._uploadFile(e,t,n);return It.client.storage.from(e).getPublicUrl(s).data.publicUrl}};class Fn extends Ln{async fetchUser(e){return await this.safeSelectSingle((t=>t.eq("user_id",e)))}async fetchNewUsers(e){return await this.safeSelect((t=>t.order("created_at",{ascending:!1}).gt("created_at",e??$t.UNIX_EPOCH_START_DATE)))}async findUsers(e,t){return await this.safeSelect((n=>n.or(`display_name.ilike.%${e}%`).gt("created_at",t??$t.UNIX_EPOCH_START_DATE)))}async fetchFollowingUsers(e,t){const{data:n,error:s}=await It.client.rpc("get_following_users",{p_user_id:e,last_fetched_followed_at:t,max_count:this.fetchLimit});if(s)throw s;return n&&n.length>0&&(t=n[n.length-1].followed_at),{users:It.safeResult(n??[]),lastFetchedFollowedAt:t}}async fetchFollowers(e,t){const{data:n,error:s}=await It.client.rpc("get_followers",{p_user_id:e,last_fetched_followed_at:t,max_count:this.fetchLimit});if(s)throw s;return n&&n.length>0&&(t=n[n.length-1].followed_at),{users:It.safeResult(n??[]),lastFetchedFollowedAt:t}}}class $n extends Kt{constructor(){super(".x-account-email-required-popup",{barrierDismissible:!0}),this.header.append(zt("h1",hn("x-account-email-required-popup-title")),new Vt({tag:".close",type:sn.Circle,icon:new Wt("close"),click:()=>this.delete()})),this.main.append(zt("p",hn("x-account-email-required-popup-message-1")),zt("ol",zt("li",hn("x-account-email-required-popup-step-1"),zt("img",{src:"/images/x-account-email-required-popup/1.jpg"})),zt("li",hn("x-account-email-required-popup-step-2"),zt("img",{src:"/images/x-account-email-required-popup/2.jpg"})),zt("li",hn("x-account-email-required-popup-step-3"),zt("img",{src:"/images/x-account-email-required-popup/3.jpg"})),zt("li",hn("x-account-email-required-popup-step-4"),zt("img",{src:"/images/x-account-email-required-popup/4.jpg"})),zt("li",hn("x-account-email-required-popup-step-5"),zt("img",{src:"/images/x-account-email-required-popup/5.jpg"})),zt("li",hn("x-account-email-required-popup-step-6"),zt("img",{src:"/images/x-account-email-required-popup/6.jpg"})),zt("li",hn("x-account-email-required-popup-step-7"),zt("img",{src:"/images/x-account-email-required-popup/7.jpg"}))),zt("p",hn("x-account-email-required-popup-message-2"))),this.footer.append(new Vt({tag:".confirm",title:"OK",click:()=>this.delete()}))}}class Gn{static checkEmailAccess(){let e=new URLSearchParams(location.search).get("error_description");e&&("Error getting user email from external provider"===e?new $n:new Jt({title:hn("error-alert-title"),message:e}))}}class Hn{static NOT_FOUND_USER_IMAGE="/images/unknown-user.png";static async selectLoadable(e,t){for(const n of t)if(n)try{if((await fetch(n,{method:"HEAD"})).ok&&!e.deleted){const t=new Image;return t.onload=()=>e.style({backgroundImage:`url('${n}')`}),t.onerror=()=>e.style({backgroundImage:`url('${Hn.NOT_FOUND_USER_IMAGE}')`}),void(t.src=n)}}catch(e){console.error("Error fetching image:",e)}e.deleted||e.style({backgroundImage:`url('${Hn.NOT_FOUND_USER_IMAGE}')`}),console.warn("No valid images found")}}const zn=new class{format(e){if(e===$t.NEGATIVE_INFINITY)return"";const t=e instanceof Date?e:new Date(e);return new Intl.DateTimeFormat(Ft.language,{year:"numeric",month:"short",day:"numeric"}).format(t)}fromNow(e){const t=e instanceof Date?e:new Date(e),n=(new Date).getTime()-t.getTime(),s=Math.round(n/1e3),r=Math.round(s/60),i=Math.round(r/60),a=Math.round(i/24),o=Math.round(a/7),c=Math.round(a/30),l=Math.round(a/365),u=new Intl.RelativeTimeFormat(Ft.language,{numeric:"auto"});return Math.abs(l)>0?u.format(-l,"year"):Math.abs(c)>0?u.format(-c,"month"):Math.abs(o)>0?u.format(-o,"week"):Math.abs(a)>0?u.format(-a,"day"):Math.abs(i)>0?u.format(-i,"hour"):Math.abs(r)>0?u.format(-r,"minute"):u.format(-s,"second")}};const Wn=new class{checkEqual(e,t){if(e===t)return!0;if("object"!=typeof e||"object"!=typeof t||null==e||null==t)return!1;let n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(let r of n)if(!s.includes(r)||!this.checkEqual(e[r],t[r]))return!1;return!0}};const qn=new class{addContextmenuListener(e,t){if(Ft.isIOS){let n;e.style({"-webkit-user-select":"none","user-select":"none"}),e.onDom("touchstart",(e=>{e.clientX||(e.clientX=e.touches[0]?.clientX),e.clientY||(e.clientY=e.touches[0]?.clientY),n=setTimeout((()=>t(e)),500)})),e.onDom("touchend",(()=>clearTimeout(n))),e.onDom("touchmove",(()=>clearTimeout(n)))}else e.onDom("contextmenu",(e=>t(e)))}fixMSWindowsEmojiDisplay(){if(Ft.isWindows){const e=window.getComputedStyle(document.body).getPropertyValue("font-family"),t=document.createElement("style");t.textContent=`\n@import url("https://fonts.googleapis.com/css2?family=Noto+Color+Emoji&family=Noto+Emoji:wght@300..700&display=swap");\nbody {\n    font-family: ${e}, 'Noto Color Emoji';\n}\nemoji-picker {\n  --emoji-font-family: 'Noto Color Emoji';\n}\n`,document.head.appendChild(t)}}};const Vn=new class{shortenEthereumAddress(e){return 42===e.length&&e.startsWith("0x")?`${e.substring(0,6)}...${e.substring(38)}`:e}numberWithCommas(e,t){if(void 0===t||+ +e>Number.MAX_SAFE_INTEGER){const t=e.split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),"0"===t[1]?t[0]:t.join(".")}const n=String(+(+e).toFixed(t)).split(".");return n[0]=n[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),n.join(".")}convertTextToHyperlinks(e){const t=e.match(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi),n=[];let s=0;return t&&t.forEach((t=>{const r=e.indexOf(t,s);r>s&&n.push(e.substring(s,r)),n.push(zt("a",{href:t,target:"_blank"},t)),s=r+t.length})),s<e.length&&n.push(e.substring(s)),n}capitalize(e){return e.charAt(0).toUpperCase()+e.slice(1)}};class Kn{closed=!1;container;changeParams(e,t,n){}close(){this.container?.delete(),this.closed=!0}}},1155:(e,t,n)=>{"use strict";n.d(t,{bV:()=>Ag,dX:()=>ul,z9:()=>C,RJ:()=>Tl,yB:()=>Mg,Kd:()=>$g,GM:()=>Jg,Kk:()=>_g,v9:()=>Ig,Tb:()=>kg,Sm:()=>lm,_l:()=>cm,Tf:()=>Eg,dn:()=>ll,wT:()=>lg,Bd:()=>Gf,v7:()=>Zf,UK:()=>Rf,Lv:()=>tm});var s={};n.r(s),n.d(s,{dQ:()=>Ia,ci:()=>ba,bytesToNumberBE:()=>Ea,ty:()=>Aa,eV:()=>xa,n$:()=>Oa,ql:()=>Pa,Wd:()=>Sa,hexToBytes:()=>va,tL:()=>ka,S5:()=>_a,FF:()=>ja});var r,i,a=Object.defineProperty,o=(e,t)=>a(e,"name",{value:t,configurable:!0}),c=(e,t,n)=>(((e,t,n)=>{t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n),l="https://pay.coinbase.com",u=o((({host:e=l,destinationWallets:t,...n})=>{const s=new URL(e);return s.pathname="/buy/select-asset",void 0!==t&&s.searchParams.append("destinationWallets",JSON.stringify(t)),Object.keys(n).forEach((e=>{const t=n[e];void 0!==t&&s.searchParams.append(e,t.toString())})),s.searchParams.sort(),s.toString()}),"generateOnRampURL"),h="cbpay-embedded-onramp",d=o((({url:e,width:t="100%",height:n="100%",position:s="fixed",top:r="0px"})=>{const i=document.createElement("iframe");return i.style.border="unset",i.style.borderWidth="0",i.style.width=t.toString(),i.style.height=n.toString(),i.style.position=s,i.style.top=r,i.id=h,i.src=e,i}),"createEmbeddedContent");(i=r||(r={})).LaunchEmbedded="launch_embedded",i.AppReady="app_ready",i.AppParams="app_params",i.SigninSuccess="signin_success",i.Success="success",i.Exit="exit",i.Event="event",i.Error="error",i.PixelReady="pixel_ready",i.OnAppParamsNonce="on_app_params_nonce";var p=o(((e,{onMessage:t,shouldUnsubscribe:n=!0,allowedOrigin:s,onValidateOrigin:r=o((()=>Promise.resolve(!0)),"onValidateOrigin")})=>{const i=o((a=>{const{eventName:o,data:c}=g(a.data),l=!s||a.origin===s;o===e&&(async()=>{l&&await r(a.origin)&&(t(c),n&&window.removeEventListener("message",i))})()}),"onMessage");return window.addEventListener("message",i),()=>{window.removeEventListener("message",i)}}),"onBroadcastedPostMessage"),f=o(((e,t,{allowedOrigin:n="*",data:s}={})=>{const r=m(t,s);e.postMessage(r,n)}),"broadcastPostMessage"),g=o((e=>{try{return JSON.parse(e)}catch{return{eventName:e}}}),"parsePostMessage"),m=o(((e,t)=>t?JSON.stringify({eventName:e,data:t}):e),"formatPostMessage"),y="coinbase-sdk-connect",b={width:460,height:730},w={width:430,height:600},v=class{constructor({host:e=l,appId:t,appParams:n,onReady:s,onFallbackOpen:r,debug:i,theme:a}){c(this,"state","loading"),c(this,"nonce",""),c(this,"eventStreamListeners",{}),c(this,"unsubs",[]),c(this,"isLoggedIn",!1),c(this,"openExperience",o((e=>{if(this.log("Attempting to open experience",{state:this.state}),"waiting_for_response"===this.state)return;if("loading"===this.state)return;if("failed"===this.state)return void this.onFallbackOpen?.();if(!this.nonce)throw new Error("Attempted to open CB Pay experience without nonce");const t=this.nonce;this.nonce="",this.setupExperienceListeners(e);const{path:n,experienceLoggedIn:s,experienceLoggedOut:r,embeddedContentStyles:i}=e,a=new URL(`${this.host}${n}`);a.searchParams.append("appId",this.appId),a.searchParams.append("type","secure_standalone"),this.theme&&a.searchParams.append("theme",this.theme);const c=this.isLoggedIn?s:r||s;a.searchParams.append("nonce",t);const l=a.toString();if(this.log("Opening experience",{experience:c,isLoggedIn:this.isLoggedIn}),"embedded"===c){const e=o((()=>{const e=d({url:l,...i});i?.target?document.querySelector(i?.target)?.replaceChildren(e):document.body.appendChild(e)}),"openEmbeddedExperience");this.isLoggedIn?e():this.startDirectSignin(e)}else"popup"===c&&window.chrome?.windows?.create?window.chrome.windows.create({url:l,setSelfAsOpener:!0,type:"popup",focused:!0,width:b.width,height:b.height,left:window.screenLeft-b.width-10,top:window.screenTop},(e=>{this.addEventStreamListener("open",(()=>{e?.id&&chrome.windows.update(e.id,{width:w.width,height:w.height,left:window.screenLeft-w.width-10,top:window.screenTop})}))})):"new_tab"===c&&window.chrome?.tabs?.create?window.chrome.tabs.create({url:l}):A(l,c);const u=o((()=>{this.sendAppParams(),this.removeEventStreamListener("open",u)}),"onOpen");this.addEventStreamListener("open",u)}),"openExperience")),c(this,"endExperience",o((()=>{document.getElementById(h)?.remove()}),"endExperience")),c(this,"destroy",o((()=>{document.getElementById(y)?.remove(),this.unsubs.forEach((e=>e()))}),"destroy")),c(this,"addPixelReadyListener",o((()=>{this.onMessage("pixel_ready",{shouldUnsubscribe:!1,onMessage:e=>{this.log("Received message: pixel_ready"),this.isLoggedIn=!!e?.isLoggedIn,this.removeErrorListener?.(),this.sendAppParams((()=>{this.onReadyCallback?.()}))}})}),"addPixelReadyListener")),c(this,"addErrorListener",o((()=>{this.removeErrorListener=this.onMessage("error",{shouldUnsubscribe:!0,onMessage:e=>{if(this.log("Received message: error"),e){const t="string"==typeof e?e:JSON.stringify(e);this.onReadyCallback?.(new Error(t))}}})}),"addErrorListener")),c(this,"embedPixel",o((()=>{document.getElementById(y)?.remove();const e=E({host:this.host,appId:this.appId});e.onerror=this.onFailedToLoad,this.pixelIframe=e,document.body.appendChild(e)}),"embedPixel")),c(this,"onFailedToLoad",o((()=>{if(this.state="failed",this.onFallbackOpen)this.debug&&console.warn("Failed to load CB Pay pixel. Falling back to opening in new tab."),this.onReadyCallback?.();else{const e=new Error("Failed to load CB Pay pixel");this.debug&&console.error(e),this.onReadyCallback?.(e)}}),"onFailedToLoad")),c(this,"sendAppParams",o((e=>{this.pixelIframe?.contentWindow?(this.log("Sending message: app_params"),this.onMessage("on_app_params_nonce",{onMessage:t=>{this.state="ready",this.nonce=t?.nonce||"",e?.()}}),this.state="waiting_for_response",f(this.pixelIframe.contentWindow,"app_params",{data:this.appParams})):(console.error("Failed to find pixel content window"),this.state="failed",this.onFallbackOpen?.())}),"sendAppParams")),c(this,"setupExperienceListeners",o((({onSuccess:e,onExit:t,onEvent:n,onRequestedUrl:s})=>{this.onMessage("event",{shouldUnsubscribe:!1,onMessage:r=>{const i=r;this.eventStreamListeners[i.eventName]?.forEach((e=>e?.())),"success"===i.eventName&&e?.(),"exit"===i.eventName&&t?.(i.error),"request_open_url"===i.eventName&&s?.(i.url),n?.(r)}})}),"setupExperienceListeners")),c(this,"startDirectSignin",o((e=>{const t=new URLSearchParams;t.set("appId",this.appId),t.set("type","direct");const n=A(`${this.host}/signin?${t.toString()}`,"popup");this.onMessage("signin_success",{onMessage:()=>{n?.close(),e()}})}),"startDirectSignin")),c(this,"addEventStreamListener",o(((e,t)=>{this.eventStreamListeners[e]?this.eventStreamListeners[e]?.push(t):this.eventStreamListeners[e]=[t]}),"addEventStreamListener")),c(this,"removeEventStreamListener",o(((e,t)=>{if(this.eventStreamListeners[e]){const n=this.eventStreamListeners[e]?.filter((e=>e!==t));this.eventStreamListeners[e]=n}}),"removeEventStreamListener")),c(this,"onMessage",o(((...e)=>{const t=p(e[0],{allowedOrigin:this.host,...e[1]});return this.unsubs.push(t),t}),"onMessage")),c(this,"log",o(((...e)=>{this.debug&&console.log("[CBPAY]",...e)}),"log")),this.host=e,this.appId=t,this.appParams=n,this.onReadyCallback=s,this.onFallbackOpen=r,this.debug=i||!1,this.theme=a,this.addPixelReadyListener(),this.addErrorListener(),this.embedPixel(),setTimeout((()=>{"ready"!==this.state&&this.onFailedToLoad()}),5e3)}};function E({host:e,appId:t}){const n=document.createElement("iframe");n.style.border="unset",n.style.borderWidth="0",n.style.width="0",n.style.height="0",n.style.height="0",n.id=y;const s=new URL(`${e}/embed`);return s.searchParams.append("appId",t),n.src=s.toString(),n}function A(e,t){return window.open(e,"Coinbase","popup"===t?`toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, height=${b.height},width=${b.width}`:void 0)}o(v,"CoinbasePixel"),o(E,"createPixel"),o(A,"openWindow");var k={buy:"/buy",checkout:"/checkout"},_=class{constructor(e){if(c(this,"open",o((()=>{const{widget:e,experienceLoggedIn:t,experienceLoggedOut:n,embeddedContentStyles:s,onExit:r,onSuccess:i,onEvent:a,onRequestedUrl:o,closeOnSuccess:c,closeOnExit:l}=this.options;this.pixel.openExperience({path:k[e],experienceLoggedIn:t,experienceLoggedOut:n,embeddedContentStyles:s,onExit:()=>{r?.(),l&&this.pixel.endExperience()},onSuccess:()=>{i?.(),c&&this.pixel.endExperience()},onRequestedUrl:o,onEvent:a})}),"open")),c(this,"destroy",o((()=>{this.pixel.destroy()}),"destroy")),this.options=e,this.pixel=new v({...e,appParams:{widget:e.widget,...e.appParams}}),e.target){const t=document.querySelector(e.target);t&&t.addEventListener("click",this.open)}}};o(_,"CBPayInstance");var P=o((({experienceLoggedIn:e="embedded",widgetParameters:t,...n},s)=>{const r=new _({...n,widget:"buy",experienceLoggedIn:e,appParams:t,onReady:e=>{e?s(e,null):s(null,r)},onFallbackOpen:()=>{const e=u({appId:n.appId,host:n.host,theme:n.theme,...t});window.open(e)}})}),"initOnRamp");o((function(e,t){f(e,"event",{data:t})}),"broadcastEvent");var x=n(6342);const S=["base"];class I extends x.nd{appId;instance;instanceId=0;constructor(){super(),this.addAllowedEvents("instanceCreated","exit","success")}init(e){this.appId=e}set walletAddress(e){if(this.instance?.destroy(),this.appId){const t=++this.instanceId;P({appId:this.appId,widgetParameters:{destinationWallets:[{address:e,blockchains:S}]},onExit:()=>this.fireEvent("exit"),onSuccess:()=>this.fireEvent("success"),onEvent:e=>console.log(e),closeOnExit:!0,closeOnSuccess:!0,experienceLoggedIn:"embedded",experienceLoggedOut:"popup"},((e,n)=>{console.log(e,n),n&&t===this.instanceId?(this.instance=n,this.fireEvent("instanceCreated")):n?.destroy()}))}}checkSupport(e){return this.appId&&S.includes(e)}get instanceReady(){return!!this.instance}open(){this.instance?.open()}}const C=new I,T="6.11.1";function O(e,t,n){const s=t.split("|").map((e=>e.trim()));for(let n=0;n<s.length;n++)switch(t){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof e===t)return}const r=new Error(`invalid value for type ${t}`);throw r.code="INVALID_ARGUMENT",r.argument=`value.${n}`,r.value=e,r}async function N(e){const t=Object.keys(e);return(await Promise.all(t.map((t=>Promise.resolve(e[t]))))).reduce(((e,n,s)=>(e[t[s]]=n,e)),{})}function j(e,t,n){for(let s in t){let r=t[s];const i=n?n[s]:null;i&&O(r,i,s),Object.defineProperty(e,s,{enumerable:!0,value:r,writable:!1})}}function L(e){if(null==e)return"null";if(Array.isArray(e))return"[ "+e.map(L).join(", ")+" ]";if(e instanceof Uint8Array){const t="0123456789abcdef";let n="0x";for(let s=0;s<e.length;s++)n+=t[e[s]>>4],n+=t[15&e[s]];return n}if("object"==typeof e&&"function"==typeof e.toJSON)return L(e.toJSON());switch(typeof e){case"boolean":case"symbol":case"number":return e.toString();case"bigint":return BigInt(e).toString();case"string":return JSON.stringify(e);case"object":{const t=Object.keys(e);return t.sort(),"{ "+t.map((t=>`${L(t)}: ${L(e[t])}`)).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function B(e,t){return e&&e.code===t}function R(e){return B(e,"CALL_EXCEPTION")}function M(e,t,n){let s,r=e;{const s=[];if(n){if("message"in n||"code"in n||"name"in n)throw new Error(`value will overwrite populated values: ${L(n)}`);for(const e in n){if("shortMessage"===e)continue;const t=n[e];s.push(e+"="+L(t))}}s.push(`code=${t}`),s.push(`version=${T}`),s.length&&(e+=" ("+s.join(", ")+")")}switch(t){case"INVALID_ARGUMENT":s=new TypeError(e);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":s=new RangeError(e);break;default:s=new Error(e)}return j(s,{code:t}),n&&Object.assign(s,n),null==s.shortMessage&&j(s,{shortMessage:r}),s}function U(e,t,n,s){if(!e)throw M(t,n,s)}function D(e,t,n,s){U(e,t,"INVALID_ARGUMENT",{argument:n,value:s})}function F(e,t,n){null==n&&(n=""),n&&(n=": "+n),U(e>=t,"missing arguemnt"+n,"MISSING_ARGUMENT",{count:e,expectedCount:t}),U(e<=t,"too many arguments"+n,"UNEXPECTED_ARGUMENT",{count:e,expectedCount:t})}const $=["NFD","NFC","NFKD","NFKC"].reduce(((e,t)=>{try{if("test"!=="test".normalize(t))throw new Error("bad");if("NFD"===t){const e=String.fromCharCode(233).normalize("NFD");if(e!==String.fromCharCode(101,769))throw new Error("broken")}e.push(t)}catch(e){}return e}),[]);function G(e,t,n){if(null==n&&(n=""),e!==t){let e=n,t="new";n&&(e+=".",t+=" "+n),U(!1,`private constructor; use ${e}from* methods`,"UNSUPPORTED_OPERATION",{operation:t})}}function H(e,t,n){if(e instanceof Uint8Array)return n?new Uint8Array(e):e;if("string"==typeof e&&e.match(/^0x([0-9a-f][0-9a-f])*$/i)){const t=new Uint8Array((e.length-2)/2);let n=2;for(let s=0;s<t.length;s++)t[s]=parseInt(e.substring(n,n+2),16),n+=2;return t}D(!1,"invalid BytesLike value",t||"value",e)}function z(e,t){return H(e,t,!1)}function W(e,t){return H(e,t,!0)}function q(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(("number"!=typeof t||e.length===2+2*t)&&(!0!==t||e.length%2==0))}const V="0123456789abcdef";function K(e){const t=z(e);let n="0x";for(let e=0;e<t.length;e++){const s=t[e];n+=V[(240&s)>>4]+V[15&s]}return n}function J(e){return"0x"+e.map((e=>K(e).substring(2))).join("")}function Q(e){return q(e,!0)?(e.length-2)/2:z(e).length}function Y(e,t,n){const s=z(e);return null!=n&&n>s.length&&U(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:s,length:s.length,offset:n}),K(s.slice(null==t?0:t,null==n?s.length:n))}function Z(e,t,n){const s=z(e);U(t>=s.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(s),length:t,offset:t+1});const r=new Uint8Array(t);return r.fill(0),n?r.set(s,t-s.length):r.set(s,0),K(r)}function X(e,t){return Z(e,t,!0)}function ee(e,t){return Z(e,t,!1)}const te=BigInt(0),ne=BigInt(1),se=9007199254740991;function re(e,t){const n=ce(e,"value"),s=BigInt(he(t,"width"));if(U(n>>s===te,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:e}),n>>s-ne){return-((~n&(ne<<s)-ne)+ne)}return n}function ie(e,t){let n=oe(e,"value");const s=BigInt(he(t,"width")),r=ne<<s-ne;if(n<te){n=-n,U(n<=r,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:e});return(~n&(ne<<s)-ne)+ne}return U(n<r,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:e}),n}function ae(e,t){const n=ce(e,"value"),s=BigInt(he(t,"bits"));return n&(ne<<s)-ne}function oe(e,t){switch(typeof e){case"bigint":return e;case"number":return D(Number.isInteger(e),"underflow",t||"value",e),D(e>=-se&&e<=se,"overflow",t||"value",e),BigInt(e);case"string":try{if(""===e)throw new Error("empty string");return"-"===e[0]&&"-"!==e[1]?-BigInt(e.substring(1)):BigInt(e)}catch(n){D(!1,`invalid BigNumberish string: ${n.message}`,t||"value",e)}}D(!1,"invalid BigNumberish value",t||"value",e)}function ce(e,t){const n=oe(e,t);return U(n>=te,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:e}),n}const le="0123456789abcdef";function ue(e){if(e instanceof Uint8Array){let t="0x0";for(const n of e)t+=le[n>>4],t+=le[15&n];return BigInt(t)}return oe(e)}function he(e,t){switch(typeof e){case"bigint":return D(e>=-se&&e<=se,"overflow",t||"value",e),Number(e);case"number":return D(Number.isInteger(e),"underflow",t||"value",e),D(e>=-se&&e<=se,"overflow",t||"value",e),e;case"string":try{if(""===e)throw new Error("empty string");return he(BigInt(e),t)}catch(n){D(!1,`invalid numeric string: ${n.message}`,t||"value",e)}}D(!1,"invalid numeric value",t||"value",e)}function de(e,t){let n=ce(e,"value").toString(16);if(null==t)n.length%2&&(n="0"+n);else{const s=he(t,"width");for(U(2*s>=n.length,`value exceeds width (${s} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:e});n.length<2*s;)n="0"+n}return"0x"+n}function pe(e){const t=ce(e,"value");if(t===te)return new Uint8Array([]);let n=t.toString(16);n.length%2&&(n="0"+n);const s=new Uint8Array(n.length/2);for(let e=0;e<s.length;e++){const t=2*e;s[e]=parseInt(n.substring(t,t+2),16)}return s}function fe(e){let t=K(function(e){return q(e,!0)||e instanceof Uint8Array}(e)?e:pe(e)).substring(2);for(;t.startsWith("0");)t=t.substring(1);return""===t&&(t="0"),"0x"+t}const ge=32,me=new Uint8Array(ge),ye=["then"],be={};function we(e,t){const n=new Error(`deferred error during ABI decoding triggered accessing ${e}`);throw n.error=t,n}class ve extends Array{#e;constructor(...e){const t=e[0];let n=e[1],s=(e[2]||[]).slice(),r=!0;t!==be&&(n=e,s=[],r=!1),super(n.length),n.forEach(((e,t)=>{this[t]=e}));const i=s.reduce(((e,t)=>("string"==typeof t&&e.set(t,(e.get(t)||0)+1),e)),new Map);if(this.#e=Object.freeze(n.map(((e,t)=>{const n=s[t];return null!=n&&1===i.get(n)?n:null}))),r)return Object.freeze(this),new Proxy(this,{get:(e,t,n)=>{if("string"==typeof t){if(t.match(/^[0-9]+$/)){const n=he(t,"%index");if(n<0||n>=this.length)throw new RangeError("out of result range");const s=e[n];return s instanceof Error&&we(`index ${n}`,s),s}if(ye.indexOf(t)>=0)return Reflect.get(e,t,n);const s=e[t];if(s instanceof Function)return function(...t){return s.apply(this===n?e:this,t)};if(!(t in e))return e.getValue.apply(this===n?e:this,[t])}return Reflect.get(e,t,n)}})}toArray(){const e=[];return this.forEach(((t,n)=>{t instanceof Error&&we(`index ${n}`,t),e.push(t)})),e}toObject(){return this.#e.reduce(((e,t,n)=>(U(null!=t,"value at index ${ index } unnamed","UNSUPPORTED_OPERATION",{operation:"toObject()"}),t in e||(e[t]=this.getValue(t)),e)),{})}slice(e,t){null==e&&(e=0),e<0&&(e+=this.length)<0&&(e=0),null==t&&(t=this.length),t<0&&(t+=this.length)<0&&(t=0),t>this.length&&(t=this.length);const n=[],s=[];for(let r=e;r<t;r++)n.push(this[r]),s.push(this.#e[r]);return new ve(be,n,s)}filter(e,t){const n=[],s=[];for(let r=0;r<this.length;r++){const i=this[r];i instanceof Error&&we(`index ${r}`,i),e.call(t,i,r,this)&&(n.push(i),s.push(this.#e[r]))}return new ve(be,n,s)}map(e,t){const n=[];for(let s=0;s<this.length;s++){const r=this[s];r instanceof Error&&we(`index ${s}`,r),n.push(e.call(t,r,s,this))}return n}getValue(e){const t=this.#e.indexOf(e);if(-1===t)return;const n=this[t];return n instanceof Error&&we(`property ${JSON.stringify(e)}`,n.error),n}static fromItems(e,t){return new ve(be,e,t)}}function Ee(e){let t=pe(e);return U(t.length<=ge,"value out-of-bounds","BUFFER_OVERRUN",{buffer:t,length:ge,offset:t.length}),t.length!==ge&&(t=W(J([me.slice(t.length%ge),t]))),t}class Ae{name;type;localName;dynamic;constructor(e,t,n,s){j(this,{name:e,type:t,localName:n,dynamic:s},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,t){D(!1,e,this.localName,t)}}class ke{#t;#n;constructor(){this.#t=[],this.#n=0}get data(){return J(this.#t)}get length(){return this.#n}#s(e){return this.#t.push(e),this.#n+=e.length,e.length}appendWriter(e){return this.#s(W(e.data))}writeBytes(e){let t=W(e);const n=t.length%ge;return n&&(t=W(J([t,me.slice(n)]))),this.#s(t)}writeValue(e){return this.#s(Ee(e))}writeUpdatableValue(){const e=this.#t.length;return this.#t.push(me),this.#n+=ge,t=>{this.#t[e]=Ee(t)}}}class _e{allowLoose;#t;#r;#i;#a;#o;constructor(e,t,n){j(this,{allowLoose:!!t}),this.#t=W(e),this.#i=0,this.#a=null,this.#o=null!=n?n:1024,this.#r=0}get data(){return K(this.#t)}get dataLength(){return this.#t.length}get consumed(){return this.#r}get bytes(){return new Uint8Array(this.#t)}#c(e){if(this.#a)return this.#a.#c(e);this.#i+=e,U(this.#o<1||this.#i<=this.#o*this.dataLength,`compressed ABI data exceeds inflation ratio of ${this.#o} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:W(this.#t),offset:this.#r,length:e,info:{bytesRead:this.#i,dataLength:this.dataLength}})}#l(e,t,n){let s=Math.ceil(t/ge)*ge;return this.#r+s>this.#t.length&&(this.allowLoose&&n&&this.#r+t<=this.#t.length?s=t:U(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:W(this.#t),length:this.#t.length,offset:this.#r+s})),this.#t.slice(this.#r,this.#r+s)}subReader(e){const t=new _e(this.#t.slice(this.#r+e),this.allowLoose,this.#o);return t.#a=this,t}readBytes(e,t){let n=this.#l(0,e,!!t);return this.#c(e),this.#r+=n.length,n.slice(0,e)}readValue(){return ue(this.readBytes(ge))}readIndex(){return he(ue(this.readBytes(ge)))}}function Pe(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function xe(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function Se(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Ie(e,t){xe(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const Ce=BigInt(2**32-1),Te=BigInt(32);function Oe(e,t=!1){return t?{h:Number(e&Ce),l:Number(e>>Te&Ce)}:{h:0|Number(e>>Te&Ce),l:0|Number(e&Ce)}}function Ne(e,t=!1){let n=new Uint32Array(e.length),s=new Uint32Array(e.length);for(let r=0;r<e.length;r++){const{h:i,l:a}=Oe(e[r],t);[n[r],s[r]]=[i,a]}return[n,s]}const je=(e,t,n)=>e<<n|t>>>32-n,Le=(e,t,n)=>t<<n|e>>>32-n,Be=(e,t,n)=>t<<n-32|e>>>64-n,Re=(e,t,n)=>e<<n-32|t>>>64-n;const Me=e=>e instanceof Uint8Array;if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");function Ue(e){if("string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),!Me(e))throw new Error("expected Uint8Array, got "+typeof e);return e}class De{clone(){return this._cloneInto()}}const[Fe,$e,Ge]=[[],[],[]],He=BigInt(0),ze=BigInt(1),We=BigInt(2),qe=BigInt(7),Ve=BigInt(256),Ke=BigInt(113);for(let e=0,t=ze,n=1,s=0;e<24;e++){[n,s]=[s,(2*n+3*s)%5],Fe.push(2*(5*s+n)),$e.push((e+1)*(e+2)/2%64);let r=He;for(let e=0;e<7;e++)t=(t<<ze^(t>>qe)*Ke)%Ve,t&We&&(r^=ze<<(ze<<BigInt(e))-ze);Ge.push(r)}const[Je,Qe]=Ne(Ge,!0),Ye=(e,t,n)=>n>32?Be(e,t,n):je(e,t,n),Ze=(e,t,n)=>n>32?Re(e,t,n):Le(e,t,n);class Xe extends De{constructor(e,t,n,s=!1,r=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=s,this.rounds=r,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Pe(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");var i;this.state=new Uint8Array(200),this.state32=(i=this.state,new Uint32Array(i.buffer,i.byteOffset,Math.floor(i.byteLength/4)))}keccak(){!function(e,t=24){const n=new Uint32Array(10);for(let s=24-t;s<24;s++){for(let t=0;t<10;t++)n[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const s=(t+8)%10,r=(t+2)%10,i=n[r],a=n[r+1],o=Ye(i,a,1)^n[s],c=Ze(i,a,1)^n[s+1];for(let n=0;n<50;n+=10)e[t+n]^=o,e[t+n+1]^=c}let t=e[2],r=e[3];for(let n=0;n<24;n++){const s=$e[n],i=Ye(t,r,s),a=Ze(t,r,s),o=Fe[n];t=e[o],r=e[o+1],e[o]=i,e[o+1]=a}for(let t=0;t<50;t+=10){for(let s=0;s<10;s++)n[s]=e[t+s];for(let s=0;s<10;s++)e[t+s]^=~n[(s+2)%10]&n[(s+4)%10]}e[0]^=Je[s],e[1]^=Qe[s]}n.fill(0)}(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){Se(this);const{blockLen:t,state:n}=this,s=(e=Ue(e)).length;for(let r=0;r<s;){const i=Math.min(t-this.pos,s-r);for(let t=0;t<i;t++)n[this.pos++]^=e[r++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:n,blockLen:s}=this;e[n]^=t,0!=(128&t)&&n===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Se(this,!1),xe(e),this.finish();const t=this.state,{blockLen:n}=this;for(let s=0,r=e.length;s<r;){this.posOut>=n&&this.keccak();const i=Math.min(n-this.posOut,r-s);e.set(t.subarray(this.posOut,this.posOut+i),s),this.posOut+=i,s+=i}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Pe(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Ie(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:n,outputLen:s,rounds:r,enableXOF:i}=this;return e||(e=new Xe(t,n,s,i,r)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=r,e.suffix=n,e.outputLen=s,e.enableXOF=i,e.destroyed=this.destroyed,e}}const et=(e,t,n)=>function(e){const t=t=>e().update(Ue(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}((()=>new Xe(t,e,n))),tt=et(1,136,32);let nt=!1;const st=function(e){return tt(e)};let rt=st;function it(e){const t=z(e,"data");return K(rt(t))}it._=st,it.lock=function(){nt=!0},it.register=function(e){if(nt)throw new TypeError("keccak256 is locked");rt=e},Object.freeze(it);const at=BigInt(0),ot=BigInt(36);function ct(e){const t=(e=e.toLowerCase()).substring(2).split(""),n=new Uint8Array(40);for(let e=0;e<40;e++)n[e]=t[e].charCodeAt(0);const s=z(it(n));for(let e=0;e<40;e+=2)s[e>>1]>>4>=8&&(t[e]=t[e].toUpperCase()),(15&s[e>>1])>=8&&(t[e+1]=t[e+1].toUpperCase());return"0x"+t.join("")}const lt={};for(let e=0;e<10;e++)lt[String(e)]=String(e);for(let e=0;e<26;e++)lt[String.fromCharCode(65+e)]=String(10+e);const ut=15;function ht(e){let t=(e=(e=e.toUpperCase()).substring(4)+e.substring(0,2)+"00").split("").map((e=>lt[e])).join("");for(;t.length>=ut;){let e=t.substring(0,ut);t=parseInt(e,10)%97+t.substring(e.length)}let n=String(98-parseInt(t,10)%97);for(;n.length<2;)n="0"+n;return n}const dt=function(){const e={};for(let t=0;t<36;t++){e["0123456789abcdefghijklmnopqrstuvwxyz"[t]]=BigInt(t)}return e}();function pt(e){if(D("string"==typeof e,"invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/)){e.startsWith("0x")||(e="0x"+e);const t=ct(e);return D(!e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||t===e,"bad address checksum","address",e),t}if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){D(e.substring(2,4)===ht(e),"bad icap checksum","address",e);let t=function(e){e=e.toLowerCase();let t=at;for(let n=0;n<e.length;n++)t=t*ot+dt[e[n]];return t}(e.substring(4)).toString(16);for(;t.length<40;)t="0"+t;return ct("0x"+t)}D(!1,"invalid address","address",e)}const ft={};function gt(e,t){let n=!1;return t<0&&(n=!0,t*=-1),new bt(ft,`${n?"":"u"}int${t}`,e,{signed:n,width:t})}function mt(e,t){return new bt(ft,`bytes${t||""}`,e,{size:t})}const yt=Symbol.for("_ethers_typed");class bt{type;value;#u;_typedSymbol;constructor(e,t,n,s){null==s&&(s=null),G(ft,e,"Typed"),j(this,{_typedSymbol:yt,type:t,value:n}),this.#u=s,this.format()}format(){if("array"===this.type)throw new Error("");if("dynamicArray"===this.type)throw new Error("");return"tuple"===this.type?`tuple(${this.value.map((e=>e.format())).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return"string"===this.type}get tupleName(){if("tuple"!==this.type)throw TypeError("not a tuple");return this.#u}get arrayLength(){if("array"!==this.type)throw TypeError("not an array");return!0===this.#u?-1:!1===this.#u?this.value.length:null}static from(e,t){return new bt(ft,e,t)}static uint8(e){return gt(e,8)}static uint16(e){return gt(e,16)}static uint24(e){return gt(e,24)}static uint32(e){return gt(e,32)}static uint40(e){return gt(e,40)}static uint48(e){return gt(e,48)}static uint56(e){return gt(e,56)}static uint64(e){return gt(e,64)}static uint72(e){return gt(e,72)}static uint80(e){return gt(e,80)}static uint88(e){return gt(e,88)}static uint96(e){return gt(e,96)}static uint104(e){return gt(e,104)}static uint112(e){return gt(e,112)}static uint120(e){return gt(e,120)}static uint128(e){return gt(e,128)}static uint136(e){return gt(e,136)}static uint144(e){return gt(e,144)}static uint152(e){return gt(e,152)}static uint160(e){return gt(e,160)}static uint168(e){return gt(e,168)}static uint176(e){return gt(e,176)}static uint184(e){return gt(e,184)}static uint192(e){return gt(e,192)}static uint200(e){return gt(e,200)}static uint208(e){return gt(e,208)}static uint216(e){return gt(e,216)}static uint224(e){return gt(e,224)}static uint232(e){return gt(e,232)}static uint240(e){return gt(e,240)}static uint248(e){return gt(e,248)}static uint256(e){return gt(e,256)}static uint(e){return gt(e,256)}static int8(e){return gt(e,-8)}static int16(e){return gt(e,-16)}static int24(e){return gt(e,-24)}static int32(e){return gt(e,-32)}static int40(e){return gt(e,-40)}static int48(e){return gt(e,-48)}static int56(e){return gt(e,-56)}static int64(e){return gt(e,-64)}static int72(e){return gt(e,-72)}static int80(e){return gt(e,-80)}static int88(e){return gt(e,-88)}static int96(e){return gt(e,-96)}static int104(e){return gt(e,-104)}static int112(e){return gt(e,-112)}static int120(e){return gt(e,-120)}static int128(e){return gt(e,-128)}static int136(e){return gt(e,-136)}static int144(e){return gt(e,-144)}static int152(e){return gt(e,-152)}static int160(e){return gt(e,-160)}static int168(e){return gt(e,-168)}static int176(e){return gt(e,-176)}static int184(e){return gt(e,-184)}static int192(e){return gt(e,-192)}static int200(e){return gt(e,-200)}static int208(e){return gt(e,-208)}static int216(e){return gt(e,-216)}static int224(e){return gt(e,-224)}static int232(e){return gt(e,-232)}static int240(e){return gt(e,-240)}static int248(e){return gt(e,-248)}static int256(e){return gt(e,-256)}static int(e){return gt(e,-256)}static bytes1(e){return mt(e,1)}static bytes2(e){return mt(e,2)}static bytes3(e){return mt(e,3)}static bytes4(e){return mt(e,4)}static bytes5(e){return mt(e,5)}static bytes6(e){return mt(e,6)}static bytes7(e){return mt(e,7)}static bytes8(e){return mt(e,8)}static bytes9(e){return mt(e,9)}static bytes10(e){return mt(e,10)}static bytes11(e){return mt(e,11)}static bytes12(e){return mt(e,12)}static bytes13(e){return mt(e,13)}static bytes14(e){return mt(e,14)}static bytes15(e){return mt(e,15)}static bytes16(e){return mt(e,16)}static bytes17(e){return mt(e,17)}static bytes18(e){return mt(e,18)}static bytes19(e){return mt(e,19)}static bytes20(e){return mt(e,20)}static bytes21(e){return mt(e,21)}static bytes22(e){return mt(e,22)}static bytes23(e){return mt(e,23)}static bytes24(e){return mt(e,24)}static bytes25(e){return mt(e,25)}static bytes26(e){return mt(e,26)}static bytes27(e){return mt(e,27)}static bytes28(e){return mt(e,28)}static bytes29(e){return mt(e,29)}static bytes30(e){return mt(e,30)}static bytes31(e){return mt(e,31)}static bytes32(e){return mt(e,32)}static address(e){return new bt(ft,"address",e)}static bool(e){return new bt(ft,"bool",!!e)}static bytes(e){return new bt(ft,"bytes",e)}static string(e){return new bt(ft,"string",e)}static array(e,t){throw new Error("not implemented yet")}static tuple(e,t){throw new Error("not implemented yet")}static overrides(e){return new bt(ft,"overrides",Object.assign({},e))}static isTyped(e){return e&&"object"==typeof e&&"_typedSymbol"in e&&e._typedSymbol===yt}static dereference(e,t){if(bt.isTyped(e)){if(e.type!==t)throw new Error(`invalid type: expecetd ${t}, got ${e.type}`);return e.value}return e}}class wt extends Ae{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){let n=bt.dereference(t,"string");try{n=pt(n)}catch(e){return this._throwError(e.message,t)}return e.writeValue(n)}decode(e){return pt(de(e.readValue(),20))}}class vt extends Ae{coder;constructor(e){super(e.name,e.type,"_",e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}}function Et(e,t,n){let s=[];if(Array.isArray(n))s=n;else if(n&&"object"==typeof n){let e={};s=t.map((t=>{const s=t.localName;return U(s,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:t},value:n}),U(!e[s],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:t},value:n}),e[s]=!0,n[s]}))}else D(!1,"invalid tuple value","tuple",n);D(t.length===s.length,"types/value length mismatch","tuple",n);let r=new ke,i=new ke,a=[];t.forEach(((e,t)=>{let n=s[t];if(e.dynamic){let t=i.length;e.encode(i,n);let s=r.writeUpdatableValue();a.push((e=>{s(e+t)}))}else e.encode(r,n)})),a.forEach((e=>{e(r.length)}));let o=e.appendWriter(r);return o+=e.appendWriter(i),o}function At(e,t){let n=[],s=[],r=e.subReader(0);return t.forEach((t=>{let i=null;if(t.dynamic){let n=e.readIndex(),s=r.subReader(n);try{i=t.decode(s)}catch(e){if(B(e,"BUFFER_OVERRUN"))throw e;i=e,i.baseType=t.name,i.name=t.localName,i.type=t.type}}else try{i=t.decode(e)}catch(e){if(B(e,"BUFFER_OVERRUN"))throw e;i=e,i.baseType=t.name,i.name=t.localName,i.type=t.type}if(null==i)throw new Error("investigate");n.push(i),s.push(t.localName||null)})),ve.fromItems(n,s)}class kt extends Ae{coder;length;constructor(e,t,n){super("array",e.type+"["+(t>=0?t:"")+"]",n,-1===t||e.dynamic),j(this,{coder:e,length:t})}defaultValue(){const e=this.coder.defaultValue(),t=[];for(let n=0;n<this.length;n++)t.push(e);return t}encode(e,t){const n=bt.dereference(t,"array");Array.isArray(n)||this._throwError("expected array value",n);let s=this.length;-1===s&&(s=n.length,e.writeValue(n.length)),F(n.length,s,"coder array"+(this.localName?" "+this.localName:""));let r=[];for(let e=0;e<n.length;e++)r.push(this.coder);return Et(e,r,n)}decode(e){let t=this.length;-1===t&&(t=e.readIndex(),U(t*ge<=e.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:e.bytes,offset:t*ge,length:e.dataLength}));let n=[];for(let e=0;e<t;e++)n.push(new vt(this.coder));return At(e,n)}}class _t extends Ae{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){const n=bt.dereference(t,"bool");return e.writeValue(n?1:0)}decode(e){return!!e.readValue()}}class Pt extends Ae{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=W(t);let n=e.writeValue(t.length);return n+=e.writeBytes(t),n}decode(e){return e.readBytes(e.readIndex(),!0)}}class xt extends Pt{constructor(e){super("bytes",e)}decode(e){return K(super.decode(e))}}class St extends Ae{size;constructor(e,t){let n="bytes"+String(e);super(n,n,t,!1),j(this,{size:e},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+2*this.size)}encode(e,t){let n=W(bt.dereference(t,this.type));return n.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(n)}decode(e){return K(e.readBytes(this.size))}}const It=new Uint8Array([]);class Ct extends Ae{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return null!=t&&this._throwError("not null",t),e.writeBytes(It)}decode(e){return e.readBytes(0),null}}const Tt=BigInt(0),Ot=BigInt(1),Nt=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class jt extends Ae{size;signed;constructor(e,t,n){const s=(t?"int":"uint")+8*e;super(s,s,n,!1),j(this,{size:e,signed:t},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(e,t){let n=oe(bt.dereference(t,this.type)),s=ae(Nt,256);if(this.signed){let e=ae(s,8*this.size-1);(n>e||n<-(e+Ot))&&this._throwError("value out-of-bounds",t),n=ie(n,256)}else(n<Tt||n>ae(s,8*this.size))&&this._throwError("value out-of-bounds",t);return e.writeValue(n)}decode(e){let t=ae(e.readValue(),8*this.size);return this.signed&&(t=re(t,8*this.size)),t}}function Lt(e,t,n,s,r){if("BAD_PREFIX"===e||"UNEXPECTED_CONTINUE"===e){let e=0;for(let s=t+1;s<n.length&&n[s]>>6==2;s++)e++;return e}return"OVERRUN"===e?n.length-t-1:0}const Bt=Object.freeze({error:function(e,t,n,s,r){D(!1,`invalid codepoint at offset ${t}; ${e}`,"bytes",n)},ignore:Lt,replace:function(e,t,n,s,r){return"OVERLONG"===e?(D("number"==typeof r,"invalid bad code point for replacement","badCodepoint",r),s.push(r),0):(s.push(65533),Lt(e,t,n))}});function Rt(e,t){null==t&&(t=Bt.error);const n=z(e,"bytes"),s=[];let r=0;for(;r<n.length;){const e=n[r++];if(e>>7==0){s.push(e);continue}let i=null,a=null;if(192==(224&e))i=1,a=127;else if(224==(240&e))i=2,a=2047;else{if(240!=(248&e)){r+=t(128==(192&e)?"UNEXPECTED_CONTINUE":"BAD_PREFIX",r-1,n,s);continue}i=3,a=65535}if(r-1+i>=n.length){r+=t("OVERRUN",r-1,n,s);continue}let o=e&(1<<8-i-1)-1;for(let e=0;e<i;e++){let e=n[r];if(128!=(192&e)){r+=t("MISSING_CONTINUE",r,n,s),o=null;break}o=o<<6|63&e,r++}null!==o&&(o>1114111?r+=t("OUT_OF_RANGE",r-1-i,n,s,o):o>=55296&&o<=57343?r+=t("UTF16_SURROGATE",r-1-i,n,s,o):o<=a?r+=t("OVERLONG",r-1-i,n,s,o):s.push(o))}return s}function Mt(e,t){D("string"==typeof e,"invalid string value","str",e),null!=t&&(!function(e){U($.indexOf(e)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:e}})}(t),e=e.normalize(t));let n=[];for(let t=0;t<e.length;t++){const s=e.charCodeAt(t);if(s<128)n.push(s);else if(s<2048)n.push(s>>6|192),n.push(63&s|128);else if(55296==(64512&s)){t++;const r=e.charCodeAt(t);D(t<e.length&&56320==(64512&r),"invalid surrogate pair","str",e);const i=65536+((1023&s)<<10)+(1023&r);n.push(i>>18|240),n.push(i>>12&63|128),n.push(i>>6&63|128),n.push(63&i|128)}else n.push(s>>12|224),n.push(s>>6&63|128),n.push(63&s|128)}return new Uint8Array(n)}function Ut(e,t){return Rt(e,t).map((e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10&1023),56320+(1023&e))))).join("")}class Dt extends Pt{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,Mt(bt.dereference(t,"string")))}decode(e){return Ut(super.decode(e))}}class Ft extends Ae{coders;constructor(e,t){let n=!1;const s=[];e.forEach((e=>{e.dynamic&&(n=!0),s.push(e.type)}));super("tuple","tuple("+s.join(",")+")",t,n),j(this,{coders:Object.freeze(e.slice())})}defaultValue(){const e=[];this.coders.forEach((t=>{e.push(t.defaultValue())}));const t=this.coders.reduce(((e,t)=>{const n=t.localName;return n&&(e[n]||(e[n]=0),e[n]++),e}),{});return this.coders.forEach(((n,s)=>{let r=n.localName;r&&1===t[r]&&("length"===r&&(r="_length"),null==e[r]&&(e[r]=e[s]))})),Object.freeze(e)}encode(e,t){const n=bt.dereference(t,"tuple");return Et(e,this.coders,n)}decode(e){return At(e,this.coders)}}function $t(e){return it(Mt(e))}function Gt(e){const t=new Set;return e.forEach((e=>t.add(e))),Object.freeze(t)}const Ht=Gt("external public payable override".split(" ")),zt="constant external internal payable private public pure view override",Wt=Gt(zt.split(" ")),qt="constructor error event fallback function receive struct",Vt=Gt(qt.split(" ")),Kt="calldata memory storage payable indexed",Jt=Gt(Kt.split(" ")),Qt=Gt([qt,Kt,"tuple returns",zt].join(" ").split(" ")),Yt={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},Zt=new RegExp("^(\\s*)"),Xt=new RegExp("^([0-9]+)"),en=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),tn=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),nn=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");class sn{#r;#h;get offset(){return this.#r}get length(){return this.#h.length-this.#r}constructor(e){this.#r=0,this.#h=e.slice()}clone(){return new sn(this.#h)}reset(){this.#r=0}#d(e=0,t=0){return new sn(this.#h.slice(e,t).map((t=>Object.freeze(Object.assign({},t,{match:t.match-e,linkBack:t.linkBack-e,linkNext:t.linkNext-e})))))}popKeyword(e){const t=this.peek();if("KEYWORD"!==t.type||!e.has(t.text))throw new Error(`expected keyword ${t.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const t=this.peek();throw new Error(`expected ${e}; got ${t.type} ${JSON.stringify(t.text)}`)}return this.pop().text}popParen(){const e=this.peek();if("OPEN_PAREN"!==e.type)throw new Error("bad start");const t=this.#d(this.#r+1,e.match+1);return this.#r=e.match+1,t}popParams(){const e=this.peek();if("OPEN_PAREN"!==e.type)throw new Error("bad start");const t=[];for(;this.#r<e.match-1;){const e=this.peek().linkNext;t.push(this.#d(this.#r+1,e)),this.#r=e}return this.#r=e.match+1,t}peek(){if(this.#r>=this.#h.length)throw new Error("out-of-bounds");return this.#h[this.#r]}peekKeyword(e){const t=this.peekType("KEYWORD");return null!=t&&e.has(t)?t:null}peekType(e){if(0===this.length)return null;const t=this.peek();return t.type===e?t.text:null}pop(){const e=this.peek();return this.#r++,e}toString(){const e=[];for(let t=this.#r;t<this.#h.length;t++){const n=this.#h[t];e.push(`${n.type}:${n.text}`)}return`<TokenString ${e.join(" ")}>`}}function rn(e){const t=[],n=t=>{const n=i<e.length?JSON.stringify(e[i]):"$EOI";throw new Error(`invalid token ${n} at ${i}: ${t}`)};let s=[],r=[],i=0;for(;i<e.length;){let a=e.substring(i),o=a.match(Zt);o&&(i+=o[1].length,a=e.substring(i));const c={depth:s.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};t.push(c);let l=Yt[a[0]]||"";if(l){if(c.type=l,c.text=a[0],i++,"OPEN_PAREN"===l)s.push(t.length-1),r.push(t.length-1);else if("CLOSE_PAREN"==l)0===s.length&&n("no matching open bracket"),c.match=s.pop(),t[c.match].match=t.length-1,c.depth--,c.linkBack=r.pop(),t[c.linkBack].linkNext=t.length-1;else if("COMMA"===l)c.linkBack=r.pop(),t[c.linkBack].linkNext=t.length-1,r.push(t.length-1);else if("OPEN_BRACKET"===l)c.type="BRACKET";else if("CLOSE_BRACKET"===l){let e=t.pop().text;if(t.length>0&&"NUMBER"===t[t.length-1].type){const n=t.pop().text;e=n+e,t[t.length-1].value=he(n)}if(0===t.length||"BRACKET"!==t[t.length-1].type)throw new Error("missing opening bracket");t[t.length-1].text+=e}}else if(o=a.match(en),o){if(c.text=o[1],i+=c.text.length,Qt.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(nn)){c.type="TYPE";continue}c.type="ID"}else{if(o=a.match(Xt),!o)throw new Error(`unexpected token ${JSON.stringify(a[0])} at position ${i}`);c.text=o[1],c.type="NUMBER",i+=c.text.length}}return new sn(t.map((e=>Object.freeze(e))))}function an(e,t){let n=[];for(const s in t.keys())e.has(s)&&n.push(s);if(n.length>1)throw new Error(`conflicting types: ${n.join(", ")}`)}function on(e,t){if(t.peekKeyword(Vt)){const n=t.pop().text;if(n!==e)throw new Error(`expected ${e}, got ${n}`)}return t.popType("ID")}function cn(e,t){const n=new Set;for(;;){const s=e.peekType("KEYWORD");if(null==s||t&&!t.has(s))break;if(e.pop(),n.has(s))throw new Error(`duplicate keywords: ${JSON.stringify(s)}`);n.add(s)}return Object.freeze(n)}function ln(e){let t=cn(e,Wt);return an(t,Gt("constant payable nonpayable".split(" "))),an(t,Gt("pure view payable nonpayable".split(" "))),t.has("view")?"view":t.has("pure")?"pure":t.has("payable")?"payable":t.has("nonpayable")?"nonpayable":t.has("constant")?"view":"nonpayable"}function un(e,t){return e.popParams().map((e=>_n.from(e,t)))}function hn(e){if(e.peekType("AT")){if(e.pop(),e.peekType("NUMBER"))return oe(e.pop().text);throw new Error("invalid gas")}return null}function dn(e){if(e.length)throw new Error(`unexpected tokens at offset ${e.offset}: ${e.toString()}`)}const pn=new RegExp(/^(.*)\[([0-9]*)\]$/);function fn(e){const t=e.match(nn);if(D(t,"invalid type","type",e),"uint"===e)return"uint256";if("int"===e)return"int256";if(t[2]){const n=parseInt(t[2]);D(0!==n&&n<=32,"invalid bytes length","type",e)}else if(t[3]){const n=parseInt(t[3]);D(0!==n&&n<=256&&n%8==0,"invalid numeric width","type",e)}return e}const gn={},mn=Symbol.for("_ethers_internal"),yn="_ParamTypeInternal",bn="_ErrorInternal",wn="_EventInternal",vn="_ConstructorInternal",En="_FallbackInternal",An="_FunctionInternal",kn="_StructInternal";class _n{name;type;baseType;indexed;components;arrayLength;arrayChildren;constructor(e,t,n,s,r,i,a,o){if(G(e,gn,"ParamType"),Object.defineProperty(this,mn,{value:yn}),i&&(i=Object.freeze(i.slice())),"array"===s){if(null==a||null==o)throw new Error("")}else if(null!=a||null!=o)throw new Error("");if("tuple"===s){if(null==i)throw new Error("")}else if(null!=i)throw new Error("");j(this,{name:t,type:n,baseType:s,indexed:r,components:i,arrayLength:a,arrayChildren:o})}format(e){if(null==e&&(e="sighash"),"json"===e){const t=this.name||"";if(this.isArray()){const e=JSON.parse(this.arrayChildren.format("json"));return e.name=t,e.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(e)}const n={type:"tuple"===this.baseType?"tuple":this.type,name:t};return"boolean"==typeof this.indexed&&(n.indexed=this.indexed),this.isTuple()&&(n.components=this.components.map((t=>JSON.parse(t.format(e))))),JSON.stringify(n)}let t="";return this.isArray()?(t+=this.arrayChildren.format(e),t+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?t+="("+this.components.map((t=>t.format(e))).join("full"===e?", ":",")+")":t+=this.type,"sighash"!==e&&(!0===this.indexed&&(t+=" indexed"),"full"===e&&this.name&&(t+=" "+this.name)),t}isArray(){return"array"===this.baseType}isTuple(){return"tuple"===this.baseType}isIndexable(){return null!=this.indexed}walk(e,t){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(-1!==this.arrayLength&&e.length!==this.arrayLength)throw new Error("array is wrong length");const n=this;return e.map((e=>n.arrayChildren.walk(e,t)))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const n=this;return e.map(((e,s)=>n.components[s].walk(e,t)))}return t(this.type,e)}#p(e,t,n,s){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(-1!==this.arrayLength&&t.length!==this.arrayLength)throw new Error("array is wrong length");const r=this.arrayChildren,i=t.slice();return i.forEach(((t,s)=>{r.#p(e,t,n,(e=>{i[s]=e}))})),void s(i)}if(this.isTuple()){const r=this.components;let i;if(Array.isArray(t))i=t.slice();else{if(null==t||"object"!=typeof t)throw new Error("invalid tuple value");i=r.map((e=>{if(!e.name)throw new Error("cannot use object value with unnamed components");if(!(e.name in t))throw new Error(`missing value for component ${e.name}`);return t[e.name]}))}if(i.length!==this.components.length)throw new Error("array is wrong length");return i.forEach(((t,s)=>{r[s].#p(e,t,n,(e=>{i[s]=e}))})),void s(i)}const r=n(this.type,t);r.then?e.push(async function(){s(await r)}()):s(r)}async walkAsync(e,t){const n=[],s=[e];return this.#p(n,e,t,(e=>{s[0]=e})),n.length&&await Promise.all(n),s[0]}static from(e,t){if(_n.isParamType(e))return e;if("string"==typeof e)try{return _n.from(rn(e),t)}catch(t){D(!1,"invalid param type","obj",e)}else if(e instanceof sn){let n="",s="",r=null;cn(e,Gt(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(s="tuple",r=e.popParams().map((e=>_n.from(e))),n=`tuple(${r.map((e=>e.format())).join(",")})`):(n=fn(e.popType("TYPE")),s=n);let i=null,a=null;for(;e.length&&e.peekType("BRACKET");){const t=e.pop();i=new _n(gn,"",n,s,null,r,a,i),a=t.value,n+=t.text,s="array",r=null}let o=null;if(cn(e,Jt).has("indexed")){if(!t)throw new Error("");o=!0}const c=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new _n(gn,c,n,s,o,r,a,i)}const n=e.name;D(!n||"string"==typeof n&&n.match(tn),"invalid name","obj.name",n);let s=e.indexed;null!=s&&(D(t,"parameter cannot be indexed","obj.indexed",e.indexed),s=!!s);let r=e.type,i=r.match(pn);if(i){const t=parseInt(i[2]||"-1"),a=_n.from({type:i[1],components:e.components});return new _n(gn,n||"",r,"array",s,null,t,a)}if("tuple"===r||r.startsWith("tuple(")||r.startsWith("(")){const t=null!=e.components?e.components.map((e=>_n.from(e))):null;return new _n(gn,n||"",r,"tuple",s,t,null,null)}return r=fn(e.type),new _n(gn,n||"",r,r,s,null,null,null)}static isParamType(e){return e&&e[mn]===yn}}class Pn{type;inputs;constructor(e,t,n){G(e,gn,"Fragment"),j(this,{type:t,inputs:n=Object.freeze(n.slice())})}static from(e){if("string"==typeof e){try{Pn.from(JSON.parse(e))}catch(e){}return Pn.from(rn(e))}if(e instanceof sn){switch(e.peekKeyword(Vt)){case"constructor":return Tn.from(e);case"error":return In.from(e);case"event":return Cn.from(e);case"fallback":case"receive":return On.from(e);case"function":return Nn.from(e);case"struct":return jn.from(e)}}else if("object"==typeof e){switch(e.type){case"constructor":return Tn.from(e);case"error":return In.from(e);case"event":return Cn.from(e);case"fallback":case"receive":return On.from(e);case"function":return Nn.from(e);case"struct":return jn.from(e)}U(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}D(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return Tn.isFragment(e)}static isError(e){return In.isFragment(e)}static isEvent(e){return Cn.isFragment(e)}static isFunction(e){return Nn.isFragment(e)}static isStruct(e){return jn.isFragment(e)}}class xn extends Pn{name;constructor(e,t,n,s){super(e,t,s),D("string"==typeof n&&n.match(tn),"invalid identifier","name",n),s=Object.freeze(s.slice()),j(this,{name:n})}}function Sn(e,t){return"("+t.map((t=>t.format(e))).join("full"===e?", ":",")+")"}class In extends xn{constructor(e,t,n){super(e,"error",t,n),Object.defineProperty(this,mn,{value:bn})}get selector(){return $t(this.format("sighash")).substring(0,10)}format(e){if(null==e&&(e="sighash"),"json"===e)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))});const t=[];return"sighash"!==e&&t.push("error"),t.push(this.name+Sn(e,this.inputs)),t.join(" ")}static from(e){if(In.isFragment(e))return e;if("string"==typeof e)return In.from(rn(e));if(e instanceof sn){const t=on("error",e),n=un(e);return dn(e),new In(gn,t,n)}return new In(gn,e.name,e.inputs?e.inputs.map(_n.from):[])}static isFragment(e){return e&&e[mn]===bn}}class Cn extends xn{anonymous;constructor(e,t,n,s){super(e,"event",t,n),Object.defineProperty(this,mn,{value:wn}),j(this,{anonymous:s})}get topicHash(){return $t(this.format("sighash"))}format(e){if(null==e&&(e="sighash"),"json"===e)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))});const t=[];return"sighash"!==e&&t.push("event"),t.push(this.name+Sn(e,this.inputs)),"sighash"!==e&&this.anonymous&&t.push("anonymous"),t.join(" ")}static getTopicHash(e,t){t=(t||[]).map((e=>_n.from(e)));return new Cn(gn,e,t,!1).topicHash}static from(e){if(Cn.isFragment(e))return e;if("string"==typeof e)try{return Cn.from(rn(e))}catch(t){D(!1,"invalid event fragment","obj",e)}else if(e instanceof sn){const t=on("event",e),n=un(e,!0),s=!!cn(e,Gt(["anonymous"])).has("anonymous");return dn(e),new Cn(gn,t,n,s)}return new Cn(gn,e.name,e.inputs?e.inputs.map((e=>_n.from(e,!0))):[],!!e.anonymous)}static isFragment(e){return e&&e[mn]===wn}}class Tn extends Pn{payable;gas;constructor(e,t,n,s,r){super(e,t,n),Object.defineProperty(this,mn,{value:vn}),j(this,{payable:s,gas:r})}format(e){if(U(null!=e&&"sighash"!==e,"cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),"json"===e)return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:null!=this.gas?this.gas:void 0,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))});const t=[`constructor${Sn(e,this.inputs)}`];return this.payable&&t.push("payable"),null!=this.gas&&t.push(`@${this.gas.toString()}`),t.join(" ")}static from(e){if(Tn.isFragment(e))return e;if("string"==typeof e)try{return Tn.from(rn(e))}catch(t){D(!1,"invalid constuctor fragment","obj",e)}else if(e instanceof sn){cn(e,Gt(["constructor"]));const t=un(e),n=!!cn(e,Ht).has("payable"),s=hn(e);return dn(e),new Tn(gn,"constructor",t,n,s)}return new Tn(gn,"constructor",e.inputs?e.inputs.map(_n.from):[],!!e.payable,null!=e.gas?e.gas:null)}static isFragment(e){return e&&e[mn]===vn}}class On extends Pn{payable;constructor(e,t,n){super(e,"fallback",t),Object.defineProperty(this,mn,{value:En}),j(this,{payable:n})}format(e){const t=0===this.inputs.length?"receive":"fallback";if("json"===e){const e=this.payable?"payable":"nonpayable";return JSON.stringify({type:t,stateMutability:e})}return`${t}()${this.payable?" payable":""}`}static from(e){if(On.isFragment(e))return e;if("string"==typeof e)try{return On.from(rn(e))}catch(t){D(!1,"invalid fallback fragment","obj",e)}else if(e instanceof sn){const t=e.toString();D(e.peekKeyword(Gt(["fallback","receive"])),"type must be fallback or receive","obj",t);if("receive"===e.popKeyword(Gt(["fallback","receive"]))){const t=un(e);return D(0===t.length,"receive cannot have arguments","obj.inputs",t),cn(e,Gt(["payable"])),dn(e),new On(gn,[],!0)}let n=un(e);n.length?D(1===n.length&&"bytes"===n[0].type,"invalid fallback inputs","obj.inputs",n.map((e=>e.format("minimal"))).join(", ")):n=[_n.from("bytes")];const s=ln(e);if(D("nonpayable"===s||"payable"===s,"fallback cannot be constants","obj.stateMutability",s),cn(e,Gt(["returns"])).has("returns")){const t=un(e);D(1===t.length&&"bytes"===t[0].type,"invalid fallback outputs","obj.outputs",t.map((e=>e.format("minimal"))).join(", "))}return dn(e),new On(gn,n,"payable"===s)}if("receive"===e.type)return new On(gn,[],!0);if("fallback"===e.type){const t=[_n.from("bytes")],n="payable"===e.stateMutability;return new On(gn,t,n)}D(!1,"invalid fallback description","obj",e)}static isFragment(e){return e&&e[mn]===En}}class Nn extends xn{constant;outputs;stateMutability;payable;gas;constructor(e,t,n,s,r,i){super(e,"function",t,s),Object.defineProperty(this,mn,{value:An});j(this,{constant:"view"===n||"pure"===n,gas:i,outputs:r=Object.freeze(r.slice()),payable:"payable"===n,stateMutability:n})}get selector(){return $t(this.format("sighash")).substring(0,10)}format(e){if(null==e&&(e="sighash"),"json"===e)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:null!=this.gas?this.gas:void 0,inputs:this.inputs.map((t=>JSON.parse(t.format(e)))),outputs:this.outputs.map((t=>JSON.parse(t.format(e))))});const t=[];return"sighash"!==e&&t.push("function"),t.push(this.name+Sn(e,this.inputs)),"sighash"!==e&&("nonpayable"!==this.stateMutability&&t.push(this.stateMutability),this.outputs&&this.outputs.length&&(t.push("returns"),t.push(Sn(e,this.outputs))),null!=this.gas&&t.push(`@${this.gas.toString()}`)),t.join(" ")}static getSelector(e,t){t=(t||[]).map((e=>_n.from(e)));return new Nn(gn,e,"view",t,[],null).selector}static from(e){if(Nn.isFragment(e))return e;if("string"==typeof e)try{return Nn.from(rn(e))}catch(t){D(!1,"invalid function fragment","obj",e)}else if(e instanceof sn){const t=on("function",e),n=un(e),s=ln(e);let r=[];cn(e,Gt(["returns"])).has("returns")&&(r=un(e));const i=hn(e);return dn(e),new Nn(gn,t,s,n,r,i)}let t=e.stateMutability;return null==t&&(t="payable","boolean"==typeof e.constant?(t="view",e.constant||(t="payable","boolean"!=typeof e.payable||e.payable||(t="nonpayable"))):"boolean"!=typeof e.payable||e.payable||(t="nonpayable")),new Nn(gn,e.name,t,e.inputs?e.inputs.map(_n.from):[],e.outputs?e.outputs.map(_n.from):[],null!=e.gas?e.gas:null)}static isFragment(e){return e&&e[mn]===An}}class jn extends xn{constructor(e,t,n){super(e,"struct",t,n),Object.defineProperty(this,mn,{value:kn})}format(){throw new Error("@TODO")}static from(e){if("string"==typeof e)try{return jn.from(rn(e))}catch(t){D(!1,"invalid struct fragment","obj",e)}else if(e instanceof sn){const t=on("struct",e),n=un(e);return dn(e),new jn(gn,t,n)}return new jn(gn,e.name,e.inputs?e.inputs.map(_n.from):[])}static isFragment(e){return e&&e[mn]===kn}}const Ln=new Map;Ln.set(0,"GENERIC_PANIC"),Ln.set(1,"ASSERT_FALSE"),Ln.set(17,"OVERFLOW"),Ln.set(18,"DIVIDE_BY_ZERO"),Ln.set(33,"ENUM_RANGE_ERROR"),Ln.set(34,"BAD_STORAGE_DATA"),Ln.set(49,"STACK_UNDERFLOW"),Ln.set(50,"ARRAY_RANGE_ERROR"),Ln.set(65,"OUT_OF_MEMORY"),Ln.set(81,"UNINITIALIZED_FUNCTION_CALL");const Bn=new RegExp(/^bytes([0-9]*)$/),Rn=new RegExp(/^(u?int)([0-9]*)$/);let Mn=null,Un=1024;class Dn{#f(e){if(e.isArray())return new kt(this.#f(e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new Ft(e.components.map((e=>this.#f(e))),e.name);switch(e.baseType){case"address":return new wt(e.name);case"bool":return new _t(e.name);case"string":return new Dt(e.name);case"bytes":return new xt(e.name);case"":return new Ct(e.name)}let t=e.type.match(Rn);if(t){let n=parseInt(t[2]||"256");return D(0!==n&&n<=256&&n%8==0,"invalid "+t[1]+" bit length","param",e),new jt(n/8,"int"===t[1],e.name)}if(t=e.type.match(Bn),t){let n=parseInt(t[1]);return D(0!==n&&n<=32,"invalid bytes length","param",e),new St(n,e.name)}D(!1,"invalid type","type",e.type)}getDefaultValue(e){const t=e.map((e=>this.#f(_n.from(e))));return new Ft(t,"_").defaultValue()}encode(e,t){F(t.length,e.length,"types/values length mismatch");const n=e.map((e=>this.#f(_n.from(e)))),s=new Ft(n,"_"),r=new ke;return s.encode(r,t),r.data}decode(e,t,n){const s=e.map((e=>this.#f(_n.from(e))));return new Ft(s,"_").decode(new _e(t,n,Un))}static _setDefaultMaxInflation(e){D("number"==typeof e&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),Un=e}static defaultAbiCoder(){return null==Mn&&(Mn=new Dn),Mn}static getBuiltinCallException(e,t,n){return function(e,t,n,s){let r="missing revert data",i=null,a=null;if(n){r="execution reverted";const e=z(n);if(n=K(n),0===e.length)r+=" (no data present; likely require(false) occurred",i="require(false)";else if(e.length%32!=4)r+=" (could not decode reason; invalid data length)";else if("0x08c379a0"===K(e.slice(0,4)))try{i=s.decode(["string"],e.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[i]},r+=`: ${JSON.stringify(i)}`}catch(e){r+=" (could not decode reason; invalid string data)"}else if("0x4e487b71"===K(e.slice(0,4)))try{const t=Number(s.decode(["uint256"],e.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[t]},i=`Panic due to ${Ln.get(t)||"UNKNOWN"}(${t})`,r+=`: ${i}`}catch(e){r+=" (could not decode panic code)"}else r+=" (unknown custom error)"}const o={to:t.to?pt(t.to):null,data:t.data||"0x"};return t.from&&(o.from=pt(t.from)),M(r,"CALL_EXCEPTION",{action:e,data:n,reason:i,transaction:o,invocation:null,revert:a})}(e,t,n,Dn.defaultAbiCoder())}}function Fn(e){return e&&"function"==typeof e.getAddress}async function $n(e,t){const n=await t;return null!=n&&"0x0000000000000000000000000000000000000000"!==n||(U("string"!=typeof e,"unconfigured name","UNCONFIGURED_NAME",{value:e}),D(!1,"invalid AddressLike value; did not resolve to a value address","target",e)),pt(n)}function Gn(e,t){return"string"==typeof e?e.match(/^0x[0-9a-f]{40}$/i)?pt(e):(U(null!=t,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),$n(e,t.resolveName(e))):Fn(e)?$n(e,e.getAddress()):e&&"function"==typeof e.then?$n(e,e):void D(!1,"unsupported addressable value","target",e)}const Hn=new Uint8Array(32);Hn.fill(0);const zn=BigInt(-1),Wn=BigInt(0),qn=BigInt(1),Vn=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");const Kn=de(qn,32),Jn=de(Wn,32),Qn={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},Yn=["name","version","chainId","verifyingContract","salt"];function Zn(e){return function(t){return D("string"==typeof t,`invalid domain value for ${JSON.stringify(e)}`,`domain.${e}`,t),t}}const Xn={name:Zn("name"),version:Zn("version"),chainId:function(e){const t=oe(e,"domain.chainId");return D(t>=0,"invalid chain ID","domain.chainId",e),Number.isSafeInteger(t)?Number(t):fe(t)},verifyingContract:function(e){try{return pt(e).toLowerCase()}catch(e){}D(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",e)},salt:function(e){const t=z(e,"domain.salt");return D(32===t.length,'invalid domain value "salt"',"domain.salt",e),K(t)}};function es(e){{const t=e.match(/^(u?)int(\d+)$/);if(t){const n=""===t[1],s=parseInt(t[2]);D(s%8==0&&0!==s&&s<=256&&t[2]===String(s),"invalid numeric width","type",e);const r=ae(Vn,n?s-1:s),i=n?(r+qn)*zn:Wn;return function(t){const s=oe(t,"value");return D(s>=i&&s<=r,`value out-of-bounds for ${e}`,"value",s),de(n?ie(s,256):s,32)}}}{const t=e.match(/^bytes(\d+)$/);if(t){const n=parseInt(t[1]);return D(0!==n&&n<=32&&t[1]===String(n),"invalid bytes width","type",e),function(t){return D(z(t).length===n,`invalid length for ${e}`,"value",t),function(e){const t=z(e),n=t.length%32;return n?J([t,Hn.slice(n)]):K(t)}(t)}}}switch(e){case"address":return function(e){return X(pt(e),32)};case"bool":return function(e){return e?Kn:Jn};case"bytes":return function(e){return it(e)};case"string":return function(e){return $t(e)}}return null}function ts(e,t){return`${e}(${t.map((({name:e,type:t})=>t+" "+e)).join(",")})`}function ns(e){const t=e.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return t?{base:t[1],index:t[2]+t[4],array:{base:t[1],prefix:t[1]+t[2],count:t[5]?parseInt(t[5]):-1}}:{base:e}}class ss{primaryType;#g;get types(){return JSON.parse(this.#g)}#m;#y;constructor(e){this.#m=new Map,this.#y=new Map;const t=new Map,n=new Map,s=new Map,r={};Object.keys(e).forEach((i=>{r[i]=e[i].map((({name:t,type:n})=>{let{base:s,index:r}=ns(n);return"int"!==s||e.int||(s="int256"),"uint"!==s||e.uint||(s="uint256"),{name:t,type:s+(r||"")}})),t.set(i,new Set),n.set(i,[]),s.set(i,new Set)})),this.#g=JSON.stringify(r);for(const s in r){const i=new Set;for(const a of r[s]){D(!i.has(a.name),`duplicate variable name ${JSON.stringify(a.name)} in ${JSON.stringify(s)}`,"types",e),i.add(a.name);const r=ns(a.type).base;D(r!==s,`circular type reference to ${JSON.stringify(r)}`,"types",e);es(r)||(D(n.has(r),`unknown type ${JSON.stringify(r)}`,"types",e),n.get(r).push(s),t.get(s).add(r))}}const i=Array.from(n.keys()).filter((e=>0===n.get(e).length));D(0!==i.length,"missing primary type","types",e),D(1===i.length,`ambiguous primary types or unused types: ${i.map((e=>JSON.stringify(e))).join(", ")}`,"types",e),j(this,{primaryType:i[0]}),function r(i,a){D(!a.has(i),`circular type reference to ${JSON.stringify(i)}`,"types",e),a.add(i);for(const e of t.get(i))if(n.has(e)){r(e,a);for(const t of a)s.get(t).add(e)}a.delete(i)}(this.primaryType,new Set);for(const[e,t]of s){const n=Array.from(t);n.sort(),this.#m.set(e,ts(e,r[e])+n.map((e=>ts(e,r[e]))).join(""))}}getEncoder(e){let t=this.#y.get(e);return t||(t=this.#b(e),this.#y.set(e,t)),t}#b(e){{const t=es(e);if(t)return t}const t=ns(e).array;if(t){const e=t.prefix,n=this.getEncoder(e);return s=>{D(-1===t.count||t.count===s.length,`array length mismatch; expected length ${t.count}`,"value",s);let r=s.map(n);return this.#m.has(e)&&(r=r.map(it)),it(J(r))}}const n=this.types[e];if(n){const t=$t(this.#m.get(e));return e=>{const s=n.map((({name:t,type:n})=>{const s=this.getEncoder(n)(e[t]);return this.#m.has(n)?it(s):s}));return s.unshift(t),J(s)}}D(!1,`unknown type: ${e}`,"type",e)}encodeType(e){const t=this.#m.get(e);return D(t,`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return it(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,n){if(es(e))return n(e,t);const s=ns(e).array;if(s)return D(-1===s.count||s.count===t.length,`array length mismatch; expected length ${s.count}`,"value",t),t.map((e=>this._visit(s.prefix,e,n)));const r=this.types[e];if(r)return r.reduce(((e,{name:s,type:r})=>(e[s]=this._visit(r,t[s],n),e)),{});D(!1,`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new ss(e)}static getPrimaryType(e){return ss.from(e).primaryType}static hashStruct(e,t,n){return ss.from(t).hashStruct(e,n)}static hashDomain(e){const t=[];for(const n in e){if(null==e[n])continue;const s=Qn[n];D(s,`invalid typed-data domain key: ${JSON.stringify(n)}`,"domain",e),t.push({name:n,type:s})}return t.sort(((e,t)=>Yn.indexOf(e.name)-Yn.indexOf(t.name))),ss.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,n){return J(["0x1901",ss.hashDomain(e),ss.from(t).hash(n)])}static hash(e,t,n){return it(ss.encode(e,t,n))}static async resolveNames(e,t,n,s){e=Object.assign({},e);for(const t in e)null==e[t]&&delete e[t];const r={};e.verifyingContract&&!q(e.verifyingContract,20)&&(r[e.verifyingContract]="0x");const i=ss.from(t);i.visit(n,((e,t)=>("address"!==e||q(t,20)||(r[t]="0x"),t)));for(const e in r)r[e]=await s(e);return e.verifyingContract&&r[e.verifyingContract]&&(e.verifyingContract=r[e.verifyingContract]),{domain:e,value:n=i.visit(n,((e,t)=>"address"===e&&r[t]?r[t]:t))}}static getPayload(e,t,n){ss.hashDomain(e);const s={},r=[];Yn.forEach((t=>{const n=e[t];null!=n&&(s[t]=Xn[t](n),r.push({name:t,type:Qn[t]}))}));const i=ss.from(t);t=i.types;const a=Object.assign({},t);return D(null==a.EIP712Domain,"types must not contain EIP712Domain type","types.EIP712Domain",t),a.EIP712Domain=r,i.encode(n),{types:a,domain:s,primaryType:i.primaryType,message:i.visit(n,((e,t)=>{if(e.match(/^bytes(\d*)/))return K(z(t));if(e.match(/^u?int/))return oe(t).toString();switch(e){case"address":return t.toLowerCase();case"bool":return!!t;case"string":return D("string"==typeof t,"invalid string","value",t),t}D(!1,"unsupported type","type",e)}))}}}function rs(e,t){return{address:pt(e),storageKeys:t.map(((e,t)=>(D(q(e,32),"invalid slot",`storageKeys[${t}]`,e),e.toLowerCase())))}}function is(e){if(Array.isArray(e))return e.map(((t,n)=>Array.isArray(t)?(D(2===t.length,"invalid slot set",`value[${n}]`,t),rs(t[0],t[1])):(D(null!=t&&"object"==typeof t,"invalid address-slot set","value",e),rs(t.address,t.storageKeys))));D(null!=e&&"object"==typeof e,"invalid access list","value",e);const t=Object.keys(e).map((t=>{const n=e[t].reduce(((e,t)=>(e[t]=!0,e)),{});return rs(t,Object.keys(n).sort())}));return t.sort(((e,t)=>e.address.localeCompare(t.address))),t}function as(e){return async function(e,t){const n=e.url.split(":")[0].toLowerCase();let s;if(U("http"===n||"https"===n,`unsupported protocol ${n}`,"UNSUPPORTED_OPERATION",{info:{protocol:n},operation:"request"}),U("https"===n||!e.credentials||e.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"}),t){const e=new AbortController;s=e.signal,t.addListener((()=>{e.abort()}))}const r={method:e.method,headers:new Headers(Array.from(e)),body:e.body||void 0,signal:s},i=await fetch(e.url,r),a={};i.headers.forEach(((e,t)=>{a[t.toLowerCase()]=e}));const o=await i.arrayBuffer(),c=null==o?null:new Uint8Array(o);return{statusCode:i.status,statusMessage:i.statusText,headers:a,body:c}}}as();let os=as();const cs=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),ls=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let us=!1;async function hs(e,t){try{const t=e.match(cs);if(!t)throw new Error("invalid data");return new bs(200,"OK",{"content-type":t[1]||"text/plain"},t[2]?function(e){e=atob(e);const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return z(t)}(t[3]):Mt(t[3].replace(/%([0-9a-f][0-9a-f])/gi,((e,t)=>String.fromCharCode(parseInt(t,16))))))}catch(t){return new bs(599,"BAD REQUEST (invalid data: URI)",{},null,new ys(e))}}function ds(e){return async function(t,n){try{const n=t.match(ls);if(!n)throw new Error("invalid link");return new ys(`${e}${n[2]}`)}catch(e){return new bs(599,"BAD REQUEST (invalid IPFS URI)",{},null,new ys(t))}}}const ps={data:hs,ipfs:ds("https://gateway.ipfs.io/ipfs/")},fs=new WeakMap;class gs{#w;#v;constructor(e){this.#w=[],this.#v=!1,fs.set(e,(()=>{if(!this.#v){this.#v=!0;for(const e of this.#w)setTimeout((()=>{e()}),0);this.#w=[]}}))}addListener(e){U(!this.#v,"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),this.#w.push(e)}get cancelled(){return this.#v}checkSignal(){U(!this.cancelled,"cancelled","CANCELLED",{})}}function ms(e){if(null==e)throw new Error("missing signal; should not happen");return e.checkSignal(),e}class ys{#E;#A;#k;#_;#P;#x;#S;#I;#C;#T;#O;#N;#j;#L;#B;get url(){return this.#x}set url(e){this.#x=String(e)}get body(){return null==this.#S?null:new Uint8Array(this.#S)}set body(e){if(null==e)this.#S=void 0,this.#I=void 0;else if("string"==typeof e)this.#S=Mt(e),this.#I="text/plain";else if(e instanceof Uint8Array)this.#S=e,this.#I="application/octet-stream";else{if("object"!=typeof e)throw new Error("invalid body");this.#S=Mt(JSON.stringify(e)),this.#I="application/json"}}hasBody(){return null!=this.#S}get method(){return this.#_?this.#_:this.hasBody()?"POST":"GET"}set method(e){null==e&&(e=""),this.#_=String(e).toUpperCase()}get headers(){const e=Object.assign({},this.#k);return this.#C&&(e.authorization=`Basic ${function(e){const t=z(e);let n="";for(let e=0;e<t.length;e++)n+=String.fromCharCode(t[e]);return btoa(n)}(Mt(this.#C))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),null==e["content-type"]&&this.#I&&(e["content-type"]=this.#I),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,t){this.#k[String(e).toLowerCase()]=String(t)}clearHeaders(){this.#k={}}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let n=0;return{next:()=>{if(n<t.length){const s=t[n++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return this.#C||null}setCredentials(e,t){D(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),this.#C=`${e}:${t}`}get allowGzip(){return this.#A}set allowGzip(e){this.#A=!!e}get allowInsecureAuthentication(){return!!this.#E}set allowInsecureAuthentication(e){this.#E=!!e}get timeout(){return this.#P}set timeout(e){D(e>=0,"timeout must be non-zero","timeout",e),this.#P=e}get preflightFunc(){return this.#T||null}set preflightFunc(e){this.#T=e}get processFunc(){return this.#O||null}set processFunc(e){this.#O=e}get retryFunc(){return this.#N||null}set retryFunc(e){this.#N=e}get getUrlFunc(){return this.#B||os}set getUrlFunc(e){this.#B=e}constructor(e){this.#x=String(e),this.#E=!1,this.#A=!0,this.#k={},this.#_="",this.#P=3e5,this.#L={slotInterval:250,maxAttempts:12},this.#B=null}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${this.#S?K(this.#S):"null"}>`}setThrottleParams(e){null!=e.slotInterval&&(this.#L.slotInterval=e.slotInterval),null!=e.maxAttempts&&(this.#L.maxAttempts=e.maxAttempts)}async#R(e,t,n,s,r){if(e>=this.#L.maxAttempts)return r.makeServerError("exceeded maximum retry limit");U(ws()<=t,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:s}),n>0&&await function(e){return new Promise((t=>setTimeout(t,e)))}(n);let i=this.clone();const a=(i.url.split(":")[0]||"").toLowerCase();if(a in ps){const e=await ps[a](i.url,ms(s.#j));if(e instanceof bs){let t=e;if(this.processFunc){ms(s.#j);try{t=await this.processFunc(i,t)}catch(e){null!=e.throttle&&"number"==typeof e.stall||t.makeServerError("error in post-processing function",e).assertOk()}}return t}i=e}this.preflightFunc&&(i=await this.preflightFunc(i));const o=await this.getUrlFunc(i,ms(s.#j));let c=new bs(o.statusCode,o.statusMessage,o.headers,o.body,s);if(301===c.statusCode||302===c.statusCode){try{const n=c.headers.location||"";return i.redirect(n).#R(e+1,t,0,s,c)}catch(e){}return c}if(429===c.statusCode&&(null==this.retryFunc||await this.retryFunc(i,c,e))){const n=c.headers["retry-after"];let r=this.#L.slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return"string"==typeof n&&n.match(/^[1-9][0-9]*$/)&&(r=parseInt(n)),i.clone().#R(e+1,t,r,s,c)}if(this.processFunc){ms(s.#j);try{c=await this.processFunc(i,c)}catch(n){null!=n.throttle&&"number"==typeof n.stall||c.makeServerError("error in post-processing function",n).assertOk();let r=this.#L.slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return n.stall>=0&&(r=n.stall),i.clone().#R(e+1,t,r,s,c)}}return c}send(){return U(null==this.#j,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),this.#j=new gs(this),this.#R(0,ws()+this.timeout,0,this,new bs(0,"",{},null,this))}cancel(){U(null!=this.#j,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=fs.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const t=this.url.split(":")[0].toLowerCase(),n=e.split(":")[0].toLowerCase();U("GET"===this.method&&("https"!==t||"http"!==n)&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const s=new ys(e);return s.method="GET",s.allowGzip=this.allowGzip,s.timeout=this.timeout,s.#k=Object.assign({},this.#k),this.#S&&(s.#S=new Uint8Array(this.#S)),s.#I=this.#I,s}clone(){const e=new ys(this.url);return e.#_=this.#_,this.#S&&(e.#S=this.#S),e.#I=this.#I,e.#k=Object.assign({},this.#k),e.#C=this.#C,this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),e.#T=this.#T,e.#O=this.#O,e.#N=this.#N,e.#B=this.#B,e}static lockConfig(){us=!0}static getGateway(e){return ps[e.toLowerCase()]||null}static registerGateway(e,t){if("http"===(e=e.toLowerCase())||"https"===e)throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(us)throw new Error("gateways locked");ps[e]=t}static registerGetUrl(e){if(us)throw new Error("gateways locked");os=e}static createGetUrlFunc(e){return as()}static createDataGateway(){return hs}static createIpfsGatewayFunc(e){return ds(e)}}class bs{#M;#U;#k;#S;#D;#F;toString(){return`<FetchResponse status=${this.statusCode} body=${this.#S?K(this.#S):"null"}>`}get statusCode(){return this.#M}get statusMessage(){return this.#U}get headers(){return Object.assign({},this.#k)}get body(){return null==this.#S?null:new Uint8Array(this.#S)}get bodyText(){try{return null==this.#S?"":Ut(this.#S)}catch(e){U(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch(e){U(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let n=0;return{next:()=>{if(n<t.length){const s=t[n++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}constructor(e,t,n,s,r){this.#M=e,this.#U=t,this.#k=Object.keys(n).reduce(((e,t)=>(e[t.toLowerCase()]=String(n[t]),e)),{}),this.#S=null==s?null:new Uint8Array(s),this.#D=r||null,this.#F={message:""}}makeServerError(e,t){let n;n=e?`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:`CLIENT ESCALATED SERVER ERROR (${e=`${this.statusCode} ${this.statusMessage}`})`;const s=new bs(599,n,this.headers,this.body,this.#D||void 0);return s.#F={message:e,error:t},s}throwThrottleError(e,t){null==t?t=-1:D(Number.isInteger(t)&&t>=0,"invalid stall timeout","stall",t);const n=new Error(e||"throttling requests");throw j(n,{stall:t,throttle:!0}),n}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return null!=this.#S}get request(){return this.#D}ok(){return""===this.#F.message&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:t}=this.#F;""===e&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let n=null;this.request&&(n=this.request.url);let s=null;try{this.#S&&(s=Ut(this.#S))}catch(e){}U(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:t,info:{requestUrl:n,responseBody:s,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}}function ws(){return(new Date).getTime()}const vs="0x0000000000000000000000000000000000000000";class Es{fragment;name;signature;topic;args;constructor(e,t,n){const s=e.name,r=e.format();j(this,{fragment:e,name:s,signature:r,topic:t,args:n})}}class As{fragment;name;args;signature;selector;value;constructor(e,t,n,s){const r=e.name,i=e.format();j(this,{fragment:e,name:r,args:n,signature:i,selector:t,value:s})}}class ks{fragment;name;args;signature;selector;constructor(e,t,n){const s=e.name,r=e.format();j(this,{fragment:e,name:s,args:n,signature:r,selector:t})}}class _s{hash;_isIndexed;static isIndexed(e){return!(!e||!e._isIndexed)}constructor(e){j(this,{hash:e,_isIndexed:!0})}}const Ps={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},xs={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:e=>`reverted with reason string ${JSON.stringify(e)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:e=>{let t="unknown panic code";return e>=0&&e<=255&&Ps[e.toString()]&&(t=Ps[e.toString()]),`reverted with panic code 0x${e.toString(16)} (${t})`}}};class Ss{fragments;deploy;fallback;receive;#$;#G;#H;#z;constructor(e){let t=[];t="string"==typeof e?JSON.parse(e):e,this.#H=new Map,this.#$=new Map,this.#G=new Map;const n=[];for(const e of t)try{n.push(Pn.from(e))}catch(t){console.log(`[Warning] Invalid Fragment ${JSON.stringify(e)}:`,t.message)}j(this,{fragments:Object.freeze(n)});let s=null,r=!1;this.#z=this.getAbiCoder(),this.fragments.forEach(((e,t)=>{let n;switch(e.type){case"constructor":return this.deploy?void console.log("duplicate definition - constructor"):void j(this,{deploy:e});case"fallback":return void(0===e.inputs.length?r=!0:(D(!s||e.payable!==s.payable,"conflicting fallback fragments",`fragments[${t}]`,e),s=e,r=s.payable));case"function":n=this.#H;break;case"event":n=this.#G;break;case"error":n=this.#$;break;default:return}const i=e.format();n.has(i)||n.set(i,e)})),this.deploy||j(this,{deploy:Tn.from("constructor()")}),j(this,{fallback:s,receive:r})}format(e){const t=e?"minimal":"full";return this.fragments.map((e=>e.format(t)))}formatJson(){const e=this.fragments.map((e=>e.format("json")));return JSON.stringify(e.map((e=>JSON.parse(e))))}getAbiCoder(){return Dn.defaultAbiCoder()}#W(e,t,n){if(q(e)){const t=e.toLowerCase();for(const e of this.#H.values())if(t===e.selector)return e;return null}if(-1===e.indexOf("(")){const s=[];for(const[t,n]of this.#H)t.split("(")[0]===e&&s.push(n);if(t){const e=t.length>0?t[t.length-1]:null;let n=t.length,r=!0;bt.isTyped(e)&&"overrides"===e.type&&(r=!1,n--);for(let e=s.length-1;e>=0;e--){const t=s[e].inputs.length;t===n||r&&t===n-1||s.splice(e,1)}for(let e=s.length-1;e>=0;e--){const n=s[e].inputs;for(let r=0;r<t.length;r++)if(bt.isTyped(t[r])){if(r>=n.length){if("overrides"===t[r].type)continue;s.splice(e,1);break}if(t[r].type!==n[r].baseType){s.splice(e,1);break}}}}if(1===s.length&&t&&t.length!==s[0].inputs.length){const e=t[t.length-1];(null==e||Array.isArray(e)||"object"!=typeof e)&&s.splice(0,1)}if(0===s.length)return null;if(s.length>1&&n){D(!1,`ambiguous function description (i.e. matches ${s.map((e=>JSON.stringify(e.format()))).join(", ")})`,"key",e)}return s[0]}const s=this.#H.get(Nn.from(e).format());return s||null}getFunctionName(e){const t=this.#W(e,null,!1);return D(t,"no matching function","key",e),t.name}hasFunction(e){return!!this.#W(e,null,!1)}getFunction(e,t){return this.#W(e,t||null,!0)}forEachFunction(e){const t=Array.from(this.#H.keys());t.sort(((e,t)=>e.localeCompare(t)));for(let n=0;n<t.length;n++){const s=t[n];e(this.#H.get(s),n)}}#q(e,t,n){if(q(e)){const t=e.toLowerCase();for(const e of this.#G.values())if(t===e.topicHash)return e;return null}if(-1===e.indexOf("(")){const s=[];for(const[t,n]of this.#G)t.split("(")[0]===e&&s.push(n);if(t){for(let e=s.length-1;e>=0;e--)s[e].inputs.length<t.length&&s.splice(e,1);for(let e=s.length-1;e>=0;e--){const n=s[e].inputs;for(let r=0;r<t.length;r++)if(bt.isTyped(t[r])&&t[r].type!==n[r].baseType){s.splice(e,1);break}}}if(0===s.length)return null;if(s.length>1&&n){D(!1,`ambiguous event description (i.e. matches ${s.map((e=>JSON.stringify(e.format()))).join(", ")})`,"key",e)}return s[0]}const s=this.#G.get(Cn.from(e).format());return s||null}getEventName(e){const t=this.#q(e,null,!1);return D(t,"no matching event","key",e),t.name}hasEvent(e){return!!this.#q(e,null,!1)}getEvent(e,t){return this.#q(e,t||null,!0)}forEachEvent(e){const t=Array.from(this.#G.keys());t.sort(((e,t)=>e.localeCompare(t)));for(let n=0;n<t.length;n++){const s=t[n];e(this.#G.get(s),n)}}getError(e,t){if(q(e)){const t=e.toLowerCase();if(xs[t])return In.from(xs[t].signature);for(const e of this.#$.values())if(t===e.selector)return e;return null}if(-1===e.indexOf("(")){const t=[];for(const[n,s]of this.#$)n.split("(")[0]===e&&t.push(s);if(0===t.length)return"Error"===e?In.from("error Error(string)"):"Panic"===e?In.from("error Panic(uint256)"):null;if(t.length>1){D(!1,`ambiguous error description (i.e. ${t.map((e=>JSON.stringify(e.format()))).join(", ")})`,"name",e)}return t[0]}if("Error(string)"===(e=In.from(e).format()))return In.from("error Error(string)");if("Panic(uint256)"===e)return In.from("error Panic(uint256)");const n=this.#$.get(e);return n||null}forEachError(e){const t=Array.from(this.#$.keys());t.sort(((e,t)=>e.localeCompare(t)));for(let n=0;n<t.length;n++){const s=t[n];e(this.#$.get(s),n)}}_decodeParams(e,t){return this.#z.decode(e,t)}_encodeParams(e,t){return this.#z.encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){if("string"==typeof e){const t=this.getError(e);D(t,"unknown error","fragment",e),e=t}return D(Y(t,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",t),this._decodeParams(e.inputs,Y(t,4))}encodeErrorResult(e,t){if("string"==typeof e){const t=this.getError(e);D(t,"unknown error","fragment",e),e=t}return J([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionData(e,t){if("string"==typeof e){const t=this.getFunction(e);D(t,"unknown function","fragment",e),e=t}return D(Y(t,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",t),this._decodeParams(e.inputs,Y(t,4))}encodeFunctionData(e,t){if("string"==typeof e){const t=this.getFunction(e);D(t,"unknown function","fragment",e),e=t}return J([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionResult(e,t){if("string"==typeof e){const t=this.getFunction(e);D(t,"unknown function","fragment",e),e=t}let n="invalid length for result data";const s=W(t);if(s.length%32==0)try{return this.#z.decode(e.outputs,s)}catch(e){n="could not decode result data"}U(!1,n,"BAD_DATA",{value:K(s),info:{method:e.name,signature:e.format()}})}makeError(e,t){const n=z(e,"data"),s=Dn.getBuiltinCallException("call",t,n);if(s.message.startsWith("execution reverted (unknown custom error)")){const e=K(n.slice(0,4)),t=this.getError(e);if(t)try{const e=this.#z.decode(t.inputs,n.slice(4));s.revert={name:t.name,signature:t.format(),args:e},s.reason=s.revert.signature,s.message=`execution reverted: ${s.reason}`}catch(e){s.message="execution reverted (coult not decode custom error)"}}const r=this.parseTransaction(t);return r&&(s.invocation={method:r.name,signature:r.signature,args:r.args}),s}encodeFunctionResult(e,t){if("string"==typeof e){const t=this.getFunction(e);D(t,"unknown function","fragment",e),e=t}return K(this.#z.encode(e.outputs,t||[]))}encodeFilterTopics(e,t){if("string"==typeof e){const t=this.getEvent(e);D(t,"unknown event","eventFragment",e),e=t}U(t.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:t.length,expectedCount:e.inputs.length});const n=[];e.anonymous||n.push(e.topicHash);const s=(e,t)=>"string"===e.type?$t(t):"bytes"===e.type?it(K(t)):("bool"===e.type&&"boolean"==typeof t?t=t?"0x01":"0x00":e.type.match(/^u?int/)?t=de(t):e.type.match(/^bytes/)?t=ee(t,32):"address"===e.type&&this.#z.encode(["address"],[t]),X(K(t),32));for(t.forEach(((t,r)=>{const i=e.inputs[r];i.indexed?null==t?n.push(null):"array"===i.baseType||"tuple"===i.baseType?D(!1,"filtering with tuples or arrays not supported","contract."+i.name,t):Array.isArray(t)?n.push(t.map((e=>s(i,e)))):n.push(s(i,t)):D(null==t,"cannot filter non-indexed parameters; must be null","contract."+i.name,t)}));n.length&&null===n[n.length-1];)n.pop();return n}encodeEventLog(e,t){if("string"==typeof e){const t=this.getEvent(e);D(t,"unknown event","eventFragment",e),e=t}const n=[],s=[],r=[];return e.anonymous||n.push(e.topicHash),D(t.length===e.inputs.length,"event arguments/values mismatch","values",t),e.inputs.forEach(((e,i)=>{const a=t[i];if(e.indexed)if("string"===e.type)n.push($t(a));else if("bytes"===e.type)n.push(it(a));else{if("tuple"===e.baseType||"array"===e.baseType)throw new Error("not implemented");n.push(this.#z.encode([e.type],[a]))}else s.push(e),r.push(a)})),{data:this.#z.encode(s,r),topics:n}}decodeEventLog(e,t,n){if("string"==typeof e){const t=this.getEvent(e);D(t,"unknown event","eventFragment",e),e=t}if(null!=n&&!e.anonymous){const t=e.topicHash;D(q(n[0],32)&&n[0].toLowerCase()===t,"fragment/topic mismatch","topics[0]",n[0]),n=n.slice(1)}const s=[],r=[],i=[];e.inputs.forEach(((e,t)=>{e.indexed?"string"===e.type||"bytes"===e.type||"tuple"===e.baseType||"array"===e.baseType?(s.push(_n.from({type:"bytes32",name:e.name})),i.push(!0)):(s.push(e),i.push(!1)):(r.push(e),i.push(!1))}));const a=null!=n?this.#z.decode(s,J(n)):null,o=this.#z.decode(r,t,!0),c=[],l=[];let u=0,h=0;return e.inputs.forEach(((e,t)=>{let n=null;if(e.indexed)if(null==a)n=new _s(null);else if(i[t])n=new _s(a[h++]);else try{n=a[h++]}catch(e){n=e}else try{n=o[u++]}catch(e){n=e}c.push(n),l.push(e.name||null)})),ve.fromItems(c,l)}parseTransaction(e){const t=z(e.data,"tx.data"),n=oe(null!=e.value?e.value:0,"tx.value"),s=this.getFunction(K(t.slice(0,4)));if(!s)return null;const r=this.#z.decode(s.inputs,t.slice(4));return new As(s,s.selector,r,n)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new Es(t,t.topicHash,this.decodeEventLog(t,e.data,e.topics))}parseError(e){const t=K(e),n=this.getError(Y(t,0,4));if(!n)return null;const s=this.#z.decode(n.inputs,Y(t,4));return new ks(n,n.selector,s)}static from(e){return e instanceof Ss?e:"string"==typeof e?new Ss(JSON.parse(e)):"function"==typeof e.format?new Ss(e.format("json")):new Ss(e)}}const Is=BigInt(0);function Cs(e){return null==e?null:e}function Ts(e){return null==e?null:e.toString()}class Os{gasPrice;maxFeePerGas;maxPriorityFeePerGas;constructor(e,t,n){j(this,{gasPrice:Cs(e),maxFeePerGas:Cs(t),maxPriorityFeePerGas:Cs(n)})}toJSON(){const{gasPrice:e,maxFeePerGas:t,maxPriorityFeePerGas:n}=this;return{_type:"FeeData",gasPrice:Ts(e),maxFeePerGas:Ts(t),maxPriorityFeePerGas:Ts(n)}}}function Ns(e){const t={};e.to&&(t.to=e.to),e.from&&(t.from=e.from),e.data&&(t.data=K(e.data));const n="chainId,gasLimit,gasPrice,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const s of n)s in e&&null!=e[s]&&(t[s]=oe(e[s],`request.${s}`));const s="type,nonce".split(/,/);for(const n of s)n in e&&null!=e[n]&&(t[n]=he(e[n],`request.${n}`));return e.accessList&&(t.accessList=is(e.accessList)),"blockTag"in e&&(t.blockTag=e.blockTag),"enableCcipRead"in e&&(t.enableCcipRead=!!e.enableCcipRead),"customData"in e&&(t.customData=e.customData),t}class js{provider;number;hash;timestamp;parentHash;parentBeaconBlockRoot;nonce;difficulty;gasLimit;gasUsed;stateRoot;receiptsRoot;blobGasUsed;excessBlobGas;miner;extraData;baseFeePerGas;#V;constructor(e,t){this.#V=e.transactions.map((e=>"string"!=typeof e?new Rs(e,t):e)),j(this,{provider:t,hash:Cs(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,extraData:e.extraData,baseFeePerGas:Cs(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return this.#V.map((e=>"string"==typeof e?e:e.hash))}get prefetchedTransactions(){const e=this.#V.slice();return 0===e.length?[]:(U("object"==typeof e[0],"transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:t,extraData:n,gasLimit:s,gasUsed:r,hash:i,miner:a,nonce:o,number:c,parentHash:l,parentBeaconBlockRoot:u,stateRoot:h,receiptsRoot:d,timestamp:p,transactions:f}=this;return{_type:"Block",baseFeePerGas:Ts(e),difficulty:Ts(t),extraData:n,gasLimit:Ts(s),gasUsed:Ts(r),blobGasUsed:Ts(this.blobGasUsed),excessBlobGas:Ts(this.excessBlobGas),hash:i,miner:a,nonce:o,number:c,parentHash:l,timestamp:p,parentBeaconBlockRoot:u,stateRoot:h,receiptsRoot:d,transactions:f}}[Symbol.iterator](){let e=0;const t=this.transactions;return{next:()=>e<this.length?{value:t[e++],done:!1}:{value:void 0,done:!0}}}get length(){return this.#V.length}get date(){return null==this.timestamp?null:new Date(1e3*this.timestamp)}async getTransaction(e){let t;if("number"==typeof e)t=this.#V[e];else{const n=e.toLowerCase();for(const e of this.#V){if("string"==typeof e){if(e!==n)continue;t=e;break}if(e.hash!==n){t=e;break}}}if(null==t)throw new Error("no such tx");return"string"==typeof t?await this.provider.getTransaction(t):t}getPrefetchedTransaction(e){const t=this.prefetchedTransactions;if("number"==typeof e)return t[e];e=e.toLowerCase();for(const n of t)if(n.hash===e)return n;D(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return{orphan:"drop-block",hash:(e=this).hash,number:e.number};var e}}class Ls{provider;transactionHash;blockHash;blockNumber;removed;address;data;topics;index;transactionIndex;constructor(e,t){this.provider=t;const n=Object.freeze(e.topics.slice());j(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:n,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:t,blockNumber:n,data:s,index:r,removed:i,topics:a,transactionHash:o,transactionIndex:c}=this;return{_type:"log",address:e,blockHash:t,blockNumber:n,data:s,index:r,removed:i,topics:a,transactionHash:o,transactionIndex:c}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return U(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return U(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return U(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return{orphan:"drop-log",log:{transactionHash:(e=this).transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,address:e.address,data:e.data,topics:Object.freeze(e.topics.slice()),index:e.index}};var e}}class Bs{provider;to;from;contractAddress;hash;index;blockHash;blockNumber;logsBloom;gasUsed;blobGasUsed;cumulativeGasUsed;gasPrice;blobGasPrice;type;status;root;#K;constructor(e,t){this.#K=Object.freeze(e.logs.map((e=>new Ls(e,t))));let n=Is;null!=e.effectiveGasPrice?n=e.effectiveGasPrice:null!=e.gasPrice&&(n=e.gasPrice),j(this,{provider:t,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:n,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return this.#K}toJSON(){const{to:e,from:t,contractAddress:n,hash:s,index:r,blockHash:i,blockNumber:a,logsBloom:o,logs:c,status:l,root:u}=this;return{_type:"TransactionReceipt",blockHash:i,blockNumber:a,contractAddress:n,cumulativeGasUsed:Ts(this.cumulativeGasUsed),from:t,gasPrice:Ts(this.gasPrice),blobGasUsed:Ts(this.blobGasUsed),blobGasPrice:Ts(this.blobGasPrice),gasUsed:Ts(this.gasUsed),hash:s,index:r,logs:c,logsBloom:o,root:u,status:l,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(null==e)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(null==e)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return Us(this)}reorderedEvent(e){return U(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),Ms(this,e)}}class Rs{provider;blockNumber;blockHash;index;hash;type;to;from;nonce;gasLimit;gasPrice;maxPriorityFeePerGas;maxFeePerGas;maxFeePerBlobGas;data;value;chainId;signature;accessList;blobVersionedHashes;#J;constructor(e,t){this.provider=t,this.blockNumber=null!=e.blockNumber?e.blockNumber:null,this.blockHash=null!=e.blockHash?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=null!=e.maxPriorityFeePerGas?e.maxPriorityFeePerGas:null,this.maxFeePerGas=null!=e.maxFeePerGas?e.maxFeePerGas:null,this.maxFeePerBlobGas=null!=e.maxFeePerBlobGas?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=null!=e.accessList?e.accessList:null,this.blobVersionedHashes=null!=e.blobVersionedHashes?e.blobVersionedHashes:null,this.#J=-1}toJSON(){const{blockNumber:e,blockHash:t,index:n,hash:s,type:r,to:i,from:a,nonce:o,data:c,signature:l,accessList:u,blobVersionedHashes:h}=this;return{_type:"TransactionResponse",accessList:u,blockNumber:e,blockHash:t,blobVersionedHashes:h,chainId:Ts(this.chainId),data:c,from:a,gasLimit:Ts(this.gasLimit),gasPrice:Ts(this.gasPrice),hash:s,maxFeePerGas:Ts(this.maxFeePerGas),maxPriorityFeePerGas:Ts(this.maxPriorityFeePerGas),maxFeePerBlobGas:Ts(this.maxFeePerBlobGas),nonce:o,signature:l,to:i,index:n,type:r,value:Ts(this.value)}}async getBlock(){let e=this.blockNumber;if(null==e){const t=await this.getTransaction();t&&(e=t.blockNumber)}if(null==e)return null;const t=this.provider.getBlock(e);if(null==t)throw new Error("TODO");return t}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(null==this.blockNumber){const{tx:e,blockNumber:t}=await N({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return null==e||null==e.blockNumber?0:t-e.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,t){const n=null==e?1:e,s=null==t?0:t;let r=this.#J,i=-1,a=-1===r;const o=async()=>{if(a)return null;const{blockNumber:e,nonce:t}=await N({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(t<this.nonce)return void(r=e);if(a)return null;const s=await this.getTransaction();if(!s||null==s.blockNumber)for(-1===i&&(i=r-3,i<this.#J&&(i=this.#J));i<=e;){if(a)return null;const t=await this.provider.getBlock(i,!0);if(null==t)return;for(const e of t)if(e===this.hash)return;for(let s=0;s<t.length;s++){const i=await t.getTransaction(s);if(i.from===this.from&&i.nonce===this.nonce){if(a)return null;const t=await this.provider.getTransactionReceipt(i.hash);if(null==t)return;if(e-t.blockNumber+1<n)return;let s="replaced";i.data===this.data&&i.to===this.to&&i.value===this.value?s="repriced":"0x"===i.data&&i.from===i.to&&i.value===Is&&(s="cancelled"),U(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:"replaced"===s||"cancelled"===s,reason:s,replacement:i.replaceableTransaction(r),hash:i.hash,receipt:t})}}i++}},c=e=>{if(null==e||0!==e.status)return e;U(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:e.to,from:e.from,data:""},receipt:e})},l=await this.provider.getTransactionReceipt(this.hash);if(0===n)return c(l);if(l){if(await l.confirmations()>=n)return c(l)}else if(await o(),0===n)return null;const u=new Promise(((e,t)=>{const i=[],l=()=>{i.forEach((e=>e()))};if(i.push((()=>{a=!0})),s>0){const e=setTimeout((()=>{l(),t(M("wait for transaction timeout","TIMEOUT"))}),s);i.push((()=>{clearTimeout(e)}))}const u=async s=>{if(await s.confirmations()>=n){l();try{e(c(s))}catch(e){t(e)}}};if(i.push((()=>{this.provider.off(this.hash,u)})),this.provider.on(this.hash,u),r>=0){const e=async()=>{try{await o()}catch(e){if(B(e,"TRANSACTION_REPLACED"))return l(),void t(e)}a||this.provider.once("block",e)};i.push((()=>{this.provider.off("block",e)})),this.provider.once("block",e)}}));return await u}isMined(){return null!=this.blockHash}isLegacy(){return 0===this.type}isBerlin(){return 1===this.type}isLondon(){return 2===this.type}isCancun(){return 3===this.type}removedEvent(){return U(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Us(this)}reorderedEvent(e){return U(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),U(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Ms(this,e)}replaceableTransaction(e){D(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const t=new Rs(this,this.provider);return t.#J=e,t}}function Ms(e,t){return{orphan:"reorder-transaction",tx:e,other:t}}function Us(e){return{orphan:"drop-transaction",tx:e}}class Ds{filter;emitter;#Q;constructor(e,t,n){this.#Q=t,j(this,{emitter:e,filter:n})}async removeListener(){null!=this.#Q&&await this.emitter.off(this.filter,this.#Q)}}class Fs extends Ls{interface;fragment;args;constructor(e,t,n){super(e,e.provider);j(this,{args:t.decodeEventLog(n,e.data,e.topics),fragment:n,interface:t})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class $s extends Ls{error;constructor(e,t){super(e,e.provider),j(this,{error:t})}}class Gs extends Bs{#Y;constructor(e,t,n){super(n,t),this.#Y=e}get logs(){return super.logs.map((e=>{const t=e.topics.length?this.#Y.getEvent(e.topics[0]):null;if(t)try{return new Fs(e,this.#Y,t)}catch(t){return new $s(e,t)}return e}))}}class Hs extends Rs{#Y;constructor(e,t,n){super(n,t),this.#Y=e}async wait(e,t){const n=await super.wait(e,t);return null==n?null:new Gs(this.#Y,this.provider,n)}}class zs extends Ds{log;constructor(e,t,n,s){super(e,t,n),j(this,{log:s})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class Ws extends zs{constructor(e,t,n,s,r){super(e,t,n,new Fs(r,e.interface,s));j(this,{args:e.interface.decodeEventLog(s,this.log.data,this.log.topics),fragment:s})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const qs=BigInt(0);function Vs(e){return e&&"function"==typeof e.call}function Ks(e){return e&&"function"==typeof e.estimateGas}function Js(e){return e&&"function"==typeof e.resolveName}function Qs(e){return e&&"function"==typeof e.sendTransaction}function Ys(e){if(null!=e){if(Js(e))return e;if(e.provider)return e.provider}}class Zs{#Z;fragment;constructor(e,t,n){if(j(this,{fragment:t}),t.inputs.length<n.length)throw new Error("too many arguments");const s=Xs(e.runner,"resolveName"),r=Js(s)?s:null;this.#Z=async function(){const s=await Promise.all(t.inputs.map(((e,t)=>null==n[t]?null:e.walkAsync(n[t],((e,t)=>"address"===e?Array.isArray(t)?Promise.all(t.map((e=>Gn(e,r)))):Gn(t,r):t)))));return e.interface.encodeFilterTopics(t,s)}()}getTopicFilter(){return this.#Z}}function Xs(e,t){return null==e?null:"function"==typeof e[t]?e:e.provider&&"function"==typeof e.provider[t]?e.provider:null}function er(e){return null==e?null:e.provider||null}async function tr(e,t){const n=bt.dereference(e,"overrides");D("object"==typeof n,"invalid overrides parameter","overrides",e);const s=Ns(n);return D(null==s.to||(t||[]).indexOf("to")>=0,"cannot override to","overrides.to",s.to),D(null==s.data||(t||[]).indexOf("data")>=0,"cannot override data","overrides.data",s.data),s.from&&(s.from=s.from),s}function nr(e){const t=async function(t){const n=await tr(t,["data"]);n.to=await e.getAddress(),n.from&&(n.from=await Gn(n.from,Ys(e.runner)));const s=e.interface,r=oe(n.value||qs,"overrides.value")===qs,i="0x"===(n.data||"0x");!s.fallback||s.fallback.payable||!s.receive||i||r||D(!1,"cannot send data to receive or send value to non-payable fallback","overrides",t),D(s.fallback||i,"cannot send data to receive-only contract","overrides.data",n.data);return D(s.receive||s.fallback&&s.fallback.payable||r,"cannot send value to non-payable fallback","overrides.value",n.value),D(s.fallback||i,"cannot send data to receive-only contract","overrides.data",n.data),n},n=async function(n){const s=e.runner;U(Qs(s),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const r=await s.sendTransaction(await t(n)),i=er(e.runner);return new Hs(e.interface,i,r)},s=async e=>await n(e);return j(s,{_contract:e,estimateGas:async function(n){const s=Xs(e.runner,"estimateGas");return U(Ks(s),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await s.estimateGas(await t(n))},populateTransaction:t,send:n,staticCall:async function(n){const s=Xs(e.runner,"call");U(Vs(s),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const r=await t(n);try{return await s.call(r)}catch(t){if(R(t)&&t.data)throw e.interface.makeError(t.data,r);throw t}}}),s}function sr(e,t){const n=function(...n){const s=e.interface.getFunction(t,n);return U(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:n}}),s},s=async function(...t){const s=n(...t);let r={};if(s.inputs.length+1===t.length&&(r=await tr(t.pop()),r.from&&(r.from=await Gn(r.from,Ys(e.runner)))),s.inputs.length!==t.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const i=await async function(e,t,n){const s=Xs(e,"resolveName"),r=Js(s)?s:null;return await Promise.all(t.map(((e,t)=>e.walkAsync(n[t],((e,t)=>(t=bt.dereference(t,e),"address"===e?Gn(t,r):t))))))}(e.runner,s.inputs,t);return Object.assign({},r,await N({to:e.getAddress(),data:e.interface.encodeFunctionData(s,i)}))},r=async function(...e){const t=await a(...e);return 1===t.length?t[0]:t},i=async function(...t){const n=e.runner;U(Qs(n),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const r=await n.sendTransaction(await s(...t)),i=er(e.runner);return new Hs(e.interface,i,r)},a=async function(...t){const r=Xs(e.runner,"call");U(Vs(r),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const i=await s(...t);let a="0x";try{a=await r.call(i)}catch(t){if(R(t)&&t.data)throw e.interface.makeError(t.data,i);throw t}const o=n(...t);return e.interface.decodeFunctionResult(o,a)},o=async(...e)=>n(...e).constant?await r(...e):await i(...e);return j(o,{name:e.interface.getFunctionName(t),_contract:e,_key:t,getFragment:n,estimateGas:async function(...t){const n=Xs(e.runner,"estimateGas");return U(Ks(n),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await n.estimateGas(await s(...t))},populateTransaction:s,send:i,staticCall:r,staticCallResult:a}),Object.defineProperty(o,"fragment",{configurable:!1,enumerable:!0,get:()=>{const n=e.interface.getFunction(t);return U(n,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),n}}),o}const rr=Symbol.for("_ethersInternal_contract"),ir=new WeakMap;function ar(e){return ir.get(e[rr])}async function or(e,t){let n,s=null;if(Array.isArray(t)){const s=function(t){if(q(t,32))return t;const n=e.interface.getEvent(t);return D(n,"unknown fragment","name",t),n.topicHash};n=t.map((e=>null==e?null:Array.isArray(e)?e.map(s):s(e)))}else"*"===t?n=[null]:"string"==typeof t?q(t,32)?n=[t]:(s=e.interface.getEvent(t),D(s,"unknown fragment","event",t),n=[s.topicHash]):(r=t)&&"object"==typeof r&&"getTopicFilter"in r&&"function"==typeof r.getTopicFilter&&r.fragment?n=await t.getTopicFilter():"fragment"in t?(s=t.fragment,n=[s.topicHash]):D(!1,"unknown event name","event",t);var r;n=n.map((e=>{if(null==e)return null;if(Array.isArray(e)){const t=Array.from(new Set(e.map((e=>e.toLowerCase()))).values());return 1===t.length?t[0]:(t.sort(),t)}return e.toLowerCase()}));return{fragment:s,tag:n.map((e=>null==e?"null":Array.isArray(e)?e.join("|"):e)).join("&"),topics:n}}async function cr(e,t){const{subs:n}=ar(e);return n.get((await or(e,t)).tag)||null}async function lr(e,t,n){const s=er(e.runner);U(s,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:t});const{fragment:r,tag:i,topics:a}=await or(e,n),{addr:o,subs:c}=ar(e);let l=c.get(i);if(!l){const t={address:o||e,topics:a},u=t=>{let s=r;if(null==s)try{s=e.interface.getEvent(t.topics[0])}catch(e){}if(s){const i=s,a=r?e.interface.decodeEventLog(r,t.data,t.topics):[];hr(e,n,a,(s=>new Ws(e,s,n,i,t)))}else hr(e,n,[],(s=>new zs(e,s,n,t)))};let h=[];l={tag:i,listeners:[],start:()=>{h.length||h.push(s.on(t,u))},stop:async()=>{if(0==h.length)return;let e=h;h=[],await Promise.all(e),s.off(t,u)}},c.set(i,l)}return l}let ur=Promise.resolve();async function hr(e,t,n,s){try{await ur}catch(e){}const r=async function(e,t,n,s){await ur;const r=await cr(e,t);if(!r)return!1;const i=r.listeners.length;return r.listeners=r.listeners.filter((({listener:t,once:r})=>{const i=Array.from(n);s&&i.push(s(r?null:t));try{t.call(e,...i)}catch(e){}return!r})),0===r.listeners.length&&(r.stop(),ar(e).subs.delete(r.tag)),i>0}(e,t,n,s);return ur=r,await r}const dr=["then"];class pr{target;interface;runner;filters;[rr];fallback;constructor(e,t,n,s){D("string"==typeof e||Fn(e),"invalid value for Contract target","target",e),null==n&&(n=null);const r=Ss.from(t);let i;j(this,{target:e,runner:n,interface:r}),Object.defineProperty(this,rr,{value:{}});let a=null,o=null;if(s){const e=er(n);o=new Hs(this.interface,e,s)}let c=new Map;if("string"==typeof e)if(q(e))a=e,i=Promise.resolve(e);else{const t=Xs(n,"resolveName");if(!Js(t))throw M("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});i=t.resolveName(e).then((t=>{if(null==t)throw M("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return ar(this).addr=t,t}))}else i=e.getAddress().then((e=>{if(null==e)throw new Error("TODO");return ar(this).addr=e,e}));!function(e,t){ir.set(e[rr],t)}(this,{addrPromise:i,addr:a,deployTx:o,subs:c});const l=new Proxy({},{get:(e,t,n)=>{if("symbol"==typeof t||dr.indexOf(t)>=0)return Reflect.get(e,t,n);try{return this.getEvent(t)}catch(e){if(!B(e,"INVALID_ARGUMENT")||"key"!==e.argument)throw e}},has:(e,t)=>dr.indexOf(t)>=0?Reflect.has(e,t):Reflect.has(e,t)||this.interface.hasEvent(String(t))});return j(this,{filters:l}),j(this,{fallback:r.receive||r.fallback?nr(this):null}),new Proxy(this,{get:(e,t,n)=>{if("symbol"==typeof t||t in e||dr.indexOf(t)>=0)return Reflect.get(e,t,n);try{return e.getFunction(t)}catch(e){if(!B(e,"INVALID_ARGUMENT")||"key"!==e.argument)throw e}},has:(e,t)=>"symbol"==typeof t||t in e||dr.indexOf(t)>=0?Reflect.has(e,t):e.interface.hasFunction(t)})}connect(e){return new pr(this.target,this.interface,e)}attach(e){return new pr(e,this.interface,this.runner)}async getAddress(){return await ar(this).addrPromise}async getDeployedCode(){const e=er(this.runner);U(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const t=await e.getCode(await this.getAddress());return"0x"===t?null:t}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(null!=await this.getDeployedCode())return this;const t=er(this.runner);return U(null!=t,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise(((e,n)=>{const s=async()=>{try{if(null!=await this.getDeployedCode())return e(this);t.once("block",s)}catch(e){n(e)}};s()}))}deploymentTransaction(){return ar(this).deployTx}getFunction(e){"string"!=typeof e&&(e=e.format());return sr(this,e)}getEvent(e){return"string"!=typeof e&&(e=e.format()),function(e,t){const n=function(...n){const s=e.interface.getEvent(t,n);return U(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:n}}),s},s=function(...t){return new Zs(e,n(...t),t)};return j(s,{name:e.interface.getEventName(t),_contract:e,_key:t,getFragment:n}),Object.defineProperty(s,"fragment",{configurable:!1,enumerable:!0,get:()=>{const n=e.interface.getEvent(t);return U(n,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),n}}),s}(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,t,n){null==t&&(t=0),null==n&&(n="latest");const{addr:s,addrPromise:r}=ar(this),i=s||await r,{fragment:a,topics:o}=await or(this,e),c={address:i,topics:o,fromBlock:t,toBlock:n},l=er(this.runner);return U(l,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await l.getLogs(c)).map((e=>{let t=a;if(null==t)try{t=this.interface.getEvent(e.topics[0])}catch(e){}if(t)try{return new Fs(e,this.interface,t)}catch(t){return new $s(e,t)}return new Ls(e,l)}))}async on(e,t){const n=await lr(this,"on",e);return n.listeners.push({listener:t,once:!1}),n.start(),this}async once(e,t){const n=await lr(this,"once",e);return n.listeners.push({listener:t,once:!0}),n.start(),this}async emit(e,...t){return await hr(this,e,t,null)}async listenerCount(e){if(e){const t=await cr(this,e);return t?t.listeners.length:0}const{subs:t}=ar(this);let n=0;for(const{listeners:e}of t.values())n+=e.length;return n}async listeners(e){if(e){const t=await cr(this,e);return t?t.listeners.map((({listener:e})=>e)):[]}const{subs:t}=ar(this);let n=[];for(const{listeners:e}of t.values())n=n.concat(e.map((({listener:e})=>e)));return n}async off(e,t){const n=await cr(this,e);if(!n)return this;if(t){const e=n.listeners.map((({listener:e})=>e)).indexOf(t);e>=0&&n.listeners.splice(e,1)}return null!=t&&0!==n.listeners.length||(n.stop(),ar(this).subs.delete(n.tag)),this}async removeAllListeners(e){if(e){const t=await cr(this,e);if(!t)return this;t.stop(),ar(this).subs.delete(t.tag)}else{const{subs:e}=ar(this);for(const{tag:t,stop:n}of e.values())n(),e.delete(t)}return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return await this.off(e,t)}static buildClass(e){return class extends pr{constructor(t,n=null){super(t,e,n)}}}static from(e,t,n){null==n&&(n=null);return new this(e,t,n)}}class fr extends(function(){return pr}()){}var gr="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const mr=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),yr=4;function br(e){return function(e){let t=0;return()=>e[t++]}(function(e){let t=0;function n(){return e[t++]<<8|e[t++]}let s=n(),r=1,i=[0,1];for(let e=1;e<s;e++)i.push(r+=n());let a=n(),o=t;t+=a;let c=0,l=0;function u(){return 0==c&&(l=l<<8|e[t++],c=8),l>>--c&1}const h=2**31,d=h>>>1,p=h-1;let f=0;for(let e=0;e<31;e++)f=f<<1|u();let g=[],m=0,y=h;for(;;){let e=Math.floor(((f-m+1)*r-1)/y),t=0,n=s;for(;n-t>1;){let s=t+n>>>1;e<i[s]?n=s:t=s}if(0==t)break;g.push(t);let a=m+Math.floor(y*i[t]/r),o=m+Math.floor(y*i[t+1]/r)-1;for(;0==((a^o)&d);)f=f<<1&p|u(),a=a<<1&p,o=o<<1&p|1;for(;a&~o&536870912;)f=f&d|f<<1&p>>>1|u(),a=a<<1^d,o=(o^d)<<1|d|1;m=a,y=1+o-a}let b=s-4;return g.map((t=>{switch(t-b){case 3:return b+65792+(e[o++]<<16|e[o++]<<8|e[o++]);case 2:return b+256+(e[o++]<<8|e[o++]);case 1:return b+e[o++];default:return t-1}}))}(function(e){let t=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach(((e,n)=>t[e.charCodeAt(0)]=n));let n=e.length,s=new Uint8Array(6*n>>3);for(let r=0,i=0,a=0,o=0;r<n;r++)o=o<<6|t[e.charCodeAt(r)],a+=6,a>=8&&(s[i++]=o>>(a-=8));return s}(e)))}function wr(e){return 1&e?~e>>1:e>>1}function vr(e,t){let n=Array(e);for(let s=0,r=0;s<e;s++)n[s]=r+=wr(t());return n}function Er(e,t=0){let n=[];for(;;){let s=e(),r=e();if(!r)break;t+=s;for(let e=0;e<r;e++)n.push(t+e);t+=r+1}return n}function Ar(e){return _r((()=>{let t=Er(e);if(t.length)return t}))}function kr(e){let t=[];for(;;){let n=e();if(0==n)break;t.push(xr(n,e))}for(;;){let n=e()-1;if(n<0)break;t.push(Sr(n,e))}return t.flat()}function _r(e){let t=[];for(;;){let n=e(t.length);if(!n)break;t.push(n)}return t}function Pr(e,t,n){let s=Array(e).fill().map((()=>[]));for(let r=0;r<t;r++)vr(e,n).forEach(((e,t)=>s[t].push(e)));return s}function xr(e,t){let n=1+t(),s=t(),r=_r(t);return Pr(r.length,1+e,t).flatMap(((e,t)=>{let[i,...a]=e;return Array(r[t]).fill().map(((e,t)=>{let r=t*s;return[i+t*n,a.map((e=>e+r))]}))}))}function Sr(e,t){return Pr(1+t(),1+e,t).map((e=>[e[0],e.slice(1)]))}function Ir(e){return`{${function(e){return e.toString(16).toUpperCase().padStart(2,"0")}(e)}}`}function Cr(e){let t=[];for(let n=0,s=e.length;n<s;){let s=e.codePointAt(n);n+=s<65536?1:2,t.push(s)}return t}function Tr(e){let t=e.length;if(t<4096)return String.fromCodePoint(...e);let n=[];for(let s=0;s<t;)n.push(String.fromCodePoint(...e.slice(s,s+=4096)));return n.join("")}function Or(e,t){let n=e.length,s=n-t.length;for(let r=0;0==s&&r<n;r++)s=e[r]-t[r];return s}var Nr="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const jr=44032,Lr=4352,Br=4449,Rr=4519,Mr=28,Ur=21*Mr,Dr=jr+19*Ur,Fr=Lr+19,$r=Br+21,Gr=Rr+Mr;function Hr(e){return e>>24&255}function zr(e){return 16777215&e}let Wr,qr,Vr,Kr;function Jr(e){return e>=jr&&e<Dr}function Qr(e,t){if(e>=Lr&&e<Fr&&t>=Br&&t<$r)return jr+(e-Lr)*Ur+(t-Br)*Mr;if(Jr(e)&&t>Rr&&t<Gr&&(e-jr)%Mr==0)return e+(t-Rr);{let n=Kr.get(e);return n&&(n=n.get(t),n)?n:-1}}function Yr(e){Wr||function(){let e=br(Nr);Wr=new Map(Ar(e).flatMap(((e,t)=>e.map((e=>[e,t+1<<24]))))),qr=new Set(Er(e)),Vr=new Map,Kr=new Map;for(let[t,n]of kr(e)){if(!qr.has(t)&&2==n.length){let[e,s]=n,r=Kr.get(e);r||(r=new Map,Kr.set(e,r)),r.set(s,t)}Vr.set(t,n.reverse())}}();let t=[],n=[],s=!1;function r(e){let n=Wr.get(e);n&&(s=!0,e|=n),t.push(e)}for(let s of e)for(;;){if(s<128)t.push(s);else if(Jr(s)){let e=s-jr,t=e%Ur/Mr|0,n=e%Mr;r(Lr+(e/Ur|0)),r(Br+t),n>0&&r(Rr+n)}else{let e=Vr.get(s);e?n.push(...e):r(s)}if(!n.length)break;s=n.pop()}if(s&&t.length>1){let e=Hr(t[0]);for(let n=1;n<t.length;n++){let s=Hr(t[n]);if(0==s||e<=s){e=s;continue}let r=n-1;for(;;){let n=t[r+1];if(t[r+1]=t[r],t[r]=n,!r)break;if(e=Hr(t[--r]),e<=s)break}e=Hr(t[n])}}return t}function Zr(e){return Yr(e).map(zr)}function Xr(e){return function(e){let t=[],n=[],s=-1,r=0;for(let i of e){let e=Hr(i),a=zr(i);if(-1==s)0==e?s=a:t.push(a);else if(r>0&&r>=e)0==e?(t.push(s,...n),n.length=0,s=a):n.push(a),r=e;else{let i=Qr(s,a);i>=0?s=i:0==r&&0==e?(t.push(s),s=a):(n.push(a),r=e)}}return s>=0&&t.push(s,...n),t}(Yr(e))}const ei=45,ti=".",ni=65039,si=1,ri=e=>Array.from(e);function ii(e,t){return e.P.has(t)||e.Q.has(t)}class ai extends Array{get is_emoji(){return!0}}let oi,ci,li,ui,hi,di,pi,fi,gi,mi,yi,bi;function wi(){if(oi)return;let e=br(gr);const t=()=>Er(e),n=()=>new Set(t()),s=(e,t)=>t.forEach((t=>e.add(t)));oi=new Map(kr(e)),ci=n(),li=t(),ui=new Set(t().map((e=>li[e]))),li=new Set(li),hi=n(),di=n();let r=Ar(e),i=e();const a=()=>{let e=new Set;return t().forEach((t=>s(e,r[t]))),s(e,t()),e};pi=_r((t=>{let n=_r(e).map((e=>e+96));if(n.length){let s=t>=i;return n[0]-=32,n=Tr(n),s&&(n=`Restricted[${n}]`),{N:n,P:a(),Q:a(),M:!e(),R:s}}})),fi=n(),gi=new Map;let o=t().concat(ri(fi)).sort(((e,t)=>e-t));o.forEach(((t,n)=>{let s=e(),r=o[n]=s?o[n-s]:{V:[],M:new Map};r.V.push(t),fi.has(t)||gi.set(t,r)}));for(let{V:e,M:t}of new Set(gi.values())){let n=[];for(let t of e){let e=pi.filter((e=>ii(e,t))),r=n.find((({G:t})=>e.some((e=>t.has(e)))));r||(r={G:new Set,V:[]},n.push(r)),r.V.push(t),s(r.G,e)}let r=n.flatMap((e=>ri(e.G)));for(let{G:e,V:s}of n){let n=new Set(r.filter((t=>!e.has(t))));for(let e of s)t.set(e,n)}}mi=new Set;let c=new Set;const l=e=>mi.has(e)?c.add(e):mi.add(e);for(let e of pi){for(let t of e.P)l(t);for(let t of e.Q)l(t)}for(let e of mi)gi.has(e)||c.has(e)||gi.set(e,si);s(mi,Zr(mi)),yi=function(e){let t=[],n=Er(e);return function e({S:n,B:s},r,i){if(!(4&n&&i===r[r.length-1])){2&n&&(i=r[r.length-1]),1&n&&t.push(r);for(let t of s)for(let n of t.Q)e(t,[...r,n],i)}}(function t(s){return{S:e(),B:_r((()=>{let s=Er(e).map((e=>n[e]));if(s.length)return t(s)})),Q:s}}([]),[]),t}(e).map((e=>ai.from(e))).sort(Or),bi=new Map;for(let e of yi){let t=[bi];for(let n of e){let e=t.map((e=>{let t=e.get(n);return t||(t=new Map,e.set(n,t)),t}));n===ni?t.push(...e):t=e}for(let n of t)n.V=e}}function vi(e){return(ki(e)?"":`${Ei(Ai([e]))} `)+Ir(e)}function Ei(e){return`"${e}"`}function Ai(e,t=1/0,n=Ir){let s=[];var r;r=e[0],wi(),li.has(r)&&s.push(""),e.length>t&&(t>>=1,e=[...e.slice(0,t),8230,...e.slice(-t)]);let i=0,a=e.length;for(let t=0;t<a;t++){let r=e[t];ki(r)&&(s.push(Tr(e.slice(i,t))),s.push(n(r)),i=t+1)}return s.push(Tr(e.slice(i,a))),s.join("")}function ki(e){return wi(),hi.has(e)}function _i(e,t,n){if(!e)return[];wi();let s=0;return e.split(ti).map((e=>{let r=Cr(e),i={input:r,offset:s};s+=r.length+1;try{let e,s=i.tokens=Ci(r,t,n),a=s.length;if(!a)throw new Error("empty label");let o=i.output=s.flat();if(function(e){for(let t=e.lastIndexOf(95);t>0;)if(95!==e[--t])throw new Error("underscore allowed only at start")}(o),!(i.emoji=a>1||s[0].is_emoji)&&o.every((e=>e<128)))!function(e){if(e.length>=4&&e[2]==ei&&e[3]==ei)throw new Error(`invalid label extension: "${Tr(e.slice(0,4))}"`)}(o),e="ASCII";else{let t=s.flatMap((e=>e.is_emoji?[]:e));if(t.length){if(li.has(o[0]))throw Ii("leading combining mark");for(let e=1;e<a;e++){let t=s[e];if(!t.is_emoji&&li.has(t[0]))throw Ii(`emoji + combining mark: "${Tr(s[e-1])} + ${Ai([t[0]])}"`)}!function(e){let t=e[0],n=mr.get(t);if(n)throw Ii(`leading ${n}`);let s=e.length,r=-1;for(let i=1;i<s;i++){t=e[i];let s=mr.get(t);if(s){if(r==i)throw Ii(`${n} + ${s}`);r=i+1,n=s}}if(r==s)throw Ii(`trailing ${n}`)}(o);let n=ri(new Set(t)),[r]=function(e){let t=pi;for(let n of e){let e=t.filter((e=>ii(e,n)));if(!e.length)throw pi.some((e=>ii(e,n)))?Si(t[0],n):xi(n);if(t=e,1==e.length)break}return t}(n);!function(e,t){for(let n of t)if(!ii(e,n))throw Si(e,n);if(e.M){let e=Zr(t);for(let t=1,n=e.length;t<n;t++)if(ui.has(e[t])){let s=t+1;for(let r;s<n&&ui.has(r=e[s]);s++)for(let n=t;n<s;n++)if(e[n]==r)throw new Error(`duplicate non-spacing marks: ${vi(r)}`);if(s-t>yr)throw new Error(`excessive non-spacing marks: ${Ei(Ai(e.slice(t-1,s)))} (${s-t}/${yr})`);t=s}}}(r,t),function(e,t){let n,s=[];for(let e of t){let t=gi.get(e);if(t===si)return;if(t){let s=t.M.get(e);if(n=n?n.filter((e=>s.has(e))):ri(s),!n.length)return}else s.push(e)}if(n)for(let t of n)if(s.every((e=>ii(t,e))))throw new Error(`whole-script confusable: ${e.N}/${t.N}`)}(r,n),e=r.N}else e="Emoji"}i.type=e}catch(e){i.error=e}return i}))}function Pi(e){return e.map((({input:t,error:n,output:s})=>{if(n){let s=n.message;throw new Error(1==e.length?s:`Invalid label ${Ei(Ai(t,63))}: ${s}`)}return Tr(s)})).join(ti)}function xi(e){return new Error(`disallowed character: ${vi(e)}`)}function Si(e,t){let n=vi(t),s=pi.find((e=>e.P.has(t)));return s&&(n=`${s.N} ${n}`),new Error(`illegal mixture: ${e.N} + ${n}`)}function Ii(e){return new Error(`illegal placement: ${e}`)}function Ci(e,t,n){let s=[],r=[];for(e=e.slice().reverse();e.length;){let i=Oi(e);if(i)r.length&&(s.push(t(r)),r=[]),s.push(n(i));else{let t=e.pop();if(mi.has(t))r.push(t);else{let e=oi.get(t);if(e)r.push(...e);else if(!ci.has(t))throw xi(t)}}}return r.length&&s.push(t(r)),s}function Ti(e){return e.filter((e=>e!=ni))}function Oi(e,t){let n,s=bi,r=e.length;for(;r&&(s=s.get(e[--r]),s);){let{V:i}=s;i&&(n=i,t&&t.push(...e.slice(r).reverse()),e.length=r)}return n}const Ni=new Uint8Array(32);function ji(e){return D(0!==e.length,"invalid ENS name; empty component","comp",e),e}function Li(e){const t=Mt(function(e){try{if(0===e.length)throw new Error("empty label");return function(e){return Pi(_i(e,Xr,Ti))}(e)}catch(t){D(!1,`invalid ENS name (${t.message})`,"name",e)}}(e)),n=[];if(0===e.length)return n;let s=0;for(let e=0;e<t.length;e++){46===t[e]&&(n.push(ji(t.slice(s,e))),s=e+1)}return D(s<t.length,"invalid ENS name; empty component","name",e),n.push(ji(t.slice(s))),n}function Bi(e){D("string"==typeof e,"invalid ENS name; not a string","name",e),D(e.length,"invalid ENS name (empty label)","name",e);let t=Ni;const n=Li(e);for(;n.length;)t=it(J([t,it(n.pop())]));return K(t)}function Ri(e,t){const n=null!=t?t:63;return D(n<=255,"DNS encoded label cannot exceed 255","length",n),K(J(Li(e).map((t=>{D(t.length<=n,`label ${JSON.stringify(e)} exceeds ${n} bytes`,"name",e);const s=new Uint8Array(t.length+1);return s.set(t,1),s[0]=s.length-1,s}))))+"00"}Ni.fill(0);const Mi="0x0000000000000000000000000000000000000000000000000000000000000000",Ui=BigInt(0),Di=BigInt(1),Fi=BigInt(2),$i=BigInt(27),Gi=BigInt(28),Hi=BigInt(35),zi={};function Wi(e){return X(pe(e),32)}class qi{#X;#ee;#te;#ne;get r(){return this.#X}set r(e){D(32===Q(e),"invalid r","value",e),this.#X=K(e)}get s(){return this.#ee}set s(e){D(32===Q(e),"invalid s","value",e);const t=K(e);D(parseInt(t.substring(0,3))<8,"non-canonical s","value",t),this.#ee=t}get v(){return this.#te}set v(e){const t=he(e,"value");D(27===t||28===t,"invalid v","v",e),this.#te=t}get networkV(){return this.#ne}get legacyChainId(){const e=this.networkV;return null==e?null:qi.getChainId(e)}get yParity(){return 27===this.v?0:1}get yParityAndS(){const e=z(this.s);return this.yParity&&(e[0]|=128),K(e)}get compactSerialized(){return J([this.r,this.yParityAndS])}get serialized(){return J([this.r,this.s,this.yParity?"0x1c":"0x1b"])}constructor(e,t,n,s){G(e,zi,"Signature"),this.#X=t,this.#ee=n,this.#te=s,this.#ne=null}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this.s}", yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new qi(zi,this.r,this.s,this.v);return this.networkV&&(e.#ne=this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:null!=e?e.toString():null,r:this.r,s:this.s,v:this.v}}static getChainId(e){const t=oe(e,"v");return t==$i||t==Gi?Ui:(D(t>=Hi,"invalid EIP-155 v","v",e),(t-Hi)/Fi)}static getChainIdV(e,t){return oe(e)*Fi+BigInt(35+t-27)}static getNormalizedV(e){const t=oe(e);return t===Ui||t===$i?27:t===Di||t===Gi?28:(D(t>=Hi,"invalid v","v",e),t&Di?27:28)}static from(e){function t(t,n){D(t,n,"signature",e)}if(null==e)return new qi(zi,Mi,Mi,27);if("string"==typeof e){const n=z(e,"signature");if(64===n.length){const e=K(n.slice(0,32)),t=n.slice(32,64),s=128&t[0]?28:27;return t[0]&=127,new qi(zi,e,K(t),s)}if(65===n.length){const e=K(n.slice(0,32)),s=n.slice(32,64);t(0==(128&s[0]),"non-canonical s");const r=qi.getNormalizedV(n[64]);return new qi(zi,e,K(s),r)}t(!1,"invalid raw signature length")}if(e instanceof qi)return e.clone();const n=e.r;t(null!=n,"missing r");const s=Wi(n),r=function(e,n){if(null!=e)return Wi(e);if(null!=n){t(q(n,32),"invalid yParityAndS");const e=z(n);return e[0]&=127,K(e)}t(!1,"missing s")}(e.s,e.yParityAndS);t(0==(128&z(r)[0]),"non-canonical s");const{networkV:i,v:a}=function(e,n,s){if(null!=e){const t=oe(e);return{networkV:t>=Hi?t:void 0,v:qi.getNormalizedV(t)}}if(null!=n)return t(q(n,32),"invalid yParityAndS"),{v:128&z(n)[0]?28:27};if(null!=s){switch(he(s,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}t(!1,"invalid yParity")}t(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),o=new qi(zi,s,r,a);return i&&(o.#ne=i),t(null==e.yParity||he(e.yParity,"sig.yParity")===o.yParity,"yParity mismatch"),t(null==e.yParityAndS||e.yParityAndS===o.yParityAndS,"yParityAndS mismatch"),o}}function Vi(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function Ki(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function Ji(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");Vi(e.outputLen),Vi(e.blockLen)}function Qi(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Yi(e,t){Ki(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const Zi="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,Xi=e=>e instanceof Uint8Array,ea=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),ta=(e,t)=>e<<32-t|e>>>t;if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");function na(e){if("string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),!Xi(e))throw new Error("expected Uint8Array, got "+typeof e);return e}class sa{clone(){return this._cloneInto()}}function ra(e){const t=t=>e().update(na(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function ia(e=32){if(Zi&&"function"==typeof Zi.getRandomValues)return Zi.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}class aa extends sa{constructor(e,t,n,s){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=ea(this.buffer)}update(e){Qi(this);const{view:t,buffer:n,blockLen:s}=this,r=(e=na(e)).length;for(let i=0;i<r;){const a=Math.min(s-this.pos,r-i);if(a!==s)n.set(e.subarray(i,i+a),this.pos),this.pos+=a,i+=a,this.pos===s&&(this.process(t,0),this.pos=0);else{const t=ea(e);for(;s<=r-i;i+=s)this.process(t,i)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){Qi(this),Yi(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:s,isLE:r}=this;let{pos:i}=this;t[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>s-i&&(this.process(n,0),i=0);for(let e=i;e<s;e++)t[e]=0;!function(e,t,n,s){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,s);const r=BigInt(32),i=BigInt(4294967295),a=Number(n>>r&i),o=Number(n&i),c=s?4:0,l=s?0:4;e.setUint32(t+c,a,s),e.setUint32(t+l,o,s)}(n,s-8,BigInt(8*this.length),r),this.process(n,0);const a=ea(e),o=this.outputLen;if(o%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=o/4,l=this.get();if(c>l.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<c;e++)a.setUint32(4*e,l[e],r)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:s,finished:r,destroyed:i,pos:a}=this;return e.length=s,e.pos=a,e.finished=r,e.destroyed=i,s%t&&e.buffer.set(n),e}}const oa=(e,t,n)=>e&t^~e&n,ca=(e,t,n)=>e&t^e&n^t&n,la=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ua=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ha=new Uint32Array(64);class da extends aa{constructor(){super(64,32,8,!1),this.A=0|ua[0],this.B=0|ua[1],this.C=0|ua[2],this.D=0|ua[3],this.E=0|ua[4],this.F=0|ua[5],this.G=0|ua[6],this.H=0|ua[7]}get(){const{A:e,B:t,C:n,D:s,E:r,F:i,G:a,H:o}=this;return[e,t,n,s,r,i,a,o]}set(e,t,n,s,r,i,a,o){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|s,this.E=0|r,this.F=0|i,this.G=0|a,this.H=0|o}process(e,t){for(let n=0;n<16;n++,t+=4)ha[n]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=ha[e-15],n=ha[e-2],s=ta(t,7)^ta(t,18)^t>>>3,r=ta(n,17)^ta(n,19)^n>>>10;ha[e]=r+ha[e-7]+s+ha[e-16]|0}let{A:n,B:s,C:r,D:i,E:a,F:o,G:c,H:l}=this;for(let e=0;e<64;e++){const t=l+(ta(a,6)^ta(a,11)^ta(a,25))+oa(a,o,c)+la[e]+ha[e]|0,u=(ta(n,2)^ta(n,13)^ta(n,22))+ca(n,s,r)|0;l=c,c=o,o=a,a=i+t|0,i=r,r=s,s=n,n=t+u|0}n=n+this.A|0,s=s+this.B|0,r=r+this.C|0,i=i+this.D|0,a=a+this.E|0,o=o+this.F|0,c=c+this.G|0,l=l+this.H|0,this.set(n,s,r,i,a,o,c,l)}roundClean(){ha.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const pa=ra((()=>new da)),fa=(BigInt(0),BigInt(1)),ga=BigInt(2),ma=e=>e instanceof Uint8Array,ya=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function ba(e){if(!ma(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=ya[e[n]];return t}function wa(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}function va(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let t=0;t<n.length;t++){const s=2*t,r=e.slice(s,s+2),i=Number.parseInt(r,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");n[t]=i}return n}function Ea(e){return wa(ba(e))}function Aa(e){if(!ma(e))throw new Error("Uint8Array expected");return wa(ba(Uint8Array.from(e).reverse()))}function ka(e,t){return va(e.toString(16).padStart(2*t,"0"))}function _a(e,t){return ka(e,t).reverse()}function Pa(e,t,n){let s;if("string"==typeof t)try{s=va(t)}catch(n){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${n}`)}else{if(!ma(t))throw new Error(`${e} must be hex string or Uint8Array`);s=Uint8Array.from(t)}const r=s.length;if("number"==typeof n&&r!==n)throw new Error(`${e} expected ${n} bytes, got ${r}`);return s}function xa(...e){const t=new Uint8Array(e.reduce(((e,t)=>e+t.length),0));let n=0;return e.forEach((e=>{if(!ma(e))throw new Error("Uint8Array expected");t.set(e,n),n+=e.length})),t}function Sa(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}const Ia=e=>(ga<<BigInt(e-1))-fa,Ca=e=>new Uint8Array(e),Ta=e=>Uint8Array.from(e);function Oa(e,t,n){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof n)throw new Error("hmacFn must be a function");let s=Ca(e),r=Ca(e),i=0;const a=()=>{s.fill(1),r.fill(0),i=0},o=(...e)=>n(r,s,...e),c=(e=Ca())=>{r=o(Ta([0]),e),s=o(),0!==e.length&&(r=o(Ta([1]),e),s=o())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const n=[];for(;e<t;){s=o();const t=s.slice();n.push(t),e+=s.length}return xa(...n)};return(e,t)=>{let n;for(a(),c(e);!(n=t(l()));)c();return a(),n}}const Na={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function ja(e,t,n={}){const s=(t,n,s)=>{const r=Na[n];if("function"!=typeof r)throw new Error(`Invalid validator "${n}", expected function`);const i=e[t];if(!(s&&void 0===i||r(i,e)))throw new Error(`Invalid param ${String(t)}=${i} (${typeof i}), expected ${n}`)};for(const[e,n]of Object.entries(t))s(e,n,!1);for(const[e,t]of Object.entries(n))s(e,t,!0);return e}const La=BigInt(0),Ba=BigInt(1),Ra=BigInt(2),Ma=BigInt(3),Ua=BigInt(4),Da=BigInt(5),Fa=BigInt(8);BigInt(9),BigInt(16);function $a(e,t){const n=e%t;return n>=La?n:t+n}function Ga(e,t,n){if(n<=La||t<La)throw new Error("Expected power/modulo > 0");if(n===Ba)return La;let s=Ba;for(;t>La;)t&Ba&&(s=s*e%n),e=e*e%n,t>>=Ba;return s}function Ha(e,t,n){let s=e;for(;t-- >La;)s*=s,s%=n;return s}function za(e,t){if(e===La||t<=La)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=$a(e,t),s=t,r=La,i=Ba,a=Ba,o=La;for(;n!==La;){const e=s/n,t=s%n,c=r-a*e,l=i-o*e;s=n,n=t,r=a,i=o,a=c,o=l}if(s!==Ba)throw new Error("invert: does not exist");return $a(r,t)}function Wa(e){if(e%Ua===Ma){const t=(e+Ba)/Ua;return function(e,n){const s=e.pow(n,t);if(!e.eql(e.sqr(s),n))throw new Error("Cannot find square root");return s}}if(e%Fa===Da){const t=(e-Da)/Fa;return function(e,n){const s=e.mul(n,Ra),r=e.pow(s,t),i=e.mul(n,r),a=e.mul(e.mul(i,Ra),r),o=e.mul(i,e.sub(a,e.ONE));if(!e.eql(e.sqr(o),n))throw new Error("Cannot find square root");return o}}return function(e){const t=(e-Ba)/Ra;let n,s,r;for(n=e-Ba,s=0;n%Ra===La;n/=Ra,s++);for(r=Ra;r<e&&Ga(r,t,e)!==e-Ba;r++);if(1===s){const t=(e+Ba)/Ua;return function(e,n){const s=e.pow(n,t);if(!e.eql(e.sqr(s),n))throw new Error("Cannot find square root");return s}}const i=(n+Ba)/Ra;return function(e,a){if(e.pow(a,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let o=s,c=e.pow(e.mul(e.ONE,r),n),l=e.pow(a,i),u=e.pow(a,n);for(;!e.eql(u,e.ONE);){if(e.eql(u,e.ZERO))return e.ZERO;let t=1;for(let n=e.sqr(u);t<o&&!e.eql(n,e.ONE);t++)n=e.sqr(n);const n=e.pow(c,Ba<<BigInt(o-t-1));c=e.sqr(n),l=e.mul(l,n),u=e.mul(u,c),o=t}return l}}(e)}const qa=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Va(e,t){const n=void 0!==t?t:e.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function Ka(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function Ja(e){const t=Ka(e);return t+Math.ceil(t/2)}class Qa extends sa{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,Ji(e);const n=na(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,r=new Uint8Array(s);r.set(n.length>s?e.create().update(n).digest():n);for(let e=0;e<r.length;e++)r[e]^=54;this.iHash.update(r),this.oHash=e.create();for(let e=0;e<r.length;e++)r[e]^=106;this.oHash.update(r),r.fill(0)}update(e){return Qi(this),this.iHash.update(e),this}digestInto(e){Qi(this),Ki(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:s,destroyed:r,blockLen:i,outputLen:a}=this;return e.finished=s,e.destroyed=r,e.blockLen=i,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Ya=(e,t,n)=>new Qa(e,t).update(n).digest();Ya.create=(e,t)=>new Qa(e,t);const Za=BigInt(0),Xa=BigInt(1);function eo(e){return ja(e.Fp,qa.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),ja(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Va(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}const{bytesToNumberBE:to,hexToBytes:no}=s,so={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(e){const{Err:t}=so;if(e.length<2||2!==e[0])throw new t("Invalid signature integer tag");const n=e[1],s=e.subarray(2,n+2);if(!n||s.length!==n)throw new t("Invalid signature integer: wrong length");if(128&s[0])throw new t("Invalid signature integer: negative");if(0===s[0]&&!(128&s[1]))throw new t("Invalid signature integer: unnecessary leading zero");return{d:to(s),l:e.subarray(n+2)}},toSig(e){const{Err:t}=so,n="string"==typeof e?no(e):e;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let s=n.length;if(s<2||48!=n[0])throw new t("Invalid signature tag");if(n[1]!==s-2)throw new t("Invalid signature: incorrect length");const{d:r,l:i}=so._parseInt(n.subarray(2)),{d:a,l:o}=so._parseInt(i);if(o.length)throw new t("Invalid signature: left bytes after parsing");return{r,s:a}},hexFromSig(e){const t=e=>8&Number.parseInt(e[0],16)?"00"+e:e,n=e=>{const t=e.toString(16);return 1&t.length?`0${t}`:t},s=t(n(e.s)),r=t(n(e.r)),i=s.length/2,a=r.length/2,o=n(i),c=n(a);return`30${n(a+i+4)}02${c}${r}02${o}${s}`}},ro=BigInt(0),io=BigInt(1),ao=(BigInt(2),BigInt(3));BigInt(4);function oo(e){const t=function(e){const t=eo(e);ja(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:s,a:r}=t;if(n){if(!s.eql(r,s.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof n||"bigint"!=typeof n.beta||"function"!=typeof n.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:n}=t,s=t.toBytes||((e,t,s)=>{const r=t.toAffine();return xa(Uint8Array.from([4]),n.toBytes(r.x),n.toBytes(r.y))}),r=t.fromBytes||(e=>{const t=e.subarray(1);return{x:n.fromBytes(t.subarray(0,n.BYTES)),y:n.fromBytes(t.subarray(n.BYTES,2*n.BYTES))}});function i(e){const{a:s,b:r}=t,i=n.sqr(e),a=n.mul(i,e);return n.add(n.add(a,n.mul(e,s)),r)}if(!n.eql(n.sqr(t.Gy),i(t.Gx)))throw new Error("bad generator point: equation left != right");function a(e){return"bigint"==typeof e&&ro<e&&e<t.n}function o(e){if(!a(e))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(e){const{allowedPrivateKeyLengths:n,nByteLength:s,wrapPrivateKey:r,n:i}=t;if(n&&"bigint"!=typeof e){if(e instanceof Uint8Array&&(e=ba(e)),"string"!=typeof e||!n.includes(e.length))throw new Error("Invalid key");e=e.padStart(2*s,"0")}let a;try{a="bigint"==typeof e?e:Ea(Pa("private key",e,s))}catch(t){throw new Error(`private key must be ${s} bytes, hex or bigint, not ${typeof e}`)}return r&&(a=$a(a,i)),o(a),a}const l=new Map;function u(e){if(!(e instanceof h))throw new Error("ProjectivePoint expected")}class h{constructor(e,t,s){if(this.px=e,this.py=t,this.pz=s,null==e||!n.isValid(e))throw new Error("x required");if(null==t||!n.isValid(t))throw new Error("y required");if(null==s||!n.isValid(s))throw new Error("z required")}static fromAffine(e){const{x:t,y:s}=e||{};if(!e||!n.isValid(t)||!n.isValid(s))throw new Error("invalid affine point");if(e instanceof h)throw new Error("projective point not allowed");const r=e=>n.eql(e,n.ZERO);return r(t)&&r(s)?h.ZERO:new h(t,s,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=n.invertBatch(e.map((e=>e.pz)));return e.map(((e,n)=>e.toAffine(t[n]))).map(h.fromAffine)}static fromHex(e){const t=h.fromAffine(r(Pa("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return h.BASE.multiply(c(e))}_setWindowSize(e){this._WINDOW_SIZE=e,l.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:e,y:s}=this.toAffine();if(!n.isValid(e)||!n.isValid(s))throw new Error("bad point: x or y not FE");const r=n.sqr(s),a=i(e);if(!n.eql(r,a))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:e}=this.toAffine();if(n.isOdd)return!n.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){u(e);const{px:t,py:s,pz:r}=this,{px:i,py:a,pz:o}=e,c=n.eql(n.mul(t,o),n.mul(i,r)),l=n.eql(n.mul(s,o),n.mul(a,r));return c&&l}negate(){return new h(this.px,n.neg(this.py),this.pz)}double(){const{a:e,b:s}=t,r=n.mul(s,ao),{px:i,py:a,pz:o}=this;let c=n.ZERO,l=n.ZERO,u=n.ZERO,d=n.mul(i,i),p=n.mul(a,a),f=n.mul(o,o),g=n.mul(i,a);return g=n.add(g,g),u=n.mul(i,o),u=n.add(u,u),c=n.mul(e,u),l=n.mul(r,f),l=n.add(c,l),c=n.sub(p,l),l=n.add(p,l),l=n.mul(c,l),c=n.mul(g,c),u=n.mul(r,u),f=n.mul(e,f),g=n.sub(d,f),g=n.mul(e,g),g=n.add(g,u),u=n.add(d,d),d=n.add(u,d),d=n.add(d,f),d=n.mul(d,g),l=n.add(l,d),f=n.mul(a,o),f=n.add(f,f),d=n.mul(f,g),c=n.sub(c,d),u=n.mul(f,p),u=n.add(u,u),u=n.add(u,u),new h(c,l,u)}add(e){u(e);const{px:s,py:r,pz:i}=this,{px:a,py:o,pz:c}=e;let l=n.ZERO,d=n.ZERO,p=n.ZERO;const f=t.a,g=n.mul(t.b,ao);let m=n.mul(s,a),y=n.mul(r,o),b=n.mul(i,c),w=n.add(s,r),v=n.add(a,o);w=n.mul(w,v),v=n.add(m,y),w=n.sub(w,v),v=n.add(s,i);let E=n.add(a,c);return v=n.mul(v,E),E=n.add(m,b),v=n.sub(v,E),E=n.add(r,i),l=n.add(o,c),E=n.mul(E,l),l=n.add(y,b),E=n.sub(E,l),p=n.mul(f,v),l=n.mul(g,b),p=n.add(l,p),l=n.sub(y,p),p=n.add(y,p),d=n.mul(l,p),y=n.add(m,m),y=n.add(y,m),b=n.mul(f,b),v=n.mul(g,v),y=n.add(y,b),b=n.sub(m,b),b=n.mul(f,b),v=n.add(v,b),m=n.mul(y,v),d=n.add(d,m),m=n.mul(E,v),l=n.mul(w,l),l=n.sub(l,m),m=n.mul(w,y),p=n.mul(E,p),p=n.add(p,m),new h(l,d,p)}subtract(e){return this.add(e.negate())}is0(){return this.equals(h.ZERO)}wNAF(e){return p.wNAFCached(this,l,e,(e=>{const t=n.invertBatch(e.map((e=>e.pz)));return e.map(((e,n)=>e.toAffine(t[n]))).map(h.fromAffine)}))}multiplyUnsafe(e){const s=h.ZERO;if(e===ro)return s;if(o(e),e===io)return this;const{endo:r}=t;if(!r)return p.unsafeLadder(this,e);let{k1neg:i,k1:a,k2neg:c,k2:l}=r.splitScalar(e),u=s,d=s,f=this;for(;a>ro||l>ro;)a&io&&(u=u.add(f)),l&io&&(d=d.add(f)),f=f.double(),a>>=io,l>>=io;return i&&(u=u.negate()),c&&(d=d.negate()),d=new h(n.mul(d.px,r.beta),d.py,d.pz),u.add(d)}multiply(e){o(e);let s,r,i=e;const{endo:a}=t;if(a){const{k1neg:e,k1:t,k2neg:o,k2:c}=a.splitScalar(i);let{p:l,f:u}=this.wNAF(t),{p:d,f}=this.wNAF(c);l=p.constTimeNegate(e,l),d=p.constTimeNegate(o,d),d=new h(n.mul(d.px,a.beta),d.py,d.pz),s=l.add(d),r=u.add(f)}else{const{p:e,f:t}=this.wNAF(i);s=e,r=t}return h.normalizeZ([s,r])[0]}multiplyAndAddUnsafe(e,t,n){const s=h.BASE,r=(e,t)=>t!==ro&&t!==io&&e.equals(s)?e.multiply(t):e.multiplyUnsafe(t),i=r(this,t).add(r(e,n));return i.is0()?void 0:i}toAffine(e){const{px:t,py:s,pz:r}=this,i=this.is0();null==e&&(e=i?n.ONE:n.inv(r));const a=n.mul(t,e),o=n.mul(s,e),c=n.mul(r,e);if(i)return{x:n.ZERO,y:n.ZERO};if(!n.eql(c,n.ONE))throw new Error("invZ was invalid");return{x:a,y:o}}isTorsionFree(){const{h:e,isTorsionFree:n}=t;if(e===io)return!0;if(n)return n(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:n}=t;return e===io?this:n?n(h,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return this.assertValidity(),s(h,this,e)}toHex(e=!0){return ba(this.toRawBytes(e))}}h.BASE=new h(t.Gx,t.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);const d=t.nBitLength,p=function(e,t){const n=(e,t)=>{const n=t.negate();return e?n:t},s=e=>({windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:n,unsafeLadder(t,n){let s=e.ZERO,r=t;for(;n>Za;)n&Xa&&(s=s.add(r)),r=r.double(),n>>=Xa;return s},precomputeWindow(e,t){const{windows:n,windowSize:r}=s(t),i=[];let a=e,o=a;for(let e=0;e<n;e++){o=a,i.push(o);for(let e=1;e<r;e++)o=o.add(a),i.push(o);a=o.double()}return i},wNAF(t,r,i){const{windows:a,windowSize:o}=s(t);let c=e.ZERO,l=e.BASE;const u=BigInt(2**t-1),h=2**t,d=BigInt(t);for(let e=0;e<a;e++){const t=e*o;let s=Number(i&u);i>>=d,s>o&&(s-=h,i+=Xa);const a=t,p=t+Math.abs(s)-1,f=e%2!=0,g=s<0;0===s?l=l.add(n(f,r[a])):c=c.add(n(g,r[p]))}return{p:c,f:l}},wNAFCached(e,t,n,s){const r=e._WINDOW_SIZE||1;let i=t.get(e);return i||(i=this.precomputeWindow(e,r),1!==r&&t.set(e,s(i))),this.wNAF(r,i,n)}}}(h,t.endo?Math.ceil(d/2):d);return{CURVE:t,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:a}}function co(e){const t=function(e){const t=eo(e);return ja(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:n,n:s}=t,r=n.BYTES+1,i=2*n.BYTES+1;function a(e){return $a(e,s)}function o(e){return za(e,s)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:h}=oo({...t,toBytes(e,t,s){const r=t.toAffine(),i=n.toBytes(r.x),a=xa;return s?a(Uint8Array.from([t.hasEvenY()?2:3]),i):a(Uint8Array.from([4]),i,n.toBytes(r.y))},fromBytes(e){const t=e.length,s=e[0],a=e.subarray(1);if(t!==r||2!==s&&3!==s){if(t===i&&4===s){return{x:n.fromBytes(a.subarray(0,n.BYTES)),y:n.fromBytes(a.subarray(n.BYTES,2*n.BYTES))}}throw new Error(`Point of length ${t} was invalid. Expected ${r} compressed bytes or ${i} uncompressed bytes`)}{const e=Ea(a);if(!(ro<(o=e)&&o<n.ORDER))throw new Error("Point is not on curve");const t=u(e);let r=n.sqrt(t);return 1==(1&s)!==((r&io)===io)&&(r=n.neg(r)),{x:e,y:r}}var o}}),d=e=>ba(ka(e,t.nByteLength));function p(e){return e>s>>io}const f=(e,t,n)=>Ea(e.slice(t,n));class g{constructor(e,t,n){this.r=e,this.s=t,this.recovery=n,this.assertValidity()}static fromCompact(e){const n=t.nByteLength;return e=Pa("compactSignature",e,2*n),new g(f(e,0,n),f(e,n,2*n))}static fromDER(e){const{r:t,s:n}=so.toSig(Pa("DER",e));return new g(t,n)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(e){return new g(this.r,this.s,e)}recoverPublicKey(e){const{r:s,s:r,recovery:i}=this,l=w(Pa("msgHash",e));if(null==i||![0,1,2,3].includes(i))throw new Error("recovery id invalid");const u=2===i||3===i?s+t.n:s;if(u>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const h=0==(1&i)?"02":"03",p=c.fromHex(h+d(u)),f=o(u),g=a(-l*f),m=a(r*f),y=c.BASE.multiplyAndAddUnsafe(p,g,m);if(!y)throw new Error("point at infinify");return y.assertValidity(),y}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new g(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return va(this.toDERHex())}toDERHex(){return so.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return va(this.toCompactHex())}toCompactHex(){return d(this.r)+d(this.s)}}const m={isValidPrivateKey(e){try{return l(e),!0}catch(e){return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const e=Ja(t.n);return function(e,t,n=!1){const s=e.length,r=Ka(t),i=Ja(t);if(s<16||s<i||s>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${s}`);const a=$a(n?Ea(e):Aa(e),t-Ba)+Ba;return n?_a(a,r):ka(a,r)}(t.randomBytes(e),t.n)},precompute:(e=8,t=c.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function y(e){const t=e instanceof Uint8Array,n="string"==typeof e,s=(t||n)&&e.length;return t?s===r||s===i:n?s===2*r||s===2*i:e instanceof c}const b=t.bits2int||function(e){const n=Ea(e),s=8*e.length-t.nBitLength;return s>0?n>>BigInt(s):n},w=t.bits2int_modN||function(e){return a(b(e))},v=Ia(t.nBitLength);function E(e){if("bigint"!=typeof e)throw new Error("bigint expected");if(!(ro<=e&&e<v))throw new Error(`bigint expected < 2^${t.nBitLength}`);return ka(e,t.nByteLength)}function A(e,s,r=k){if(["recovered","canonical"].some((e=>e in r)))throw new Error("sign() legacy options not supported");const{hash:i,randomBytes:u}=t;let{lowS:d,prehash:f,extraEntropy:m}=r;null==d&&(d=!0),e=Pa("msgHash",e),f&&(e=Pa("prehashed msgHash",i(e)));const y=w(e),v=l(s),A=[E(v),E(y)];if(null!=m){const e=!0===m?u(n.BYTES):m;A.push(Pa("extraEntropy",e))}const _=xa(...A),P=y;return{seed:_,k2sig:function(e){const t=b(e);if(!h(t))return;const n=o(t),s=c.BASE.multiply(t).toAffine(),r=a(s.x);if(r===ro)return;const i=a(n*a(P+r*v));if(i===ro)return;let l=(s.x===r?0:2)|Number(s.y&io),u=i;return d&&p(i)&&(u=function(e){return p(e)?a(-e):e}(i),l^=1),new g(r,u,l)}}}const k={lowS:t.lowS,prehash:!1},_={lowS:t.lowS,prehash:!1};return c.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return c.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,n=!0){if(y(e))throw new Error("first arg must be private key");if(!y(t))throw new Error("second arg must be public key");return c.fromHex(t).multiply(l(e)).toRawBytes(n)},sign:function(e,n,s=k){const{seed:r,k2sig:i}=A(e,n,s),a=t;return Oa(a.hash.outputLen,a.nByteLength,a.hmac)(r,i)},verify:function(e,n,s,r=_){const i=e;if(n=Pa("msgHash",n),s=Pa("publicKey",s),"strict"in r)throw new Error("options.strict was renamed to lowS");const{lowS:l,prehash:u}=r;let h,d;try{if("string"==typeof i||i instanceof Uint8Array)try{h=g.fromDER(i)}catch(e){if(!(e instanceof so.Err))throw e;h=g.fromCompact(i)}else{if("object"!=typeof i||"bigint"!=typeof i.r||"bigint"!=typeof i.s)throw new Error("PARSE");{const{r:e,s:t}=i;h=new g(e,t)}}d=c.fromHex(s)}catch(e){if("PARSE"===e.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(l&&h.hasHighS())return!1;u&&(n=t.hash(n));const{r:p,s:f}=h,m=w(n),y=o(f),b=a(m*y),v=a(p*y),E=c.BASE.multiplyAndAddUnsafe(d,b,v)?.toAffine();return!!E&&a(E.x)===p},ProjectivePoint:c,Signature:g,utils:m}}function lo(e){return{hash:e,hmac:(t,...n)=>Ya(e,t,function(...e){const t=new Uint8Array(e.reduce(((e,t)=>e+t.length),0));let n=0;return e.forEach((e=>{if(!Xi(e))throw new Error("Uint8Array expected");t.set(e,n),n+=e.length})),t}(...n)),randomBytes:ia}}const uo=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),ho=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),po=BigInt(1),fo=BigInt(2),go=(e,t)=>(e+t/fo)/t;function mo(e){const t=uo,n=BigInt(3),s=BigInt(6),r=BigInt(11),i=BigInt(22),a=BigInt(23),o=BigInt(44),c=BigInt(88),l=e*e*e%t,u=l*l*e%t,h=Ha(u,n,t)*u%t,d=Ha(h,n,t)*u%t,p=Ha(d,fo,t)*l%t,f=Ha(p,r,t)*p%t,g=Ha(f,i,t)*f%t,m=Ha(g,o,t)*g%t,y=Ha(m,c,t)*m%t,b=Ha(y,o,t)*g%t,w=Ha(b,n,t)*u%t,v=Ha(w,a,t)*f%t,E=Ha(v,s,t)*l%t,A=Ha(E,fo,t);if(!yo.eql(yo.sqr(A),e))throw new Error("Cannot find square root");return A}const yo=function(e,t,n=!1,s={}){if(e<=La)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:r,nByteLength:i}=Va(e,t);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const a=Wa(e),o=Object.freeze({ORDER:e,BITS:r,BYTES:i,MASK:Ia(r),ZERO:La,ONE:Ba,create:t=>$a(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("Invalid field element: expected bigint, got "+typeof t);return La<=t&&t<e},is0:e=>e===La,isOdd:e=>(e&Ba)===Ba,neg:t=>$a(-t,e),eql:(e,t)=>e===t,sqr:t=>$a(t*t,e),add:(t,n)=>$a(t+n,e),sub:(t,n)=>$a(t-n,e),mul:(t,n)=>$a(t*n,e),pow:(e,t)=>function(e,t,n){if(n<La)throw new Error("Expected power > 0");if(n===La)return e.ONE;if(n===Ba)return t;let s=e.ONE,r=t;for(;n>La;)n&Ba&&(s=e.mul(s,r)),r=e.sqr(r),n>>=Ba;return s}(o,e,t),div:(t,n)=>$a(t*za(n,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>za(t,e),sqrt:s.sqrt||(e=>a(o,e)),invertBatch:e=>function(e,t){const n=new Array(t.length),s=t.reduce(((t,s,r)=>e.is0(s)?t:(n[r]=t,e.mul(t,s))),e.ONE),r=e.inv(s);return t.reduceRight(((t,s,r)=>e.is0(s)?t:(n[r]=e.mul(t,n[r]),e.mul(t,s))),r),n}(o,e),cmov:(e,t,n)=>n?t:e,toBytes:e=>n?_a(e,i):ka(e,i),fromBytes:e=>{if(e.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${e.length}`);return n?Aa(e):Ea(e)}});return Object.freeze(o)}(uo,void 0,void 0,{sqrt:mo}),bo=function(e,t){const n=t=>co({...e,...lo(t)});return Object.freeze({...n(t),create:n})}({a:BigInt(0),b:BigInt(7),Fp:yo,n:ho,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=ho,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),s=-po*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),r=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,a=BigInt("0x100000000000000000000000000000000"),o=go(i*e,t),c=go(-s*e,t);let l=$a(e-o*n-c*r,t),u=$a(-o*s-c*i,t);const h=l>a,d=u>a;if(h&&(l=t-l),d&&(u=t-u),l>a||u>a)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:h,k1:l,k2neg:d,k2:u}}}},pa);BigInt(0);bo.ProjectivePoint;class wo{#se;constructor(e){D(32===Q(e),"invalid private key","privateKey","[REDACTED]"),this.#se=K(e)}get privateKey(){return this.#se}get publicKey(){return wo.computePublicKey(this.#se)}get compressedPublicKey(){return wo.computePublicKey(this.#se,!0)}sign(e){D(32===Q(e),"invalid digest length","digest",e);const t=bo.sign(W(e),W(this.#se),{lowS:!0});return qi.from({r:de(t.r,32),s:de(t.s,32),v:t.recovery?28:27})}computeSharedSecret(e){const t=wo.computePublicKey(e);return K(bo.getSharedSecret(W(this.#se),z(t),!1))}static computePublicKey(e,t){let n=z(e,"key");if(32===n.length){return K(bo.getPublicKey(n,!!t))}if(64===n.length){const e=new Uint8Array(65);e[0]=4,e.set(n,1),n=e}return K(bo.ProjectivePoint.fromHex(n).toRawBytes(t))}static recoverPublicKey(e,t){D(32===Q(e),"invalid digest length","digest",e);const n=qi.from(t);let s=bo.Signature.fromCompact(W(J([n.r,n.s])));s=s.addRecoveryBit(n.yParity);const r=s.recoverPublicKey(W(e));return D(null!=r,"invalid signautre for digest","signature",t),"0x"+r.toHex(!1)}static addPoints(e,t,n){const s=bo.ProjectivePoint.fromHex(wo.computePublicKey(e).substring(2)),r=bo.ProjectivePoint.fromHex(wo.computePublicKey(t).substring(2));return"0x"+s.add(r).toHex(!!n)}}function vo(e){let t=e.toString(16);for(;t.length<2;)t="0"+t;return"0x"+t}function Eo(e,t,n){let s=0;for(let r=0;r<n;r++)s=256*s+e[t+r];return s}function Ao(e,t,n,s){const r=[];for(;n<t+1+s;){const i=ko(e,n);r.push(i.result),U((n+=i.consumed)<=t+1+s,"child data too short","BUFFER_OVERRUN",{buffer:e,length:s,offset:t})}return{consumed:1+s,result:r}}function ko(e,t){U(0!==e.length,"data too short","BUFFER_OVERRUN",{buffer:e,length:0,offset:1});const n=t=>{U(t<=e.length,"data short segment too short","BUFFER_OVERRUN",{buffer:e,length:e.length,offset:t})};if(e[t]>=248){const s=e[t]-247;n(t+1+s);const r=Eo(e,t+1,s);return n(t+1+s+r),Ao(e,t,t+1+s,s+r)}if(e[t]>=192){const s=e[t]-192;return n(t+1+s),Ao(e,t,t+1,s)}if(e[t]>=184){const s=e[t]-183;n(t+1+s);const r=Eo(e,t+1,s);n(t+1+s+r);return{consumed:1+s+r,result:K(e.slice(t+1+s,t+1+s+r))}}if(e[t]>=128){const s=e[t]-128;n(t+1+s);return{consumed:1+s,result:K(e.slice(t+1,t+1+s))}}return{consumed:1,result:vo(e[t])}}function _o(e){const t=z(e,"data"),n=ko(t,0);return D(n.consumed===t.length,"unexpected junk after rlp payload","data",e),n.result}function Po(e){const t=[];for(;e;)t.unshift(255&e),e>>=8;return t}function xo(e){if(Array.isArray(e)){let t=[];if(e.forEach((function(e){t=t.concat(xo(e))})),t.length<=55)return t.unshift(192+t.length),t;const n=Po(t.length);return n.unshift(247+n.length),n.concat(t)}const t=Array.prototype.slice.call(z(e,"object"));if(1===t.length&&t[0]<=127)return t;if(t.length<=55)return t.unshift(128+t.length),t;const n=Po(t.length);return n.unshift(183+n.length),n.concat(t)}const So="0123456789abcdef";function Io(e){let t="0x";for(const n of xo(e))t+=So[n>>4],t+=So[15&n];return t}function Co(e,t){return function(e){let t;return t="string"==typeof e?wo.computePublicKey(e,!1):e.publicKey,pt(it("0x"+t.substring(4)).substring(26))}(wo.recoverPublicKey(e,t))}const To=BigInt(0),Oo=BigInt(2),No=BigInt(27),jo=BigInt(28),Lo=BigInt(35),Bo=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Ro(e){return"0x"===e?null:pt(e)}function Mo(e,t){try{return is(e)}catch(n){D(!1,n.message,t,e)}}function Uo(e,t){return"0x"===e?0:he(e,t)}function Do(e,t){if("0x"===e)return To;const n=oe(e,t);return D(n<=Bo,"value exceeds uint size",t,n),n}function Fo(e,t){const n=oe(e,"value"),s=pe(n);return D(s.length<=32,"value too large",`tx.${t}`,n),s}function $o(e){return is(e).map((e=>[e.address,e.storageKeys]))}function Go(e,t){D(Array.isArray(e),`invalid ${t}`,"value",e);for(let t=0;t<e.length;t++)D(q(e[t],32),"invalid ${ param } hash",`value[${t}]`,e[t]);return e}function Ho(e,t){const n=[Fo(e.nonce,"nonce"),Fo(e.gasPrice||0,"gasPrice"),Fo(e.gasLimit,"gasLimit"),e.to||"0x",Fo(e.value,"value"),e.data];let s=To;if(e.chainId!=To)s=oe(e.chainId,"tx.chainId"),D(!t||null==t.networkV||t.legacyChainId===s,"tx.chainId/sig.v mismatch","sig",t);else if(e.signature){const t=e.signature.legacyChainId;null!=t&&(s=t)}if(!t)return s!==To&&(n.push(pe(s)),n.push("0x"),n.push("0x")),Io(n);let r=BigInt(27+t.yParity);return s!==To?r=qi.getChainIdV(s,t.v):BigInt(t.v)!==r&&D(!1,"tx.chainId/sig.v mismatch","sig",t),n.push(pe(r)),n.push(pe(t.r)),n.push(pe(t.s)),Io(n)}function zo(e,t){let n;try{if(n=Uo(t[0],"yParity"),0!==n&&1!==n)throw new Error("bad yParity")}catch(e){D(!1,"invalid yParity","yParity",t[0])}const s=X(t[1],32),r=X(t[2],32),i=qi.from({r:s,s:r,yParity:n});e.signature=i}function Wo(e,t){const n=[Fo(e.chainId,"chainId"),Fo(e.nonce,"nonce"),Fo(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Fo(e.maxFeePerGas||0,"maxFeePerGas"),Fo(e.gasLimit,"gasLimit"),e.to||"0x",Fo(e.value,"value"),e.data,$o(e.accessList||[])];return t&&(n.push(Fo(t.yParity,"yParity")),n.push(pe(t.r)),n.push(pe(t.s))),J(["0x02",Io(n)])}function qo(e,t){const n=[Fo(e.chainId,"chainId"),Fo(e.nonce,"nonce"),Fo(e.gasPrice||0,"gasPrice"),Fo(e.gasLimit,"gasLimit"),e.to||"0x",Fo(e.value,"value"),e.data,$o(e.accessList||[])];return t&&(n.push(Fo(t.yParity,"recoveryParam")),n.push(pe(t.r)),n.push(pe(t.s))),J(["0x01",Io(n)])}function Vo(e,t){const n=[Fo(e.chainId,"chainId"),Fo(e.nonce,"nonce"),Fo(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Fo(e.maxFeePerGas||0,"maxFeePerGas"),Fo(e.gasLimit,"gasLimit"),e.to||vs,Fo(e.value,"value"),e.data,$o(e.accessList||[]),Fo(e.maxFeePerBlobGas||0,"maxFeePerBlobGas"),Go(e.blobVersionedHashes||[],"blobVersionedHashes")];return t&&(n.push(Fo(t.yParity,"yParity")),n.push(pe(t.r)),n.push(pe(t.s))),J(["0x03",Io(n)])}class Ko{#re;#ie;#t;#ae;#oe;#ce;#le;#ue;#he;#de;#pe;#fe;#ge;#me;get type(){return this.#re}set type(e){switch(e){case null:this.#re=null;break;case 0:case"legacy":this.#re=0;break;case 1:case"berlin":case"eip-2930":this.#re=1;break;case 2:case"london":case"eip-1559":this.#re=2;break;case 3:case"cancun":case"eip-4844":this.#re=3;break;default:D(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844"}return null}get to(){const e=this.#ie;return null==e&&3===this.type?vs:e}set to(e){this.#ie=null==e?null:pt(e)}get nonce(){return this.#ae}set nonce(e){this.#ae=he(e,"value")}get gasLimit(){return this.#oe}set gasLimit(e){this.#oe=oe(e)}get gasPrice(){const e=this.#ce;return null!=e||0!==this.type&&1!==this.type?e:To}set gasPrice(e){this.#ce=null==e?null:oe(e,"gasPrice")}get maxPriorityFeePerGas(){const e=this.#le;return null==e?2===this.type||3===this.type?To:null:e}set maxPriorityFeePerGas(e){this.#le=null==e?null:oe(e,"maxPriorityFeePerGas")}get maxFeePerGas(){const e=this.#ue;return null==e?2===this.type||3===this.type?To:null:e}set maxFeePerGas(e){this.#ue=null==e?null:oe(e,"maxFeePerGas")}get data(){return this.#t}set data(e){this.#t=K(e)}get value(){return this.#he}set value(e){this.#he=oe(e,"value")}get chainId(){return this.#de}set chainId(e){this.#de=oe(e)}get signature(){return this.#pe||null}set signature(e){this.#pe=null==e?null:qi.from(e)}get accessList(){const e=this.#fe||null;return null==e?1===this.type||2===this.type||3===this.type?[]:null:e}set accessList(e){this.#fe=null==e?null:is(e)}get maxFeePerBlobGas(){const e=this.#ge;return null==e&&3===this.type?To:e}set maxFeePerBlobGas(e){this.#ge=null==e?null:oe(e,"maxFeePerBlobGas")}get blobVersionedHashes(){let e=this.#me;return null==e&&3===this.type?[]:e}set blobVersionedHashes(e){if(null!=e){D(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let t=0;t<e.length;t++)D(q(e[t],32),"invalid blobVersionedHash",`value[${t}]`,e[t])}this.#me=e}constructor(){this.#re=null,this.#ie=null,this.#ae=0,this.#oe=To,this.#ce=null,this.#le=null,this.#ue=null,this.#t="0x",this.#he=To,this.#de=To,this.#pe=null,this.#fe=null,this.#ge=null,this.#me=null}get hash(){return null==this.signature?null:it(this.serialized)}get unsignedHash(){return it(this.unsignedSerialized)}get from(){return null==this.signature?null:Co(this.unsignedHash,this.signature)}get fromPublicKey(){return null==this.signature?null:wo.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return null!=this.signature}get serialized(){switch(U(null!=this.signature,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"}),this.inferType()){case 0:return Ho(this,this.signature);case 1:return qo(this,this.signature);case 2:return Wo(this,this.signature);case 3:return Vo(this,this.signature)}U(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})}get unsignedSerialized(){switch(this.inferType()){case 0:return Ho(this);case 1:return qo(this);case 2:return Wo(this);case 3:return Vo(this)}U(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".unsignedSerialized"})}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=null!=this.gasPrice,t=null!=this.maxFeePerGas||null!=this.maxPriorityFeePerGas,n=null!=this.accessList,s=null!=this.#ge||this.#me;null!=this.maxFeePerGas&&null!=this.maxPriorityFeePerGas&&U(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),U(!t||0!==this.type&&1!==this.type,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),U(0!==this.type||!n,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const r=[];return null!=this.type?r.push(this.type):t?r.push(2):e?(r.push(1),n||r.push(0)):n?(r.push(1),r.push(2)):(s&&this.to||(r.push(0),r.push(1),r.push(2)),r.push(3)),r.sort(),r}isLegacy(){return 0===this.type}isBerlin(){return 1===this.type}isLondon(){return 2===this.type}isCancun(){return 3===this.type}clone(){return Ko.from(this)}toJSON(){const e=e=>null==e?null:e.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(null==e)return new Ko;if("string"==typeof e){const t=z(e);if(t[0]>=127)return Ko.from(function(e){const t=_o(e);D(Array.isArray(t)&&(9===t.length||6===t.length),"invalid field count for legacy transaction","data",e);const n={type:0,nonce:Uo(t[0],"nonce"),gasPrice:Do(t[1],"gasPrice"),gasLimit:Do(t[2],"gasLimit"),to:Ro(t[3]),value:Do(t[4],"value"),data:K(t[5]),chainId:To};if(6===t.length)return n;const s=Do(t[6],"v"),r=Do(t[7],"r"),i=Do(t[8],"s");if(r===To&&i===To)n.chainId=s;else{let r=(s-Lo)/Oo;r<To&&(r=To),n.chainId=r,D(r!==To||s===No||s===jo,"non-canonical legacy v","v",t[6]),n.signature=qi.from({r:X(t[7],32),s:X(t[8],32),v:s}),n.hash=it(e)}return n}(t));switch(t[0]){case 1:return Ko.from(function(e){const t=_o(z(e).slice(1));D(Array.isArray(t)&&(8===t.length||11===t.length),"invalid field count for transaction type: 1","data",K(e));const n={type:1,chainId:Do(t[0],"chainId"),nonce:Uo(t[1],"nonce"),gasPrice:Do(t[2],"gasPrice"),gasLimit:Do(t[3],"gasLimit"),to:Ro(t[4]),value:Do(t[5],"value"),data:K(t[6]),accessList:Mo(t[7],"accessList")};return 8===t.length||(n.hash=it(e),zo(n,t.slice(8))),n}(t));case 2:return Ko.from(function(e){const t=_o(z(e).slice(1));D(Array.isArray(t)&&(9===t.length||12===t.length),"invalid field count for transaction type: 2","data",K(e));const n={type:2,chainId:Do(t[0],"chainId"),nonce:Uo(t[1],"nonce"),maxPriorityFeePerGas:Do(t[2],"maxPriorityFeePerGas"),maxFeePerGas:Do(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:Do(t[4],"gasLimit"),to:Ro(t[5]),value:Do(t[6],"value"),data:K(t[7]),accessList:Mo(t[8],"accessList")};return 9===t.length||(n.hash=it(e),zo(n,t.slice(9))),n}(t));case 3:return Ko.from(function(e){const t=_o(z(e).slice(1));D(Array.isArray(t)&&(11===t.length||14===t.length),"invalid field count for transaction type: 3","data",K(e));const n={type:3,chainId:Do(t[0],"chainId"),nonce:Uo(t[1],"nonce"),maxPriorityFeePerGas:Do(t[2],"maxPriorityFeePerGas"),maxFeePerGas:Do(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:Do(t[4],"gasLimit"),to:Ro(t[5]),value:Do(t[6],"value"),data:K(t[7]),accessList:Mo(t[8],"accessList"),maxFeePerBlobGas:Do(t[9],"maxFeePerBlobGas"),blobVersionedHashes:t[10]};D(null!=n.to,"invalid address for transaction type: 3","data",e),D(Array.isArray(n.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",e);for(let t=0;t<n.blobVersionedHashes.length;t++)D(q(n.blobVersionedHashes[t],32),`invalid blobVersionedHash at index ${t}: must be length 32`,"data",e);return 11===t.length||(n.hash=it(e),zo(n,t.slice(11))),n}(t))}U(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const t=new Ko;return null!=e.type&&(t.type=e.type),null!=e.to&&(t.to=e.to),null!=e.nonce&&(t.nonce=e.nonce),null!=e.gasLimit&&(t.gasLimit=e.gasLimit),null!=e.gasPrice&&(t.gasPrice=e.gasPrice),null!=e.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas),null!=e.maxFeePerGas&&(t.maxFeePerGas=e.maxFeePerGas),null!=e.maxFeePerBlobGas&&(t.maxFeePerBlobGas=e.maxFeePerBlobGas),null!=e.data&&(t.data=e.data),null!=e.value&&(t.value=e.value),null!=e.chainId&&(t.chainId=e.chainId),null!=e.signature&&(t.signature=qi.from(e.signature)),null!=e.accessList&&(t.accessList=e.accessList),null!=e.blobVersionedHashes&&(t.blobVersionedHashes=e.blobVersionedHashes),null!=e.hash&&(D(t.isSigned(),"unsigned transaction cannot define hash","tx",e),D(t.hash===e.hash,"hash mismatch","tx",e)),null!=e.from&&(D(t.isSigned(),"unsigned transaction cannot define from","tx",e),D(t.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),t}}const Jo="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const Qo=BigInt(58);function Yo(e){return e.match(/^ipfs:\/\/ipfs\//i)?e=e.substring(12):e.match(/^ipfs:\/\//i)?e=e.substring(7):D(!1,"unsupported IPFS format","link",e),`https://gateway.ipfs.io/ipfs/${e}`}class Zo{name;constructor(e){j(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,t){throw new Error("unsupported coin")}async decodeAddress(e,t){throw new Error("unsupported coin")}}const Xo=new RegExp("^(ipfs)://(.*)$","i"),ec=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),Xo,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];class tc{provider;address;name;#ye;#be;constructor(e,t,n){j(this,{provider:e,address:t,name:n}),this.#ye=null,this.#be=new fr(t,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e)}async supportsWildcard(){return null==this.#ye&&(this.#ye=(async()=>{try{return await this.#be.supportsInterface("0x9061b923")}catch(e){if(B(e,"CALL_EXCEPTION"))return!1;throw this.#ye=null,e}})()),await this.#ye}async#we(e,t){t=(t||[]).slice();const n=this.#be.interface;t.unshift(Bi(this.name));let s=null;await this.supportsWildcard()&&(s=n.getFunction(e),U(s,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),t=[Ri(this.name,255),n.encodeFunctionData(s,t)],e="resolve(bytes,bytes)"),t.push({enableCcipRead:!0});try{const r=await this.#be[e](...t);return s?n.decodeFunctionResult(s,r)[0]:r}catch(e){if(!B(e,"CALL_EXCEPTION"))throw e}return null}async getAddress(e){if(null==e&&(e=60),60===e)try{const e=await this.#we("addr(bytes32)");return null==e||e===vs?null:e}catch(e){if(B(e,"CALL_EXCEPTION"))return null;throw e}if(e>=0&&e<2147483648){let t=e+2147483648;const n=await this.#we("addr(bytes32,uint)",[t]);if(q(n,20))return pt(n)}let t=null;for(const n of this.provider.plugins)if(n instanceof Zo&&n.supportsCoinType(e)){t=n;break}if(null==t)return null;const n=await this.#we("addr(bytes32,uint)",[e]);if(null==n||"0x"===n)return null;const s=await t.decodeAddress(e,n);if(null!=s)return s;U(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:n}})}async getText(e){const t=await this.#we("text(bytes32,string)",[e]);return null==t||"0x"===t?null:t}async getContentHash(){const e=await this.#we("contenthash(bytes32)");if(null==e||"0x"===e)return null;const t=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const e="e3010170"===t[1]?"ipfs":"ipns",n=parseInt(t[4],16);if(t[5].length===2*n)return`${e}://${function(e){const t=z(e);let n=ue(t),s="";for(;n;)s=Jo[Number(n%Qo)]+s,n/=Qo;for(let e=0;e<t.length&&!t[e];e++)s=Jo[0]+s;return s}("0x"+t[2])}`}const n=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(n&&64===n[1].length)return`bzz://${n[1]}`;U(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const t=await this.getText("avatar");if(null==t)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:t});for(let n=0;n<ec.length;n++){const s=t.match(ec[n]);if(null==s)continue;const r=s[1].toLowerCase();switch(r){case"https":case"data":return e.push({type:"url",value:t}),{linkage:e,url:t};case"ipfs":{const n=Yo(t);return e.push({type:"ipfs",value:t}),e.push({type:"url",value:n}),{linkage:e,url:n}}case"erc721":case"erc1155":{const n="erc721"===r?"tokenURI(uint256)":"uri(uint256)";e.push({type:r,value:t});const i=await this.getAddress();if(null==i)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const a=(s[2]||"").split("/");if(2!==a.length)return e.push({type:`!${r}caip`,value:s[2]||""}),{url:null,linkage:e};const o=a[1],c=new fr(a[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if("erc721"===r){const t=await c.ownerOf(o);if(i!==t)return e.push({type:"!owner",value:t}),{url:null,linkage:e};e.push({type:"owner",value:t})}else if("erc1155"===r){const t=await c.balanceOf(i,o);if(!t)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:t.toString()})}let l=await c[n](o);if(null==l||"0x"===l)return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:l}),"erc1155"===r&&(l=l.replace("{id}",de(o,32).substring(2)),e.push({type:"metadata-url-expanded",value:l})),l.match(/^ipfs:/i)&&(l=Yo(l)),e.push({type:"metadata-url",value:l});let u={};const h=await new ys(l).send();h.assertOk();try{u=h.bodyJson}catch(t){try{e.push({type:"!metadata",value:h.bodyText})}catch(t){const n=h.body;return n&&e.push({type:"!metadata",value:K(n)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!u)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(u)});let d=u.image;if("string"!=typeof d)return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(d.match(/^(https:\/\/|data:)/i));else{if(null==d.match(Xo))return e.push({type:"!imageUrl-ipfs",value:d}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:d}),d=Yo(d)}return e.push({type:"url",value:d}),{linkage:e,url:d}}}}}catch(e){}return{linkage:e,url:null}}static async getEnsAddress(e){const t=await e.getNetwork(),n=t.getPlugin("org.ethers.plugins.network.Ens");return U(n,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:t}}),n.address}static async#ve(e,t){const n=await tc.getEnsAddress(e);try{const s=new fr(n,["function resolver(bytes32) view returns (address)"],e),r=await s.resolver(Bi(t),{enableCcipRead:!0});return r===vs?null:r}catch(e){throw e}return null}static async fromName(e,t){let n=t;for(;;){if(""===n||"."===n)return null;if("eth"!==t&&"eth"===n)return null;const s=await tc.#ve(e,n);if(null!=s){const r=new tc(e,s,t);return n===t||await r.supportsWildcard()?r:null}n=n.split(".").slice(1).join(".")}}}const nc=BigInt(0);function sc(e,t){return function(n){return null==n?t:e(n)}}function rc(e,t){return n=>{if(t&&null==n)return null;if(!Array.isArray(n))throw new Error("not an array");return n.map((t=>e(t)))}}function ic(e,t){return n=>{const s={};for(const r in e){let i=r;if(t&&r in t&&!(i in n))for(const e of t[r])if(e in n){i=e;break}try{const t=e[r](n[i]);void 0!==t&&(s[r]=t)}catch(e){U(!1,`invalid value for value.${r} (${e instanceof Error?e.message:"not-an-error"})`,"BAD_DATA",{value:n})}}return s}}function ac(e){return D(q(e,!0),"invalid data","value",e),e}function oc(e){return D(q(e,32),"invalid hash","value",e),e}const cc=ic({address:pt,blockHash:oc,blockNumber:he,data:ac,index:he,removed:sc((function(e){switch(e){case!0:case"true":return!0;case!1:case"false":return!1}D(!1,`invalid boolean; ${JSON.stringify(e)}`,"value",e)}),!1),topics:rc(oc),transactionHash:oc,transactionIndex:he},{index:["logIndex"]});const lc=ic({hash:sc(oc),parentHash:oc,parentBeaconBlockRoot:sc(oc,null),number:he,timestamp:he,nonce:sc(ac),difficulty:oe,gasLimit:oe,gasUsed:oe,stateRoot:sc(oc,null),receiptsRoot:sc(oc,null),blobGasUsed:sc(oe,null),excessBlobGas:sc(oe,null),miner:sc(pt),extraData:ac,baseFeePerGas:sc(oe)});const uc=ic({transactionIndex:he,blockNumber:he,transactionHash:oc,address:pt,topics:rc(oc),data:ac,index:he,blockHash:oc},{index:["logIndex"]});const hc=ic({to:sc(pt,null),from:sc(pt,null),contractAddress:sc(pt,null),index:he,root:sc(K),gasUsed:oe,blobGasUsed:sc(oe,null),logsBloom:sc(ac),blockHash:oc,hash:oc,logs:rc((function(e){return uc(e)})),blockNumber:he,cumulativeGasUsed:oe,effectiveGasPrice:sc(oe),blobGasPrice:sc(oe,null),status:sc(he),type:sc(he,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function dc(e){e.to&&oe(e.to)===nc&&(e.to="0x0000000000000000000000000000000000000000");const t=ic({hash:oc,index:sc(he,void 0),type:e=>"0x"===e||null==e?0:he(e),accessList:sc(is,null),blobVersionedHashes:sc(rc(oc,!0),null),blockHash:sc(oc,null),blockNumber:sc(he,null),transactionIndex:sc(he,null),from:pt,gasPrice:sc(oe),maxPriorityFeePerGas:sc(oe),maxFeePerGas:sc(oe),maxFeePerBlobGas:sc(oe,null),gasLimit:oe,to:sc(pt,null),value:oe,nonce:he,data:ac,creates:sc(pt,null),chainId:sc(oe,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(e);if(null==t.to&&null==t.creates&&(t.creates=function(e){const t=pt(e.from);let n=oe(e.nonce,"tx.nonce").toString(16);return n="0"===n?"0x":n.length%2?"0x0"+n:"0x"+n,pt(Y(it(Io([t,n])),12))}(t)),1!==e.type&&2!==e.type||null!=e.accessList||(t.accessList=[]),e.signature?t.signature=qi.from(e.signature):t.signature=qi.from(e),null==t.chainId){const e=t.signature.legacyChainId;null!=e&&(t.chainId=e)}return t.blockHash&&oe(t.blockHash)===nc&&(t.blockHash=null),t}class pc{name;constructor(e){j(this,{name:e})}clone(){return new pc(this.name)}}class fc extends pc{effectiveBlock;txBase;txCreate;txDataZero;txDataNonzero;txAccessListStorageKey;txAccessListAddress;constructor(e,t){null==e&&(e=0),super(`org.ethers.network.plugins.GasCost#${e||0}`);const n={effectiveBlock:e};function s(e,s){let r=(t||{})[e];null==r&&(r=s),D("number"==typeof r,`invalud value for ${e}`,"costs",t),n[e]=r}s("txBase",21e3),s("txCreate",32e3),s("txDataZero",4),s("txDataNonzero",16),s("txAccessListStorageKey",1900),s("txAccessListAddress",2400),j(this,n)}clone(){return new fc(this.effectiveBlock,this)}}class gc extends pc{address;targetNetwork;constructor(e,t){super("org.ethers.plugins.network.Ens"),j(this,{address:e||"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",targetNetwork:null==t?1:t})}clone(){return new gc(this.address,this.targetNetwork)}}class mc extends pc{#x;#Ee;get url(){return this.#x}get processFunc(){return this.#Ee}constructor(e,t){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin"),this.#x=e,this.#Ee=t}clone(){return this}}const yc=new Map;class bc{#Ae;#de;#ke;constructor(e,t){this.#Ae=e,this.#de=oe(t),this.#ke=new Map}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return this.#Ae}set name(e){this.#Ae=e}get chainId(){return this.#de}set chainId(e){this.#de=oe(e,"chainId")}matches(e){if(null==e)return!1;if("string"==typeof e){try{return this.chainId===oe(e)}catch(e){}return this.name===e}if("number"==typeof e||"bigint"==typeof e){try{return this.chainId===oe(e)}catch(e){}return!1}if("object"==typeof e){if(null!=e.chainId){try{return this.chainId===oe(e.chainId)}catch(e){}return!1}return null!=e.name&&this.name===e.name}return!1}get plugins(){return Array.from(this.#ke.values())}attachPlugin(e){if(this.#ke.get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return this.#ke.set(e.name,e.clone()),this}getPlugin(e){return this.#ke.get(e)||null}getPlugins(e){return this.plugins.filter((t=>t.name.split("#")[0]===e))}clone(){const e=new bc(this.name,this.chainId);return this.plugins.forEach((t=>{e.attachPlugin(t.clone())})),e}computeIntrinsicGas(e){const t=this.getPlugin("org.ethers.plugins.network.GasCost")||new fc;let n=t.txBase;if(null==e.to&&(n+=t.txCreate),e.data)for(let s=2;s<e.data.length;s+=2)"00"===e.data.substring(s,s+2)?n+=t.txDataZero:n+=t.txDataNonzero;if(e.accessList){const s=is(e.accessList);for(const e in s)n+=t.txAccessListAddress+t.txAccessListStorageKey*s[e].storageKeys.length}return n}static from(e){if(function(){if(Ec)return;function e(e,t,n){const s=function(){const s=new bc(e,t);return null!=n.ensNetwork&&s.attachPlugin(new gc(null,n.ensNetwork)),s.attachPlugin(new fc),(n.plugins||[]).forEach((e=>{s.attachPlugin(e)})),s};bc.register(e,s),bc.register(t,s),n.altNames&&n.altNames.forEach((e=>{bc.register(e,s)}))}Ec=!0,e("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),e("ropsten",3,{ensNetwork:3}),e("rinkeby",4,{ensNetwork:4}),e("goerli",5,{ensNetwork:5}),e("kovan",42,{ensNetwork:42}),e("sepolia",11155111,{ensNetwork:11155111}),e("holesky",17e3,{ensNetwork:17e3}),e("classic",61,{}),e("classicKotti",6,{}),e("arbitrum",42161,{ensNetwork:1}),e("arbitrum-goerli",421613,{}),e("arbitrum-sepolia",421614,{}),e("base",8453,{ensNetwork:1}),e("base-goerli",84531,{}),e("base-sepolia",84532,{}),e("bnb",56,{ensNetwork:1}),e("bnbt",97,{}),e("linea",59144,{ensNetwork:1}),e("linea-goerli",59140,{}),e("matic",137,{ensNetwork:1,plugins:[vc("https://gasstation.polygon.technology/v2")]}),e("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[vc("https://gasstation-testnet.polygon.technology/v2")]}),e("optimism",10,{ensNetwork:1,plugins:[]}),e("optimism-goerli",420,{}),e("optimism-sepolia",11155420,{}),e("xdai",100,{ensNetwork:1})}(),null==e)return bc.from("mainnet");if("number"==typeof e&&(e=BigInt(e)),"string"==typeof e||"bigint"==typeof e){const t=yc.get(e);if(t)return t();if("bigint"==typeof e)return new bc("unknown",e);D(!1,"unknown network","network",e)}if("function"==typeof e.clone){return e.clone()}if("object"==typeof e){D("string"==typeof e.name&&"number"==typeof e.chainId,"invalid network object name or chainId","network",e);const t=new bc(e.name,e.chainId);return(e.ensAddress||null!=e.ensNetwork)&&t.attachPlugin(new gc(e.ensAddress,e.ensNetwork)),t}D(!1,"invalid network","network",e)}static register(e,t){"number"==typeof e&&(e=BigInt(e));const n=yc.get(e);n&&D(!1,`conflicting network for ${JSON.stringify(n.name)}`,"nameOrChainId",e),yc.set(e,t)}}function wc(e,t){const n=String(e);if(!n.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${e}`);const s=n.split(".");if(1===s.length&&s.push(""),2!==s.length)throw new Error(`invalid gwei value: ${e}`);for(;s[1].length<t;)s[1]+="0";if(s[1].length>9){let e=BigInt(s[1].substring(0,9));s[1].substring(9).match(/^0+$/)||e++,s[1]=e.toString()}return BigInt(s[0]+s[1])}function vc(e){return new mc(e,(async(e,t,n)=>{let s;n.setHeader("User-Agent","ethers");try{const[t,r]=await Promise.all([n.send(),e()]);s=t;const i=s.bodyJson.standard;return{gasPrice:r.gasPrice,maxFeePerGas:wc(i.maxFee,9),maxPriorityFeePerGas:wc(i.maxPriorityFee,9)}}catch(e){U(!1,`error encountered with polygon gas station (${JSON.stringify(n.url)})`,"SERVER_ERROR",{request:n,response:s,error:e})}}))}let Ec=!1;function Ac(e){return JSON.parse(JSON.stringify(e))}class kc{#_e;#Pe;#xe;#Se;constructor(e){this.#_e=e,this.#Pe=null,this.#xe=4e3,this.#Se=-2}get pollingInterval(){return this.#xe}set pollingInterval(e){this.#xe=e}async#Ie(){try{const e=await this.#_e.getBlockNumber();if(-2===this.#Se)return void(this.#Se=e);if(e!==this.#Se){for(let t=this.#Se+1;t<=e;t++){if(null==this.#Pe)return;await this.#_e.emit("block",t)}this.#Se=e}}catch(e){}null!=this.#Pe&&(this.#Pe=this.#_e._setTimeout(this.#Ie.bind(this),this.#xe))}start(){this.#Pe||(this.#Pe=this.#_e._setTimeout(this.#Ie.bind(this),this.#xe),this.#Ie())}stop(){this.#Pe&&(this.#_e._clearTimeout(this.#Pe),this.#Pe=null)}pause(e){this.stop(),e&&(this.#Se=-2)}resume(){this.start()}}class _c{#_e;#Ie;#Ce;constructor(e){this.#_e=e,this.#Ce=!1,this.#Ie=e=>{this._poll(e,this.#_e)}}async _poll(e,t){throw new Error("sub-classes must override this")}start(){this.#Ce||(this.#Ce=!0,this.#Ie(-2),this.#_e.on("block",this.#Ie))}stop(){this.#Ce&&(this.#Ce=!1,this.#_e.off("block",this.#Ie))}pause(e){this.stop()}resume(){this.start()}}class Pc extends _c{#Te;#Oe;constructor(e,t){super(e),this.#Te=t,this.#Oe=-2}pause(e){e&&(this.#Oe=-2),super.pause(e)}async _poll(e,t){const n=await t.getBlock(this.#Te);null!=n&&(-2===this.#Oe?this.#Oe=n.number:n.number>this.#Oe&&(t.emit(this.#Te,n.number),this.#Oe=n.number))}}class xc extends _c{#Z;constructor(e,t){super(e),this.#Z=Ac(t)}async _poll(e,t){throw new Error("@TODO")}}class Sc extends _c{#Ne;constructor(e,t){super(e),this.#Ne=t}async _poll(e,t){const n=await t.getTransactionReceipt(this.#Ne);n&&t.emit(this.#Ne,n)}}class Ic{#_e;#Z;#Pe;#Ce;#Se;constructor(e,t){this.#_e=e,this.#Z=Ac(t),this.#Pe=this.#Ie.bind(this),this.#Ce=!1,this.#Se=-2}async#Ie(e){if(-2===this.#Se)return;const t=Ac(this.#Z);t.fromBlock=this.#Se+1,t.toBlock=e;const n=await this.#_e.getLogs(t);if(0!==n.length)for(const e of n)this.#_e.emit(this.#Z,e),this.#Se=e.blockNumber;else this.#Se<e-60&&(this.#Se=e-60)}start(){this.#Ce||(this.#Ce=!0,-2===this.#Se&&this.#_e.getBlockNumber().then((e=>{this.#Se=e})),this.#_e.on("block",this.#Pe))}stop(){this.#Ce&&(this.#Ce=!1,this.#_e.off("block",this.#Pe))}pause(e){this.stop(),e&&(this.#Se=-2)}resume(){this.start()}}const Cc=BigInt(2);function Tc(e){return e&&"function"==typeof e.then}function Oc(e,t){return e+":"+JSON.stringify(t,((e,t)=>{if(null==t)return"null";if("bigint"==typeof t)return`bigint:${t.toString()}`;if("string"==typeof t)return t.toLowerCase();if("object"==typeof t&&!Array.isArray(t)){const e=Object.keys(t);return e.sort(),e.reduce(((e,n)=>(e[n]=t[n],e)),{})}return t}))}class Nc{name;constructor(e){j(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function jc(e){return(e=Array.from(new Set(e).values())).sort(),e}async function Lc(e,t){if(null==e)throw new Error("invalid event");if(Array.isArray(e)&&(e={topics:e}),"string"==typeof e)switch(e){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:e,tag:e}}if(q(e,32)){const t=e.toLowerCase();return{type:"transaction",tag:Oc("tx",{hash:t}),hash:t}}if(e.orphan){const t=e;return{type:"orphan",tag:Oc("orphan",t),filter:(n=t,JSON.parse(JSON.stringify(n)))}}var n;if(e.address||e.topics){const n=e,s={topics:(n.topics||[]).map((e=>null==e?null:Array.isArray(e)?jc(e.map((e=>e.toLowerCase()))):e.toLowerCase()))};if(n.address){const e=[],r=[],i=n=>{q(n)?e.push(n):r.push((async()=>{e.push(await Gn(n,t))})())};Array.isArray(n.address)?n.address.forEach(i):i(n.address),r.length&&await Promise.all(r),s.address=jc(e.map((e=>e.toLowerCase())))}return{filter:s,tag:Oc("event",s),type:"event"}}D(!1,"unknown ProviderEvent","event",e)}function Bc(){return(new Date).getTime()}const Rc={cacheTimeout:250,pollingInterval:4e3};class Mc{#je;#ke;#Le;#Be;#Re;#Me;#Ue;#De;#Fe;#$e;#Ge;#u;constructor(e,t){if(this.#u=Object.assign({},Rc,t||{}),"any"===e)this.#Me=!0,this.#Re=null;else if(e){const t=bc.from(e);this.#Me=!1,this.#Re=Promise.resolve(t),setTimeout((()=>{this.emit("network",t,null)}),0)}else this.#Me=!1,this.#Re=null;this.#De=-1,this.#Ue=new Map,this.#je=new Map,this.#ke=new Map,this.#Le=null,this.#Be=!1,this.#Fe=1,this.#$e=new Map,this.#Ge=!1}get pollingInterval(){return this.#u.pollingInterval}get provider(){return this}get plugins(){return Array.from(this.#ke.values())}attachPlugin(e){if(this.#ke.get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return this.#ke.set(e.name,e.connect(this)),this}getPlugin(e){return this.#ke.get(e)||null}get disableCcipRead(){return this.#Ge}set disableCcipRead(e){this.#Ge=!!e}async#He(e){const t=this.#u.cacheTimeout;if(t<0)return await this._perform(e);const n=Oc(e.method,e);let s=this.#Ue.get(n);return s||(s=this._perform(e),this.#Ue.set(n,s),setTimeout((()=>{this.#Ue.get(n)===s&&this.#Ue.delete(n)}),t)),await s}async ccipReadFetch(e,t,n){if(this.disableCcipRead||0===n.length||null==e.to)return null;const s=e.to.toLowerCase(),r=t.toLowerCase(),i=[];for(let t=0;t<n.length;t++){const a=n[t],o=a.replace("{sender}",s).replace("{data}",r),c=new ys(o);-1===a.indexOf("{data}")&&(c.body={data:r,sender:s}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:c,index:t,urls:n});let l="unknown error";const u=await c.send();try{const e=u.bodyJson;if(e.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:c,result:e}),e.data;e.message&&(l=e.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:c,result:e})}catch(e){}U(u.statusCode<400||u.statusCode>=500,`response not found during CCIP fetch: ${l}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:a,errorMessage:l}}),i.push(l)}U(!1,`error encountered during CCIP fetch: ${i.map((e=>JSON.stringify(e))).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:n,errorMessages:i}})}_wrapBlock(e,t){return new js(function(e){const t=lc(e);return t.transactions=e.transactions.map((e=>"string"==typeof e?e:dc(e))),t}(e),this)}_wrapLog(e,t){return new Ls(function(e){return cc(e)}(e),this)}_wrapTransactionReceipt(e,t){return new Bs(function(e){return hc(e)}(e),this)}_wrapTransactionResponse(e,t){return new Rs(dc(e),this)}_detectNetwork(){U(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){U(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=he(await this.#He({method:"getBlockNumber"}),"%response");return this.#De>=0&&(this.#De=e),e}_getAddress(e){return Gn(e,this)}_getBlockTag(e){if(null==e)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}return q(e)?q(e,32)?e:fe(e):("bigint"==typeof e&&(e=he(e,"blockTag")),"number"==typeof e?e>=0?fe(e):this.#De>=0?fe(this.#De+e):this.getBlockNumber().then((t=>fe(t+e))):void D(!1,"invalid blockTag","blockTag",e))}_getFilter(e){const t=(e.topics||[]).map((e=>null==e?null:Array.isArray(e)?jc(e.map((e=>e.toLowerCase()))):e.toLowerCase())),n="blockHash"in e?e.blockHash:void 0,s=(e,s,r)=>{let i;switch(e.length){case 0:break;case 1:i=e[0];break;default:e.sort(),i=e}if(n&&(null!=s||null!=r))throw new Error("invalid filter");const a={};return i&&(a.address=i),t.length&&(a.topics=t),s&&(a.fromBlock=s),r&&(a.toBlock=r),n&&(a.blockHash=n),a};let r,i,a=[];if(e.address)if(Array.isArray(e.address))for(const t of e.address)a.push(this._getAddress(t));else a.push(this._getAddress(e.address));return"fromBlock"in e&&(r=this._getBlockTag(e.fromBlock)),"toBlock"in e&&(i=this._getBlockTag(e.toBlock)),a.filter((e=>"string"!=typeof e)).length||null!=r&&"string"!=typeof r||null!=i&&"string"!=typeof i?Promise.all([Promise.all(a),r,i]).then((e=>s(e[0],e[1],e[2]))):s(a,r,i)}_getTransactionRequest(e){const t=Ns(e),n=[];if(["to","from"].forEach((e=>{if(null==t[e])return;const s=Gn(t[e],this);Tc(s)?n.push(async function(){t[e]=await s}()):t[e]=s})),null!=t.blockTag){const e=this._getBlockTag(t.blockTag);Tc(e)?n.push(async function(){t.blockTag=await e}()):t.blockTag=e}return n.length?async function(){return await Promise.all(n),t}():t}async getNetwork(){if(null==this.#Re){const e=(async()=>{try{const e=await this._detectNetwork();return this.emit("network",e,null),e}catch(t){throw this.#Re===e&&(this.#Re=null),t}})();return this.#Re=e,(await e).clone()}const e=this.#Re,[t,n]=await Promise.all([e,this._detectNetwork()]);return t.chainId!==n.chainId&&(this.#Me?(this.emit("network",n,t),this.#Re===e&&(this.#Re=Promise.resolve(n))):U(!1,`network changed: ${t.chainId} => ${n.chainId} `,"NETWORK_ERROR",{event:"changed"})),t.clone()}async getFeeData(){const e=await this.getNetwork(),t=async()=>{const{_block:t,gasPrice:n,priorityFee:s}=await N({_block:this.#ze("latest",!1),gasPrice:(async()=>{try{return oe(await this.#He({method:"getGasPrice"}),"%response")}catch(e){}return null})(),priorityFee:(async()=>{try{return oe(await this.#He({method:"getPriorityFee"}),"%response")}catch(e){}return null})()});let r=null,i=null;const a=this._wrapBlock(t,e);return a&&a.baseFeePerGas&&(i=null!=s?s:BigInt("1000000000"),r=a.baseFeePerGas*Cc+i),new Os(n,r,i)},n=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(n){const e=new ys(n.url),s=await n.processFunc(t,this,e);return new Os(s.gasPrice,s.maxFeePerGas,s.maxPriorityFeePerGas)}return await t()}async estimateGas(e){let t=this._getTransactionRequest(e);return Tc(t)&&(t=await t),oe(await this.#He({method:"estimateGas",transaction:t}),"%response")}async#We(e,t,n){U(n<10,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:t,enableCcipRead:!0})});const s=Ns(e);try{return K(await this._perform({method:"call",transaction:s,blockTag:t}))}catch(e){if(!this.disableCcipRead&&R(e)&&e.data&&n>=0&&"latest"===t&&null!=s.to&&"0x556f1830"===Y(e.data,0,4)){const r=e.data,i=await Gn(s.to,this);let a;try{a=function(e){const t={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};U(Q(e)>=160,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const n=Y(e,0,32);U(Y(n,0,12)===Y(zc,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),t.sender=Y(n,12);try{const n=[],s=he(Y(e,32,64)),r=he(Y(e,s,s+32)),i=Y(e,s+32);for(let e=0;e<r;e++){const t=Uc(i,32*e);if(null==t)throw new Error("abort");n.push(t)}t.urls=n}catch(e){U(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const n=Dc(e,64);if(null==n)throw new Error("abort");t.calldata=n}catch(e){U(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}U(Y(e,100,128)===Y(zc,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),t.selector=Y(e,96,100);try{const n=Dc(e,128);if(null==n)throw new Error("abort");t.extraData=n}catch(e){U(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return t.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map((e=>t[e])),t}(Y(e.data,4))}catch(e){U(!1,e.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:s,info:{data:r}})}U(a.sender.toLowerCase()===i.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:r,reason:"OffchainLookup",transaction:s,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:a.errorArgs}});const o=await this.ccipReadFetch(s,a.calldata,a.urls);U(null!=o,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:s,info:{data:e.data,errorArgs:a.errorArgs}});const c={to:i,data:J([a.selector,Hc([o,a.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:c});try{const e=await this.#We(c,t,n+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},c),result:e}),e}catch(e){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},c),error:e}),e}}throw e}}async#qe(e){const{value:t}=await N({network:this.getNetwork(),value:e});return t}async call(e){const{tx:t,blockTag:n}=await N({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await this.#qe(this.#We(t,n,e.enableCcipRead?0:-1))}async#Ve(e,t,n){let s=this._getAddress(t),r=this._getBlockTag(n);return"string"==typeof s&&"string"==typeof r||([s,r]=await Promise.all([s,r])),await this.#qe(this.#He(Object.assign(e,{address:s,blockTag:r})))}async getBalance(e,t){return oe(await this.#Ve({method:"getBalance"},e,t),"%response")}async getTransactionCount(e,t){return he(await this.#Ve({method:"getTransactionCount"},e,t),"%response")}async getCode(e,t){return K(await this.#Ve({method:"getCode"},e,t))}async getStorage(e,t,n){const s=oe(t,"position");return K(await this.#Ve({method:"getStorage",position:s},e,n))}async broadcastTransaction(e){const{blockNumber:t,hash:n,network:s}=await N({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),r=Ko.from(e);if(r.hash!==n)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(r,s).replaceableTransaction(t)}async#ze(e,t){if(q(e,32))return await this.#He({method:"getBlock",blockHash:e,includeTransactions:t});let n=this._getBlockTag(e);return"string"!=typeof n&&(n=await n),await this.#He({method:"getBlock",blockTag:n,includeTransactions:t})}async getBlock(e,t){const{network:n,params:s}=await N({network:this.getNetwork(),params:this.#ze(e,!!t)});return null==s?null:this._wrapBlock(s,n)}async getTransaction(e){const{network:t,params:n}=await N({network:this.getNetwork(),params:this.#He({method:"getTransaction",hash:e})});return null==n?null:this._wrapTransactionResponse(n,t)}async getTransactionReceipt(e){const{network:t,params:n}=await N({network:this.getNetwork(),params:this.#He({method:"getTransactionReceipt",hash:e})});if(null==n)return null;if(null==n.gasPrice&&null==n.effectiveGasPrice){const t=await this.#He({method:"getTransaction",hash:e});if(null==t)throw new Error("report this; could not find tx or effectiveGasPrice");n.effectiveGasPrice=t.gasPrice}return this._wrapTransactionReceipt(n,t)}async getTransactionResult(e){const{result:t}=await N({network:this.getNetwork(),result:this.#He({method:"getTransactionResult",hash:e})});return null==t?null:K(t)}async getLogs(e){let t=this._getFilter(e);Tc(t)&&(t=await t);const{network:n,params:s}=await N({network:this.getNetwork(),params:this.#He({method:"getLogs",filter:t})});return s.map((e=>this._wrapLog(e,n)))}_getProvider(e){U(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await tc.fromName(this,e)}async getAvatar(e){const t=await this.getResolver(e);return t?await t.getAvatar():null}async resolveName(e){const t=await this.getResolver(e);return t?await t.getAddress():null}async lookupAddress(e){const t=Bi((e=pt(e)).substring(2).toLowerCase()+".addr.reverse");try{const n=await tc.getEnsAddress(this),s=new fr(n,["function resolver(bytes32) view returns (address)"],this),r=await s.resolver(t);if(null==r||r===vs)return null;const i=new fr(r,["function name(bytes32) view returns (string)"],this),a=await i.name(t);return await this.resolveName(a)!==e?null:a}catch(e){if(B(e,"BAD_DATA")&&"0x"===e.value)return null;if(B(e,"CALL_EXCEPTION"))return null;throw e}return null}async waitForTransaction(e,t,n){const s=null!=t?t:1;return 0===s?this.getTransactionReceipt(e):new Promise((async(t,r)=>{let i=null;const a=async n=>{try{const r=await this.getTransactionReceipt(e);if(null!=r&&n-r.blockNumber+1>=s)return t(r),void(i&&(clearTimeout(i),i=null))}catch(e){console.log("EEE",e)}this.once("block",a)};null!=n&&(i=setTimeout((()=>{null!=i&&(i=null,this.off("block",a),r(M("timeout","TIMEOUT",{reason:"timeout"})))}),n)),a(await this.getBlockNumber())}))}async waitForBlock(e){U(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const t=this.#$e.get(e);t&&(t.timer&&clearTimeout(t.timer),this.#$e.delete(e))}_setTimeout(e,t){null==t&&(t=0);const n=this.#Fe++,s=()=>{this.#$e.delete(n),e()};if(this.paused)this.#$e.set(n,{timer:null,func:s,time:t});else{const e=setTimeout(s,t);this.#$e.set(n,{timer:e,func:s,time:Bc()})}return n}_forEachSubscriber(e){for(const t of this.#je.values())e(t.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new Nc(e.type);case"block":{const e=new kc(this);return e.pollingInterval=this.pollingInterval,e}case"safe":case"finalized":return new Pc(this,e.type);case"event":return new Ic(this,e.filter);case"transaction":return new Sc(this,e.hash);case"orphan":return new xc(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,t){for(const n of this.#je.values())if(n.subscriber===e){n.started&&n.subscriber.stop(),n.subscriber=t,n.started&&t.start(),null!=this.#Le&&t.pause(this.#Le);break}}async#Ke(e,t){let n=await Lc(e,this);return"event"===n.type&&t&&t.length>0&&!0===t[0].removed&&(n=await Lc({orphan:"drop-log",log:t[0]},this)),this.#je.get(n.tag)||null}async#Je(e){const t=await Lc(e,this),n=t.tag;let s=this.#je.get(n);if(!s){s={subscriber:this._getSubscriber(t),tag:n,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},this.#je.set(n,s)}return s}async on(e,t){const n=await this.#Je(e);return n.listeners.push({listener:t,once:!1}),n.started||(n.subscriber.start(),n.started=!0,null!=this.#Le&&n.subscriber.pause(this.#Le)),this}async once(e,t){const n=await this.#Je(e);return n.listeners.push({listener:t,once:!0}),n.started||(n.subscriber.start(),n.started=!0,null!=this.#Le&&n.subscriber.pause(this.#Le)),this}async emit(e,...t){const n=await this.#Ke(e,t);if(!n||0===n.listeners.length)return!1;const s=n.listeners.length;return n.listeners=n.listeners.filter((({listener:n,once:s})=>{const r=new Ds(this,s?null:n,e);try{n.call(this,...t,r)}catch(e){}return!s})),0===n.listeners.length&&(n.started&&n.subscriber.stop(),this.#je.delete(n.tag)),s>0}async listenerCount(e){if(e){const t=await this.#Ke(e);return t?t.listeners.length:0}let t=0;for(const{listeners:e}of this.#je.values())t+=e.length;return t}async listeners(e){if(e){const t=await this.#Ke(e);return t?t.listeners.map((({listener:e})=>e)):[]}let t=[];for(const{listeners:e}of this.#je.values())t=t.concat(e.map((({listener:e})=>e)));return t}async off(e,t){const n=await this.#Ke(e);if(!n)return this;if(t){const e=n.listeners.map((({listener:e})=>e)).indexOf(t);e>=0&&n.listeners.splice(e,1)}return t&&0!==n.listeners.length||(n.started&&n.subscriber.stop(),this.#je.delete(n.tag)),this}async removeAllListeners(e){if(e){const{tag:t,started:n,subscriber:s}=await this.#Je(e);n&&s.stop(),this.#je.delete(t)}else for(const[e,{started:t,subscriber:n}]of this.#je)t&&n.stop(),this.#je.delete(e);return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return this.off(e,t)}get destroyed(){return this.#Be}destroy(){this.removeAllListeners();for(const e of this.#$e.keys())this._clearTimeout(e);this.#Be=!0}get paused(){return null!=this.#Le}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(this.#De=-1,null!=this.#Le){if(this.#Le==!!e)return;U(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber((t=>t.pause(e))),this.#Le=!!e;for(const e of this.#$e.values())e.timer&&clearTimeout(e.timer),e.time=Bc()-e.time}resume(){if(null!=this.#Le){this._forEachSubscriber((e=>e.resume())),this.#Le=null;for(const e of this.#$e.values()){let t=e.time;t<0&&(t=0),e.time=Bc(),setTimeout(e.func,t)}}}}function Uc(e,t){try{const n=Dc(e,t);if(n)return Ut(n)}catch(e){}return null}function Dc(e,t){if("0x"===e)return null;try{const n=he(Y(e,t,t+32)),s=he(Y(e,n,n+32));return Y(e,n+32,n+32+s)}catch(e){}return null}function Fc(e){const t=pe(e);if(t.length>32)throw new Error("internal; should not happen");const n=new Uint8Array(32);return n.set(t,32-t.length),n}function $c(e){if(e.length%32==0)return e;const t=new Uint8Array(32*Math.ceil(e.length/32));return t.set(e),t}const Gc=new Uint8Array([]);function Hc(e){const t=[];let n=0;for(let s=0;s<e.length;s++)t.push(Gc),n+=32;for(let s=0;s<e.length;s++){const r=z(e[s]);t[s]=Fc(n),t.push(Fc(r.length)),t.push($c(r)),n+=32+32*Math.ceil(r.length/32)}return J(t)}const zc="0x0000000000000000000000000000000000000000000000000000000000000000";function Wc(e,t){if(e.provider)return e.provider;U(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:t})}async function qc(e,t){let n=Ns(t);if(null!=n.to&&(n.to=Gn(n.to,e)),null!=n.from){const t=n.from;n.from=Promise.all([e.getAddress(),Gn(t,e)]).then((([e,t])=>(D(e.toLowerCase()===t.toLowerCase(),"transaction from mismatch","tx.from",t),e)))}else n.from=e.getAddress();return await N(n)}class Vc{provider;constructor(e){j(this,{provider:e||null})}async getNonce(e){return Wc(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await qc(this,e)}async populateTransaction(e){const t=Wc(this,"populateTransaction"),n=await qc(this,e);null==n.nonce&&(n.nonce=await this.getNonce("pending")),null==n.gasLimit&&(n.gasLimit=await this.estimateGas(n));const s=await this.provider.getNetwork();if(null!=n.chainId){D(oe(n.chainId)===s.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else n.chainId=s.chainId;const r=null!=n.maxFeePerGas||null!=n.maxPriorityFeePerGas;if(null==n.gasPrice||2!==n.type&&!r?0!==n.type&&1!==n.type||!r||D(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e):D(!1,"eip-1559 transaction do not support gasPrice","tx",e),2!==n.type&&null!=n.type||null==n.maxFeePerGas||null==n.maxPriorityFeePerGas)if(0===n.type||1===n.type){const e=await t.getFeeData();U(null!=e.gasPrice,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),null==n.gasPrice&&(n.gasPrice=e.gasPrice)}else{const e=await t.getFeeData();if(null==n.type)if(null!=e.maxFeePerGas&&null!=e.maxPriorityFeePerGas)if(n.type=2,null!=n.gasPrice){const e=n.gasPrice;delete n.gasPrice,n.maxFeePerGas=e,n.maxPriorityFeePerGas=e}else null==n.maxFeePerGas&&(n.maxFeePerGas=e.maxFeePerGas),null==n.maxPriorityFeePerGas&&(n.maxPriorityFeePerGas=e.maxPriorityFeePerGas);else null!=e.gasPrice?(U(!r,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),null==n.gasPrice&&(n.gasPrice=e.gasPrice),n.type=0):U(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else 2===n.type&&(null==n.maxFeePerGas&&(n.maxFeePerGas=e.maxFeePerGas),null==n.maxPriorityFeePerGas&&(n.maxPriorityFeePerGas=e.maxPriorityFeePerGas))}else n.type=2;return await N(n)}async estimateGas(e){return Wc(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return Wc(this,"call").call(await this.populateCall(e))}async resolveName(e){const t=Wc(this,"resolveName");return await t.resolveName(e)}async sendTransaction(e){const t=Wc(this,"sendTransaction"),n=await this.populateTransaction(e);delete n.from;const s=Ko.from(n);return await t.broadcastTransaction(await this.signTransaction(s))}}class Kc{#_e;#Qe;#Pe;#Ce;#Ye;#Ze;constructor(e){this.#_e=e,this.#Qe=null,this.#Pe=this.#Ie.bind(this),this.#Ce=!1,this.#Ye=null,this.#Ze=!1}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,t){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}async#Ie(e){try{null==this.#Qe&&(this.#Qe=this._subscribe(this.#_e));let e=null;try{e=await this.#Qe}catch(e){if(!B(e,"UNSUPPORTED_OPERATION")||"eth_newFilter"!==e.operation)throw e}if(null==e)return this.#Qe=null,void this.#_e._recoverSubscriber(this,this._recover(this.#_e));const t=await this.#_e.getNetwork();if(this.#Ye||(this.#Ye=t),this.#Ye.chainId!==t.chainId)throw new Error("chaid changed");if(this.#Ze)return;const n=await this.#_e.send("eth_getFilterChanges",[e]);await this._emitResults(this.#_e,n)}catch(e){console.log("@TODO",e)}this.#_e.once("block",this.#Pe)}#Xe(){const e=this.#Qe;e&&(this.#Qe=null,e.then((e=>{this.#_e.send("eth_uninstallFilter",[e])})))}start(){this.#Ce||(this.#Ce=!0,this.#Ie(-2))}stop(){this.#Ce&&(this.#Ce=!1,this.#Ze=!0,this.#Xe(),this.#_e.off("block",this.#Pe))}pause(e){e&&this.#Xe(),this.#_e.off("block",this.#Pe)}resume(){this.start()}}class Jc extends Kc{#et;constructor(e,t){var n;super(e),this.#et=(n=t,JSON.parse(JSON.stringify(n)))}_recover(e){return new Ic(e,this.#et)}async _subscribe(e){return await e.send("eth_newFilter",[this.#et])}async _emitResults(e,t){for(const n of t)e.emit(this.#et,e._wrapLog(n,e._network))}}class Qc extends Kc{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,t){for(const n of t)e.emit("pending",n)}}const Yc="bigint,boolean,function,number,string,symbol".split(/,/g);function Zc(e){if(null==e||Yc.indexOf(typeof e)>=0)return e;if("function"==typeof e.getAddress)return e;if(Array.isArray(e))return e.map(Zc);if("object"==typeof e)return Object.keys(e).reduce(((t,n)=>(t[n]=e[n],t)),{});throw new Error(`should not happen: ${e} (${typeof e})`)}function Xc(e){return new Promise((t=>{setTimeout(t,e)}))}function el(e){return e?e.toLowerCase():e}function tl(e){return e&&"number"==typeof e.pollingInterval}const nl={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class sl extends Vc{address;constructor(e,t){super(e),j(this,{address:t=pt(t)})}connect(e){U(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(e){return await this.populateCall(e)}async sendUncheckedTransaction(e){const t=Zc(e),n=[];if(t.from){const s=t.from;n.push((async()=>{const n=await Gn(s,this.provider);D(null!=n&&n.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),t.from=n})())}else t.from=this.address;if(null==t.gasLimit&&n.push((async()=>{t.gasLimit=await this.provider.estimateGas({...t,from:this.address})})()),null!=t.to){const e=t.to;n.push((async()=>{t.to=await Gn(e,this.provider)})())}n.length&&await Promise.all(n);const s=this.provider.getRpcTransaction(t);return this.provider.send("eth_sendTransaction",[s])}async sendTransaction(e){const t=await this.provider.getBlockNumber(),n=await this.sendUncheckedTransaction(e);return await new Promise(((e,s)=>{const r=[1e3,100];let i=0;const a=async()=>{try{const s=await this.provider.getTransaction(n);if(null!=s)return void e(s.replaceableTransaction(t))}catch(e){if(B(e,"CANCELLED")||B(e,"BAD_DATA")||B(e,"NETWORK_ERROR"))return null==e.info&&(e.info={}),e.info.sendTransactionHash=n,void s(e);if(B(e,"INVALID_ARGUMENT")&&(i++,null==e.info&&(e.info={}),e.info.sendTransactionHash=n,i>10))return void s(e);this.provider.emit("error",M("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:e}))}this.provider._setTimeout((()=>{a()}),r.pop()||4e3)};a()}))}async signTransaction(e){const t=Zc(e);if(t.from){const n=await Gn(t.from,this.provider);D(null!=n&&n.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),t.from=n}else t.from=this.address;const n=this.provider.getRpcTransaction(t);return await this.provider.send("eth_signTransaction",[n])}async signMessage(e){const t="string"==typeof e?Mt(e):e;return await this.provider.send("personal_sign",[K(t),this.address.toLowerCase()])}async signTypedData(e,t,n){const s=Zc(n),r=await ss.resolveNames(e,t,s,(async e=>{const t=await Gn(e);return D(null!=t,"TypedData does not support null address","value",e),t}));return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(ss.getPayload(r.domain,t,r.value))])}async unlock(e){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),e,null])}async _legacySignMessage(e){const t="string"==typeof e?Mt(e):e;return await this.provider.send("eth_sign",[this.address.toLowerCase(),K(t)])}}class rl extends Mc{#u;#tt;#nt;#st;#rt;#Ye;#it;#at(){if(this.#st)return;const e=1===this._getOption("batchMaxCount")?0:this._getOption("batchStallTime");this.#st=setTimeout((()=>{this.#st=null;const e=this.#nt;for(this.#nt=[];e.length;){const t=[e.shift()];for(;e.length&&t.length!==this.#u.batchMaxCount;){t.push(e.shift());if(JSON.stringify(t.map((e=>e.payload))).length>this.#u.batchMaxSize){e.unshift(t.pop());break}}(async()=>{const e=1===t.length?t[0].payload:t.map((e=>e.payload));this.emit("debug",{action:"sendRpcPayload",payload:e});try{const n=await this._send(e);this.emit("debug",{action:"receiveRpcResult",result:n});for(const{resolve:e,reject:s,payload:r}of t){if(this.destroyed){s(M("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:r.method}));continue}const t=n.filter((e=>e.id===r.id))[0];if(null!=t)"error"in t?s(this.getRpcError(r,t)):e(t.result);else{const e=M("missing response for request","BAD_DATA",{value:n,info:{payload:r}});this.emit("error",e),s(e)}}}catch(e){this.emit("debug",{action:"receiveRpcError",error:e});for(const{reject:n}of t)n(e)}})()}}),e)}constructor(e,t){super(e,t),this.#tt=1,this.#u=Object.assign({},nl,t||{}),this.#nt=[],this.#st=null,this.#Ye=null,this.#it=null;{let e=null;const t=new Promise((t=>{e=t}));this.#rt={promise:t,resolve:e}}const n=this._getOption("staticNetwork");"boolean"==typeof n?(D(!n||"any"!==e,"staticNetwork cannot be used on special network 'any'","options",t),n&&null!=e&&(this.#Ye=bc.from(e))):n&&(D(null==e||n.matches(e),"staticNetwork MUST match network object","options",t),this.#Ye=n)}_getOption(e){return this.#u[e]}get _network(){return U(this.#Ye,"network is not available yet","NETWORK_ERROR"),this.#Ye}async _perform(e){if("call"===e.method||"estimateGas"===e.method){let t=e.transaction;if(t&&null!=t.type&&oe(t.type)&&null==t.maxFeePerGas&&null==t.maxPriorityFeePerGas){const n=await this.getFeeData();null==n.maxFeePerGas&&null==n.maxPriorityFeePerGas&&(e=Object.assign({},e,{transaction:Object.assign({},t,{type:void 0})}))}}const t=this.getRpcRequest(e);return null!=t?await this.send(t.method,t.args):super._perform(e)}async _detectNetwork(){const e=this._getOption("staticNetwork");if(e){if(!0!==e)return e;if(this.#Ye)return this.#Ye}return this.#it?await this.#it:this.ready?(this.#it=(async()=>{try{const e=bc.from(oe(await this.send("eth_chainId",[])));return this.#it=null,e}catch(e){throw this.#it=null,e}})(),await this.#it):(this.#it=(async()=>{const e={id:this.#tt++,method:"eth_chainId",params:[],jsonrpc:"2.0"};let t;this.emit("debug",{action:"sendRpcPayload",payload:e});try{t=(await this._send(e))[0],this.#it=null}catch(e){throw this.#it=null,this.emit("debug",{action:"receiveRpcError",error:e}),e}if(this.emit("debug",{action:"receiveRpcResult",result:t}),"result"in t)return bc.from(oe(t.result));throw this.getRpcError(e,t)})(),await this.#it)}_start(){null!=this.#rt&&null!=this.#rt.resolve&&(this.#rt.resolve(),this.#rt=null,(async()=>{for(;null==this.#Ye&&!this.destroyed;)try{this.#Ye=await this._detectNetwork()}catch(e){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",M("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:e}})),await Xc(1e3)}this.#at()})())}async _waitUntilReady(){if(null!=this.#rt)return await this.#rt.promise}_getSubscriber(e){return"pending"===e.type?new Qc(this):"event"===e.type?this._getOption("polling")?new Ic(this,e.filter):new Jc(this,e.filter):"orphan"===e.type&&"drop-log"===e.filter.orphan?new Nc("orphan"):super._getSubscriber(e)}get ready(){return null==this.#rt}getRpcTransaction(e){const t={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach((n=>{if(null==e[n])return;let s=n;"gasLimit"===n&&(s="gas"),t[s]=fe(oe(e[n],`tx.${n}`))})),["from","to","data"].forEach((n=>{null!=e[n]&&(t[n]=K(e[n]))})),e.accessList&&(t.accessList=is(e.accessList)),t}getRpcRequest(e){switch(e.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[el(e.address),e.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[el(e.address),e.blockTag]};case"getCode":return{method:"eth_getCode",args:[el(e.address),e.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[el(e.address),"0x"+e.position.toString(16),e.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[e.signedTransaction]};case"getBlock":if("blockTag"in e)return{method:"eth_getBlockByNumber",args:[e.blockTag,!!e.includeTransactions]};if("blockHash"in e)return{method:"eth_getBlockByHash",args:[e.blockHash,!!e.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[e.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[e.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(e.transaction),e.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(e.transaction)]};case"getLogs":return e.filter&&null!=e.filter.address&&(Array.isArray(e.filter.address)?e.filter.address=e.filter.address.map(el):e.filter.address=el(e.filter.address)),{method:"eth_getLogs",args:[e.filter]}}return null}getRpcError(e,t){const{method:n}=e,{error:s}=t;if("eth_estimateGas"===n&&s.message){const t=s.message;if(!t.match(/revert/i)&&t.match(/insufficient funds/i))return M("insufficient funds","INSUFFICIENT_FUNDS",{transaction:e.params[0],info:{payload:e,error:s}})}if("eth_call"===n||"eth_estimateGas"===n){const t=ol(s),r=Dn.getBuiltinCallException("eth_call"===n?"call":"estimateGas",e.params[0],t?t.data:null);return r.info={error:s,payload:e},r}const r=JSON.stringify(function(e){const t=[];return cl(e,t),t}(s));if("string"==typeof s.message&&s.message.match(/user denied|ethers-user-denied/i)){return M("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[n]||"unknown",reason:"rejected",info:{payload:e,error:s}})}if("eth_sendRawTransaction"===n||"eth_sendTransaction"===n){const t=e.params[0];if(r.match(/insufficient funds|base fee exceeds gas limit/i))return M("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:t,info:{error:s}});if(r.match(/nonce/i)&&r.match(/too low/i))return M("nonce has already been used","NONCE_EXPIRED",{transaction:t,info:{error:s}});if(r.match(/replacement transaction/i)&&r.match(/underpriced/i))return M("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:t,info:{error:s}});if(r.match(/only replay-protected/i))return M("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:n,info:{transaction:t,info:{error:s}}})}let i=!!r.match(/the method .* does not exist/i);return i||s&&s.details&&s.details.startsWith("Unauthorized method:")&&(i=!0),i?M("unsupported operation","UNSUPPORTED_OPERATION",{operation:e.method,info:{error:s,payload:e}}):M("could not coalesce error","UNKNOWN_ERROR",{error:s,payload:e})}send(e,t){if(this.destroyed)return Promise.reject(M("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e}));const n=this.#tt++,s=new Promise(((s,r)=>{this.#nt.push({resolve:s,reject:r,payload:{method:e,params:t,id:n,jsonrpc:"2.0"}})}));return this.#at(),s}async getSigner(e){null==e&&(e=0);const t=this.send("eth_accounts",[]);if("number"==typeof e){const n=await t;if(e>=n.length)throw new Error("no such account");return new sl(this,n[e])}const{accounts:n}=await N({network:this.getNetwork(),accounts:t});e=pt(e);for(const t of n)if(pt(t)===e)return new sl(this,e);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map((e=>new sl(this,e)))}destroy(){this.#st&&(clearTimeout(this.#st),this.#st=null);for(const{payload:e,reject:t}of this.#nt)t(M("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e.method}));this.#nt=[],super.destroy()}}class il extends rl{#ot;constructor(e,t){super(e,t),this.#ot=4e3}_getSubscriber(e){const t=super._getSubscriber(e);return tl(t)&&(t.pollingInterval=this.#ot),t}get pollingInterval(){return this.#ot}set pollingInterval(e){if(!Number.isInteger(e)||e<0)throw new Error("invalid interval");this.#ot=e,this._forEachSubscriber((e=>{tl(e)&&(e.pollingInterval=this.#ot)}))}}class al extends il{#ct;constructor(e,t,n){null==e&&(e="http://localhost:8545"),super(t,n),this.#ct="string"==typeof e?new ys(e):e.clone()}_getConnection(){return this.#ct.clone()}async send(e,t){return await this._start(),await super.send(e,t)}async _send(e){const t=this._getConnection();t.body=JSON.stringify(e),t.setHeader("content-type","application/json");const n=await t.send();n.assertOk();let s=n.bodyJson;return Array.isArray(s)||(s=[s]),s}}function ol(e){if(null==e)return null;if("string"==typeof e.message&&e.message.match(/revert/i)&&q(e.data))return{message:e.message,data:e.data};if("object"==typeof e){for(const t in e){const n=ol(e[t]);if(n)return n}return null}if("string"==typeof e)try{return ol(JSON.parse(e))}catch(e){}return null}function cl(e,t){if(null!=e){if("string"==typeof e.message&&t.push(e.message),"object"==typeof e)for(const n in e)cl(e[n],t);if("string"==typeof e)try{return cl(JSON.parse(e),t)}catch(e){}}}const ll=new class{dev;serviceName;overviewUrl;socialUrls;messageForWalletLinking;chains;defaultChain;contractAddresses;hashtagOptions;init(e){this.dev=e.dev,this.serviceName=e.serviceName,this.overviewUrl=e.overviewUrl,this.socialUrls=e.socialUrls,this.messageForWalletLinking=e.messageForWalletLinking,this.chains=e.chains,this.defaultChain=e.defaultChain,this.contractAddresses=e.contractAddresses,this.hashtagOptions=e.hashtagOptions}};const ul=new class{info={};async init(){await Promise.all(Object.entries(ll.chains).map((async([e,t])=>{const n=new al(t.rpc),s=await n.getBlock("latest");this.info[e]={blockNumber:s.number,initBlockTime:1e3*s.timestamp}})))}blockToTime(e,t){if(!this.info[e])throw new Error("Unknown chain");const n=ll.chains[e].blockTime;return this.info[e].initBlockTime+(t-this.info[e].blockNumber)*n*1e3}},hl=BigInt(-1),dl=BigInt(0),pl=BigInt(1),fl=BigInt(5),gl={};let ml="0000";for(;ml.length<80;)ml+=ml;function yl(e){let t=ml;for(;t.length<e;)t+=t;return BigInt("1"+t.substring(0,e))}function bl(e,t,n){const s=BigInt(t.width);if(t.signed){const t=pl<<s-pl;U(null==n||e>=-t&&e<t,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:e}),e=e>dl?re(ae(e,s),s):-re(ae(-e,s),s)}else{const t=pl<<s;U(null==n||e>=0&&e<t,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:e}),e=(e%t+t)%t&t-pl}return e}function wl(e){"number"==typeof e&&(e=`fixed128x${e}`);let t=!0,n=128,s=18;if("string"==typeof e)if("fixed"===e);else if("ufixed"===e)t=!1;else{const r=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);D(r,"invalid fixed format","format",e),t="u"!==r[1],n=parseInt(r[2]),s=parseInt(r[3])}else if(e){const r=e,i=(e,t,n)=>null==r[e]?n:(D(typeof r[e]===t,"invalid fixed format ("+e+" not "+t+")","format."+e,r[e]),r[e]);t=i("signed","boolean",t),n=i("width","number",n),s=i("decimals","number",s)}D(n%8==0,"invalid FixedNumber width (not byte aligned)","format.width",n),D(s<=80,"invalid FixedNumber decimals (too large)","format.decimals",s);return{signed:t,width:n,decimals:s,name:(t?"":"u")+"fixed"+String(n)+"x"+String(s)}}class vl{format;#lt;#ut;#ht;_value;constructor(e,t,n){G(e,gl,"FixedNumber"),this.#ut=t,this.#lt=n;const s=function(e,t){let n="";e<dl&&(n="-",e*=hl);let s=e.toString();if(0===t)return n+s;for(;s.length<=t;)s=ml+s;const r=s.length-t;for(s=s.substring(0,r)+"."+s.substring(r);"0"===s[0]&&"."!==s[1];)s=s.substring(1);for(;"0"===s[s.length-1]&&"."!==s[s.length-2];)s=s.substring(0,s.length-1);return n+s}(t,n.decimals);j(this,{format:n.name,_value:s}),this.#ht=yl(n.decimals)}get signed(){return this.#lt.signed}get width(){return this.#lt.width}get decimals(){return this.#lt.decimals}get value(){return this.#ut}#dt(e){D(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)}#pt(e,t){return e=bl(e,this.#lt,t),new vl(gl,e,this.#lt)}#ft(e,t){return this.#dt(e),this.#pt(this.#ut+e.#ut,t)}addUnsafe(e){return this.#ft(e)}add(e){return this.#ft(e,"add")}#gt(e,t){return this.#dt(e),this.#pt(this.#ut-e.#ut,t)}subUnsafe(e){return this.#gt(e)}sub(e){return this.#gt(e,"sub")}#mt(e,t){return this.#dt(e),this.#pt(this.#ut*e.#ut/this.#ht,t)}mulUnsafe(e){return this.#mt(e)}mul(e){return this.#mt(e,"mul")}mulSignal(e){this.#dt(e);const t=this.#ut*e.#ut;return U(t%this.#ht===dl,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),this.#pt(t/this.#ht,"mulSignal")}#yt(e,t){return U(e.#ut!==dl,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#dt(e),this.#pt(this.#ut*this.#ht/e.#ut,t)}divUnsafe(e){return this.#yt(e)}div(e){return this.#yt(e,"div")}divSignal(e){U(e.#ut!==dl,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#dt(e);const t=this.#ut*this.#ht;return U(t%e.#ut===dl,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),this.#pt(t/e.#ut,"divSignal")}cmp(e){let t=this.value,n=e.value;const s=this.decimals-e.decimals;return s>0?n*=yl(s):s<0&&(t*=yl(-s)),t<n?-1:t>n?1:0}eq(e){return 0===this.cmp(e)}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=this.#ut;return this.#ut<dl&&(e-=this.#ht-pl),e=this.#ut/this.#ht*this.#ht,this.#pt(e,"floor")}ceiling(){let e=this.#ut;return this.#ut>dl&&(e+=this.#ht-pl),e=this.#ut/this.#ht*this.#ht,this.#pt(e,"ceiling")}round(e){if(null==e&&(e=0),e>=this.decimals)return this;const t=this.decimals-e,n=fl*yl(t-1);let s=this.value+n;const r=yl(t);return s=s/r*r,bl(s,this.#lt,"round"),new vl(gl,s,this.#lt)}isZero(){return this.#ut===dl}isNegative(){return this.#ut<dl}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return vl.fromString(this.toString(),e)}static fromValue(e,t,n){const s=null==t?0:he(t),r=wl(n);let i=oe(e,"value");const a=s-r.decimals;if(a>0){const t=yl(a);U(i%t===dl,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),i/=t}else a<0&&(i*=yl(-a));return bl(i,r,"fromValue"),new vl(gl,i,r)}static fromString(e,t){const n=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);D(n&&n[2].length+n[3].length>0,"invalid FixedNumber string value","value",e);const s=wl(t);let r=n[2]||"0",i=n[3]||"";for(;i.length<s.decimals;)i+=ml;U(i.substring(s.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),i=i.substring(0,s.decimals);const a=BigInt(n[1]+r+i);return bl(a,s,"fromString"),new vl(gl,a,s)}static fromBytes(e,t){let n=ue(z(e,"value"));const s=wl(t);return s.signed&&(n=re(n,s.width)),bl(n,s,"fromBytes"),new vl(gl,n,s)}}const El=["wei","kwei","mwei","gwei","szabo","finney","ether"];function Al(e){return function(e,t){let n=18;if("string"==typeof t){const e=El.indexOf(t);D(e>=0,"invalid unit","unit",t),n=3*e}else null!=t&&(n=he(t,"unit"));return vl.fromValue(e,n,{decimals:n,width:512}).toString()}(e,18)}function kl(e){return function(e,t){D("string"==typeof e,"value must be a string","value",e);let n=18;if("string"==typeof t){const e=El.indexOf(t);D(e>=0,"invalid unit","unit",t),n=3*e}else null!=t&&(n=he(t,"unit"));return vl.fromString(e,{decimals:n,width:512}).value}(e,18)}class _l extends x.TZ{constructor(){super("contract_events","*",50)}enhanceActivityData(e){const t=x.JA.safeResult(e);for(const e of t)e.user=e.user_id?{user_id:e.user_id,wallet_address:e.user_wallet_address,display_name:e.user_display_name,avatar:e.user_avatar,avatar_thumb:e.user_avatar_thumb,stored_avatar:e.user_stored_avatar,stored_avatar_thumb:e.user_stored_avatar_thumb,x_username:e.user_x_username}:void 0;return t}async fetchRecently(e){let{data:t,error:n}=await x.JA.client.rpc("get_contract_events_recently",{last_created_at:e,max_count:this.fetchLimit});if(n)throw n;return this.enhanceActivityData(t??[])}async fetchEvent(e,t,n,s){let{data:r,error:i}=await x.JA.client.rpc("get_contract_event",{p_chain:e,p_contract_type:t,p_block_number:n,p_log_index:s});if(i)throw i;return this.enhanceActivityData(r??[])[0]}async fetchAssetEvents(e,t,n,s){let{data:r,error:i}=await x.JA.client.rpc("get_asset_contract_events",{p_chain:e,p_contract_type:t,p_asset_id:n,last_created_at:s,max_count:this.fetchLimit});if(i)throw i;return this.enhanceActivityData(r??[])}}const Pl=new _l,xl=["TicketCreated","TicketDeleted","Trade"];class Sl extends x._j{chain;contractType;assetId;lastCreatedAt;constructor(e,t,n){super(".asset-activity-list"),this.chain=e,this.contractType=t,this.assetId=n,this.domElement.setAttribute("data-empty-message","No activities yet")}async load(){this.append(new x.td);const e=await Pl.fetchAssetEvents(this.chain,this.contractType,this.assetId,this.lastCreatedAt);if(!this.deleted){this.empty();for(const t of e)xl.includes(t.event_name)&&new bg(t,!1).appendTo(this);this.lastCreatedAt=e[e.length-1]?.created_at}}}function Il(e){const t=Mt(e);if(t.length>31)throw new Error("bytes32 string must be less than 32 bytes");return ee(t,32)}var Cl;!function(e){e[e.CreatorTrade=0]="CreatorTrade",e[e.Tickets=1]="Tickets",e[e.HashtagTrade=2]="HashtagTrade"}(Cl||(Cl={}));const Tl=Cl;var Ol=n(9990);class Nl extends x.GI{resolve;reject;walletAddressDisplay;constructor(e,t){super(".link-wallet-confirm-popup",{barrierDismissible:!0}),this.header.append((0,x.el)("h1",new x.OL("add_link"),"Link Wallet")),this.main.append((0,x.el)("p","Link your wallet using the address below. Please confirm your wallet address."),this.walletAddressDisplay=(0,x.el)(".wallet-address",x.yO.isPhoneSize?x.m7.shortenEthereumAddress(e):e),(0,x.el)("p","Would you like to continue?")),this.footer.append(new x.zx({tag:".cancel",title:(0,x.WI)("cancel-button"),click:()=>this.delete()}),new x.zx({tag:".continue",title:"Continue",click:()=>{this.resolve?.(),this.reject=void 0,this.delete()}})),this.on("delete",(()=>this.reject?.("Canceled by user"))),this.onDelegate(t,"accountChanged",(async()=>{const e=await t.getAddress();e&&(this.walletAddressDisplay.text=x.yO.isPhoneSize?x.m7.shortenEthereumAddress(e):e)}))}async wait(){return new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}var jl=class extends Error{constructor({chainId:e,connectorId:t}){super(`Chain "${e}" not configured for connector "${t}".`),this.name="ChainNotConfiguredForConnectorError"}},Ll=class extends Error{constructor(){super(...arguments),this.name="ConnectorNotFoundError",this.message="Connector not found"}};function Bl(e){return"string"==typeof e?Number.parseInt(e,"0x"===e.trim().substring(0,2)?16:10):"bigint"==typeof e?Number(e):e}var Rl=n(8290);function Ml(e,t={}){const{fees:n=e.fees,formatters:s=e.formatters,serializers:r=e.serializers}=t;return{...e,fees:n,formatters:s,serializers:r}}const Ul=Ml({id:1,network:"homestead",name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{alchemy:{http:["https://eth-mainnet.g.alchemy.com/v2"],webSocket:["wss://eth-mainnet.g.alchemy.com/v2"]},infura:{http:["https://mainnet.infura.io/v3"],webSocket:["wss://mainnet.infura.io/ws/v3"]},default:{http:["https://cloudflare-eth.com"]},public:{http:["https://cloudflare-eth.com"]}},blockExplorers:{etherscan:{name:"Etherscan",url:"https://etherscan.io"},default:{name:"Etherscan",url:"https://etherscan.io"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xc0497E381f536Be9ce14B0dD3817cBcAe57d2F62",blockCreated:16966585},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}}),Dl=Ml({id:5,network:"goerli",name:"Goerli",nativeCurrency:{name:"Goerli Ether",symbol:"ETH",decimals:18},rpcUrls:{alchemy:{http:["https://eth-goerli.g.alchemy.com/v2"],webSocket:["wss://eth-goerli.g.alchemy.com/v2"]},infura:{http:["https://goerli.infura.io/v3"],webSocket:["wss://goerli.infura.io/ws/v3"]},default:{http:["https://rpc.ankr.com/eth_goerli"]},public:{http:["https://rpc.ankr.com/eth_goerli"]}},blockExplorers:{etherscan:{name:"Etherscan",url:"https://goerli.etherscan.io"},default:{name:"Etherscan",url:"https://goerli.etherscan.io"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0x56522D00C410a43BFfDF00a9A569489297385790",blockCreated:8765204},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:6507670}},testnet:!0});var Fl=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},$l=(e,t,n)=>(Fl(e,t,"read from private field"),n?n.call(e):t.get(e)),Gl=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Hl=(e,t,n,s)=>(Fl(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),zl=(e,t,n)=>(Fl(e,t,"access private method"),n),Wl=class extends Rl{constructor({chains:e=[Ul,Dl],options:t}){super(),this.chains=e,this.options=t}getBlockExplorerUrls(e){const{default:t,...n}=e.blockExplorers??{};if(t)return[t.url,...Object.values(n).map((e=>e.url))]}isChainUnsupported(e){return!this.chains.some((t=>t.id===e))}setStorage(e){this.storage=e}},ql=n(6731),Vl=n(2671),Kl=n(3731);class Jl extends Vl.G{constructor(e,{code:t,docsPath:n,metaMessages:s,shortMessage:r}){super(r,{cause:e,docsPath:n,metaMessages:s||e?.metaMessages}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.code=e instanceof Kl.bs?e.code:t??-1}}class Ql extends Jl{constructor(e,t){super(e,t),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderRpcError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t.data}}class Yl extends Jl{constructor(e){super(e,{code:Yl.code,shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ParseRpcError"})}}Object.defineProperty(Yl,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class Zl extends Jl{constructor(e){super(e,{code:Zl.code,shortMessage:"JSON is not a valid request object."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidRequestRpcError"})}}Object.defineProperty(Zl,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class Xl extends Jl{constructor(e){super(e,{code:Xl.code,shortMessage:"The method does not exist / is not available."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"MethodNotFoundRpcError"})}}Object.defineProperty(Xl,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class eu extends Jl{constructor(e){super(e,{code:eu.code,shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join("\n")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParamsRpcError"})}}Object.defineProperty(eu,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class tu extends Jl{constructor(e){super(e,{code:tu.code,shortMessage:"An internal error was received."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InternalRpcError"})}}Object.defineProperty(tu,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class nu extends Jl{constructor(e){super(e,{code:nu.code,shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join("\n")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidInputRpcError"})}}Object.defineProperty(nu,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class su extends Jl{constructor(e){super(e,{code:su.code,shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(su,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class ru extends Jl{constructor(e){super(e,{code:ru.code,shortMessage:"Requested resource not available."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceUnavailableRpcError"})}}Object.defineProperty(ru,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class iu extends Jl{constructor(e){super(e,{code:iu.code,shortMessage:"Transaction creation failed."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TransactionRejectedRpcError"})}}Object.defineProperty(iu,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class au extends Jl{constructor(e){super(e,{code:au.code,shortMessage:"Method is not implemented."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"MethodNotSupportedRpcError"})}}Object.defineProperty(au,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class ou extends Jl{constructor(e){super(e,{code:ou.code,shortMessage:"Request exceeds defined limit."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"LimitExceededRpcError"})}}Object.defineProperty(ou,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class cu extends Jl{constructor(e){super(e,{code:cu.code,shortMessage:"Version of JSON-RPC protocol is not supported."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"JsonRpcVersionUnsupportedError"})}}Object.defineProperty(cu,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class lu extends Ql{constructor(e){super(e,{code:lu.code,shortMessage:"User rejected the request."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UserRejectedRequestError"})}}Object.defineProperty(lu,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class uu extends Ql{constructor(e){super(e,{code:uu.code,shortMessage:"The requested method and/or account has not been authorized by the user."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnauthorizedProviderError"})}}Object.defineProperty(uu,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class hu extends Ql{constructor(e){super(e,{code:hu.code,shortMessage:"The Provider does not support the requested method."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnsupportedProviderMethodError"})}}Object.defineProperty(hu,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class du extends Ql{constructor(e){super(e,{code:du.code,shortMessage:"The Provider is disconnected from all chains."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderDisconnectedError"})}}Object.defineProperty(du,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class pu extends Ql{constructor(e){super(e,{code:pu.code,shortMessage:"The Provider is not connected to the requested chain."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainDisconnectedError"})}}Object.defineProperty(pu,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class fu extends Ql{constructor(e){super(e,{code:fu.code,shortMessage:"An error occurred when attempting to switch chain."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainError"})}}Object.defineProperty(fu,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class gu extends Jl{constructor(e){super(e,{shortMessage:"An unknown RPC error occurred."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownRpcError"})}}var mu=n(589);const yu=256;let bu,wu=yu;function vu(e=11){if(!bu||wu+e>2*yu){bu="",wu=0;for(let e=0;e<yu;e++)bu+=(256+256*Math.random()|0).toString(16).substring(1)}return bu.substring(wu,wu+++e)}function Eu(e){const{batch:t,cacheTime:n=e.pollingInterval??4e3,key:s="base",name:r="Base Client",pollingInterval:i=4e3,type:a="base"}=e,o=e.chain,c=e.account?(0,mu.T)(e.account):void 0,{config:l,request:u,value:h}=e.transport({chain:o,pollingInterval:i}),d={account:c,batch:t,cacheTime:n,chain:o,key:s,name:r,pollingInterval:i,request:u,transport:{...l,...h},type:a,uid:vu()};return Object.assign(d,{extend:function e(t){return n=>{const s=n(t);for(const e in d)delete s[e];const r={...t,...s};return Object.assign(r,{extend:e(r)})}}(d)})}var Au=n(4702);async function ku(e){const t=await e.request({method:"eth_chainId"});return(0,Au.ly)(t)}var _u=n(8138);var Pu=n(1417),xu=n(1466),Su=n(1778);const Iu="/docs/contract/encodeDeployData";function Cu({abi:e,args:t,bytecode:n}){if(!t||0===t.length)return n;const s=e.find((e=>"type"in e&&"constructor"===e.type));if(!s)throw new Pu.fM({docsPath:Iu});if(!("inputs"in s))throw new Pu.cO({docsPath:Iu});if(!s.inputs||0===s.inputs.length)throw new Pu.cO({docsPath:Iu});const r=(0,Su.E)(s.inputs,t);return(0,xu.SM)([n,r])}class Tu extends Vl.G{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the WalletClient."].join("\n"),{docsPath:e,docsSlug:"account"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AccountNotFoundError"})}}var Ou=n(7033);function Nu({chain:e,currentChainId:t}){if(!e)throw new Ou.Bk;if(t!==e.id)throw new Ou.Yl({chain:e,currentChainId:t})}var ju=n(2675),Lu=n(9955),Bu=n(9966);var Ru=n(2090),Mu=n(6011);function Uu(e,t,n){return s=>e[t.name||n]?.(s)??t(e,s)}var Du=n(9362),Fu=n(9589);class $u extends Vl.G{constructor(){super("`baseFeeMultiplier` must be greater than 1."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseFeeScalarError"})}}class Gu extends Vl.G{constructor(){super("Chain does not support EIP-1559 fees."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Eip1559FeesNotSupportedError"})}}class Hu extends Vl.G{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${(0,Fu.o)(e)} gwei).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"MaxFeePerGasTooLowError"})}}class zu extends Vl.G{constructor({blockHash:e,blockNumber:t}){let n="Block";e&&(n=`Block at hash "${e}"`),t&&(n=`Block at number "${t}"`),super(`${n} could not be found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BlockNotFoundError"})}}const Wu={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559"};function qu(e){const t={...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,chainId:e.chainId?(0,Au.ly)(e.chainId):void 0,gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,maxFeePerGas:e.maxFeePerGas?BigInt(e.maxFeePerGas):void 0,maxPriorityFeePerGas:e.maxPriorityFeePerGas?BigInt(e.maxPriorityFeePerGas):void 0,nonce:e.nonce?(0,Au.ly)(e.nonce):void 0,to:e.to?e.to:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,type:e.type?Wu[e.type]:void 0,typeHex:e.type?e.type:void 0,value:e.value?BigInt(e.value):void 0,v:e.v?BigInt(e.v):void 0};return t.yParity=(()=>{if(e.yParity)return Number(e.yParity);if("bigint"==typeof t.v){if(0n===t.v||27n===t.v)return 0;if(1n===t.v||28n===t.v)return 1;if(t.v>=35n)return t.v%2n===0n?1:0}})(),"legacy"===t.type&&(delete t.accessList,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas,delete t.yParity),"eip2930"===t.type&&(delete t.maxFeePerGas,delete t.maxPriorityFeePerGas),t}function Vu(e){const t=e.transactions?.map((e=>"string"==typeof e?e:qu(e)));return{...e,baseFeePerGas:e.baseFeePerGas?BigInt(e.baseFeePerGas):null,difficulty:e.difficulty?BigInt(e.difficulty):void 0,gasLimit:e.gasLimit?BigInt(e.gasLimit):void 0,gasUsed:e.gasUsed?BigInt(e.gasUsed):void 0,hash:e.hash?e.hash:null,logsBloom:e.logsBloom?e.logsBloom:null,nonce:e.nonce?e.nonce:null,number:e.number?BigInt(e.number):null,size:e.size?BigInt(e.size):void 0,timestamp:e.timestamp?BigInt(e.timestamp):void 0,transactions:t,totalDifficulty:e.totalDifficulty?BigInt(e.totalDifficulty):null}}async function Ku(e,{blockHash:t,blockNumber:n,blockTag:s,includeTransactions:r}={}){const i=s??"latest",a=r??!1,o=void 0!==n?(0,_u.eC)(n):void 0;let c=null;if(c=t?await e.request({method:"eth_getBlockByHash",params:[t,a]}):await e.request({method:"eth_getBlockByNumber",params:[o||i,a]}),!c)throw new zu({blockHash:t,blockNumber:n});return(e.chain?.formatters?.block?.format||Vu)(c)}async function Ju(e){const t=await e.request({method:"eth_gasPrice"});return BigInt(t)}async function Qu(e,t){const{block:n,chain:s=e.chain,request:r}=t||{};if("function"==typeof s?.fees?.defaultPriorityFee){const t=n||await Uu(e,Ku,"getBlock")({});return s.fees.defaultPriorityFee({block:t,client:e,request:r})}if(void 0!==s?.fees?.defaultPriorityFee)return s?.fees?.defaultPriorityFee;try{const t=await e.request({method:"eth_maxPriorityFeePerGas"});return(0,Au.y_)(t)}catch{const[t,s]=await Promise.all([n?Promise.resolve(n):Uu(e,Ku,"getBlock")({}),Uu(e,Ju,"getGasPrice")({})]);if("bigint"!=typeof t.baseFeePerGas)throw new Gu;const r=s-t.baseFeePerGas;return r<0n?0n:r}}async function Yu(e,t){const{block:n,chain:s=e.chain,request:r,type:i="eip1559"}=t||{},a=await(async()=>"function"==typeof s?.fees?.baseFeeMultiplier?s.fees.baseFeeMultiplier({block:n,client:e,request:r}):s?.fees?.baseFeeMultiplier??1.2)();if(a<1)throw new $u;const o=10**(a.toString().split(".")[1]?.length??0),c=e=>e*BigInt(Math.ceil(a*o))/BigInt(o),l=n||await Uu(e,Ku,"getBlock")({});if("function"==typeof s?.fees?.estimateFeesPerGas)return s.fees.estimateFeesPerGas({block:n,client:e,multiply:c,request:r,type:i});if("eip1559"===i){if("bigint"!=typeof l.baseFeePerGas)throw new Gu;const t=r?.maxPriorityFeePerGas?r.maxPriorityFeePerGas:await Qu(e,{block:l,chain:s,request:r}),n=c(l.baseFeePerGas);return{maxFeePerGas:r?.maxFeePerGas??n+t,maxPriorityFeePerGas:t}}return{gasPrice:r?.gasPrice??c(await Uu(e,Ju,"getGasPrice")({}))}}var Zu=n(7631);class Xu extends Vl.G{constructor(e,{account:t,docsPath:n,chain:s,data:r,gas:i,gasPrice:a,maxFeePerGas:o,maxPriorityFeePerGas:c,nonce:l,to:u,value:h}){const d=(0,Lu.xr)({from:t?.address,to:u,value:void 0!==h&&`${(0,Zu.d)(h)} ${s?.nativeCurrency?.symbol||"ETH"}`,data:r,gas:i,gasPrice:void 0!==a&&`${(0,Fu.o)(a)} gwei`,maxFeePerGas:void 0!==o&&`${(0,Fu.o)(o)} gwei`,maxPriorityFeePerGas:void 0!==c&&`${(0,Fu.o)(c)} gwei`,nonce:l});super(e.shortMessage,{cause:e,docsPath:n,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",d].filter(Boolean)}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"EstimateGasExecutionError"}),this.cause=e}}async function eh(e,t){const n=t.account??e.account;if(!n)throw new Tu({docsPath:"/docs/actions/public/estimateGas"});const s=(0,mu.T)(n);try{const{accessList:n,blockNumber:r,blockTag:i,data:a,gas:o,gasPrice:c,maxFeePerGas:l,maxPriorityFeePerGas:u,nonce:h,to:d,value:p,...f}="local"===s.type?await nh(e,t):t,g=(r?(0,_u.eC)(r):void 0)||i;(0,Du.F)(t);const m=e.chain?.formatters?.transactionRequest?.format,y=(m||Mu.tG)({...(0,Ru.K)(f,{format:m}),from:s.address,accessList:n,data:a,gas:o,gasPrice:c,maxFeePerGas:l,maxPriorityFeePerGas:u,nonce:h,to:d,value:p}),b=await e.request({method:"eth_estimateGas",params:g?[y,g]:[y]});return BigInt(b)}catch(n){throw function(e,{docsPath:t,...n}){const s=(()=>{const t=(0,Bu.k)(e,n);return t instanceof ju.cj?e:t})();return new Xu(s,{docsPath:t,...n})}(n,{...t,account:s,chain:e.chain})}}async function th(e,{address:t,blockTag:n="latest",blockNumber:s}){const r=await e.request({method:"eth_getTransactionCount",params:[t,s?(0,_u.eC)(s):n]});return(0,Au.ly)(r)}async function nh(e,t){const{account:n=e.account,chain:s,gas:r,nonce:i,type:a}=t;if(!n)throw new Tu;const o=(0,mu.T)(n),c=await Uu(e,Ku,"getBlock")({blockTag:"latest"}),l={...t,from:o.address};if(void 0===i&&(l.nonce=await Uu(e,th,"getTransactionCount")({address:o.address,blockTag:"pending"})),void 0===a)try{l.type=function(e){if(e.type)return e.type;if(void 0!==e.maxFeePerGas||void 0!==e.maxPriorityFeePerGas)return"eip1559";if(void 0!==e.gasPrice)return void 0!==e.accessList?"eip2930":"legacy";throw new Lu.j3({transaction:e})}(l)}catch{l.type="bigint"==typeof c.baseFeePerGas?"eip1559":"legacy"}if("eip1559"===l.type){const{maxFeePerGas:n,maxPriorityFeePerGas:r}=await Yu(e,{block:c,chain:s,request:l});if(void 0===t.maxPriorityFeePerGas&&t.maxFeePerGas&&t.maxFeePerGas<r)throw new Hu({maxPriorityFeePerGas:r});l.maxPriorityFeePerGas=r,l.maxFeePerGas=n}else{if(void 0!==t.maxFeePerGas||void 0!==t.maxPriorityFeePerGas)throw new Gu;const{gasPrice:n}=await Yu(e,{block:c,chain:s,request:l,type:"legacy"});l.gasPrice=n}return void 0===r&&(l.gas=await Uu(e,eh,"estimateGas")({...l,account:{address:o.address,type:"json-rpc"}})),(0,Du.F)(l),l}async function sh(e,{serializedTransaction:t}){return e.request({method:"eth_sendRawTransaction",params:[t]})}async function rh(e,t){const{account:n=e.account,chain:s=e.chain,accessList:r,data:i,gas:a,gasPrice:o,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:h,value:d,...p}=t;if(!n)throw new Tu({docsPath:"/docs/actions/wallet/sendTransaction"});const f=(0,mu.T)(n);try{let n;if((0,Du.F)(t),null!==s&&(n=await Uu(e,ku,"getChainId")({}),Nu({currentChainId:n,chain:s})),"local"===f.type){const t=await Uu(e,nh,"prepareTransactionRequest")({account:f,accessList:r,chain:s,data:i,gas:a,gasPrice:o,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:h,value:d,...p});n||(n=await Uu(e,ku,"getChainId")({}));const g=s?.serializers?.transaction,m=await f.signTransaction({...t,chainId:n},{serializer:g});return await Uu(e,sh,"sendRawTransaction")({serializedTransaction:m})}const g=e.chain?.formatters?.transactionRequest?.format,m=(g||Mu.tG)({...(0,Ru.K)(p,{format:g}),accessList:r,data:i,from:f.address,gas:a,gasPrice:o,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:h,value:d});return await e.request({method:"eth_sendTransaction",params:[m]})}catch(e){throw function(e,{docsPath:t,...n}){const s=(()=>{const t=(0,Bu.k)(e,n);return t instanceof ju.cj?e:t})();return new Lu.mk(s,{docsPath:t,...n})}(e,{...t,account:f,chain:t.chain||void 0})}}var ih=n(8426),ah=n(305),oh=n(31),ch=n(151),lh=n(9402);const uh=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,hh=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function dh({domain:e,message:t,primaryType:n,types:s}){const r=s,i=(e,t)=>{for(const n of e){const{name:e,type:s}=n,a=s,o=t[e],c=a.match(hh);if(c&&("number"==typeof o||"bigint"==typeof o)){const[e,t,n]=c;(0,_u.eC)(o,{signed:"int"===t,size:parseInt(n)/8})}if("address"===a&&"string"==typeof o&&!(0,ch.U)(o))throw new oh.b({address:o});const l=a.match(uh);if(l){const[e,t]=l;if(t&&(0,lh.d)(o)!==parseInt(t))throw new Pu.KY({expectedSize:parseInt(t),givenSize:(0,lh.d)(o)})}const u=r[a];u&&i(u,o)}};if(r.EIP712Domain&&e&&i(r.EIP712Domain,e),"EIP712Domain"!==n){const e=r[n];i(e,t)}}function ph({domain:e}){return["string"==typeof e?.name&&{name:"name",type:"string"},e?.version&&{name:"version",type:"string"},"number"==typeof e?.chainId&&{name:"chainId",type:"uint256"},e?.verifyingContract&&{name:"verifyingContract",type:"address"},e?.salt&&{name:"salt",type:"bytes32"}].filter(Boolean)}var fh=n(1106);function gh(e){return{addChain:t=>async function(e,{chain:t}){const{id:n,name:s,nativeCurrency:r,rpcUrls:i,blockExplorers:a}=t;await e.request({method:"wallet_addEthereumChain",params:[{chainId:(0,_u.eC)(n),chainName:s,nativeCurrency:r,rpcUrls:i.default.http,blockExplorerUrls:a?Object.values(a).map((({url:e})=>e)):void 0}]})}(e,t),deployContract:t=>function(e,{abi:t,args:n,bytecode:s,...r}){return rh(e,{...r,data:Cu({abi:t,args:n,bytecode:s})})}(e,t),getAddresses:()=>async function(e){return"local"===e.account?.type?[e.account.address]:(await e.request({method:"eth_accounts"})).map((e=>(0,ql.x)(e)))}(e),getChainId:()=>ku(e),getPermissions:()=>async function(e){return await e.request({method:"wallet_getPermissions"})}(e),prepareTransactionRequest:t=>nh(e,t),requestAddresses:()=>async function(e){return(await e.request({method:"eth_requestAccounts"})).map((e=>(0,ql.K)(e)))}(e),requestPermissions:t=>async function(e,t){return e.request({method:"wallet_requestPermissions",params:[t]})}(e,t),sendRawTransaction:t=>sh(e,t),sendTransaction:t=>rh(e,t),signMessage:t=>async function(e,{account:t=e.account,message:n}){if(!t)throw new Tu({docsPath:"/docs/actions/wallet/signMessage"});const s=(0,mu.T)(t);if("local"===s.type)return s.signMessage({message:n});const r="string"==typeof n?(0,_u.$G)(n):n.raw instanceof Uint8Array?(0,_u.NC)(n.raw):n.raw;return e.request({method:"personal_sign",params:[r,s.address]})}(e,t),signTransaction:t=>async function(e,t){const{account:n=e.account,chain:s=e.chain,...r}=t;if(!n)throw new Tu({docsPath:"/docs/actions/wallet/signTransaction"});const i=(0,mu.T)(n);(0,Du.F)({account:i,...t});const a=await Uu(e,ku,"getChainId")({});null!==s&&Nu({currentChainId:a,chain:s});const o=s?.formatters||e.chain?.formatters,c=o?.transactionRequest?.format||Mu.tG;return"local"===i.type?i.signTransaction({...r,chainId:a},{serializer:e.chain?.serializers?.transaction}):await e.request({method:"eth_signTransaction",params:[{...c(r),chainId:(0,_u.eC)(a),from:i.address}]})}(e,t),signTypedData:t=>async function(e,{account:t=e.account,domain:n,message:s,primaryType:r,types:i}){if(!t)throw new Tu({docsPath:"/docs/actions/wallet/signTypedData"});const a=(0,mu.T)(t),o={EIP712Domain:ph({domain:n}),...i};if(dh({domain:n,message:s,primaryType:r,types:o}),"local"===a.type)return a.signTypedData({domain:n,primaryType:r,types:o,message:s});const c=(0,ah.P)({domain:n??{},primaryType:r,types:o,message:s},((e,t)=>(0,ih.v)(t)?t.toLowerCase():t));return e.request({method:"eth_signTypedData_v4",params:[a.address,c]})}(e,t),switchChain:t=>async function(e,{id:t}){await e.request({method:"wallet_switchEthereumChain",params:[{chainId:(0,_u.eC)(t)}]})}(e,t),watchAsset:t=>async function(e,t){return await e.request({method:"wallet_watchAsset",params:t})}(e,t),writeContract:t=>async function(e,{abi:t,address:n,args:s,dataSuffix:r,functionName:i,...a}){const o=(0,fh.R)({abi:t,args:s,functionName:i});return await Uu(e,rh,"sendTransaction")({data:`${o}${r?r.replace("0x",""):""}`,to:n,...a})}(e,t)}}function mh(e){const{key:t="wallet",name:n="Wallet Client",transport:s}=e;return Eu({...e,key:t,name:n,transport:e=>s({...e,retryCount:0}),type:"walletClient"}).extend(gh)}async function yh(e){return new Promise((t=>setTimeout(t,e)))}function bh(e,{delay:t=100,retryCount:n=2,shouldRetry:s=(()=>!0)}={}){return new Promise(((r,i)=>{const a=async({count:o=0}={})=>{try{const t=await e();r(t)}catch(e){if(o<n&&await s({count:o,error:e}))return(async({error:e})=>{const n="function"==typeof t?t({count:o,error:e}):t;n&&await yh(n),a({count:o+1})})({error:e});i(e)}};a()}))}const wh=e=>"code"in e?-1!==e.code&&-32004!==e.code&&-32005!==e.code&&-32042!==e.code&&-32603!==e.code:!!(e instanceof Kl.Gg&&e.status)&&(403!==e.status&&408!==e.status&&413!==e.status&&429!==e.status&&500!==e.status&&502!==e.status&&503!==e.status&&504!==e.status);function vh(e,{retryDelay:t=150,retryCount:n=3}={}){return async s=>bh((async()=>{try{return await e(s)}catch(e){const t=e;switch(t.code){case Yl.code:throw new Yl(t);case Zl.code:throw new Zl(t);case Xl.code:throw new Xl(t);case eu.code:throw new eu(t);case tu.code:throw new tu(t);case nu.code:throw new nu(t);case su.code:throw new su(t);case ru.code:throw new ru(t);case iu.code:throw new iu(t);case au.code:throw new au(t);case ou.code:throw new ou(t);case cu.code:throw new cu(t);case lu.code:throw new lu(t);case uu.code:throw new uu(t);case hu.code:throw new hu(t);case du.code:throw new du(t);case pu.code:throw new pu(t);case fu.code:throw new fu(t);case 5e3:throw new lu(t);default:if(e instanceof Vl.G)throw e;throw new gu(t)}}}),{delay:({count:e,error:n})=>{if(n&&n instanceof Kl.Gg){const e=n?.headers?.get("Retry-After");if(e?.match(/\d/))return 1e3*parseInt(e)}return~~(1<<e)*t},retryCount:n,shouldRetry:({error:e})=>!wh(e)})}function Eh({key:e,name:t,request:n,retryCount:s=3,retryDelay:r=150,timeout:i,type:a},o){return{config:{key:e,name:t,request:n,retryCount:s,retryDelay:r,timeout:i,type:a},request:vh(n,{retryCount:s,retryDelay:r}),value:o}}function Ah(e,t={}){const{key:n="custom",name:s="Custom Provider",retryDelay:r}=t;return({retryCount:i})=>Eh({key:n,name:s,request:e.request.bind(e),retryCount:t.retryCount??i,retryDelay:r,type:"custom"})}var kh,_h=class extends Wl{constructor({chains:e,options:t}={}){const n={shimDisconnect:!0,getProvider(){if("undefined"==typeof window)return;const e=window.ethereum;return e?.providers&&e.providers.length>0?e.providers[0]:e},...t};super({chains:e,options:n}),this.id="injected",Gl(this,kh,void 0),this.shimDisconnectKey=`${this.id}.shimDisconnect`,this.onAccountsChanged=e=>{0===e.length?this.emit("disconnect"):this.emit("change",{account:(0,ql.K)(e[0])})},this.onChainChanged=e=>{const t=Bl(e),n=this.isChainUnsupported(t);this.emit("change",{chain:{id:t,unsupported:n}})},this.onDisconnect=async e=>{if(1013===e.code){if(await this.getProvider()){if(await this.getAccount())return}}this.emit("disconnect"),this.options.shimDisconnect&&this.storage?.removeItem(this.shimDisconnectKey)};const s=n.getProvider();if("string"==typeof n.name)this.name=n.name;else if(s){const e=function(e){if(!e)return"Injected";const t=e=>e.isApexWallet?"Apex Wallet":e.isAvalanche?"Core Wallet":e.isBackpack?"Backpack":e.isBifrost?"Bifrost Wallet":e.isBitKeep?"BitKeep":e.isBitski?"Bitski":e.isBlockWallet?"BlockWallet":e.isBraveWallet?"Brave Wallet":e.isCoin98?"Coin98 Wallet":e.isCoinbaseWallet?"Coinbase Wallet":e.isDawn?"Dawn Wallet":e.isDefiant?"Defiant":e.isDesig?"Desig Wallet":e.isEnkrypt?"Enkrypt":e.isExodus?"Exodus":e.isFordefi?"Fordefi":e.isFrame?"Frame":e.isFrontier?"Frontier Wallet":e.isGamestop?"GameStop Wallet":e.isHaqqWallet?"HAQQ Wallet":e.isHyperPay?"HyperPay Wallet":e.isImToken?"ImToken":e.isHaloWallet?"Halo Wallet":e.isKuCoinWallet?"KuCoin Wallet":e.isMathWallet?"MathWallet":e.isNovaWallet?"Nova Wallet":e.isOkxWallet||e.isOKExWallet?"OKX Wallet":e.isOktoWallet?"Okto Wallet":e.isOneInchIOSWallet||e.isOneInchAndroidWallet?"1inch Wallet":e.isOneKey?"OneKey Wallet":e.isOpera?"Opera":e.isPhantom?"Phantom":e.isPortal?"Ripio Portal":e.isRabby?"Rabby Wallet":e.isRainbow?"Rainbow":e.isSafePal?"SafePal Wallet":e.isStatus?"Status":e.isSubWallet?"SubWallet":e.isTalisman?"Talisman":e.isTally?"Taho":e.isTokenPocket?"TokenPocket":e.isTokenary?"Tokenary":e.isTrust||e.isTrustWallet?"Trust Wallet":e.isTTWallet?"TTWallet":e.isXDEFI?"XDEFI Wallet":e.isZeal?"Zeal":e.isZerion?"Zerion":e.isMetaMask?"MetaMask":void 0;if(e.providers?.length){const n=new Set;let s=1;for(const r of e.providers){let e=t(r);e||(e=`Unknown Wallet #${s}`,s+=1),n.add(e)}const r=[...n];return r.length?r:r[0]??"Injected"}return t(e)??"Injected"}(s);n.name?this.name=n.name(e):this.name="string"==typeof e?e:e[0]}else this.name="Injected";this.ready=!!s}async connect({chainId:e}={}){try{const t=await this.getProvider();if(!t)throw new Ll;t.on&&(t.on("accountsChanged",this.onAccountsChanged),t.on("chainChanged",this.onChainChanged),t.on("disconnect",this.onDisconnect)),this.emit("message",{type:"connecting"});const n=await t.request({method:"eth_requestAccounts"}),s=(0,ql.K)(n[0]);let r=await this.getChainId(),i=this.isChainUnsupported(r);if(e&&r!==e){r=(await this.switchChain(e)).id,i=this.isChainUnsupported(r)}return this.options.shimDisconnect&&this.storage?.setItem(this.shimDisconnectKey,!0),{account:s,chain:{id:r,unsupported:i}}}catch(e){if(this.isUserRejectedRequestError(e))throw new lu(e);if(-32002===e.code)throw new ru(e);throw e}}async disconnect(){const e=await this.getProvider();e?.removeListener&&(e.removeListener("accountsChanged",this.onAccountsChanged),e.removeListener("chainChanged",this.onChainChanged),e.removeListener("disconnect",this.onDisconnect),this.options.shimDisconnect&&this.storage?.removeItem(this.shimDisconnectKey))}async getAccount(){const e=await this.getProvider();if(!e)throw new Ll;const t=await e.request({method:"eth_accounts"});return(0,ql.K)(t[0])}async getChainId(){const e=await this.getProvider();if(!e)throw new Ll;return e.request({method:"eth_chainId"}).then(Bl)}async getProvider(){const e=this.options.getProvider();return e&&Hl(this,kh,e),$l(this,kh)}async getWalletClient({chainId:e}={}){const[t,n]=await Promise.all([this.getProvider(),this.getAccount()]),s=this.chains.find((t=>t.id===e));if(!t)throw new Error("provider is required.");return mh({account:n,chain:s,transport:Ah(t)})}async isAuthorized(){try{if(this.options.shimDisconnect&&!this.storage?.getItem(this.shimDisconnectKey))return!1;if(!await this.getProvider())throw new Ll;return!!await this.getAccount()}catch{return!1}}async switchChain(e){const t=await this.getProvider();if(!t)throw new Ll;const n=(0,_u.eC)(e);try{return await Promise.all([t.request({method:"wallet_switchEthereumChain",params:[{chainId:n}]}),new Promise((t=>this.on("change",(({chain:n})=>{n?.id===e&&t()}))))]),this.chains.find((t=>t.id===e))??{id:e,name:`Chain ${n}`,network:`${n}`,nativeCurrency:{name:"Ether",decimals:18,symbol:"ETH"},rpcUrls:{default:{http:[""]},public:{http:[""]}}}}catch(s){const r=this.chains.find((t=>t.id===e));if(!r)throw new jl({chainId:e,connectorId:this.id});if(4902===s.code||4902===s?.data?.originalError?.code)try{await t.request({method:"wallet_addEthereumChain",params:[{chainId:n,chainName:r.name,nativeCurrency:r.nativeCurrency,rpcUrls:[r.rpcUrls.public?.http[0]??""],blockExplorerUrls:this.getBlockExplorerUrls(r)}]});if(await this.getChainId()!==e)throw new lu(new Error("User rejected switch after adding network."));return r}catch(e){throw new lu(e)}if(this.isUserRejectedRequestError(s))throw new lu(s);throw new fu(s)}}async watchAsset({address:e,decimals:t=18,image:n,symbol:s}){const r=await this.getProvider();if(!r)throw new Ll;return r.request({method:"wallet_watchAsset",params:{type:"ERC20",options:{address:e,decimals:t,image:n,symbol:s}}})}isUserRejectedRequestError(e){return 4001===e.code}};kh=new WeakMap;var Ph=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},xh=(e,t,n)=>(Ph(e,t,"read from private field"),n?n.call(e):t.get(e)),Sh=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Ih=(e,t,n,s)=>(Ph(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),Ch=n(6597),Th=n(1982),Oh=n(6137),Nh=n(2050),jh=n(1151),Lh=n(935);function Bh(e,t){if(!(e instanceof Vl.G))return!1;const n=e.walk((e=>e instanceof Lh.Lu));return n instanceof Lh.Lu&&("ResolverNotFound"===n.data?.errorName||("ResolverWildcardNotSupported"===n.data?.errorName||(!!n.reason?.includes("Wildcard on non-extended resolvers is not supported")||"reverse"===t&&n.reason===jh.$[50])))}var Rh=n(860),Mh=n(5031);function Uh(e){if(66!==e.length)return null;if(0!==e.indexOf("["))return null;if(65!==e.indexOf("]"))return null;const t=`0x${e.slice(1,65)}`;return(0,ih.v)(t)?t:null}function Dh(e){let t=new Uint8Array(32).fill(0);if(!e)return(0,_u.ci)(t);const n=e.split(".");for(let e=n.length-1;e>=0;e-=1){const s=Uh(n[e]),r=s?(0,Rh.O0)(s):(0,Mh.w)((0,Rh.qX)(n[e]),"bytes");t=(0,Mh.w)((0,xu.zo)([t,r]),"bytes")}return(0,_u.ci)(t)}function Fh(e){return`[${e.slice(2)}]`}function $h(e){const t=new Uint8Array(32).fill(0);return e?Uh(e)||(0,Mh.w)((0,Rh.qX)(e)):(0,_u.ci)(t)}function Gh(e){const t=e.replace(/^\.|\.$/gm,"");if(0===t.length)return new Uint8Array(1);const n=new Uint8Array((0,Rh.qX)(t).byteLength+2);let s=0;const r=t.split(".");for(let e=0;e<r.length;e++){let t=(0,Rh.qX)(r[e]);t.byteLength>255&&(t=(0,Rh.qX)(Fh($h(r[e])))),n[s]=t.length,n.set(t,s+1),s+=t.length+1}return n.byteLength!==s+1?n.slice(0,s+1):n}const Hh=3;function zh(e,{abi:t,address:n,args:s,docsPath:r,functionName:i,sender:a}){const{code:o,data:c,message:l,shortMessage:u}=e instanceof Lh.VQ?e:e instanceof Vl.G?e.walk((e=>"data"in e))||e.walk():{},h=e instanceof Pu.wb?new Lh.Dk({functionName:i}):[Hh,tu.code].includes(o)&&(c||l||u)?new Lh.Lu({abi:t,data:"object"==typeof c?c.data:c,functionName:i,message:u??l}):e;return new Lh.uq(h,{abi:t,args:s,contractAddress:n,docsPath:r,functionName:i,sender:a})}var Wh=n(8411);async function qh(e,{abi:t,address:n,args:s,functionName:r,...i}){const a=(0,fh.R)({abi:t,args:s,functionName:r});try{const{data:o}=await Uu(e,Wh.R,"call")({data:a,to:n,...i});return(0,Th.k)({abi:t,args:s,functionName:r,data:o||"0x"})}catch(e){throw zh(e,{abi:t,address:n,args:s,docsPath:"/docs/contract/readContract",functionName:r})}}class Vh extends Vl.G{constructor({data:e}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(e)}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"EnsAvatarInvalidMetadataError"})}}class Kh extends Vl.G{constructor({reason:e}){super(`ENS NFT avatar URI is invalid. ${e}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"EnsAvatarInvalidNftUriError"})}}class Jh extends Vl.G{constructor({uri:e}){super(`Unable to resolve ENS avatar URI "${e}". The URI may be malformed, invalid, or does not respond with a valid image.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"EnsAvatarUriResolutionError"})}}class Qh extends Vl.G{constructor({namespace:e}){super(`ENS NFT avatar namespace "${e}" is not supported. Must be "erc721" or "erc1155".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"EnsAvatarUnsupportedNamespaceError"})}}const Yh=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,Zh=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,Xh=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,ed=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;function td(e,t){return e?e.endsWith("/")?e.slice(0,-1):e:t}function nd({uri:e,gatewayUrls:t}){const n=Xh.test(e);if(n)return{uri:e,isOnChain:!0,isEncoded:n};const s=td(t?.ipfs,"https://ipfs.io"),r=td(t?.arweave,"https://arweave.net"),i=e.match(Yh),{protocol:a,subpath:o,target:c,subtarget:l=""}=i?.groups||{},u="ipns:/"===a||"ipns/"===o,h="ipfs:/"===a||"ipfs/"===o||Zh.test(e);if(e.startsWith("http")&&!u&&!h){let n=e;return t?.arweave&&(n=e.replace(/https:\/\/arweave.net/g,t?.arweave)),{uri:n,isOnChain:!1,isEncoded:!1}}if((u||h)&&c)return{uri:`${s}/${u?"ipns":"ipfs"}/${c}${l}`,isOnChain:!1,isEncoded:!1};if("ar:/"===a&&c)return{uri:`${r}/${c}${l||""}`,isOnChain:!1,isEncoded:!1};let d=e.replace(ed,"");if(d.startsWith("<svg")&&(d=`data:image/svg+xml;base64,${btoa(d)}`),d.startsWith("data:")||d.startsWith("{"))return{uri:d,isOnChain:!0,isEncoded:!1};throw new Jh({uri:e})}function sd(e){if("object"!=typeof e||!("image"in e)&&!("image_url"in e)&&!("image_data"in e))throw new Vh({data:e});return e.image||e.image_url||e.image_data}async function rd({gatewayUrls:e,uri:t}){const{uri:n,isOnChain:s}=nd({uri:t,gatewayUrls:e});if(s)return n;const r=await async function(e){try{const t=await fetch(e,{method:"HEAD"});if(200===t.status){const e=t.headers.get("content-type");return e?.startsWith("image/")}return!1}catch(t){return("object"!=typeof t||void 0===t.response)&&!!globalThis.hasOwnProperty("Image")&&new Promise((t=>{const n=new Image;n.onload=()=>{t(!0)},n.onerror=()=>{t(!1)},n.src=e}))}}(n);if(r)return n;throw new Jh({uri:t})}async function id(e,{gatewayUrls:t,record:n}){return/eip155:/i.test(n)?async function(e,{gatewayUrls:t,record:n}){const s=function(e){let t=e;t.startsWith("did:nft:")&&(t=t.replace("did:nft:","").replace(/_/g,"/"));const[n,s,r]=t.split("/"),[i,a]=n.split(":"),[o,c]=s.split(":");if(!i||"eip155"!==i.toLowerCase())throw new Kh({reason:"Only EIP-155 supported"});if(!a)throw new Kh({reason:"Chain ID not found"});if(!c)throw new Kh({reason:"Contract address not found"});if(!r)throw new Kh({reason:"Token ID not found"});if(!o)throw new Kh({reason:"ERC namespace not found"});return{chainID:parseInt(a),namespace:o.toLowerCase(),contractAddress:c,tokenID:r}}(n),r=await async function(e,{nft:t}){if("erc721"===t.namespace)return qh(e,{address:t.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(t.tokenID)]});if("erc1155"===t.namespace)return qh(e,{address:t.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(t.tokenID)]});throw new Qh({namespace:t.namespace})}(e,{nft:s}),{uri:i,isOnChain:a,isEncoded:o}=nd({uri:r,gatewayUrls:t});if(a&&(i.includes("data:application/json;base64,")||i.startsWith("{"))){const e=o?atob(i.replace("data:application/json;base64,","")):i;return rd({uri:sd(JSON.parse(e)),gatewayUrls:t})}let c=s.tokenID;"erc1155"===s.namespace&&(c=c.replace("0x","").padStart(64,"0"));return async function({gatewayUrls:e,uri:t}){try{const n=await fetch(t).then((e=>e.json()));return await rd({gatewayUrls:e,uri:sd(n)})}catch{throw new Jh({uri:t})}}({gatewayUrls:t,uri:i.replace(/(?:0x)?{id}/,c)})}(e,{gatewayUrls:t,record:n}):rd({uri:n,gatewayUrls:t})}async function ad(e,{blockNumber:t,blockTag:n,name:s,key:r,universalResolverAddress:i}){let a=i;if(!a){if(!e.chain)throw new Error("client chain not configured. universalResolverAddress is required.");a=(0,Oh.L)({blockNumber:t,chain:e.chain,contract:"ensUniversalResolver"})}try{const i=await Uu(e,qh,"readContract")({address:a,abi:Ch.k3,functionName:"resolve",args:[(0,_u.NC)(Gh(s)),(0,fh.R)({abi:Ch.nZ,functionName:"text",args:[Dh(s),r]})],blockNumber:t,blockTag:n});if("0x"===i[0])return null;const o=(0,Th.k)({abi:Ch.nZ,functionName:"text",data:i[0]});return""===o?null:o}catch(e){if(Bh(e,"resolve"))return null;throw e}}function od(e,{method:t}){const n={};return"fallback"===e.transport.type&&e.transport.onResponse?.((({method:e,response:s,status:r,transport:i})=>{"success"===r&&t===e&&(n[s]=i.request)})),t=>n[t]||e.request}class cd extends Vl.G{constructor(e){super(`Filter type "${e}" is not supported.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"FilterTypeNotSupportedError"})}}var ld=n(4664),ud=n(1909),hd=n(3058);function dd({abi:e,eventName:t,args:n}){let s=e[0];if(t&&(s=(0,hd.mE)({abi:e,args:n,name:t}),!s))throw new Pu.mv(t,{docsPath:"/docs/contract/encodeEventTopics"});if("event"!==s.type)throw new Pu.mv(void 0,{docsPath:"/docs/contract/encodeEventTopics"});const r=(0,ud.t)(s),i=(0,ld.e)(r);let a=[];if(n&&"inputs"in s){const e=s.inputs?.filter((e=>"indexed"in e&&e.indexed)),t=Array.isArray(n)?n:Object.values(n).length>0?e?.map((e=>n[e.name]))??[]:[];t.length>0&&(a=e?.map(((e,n)=>Array.isArray(t[n])?t[n].map(((s,r)=>pd({param:e,value:t[n][r]}))):t[n]?pd({param:e,value:t[n]}):null))??[])}return[i,...a]}function pd({param:e,value:t}){if("string"===e.type||"bytes"===e.type)return(0,Mh.w)((0,Rh.O0)(t));if("tuple"===e.type||e.type.match(/^(.*)\[(\d+)?\]$/))throw new cd(e.type);return(0,Su.E)([e],[t])}async function fd(e,{address:t,abi:n,args:s,eventName:r,fromBlock:i,strict:a,toBlock:o}){const c=od(e,{method:"eth_newFilter"}),l=r?dd({abi:n,args:s,eventName:r}):void 0,u=await e.request({method:"eth_newFilter",params:[{address:t,fromBlock:"bigint"==typeof i?(0,_u.eC)(i):i,toBlock:"bigint"==typeof o?(0,_u.eC)(o):o,topics:l}]});return{abi:n,args:s,eventName:r,id:u,request:c(u),strict:a,type:"event"}}async function gd(e,{address:t,args:n,event:s,events:r,fromBlock:i,strict:a,toBlock:o}={}){const c=r??(s?[s]:void 0),l=od(e,{method:"eth_newFilter"});let u=[];c&&(u=[c.flatMap((e=>dd({abi:[e],eventName:e.name,args:n})))],s&&(u=u[0]));const h=await e.request({method:"eth_newFilter",params:[{address:t,fromBlock:"bigint"==typeof i?(0,_u.eC)(i):i,toBlock:"bigint"==typeof o?(0,_u.eC)(o):o,...u.length?{topics:u}:{}}]});return{abi:c,args:n,eventName:s?s.name:void 0,fromBlock:i,id:h,request:l(h),strict:a,toBlock:o,type:"event"}}async function md(e){const t=od(e,{method:"eth_newPendingTransactionFilter"}),n=await e.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:t(n),type:"transaction"}}const yd=new Map,bd=new Map;async function wd(e,{cacheKey:t,cacheTime:n=1/0}){const s=function(e){const t=(e,t)=>({clear:()=>t.delete(e),get:()=>t.get(e),set:n=>t.set(e,n)}),n=t(e,yd),s=t(e,bd);return{clear:()=>{n.clear(),s.clear()},promise:n,response:s}}(t),r=s.response.get();if(r&&n>0){if((new Date).getTime()-r.created.getTime()<n)return r.data}let i=s.promise.get();i||(i=e(),s.promise.set(i));try{const e=await i;return s.response.set({created:new Date,data:e}),e}finally{s.promise.clear()}}const vd=e=>`blockNumber.${e}`;async function Ed(e,{cacheTime:t=e.cacheTime,maxAge:n}={}){const s=await wd((()=>e.request({method:"eth_blockNumber"})),{cacheKey:vd(e.uid),cacheTime:n??t});return BigInt(s)}var Ad=n(2549);const kd="/docs/contract/decodeEventLog";function _d({abi:e,data:t,strict:n,topics:s}){const r=n??!0,[i,...a]=s;if(!i)throw new Pu.FM({docsPath:kd});const o=e.find((e=>"event"===e.type&&i===(0,ld.e)((0,ud.t)(e))));if(!o||!("name"in o)||"event"!==o.type)throw new Pu.lC(i,{docsPath:kd});const{name:c,inputs:l}=o,u=l?.some((e=>!("name"in e&&e.name)));let h=u?[]:{};const d=l.filter((e=>"indexed"in e&&e.indexed));for(let e=0;e<d.length;e++){const t=d[e],n=a[e];if(!n)throw new Pu.Gy({abiItem:o,param:t});h[t.name||e]=Pd({param:t,value:n})}const p=l.filter((e=>!("indexed"in e&&e.indexed)));if(p.length>0)if(t&&"0x"!==t)try{const e=(0,Ad.r)(p,t);if(e)if(u)h=[...h,...e];else for(let t=0;t<p.length;t++)h[p[t].name]=e[t]}catch(e){if(r){if(e instanceof Pu.xB)throw new Pu.SM({abiItem:o,data:e.data,params:e.params,size:e.size});throw e}}else if(r)throw new Pu.SM({abiItem:o,data:"0x",params:p,size:0});return{eventName:c,args:Object.values(h).length>0?h:void 0}}function Pd({param:e,value:t}){if("string"===e.type||"bytes"===e.type||"tuple"===e.type||e.type.match(/^(.*)\[(\d+)?\]$/))return t;return((0,Ad.r)([e],t)||[])[0]}function xd(e,{args:t,eventName:n}={}){return{...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,logIndex:e.logIndex?Number(e.logIndex):null,transactionHash:e.transactionHash?e.transactionHash:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,...n?{args:t,eventName:n}:{}}}async function Sd(e,{address:t,blockHash:n,fromBlock:s,toBlock:r,event:i,events:a,args:o,strict:c}={}){const l=c??!1,u=a??(i?[i]:void 0);let h,d=[];return u&&(d=[u.flatMap((e=>dd({abi:[e],eventName:e.name,args:o})))],i&&(d=d[0])),h=n?await e.request({method:"eth_getLogs",params:[{address:t,topics:d,blockHash:n}]}):await e.request({method:"eth_getLogs",params:[{address:t,topics:d,fromBlock:"bigint"==typeof s?(0,_u.eC)(s):s,toBlock:"bigint"==typeof r?(0,_u.eC)(r):r}]}),h.map((e=>{try{const{eventName:t,args:n}=u?_d({abi:u,data:e.data,topics:e.topics,strict:l}):{eventName:void 0,args:void 0};return xd(e,{args:n,eventName:t})}catch(t){let n,s;if(t instanceof Pu.SM||t instanceof Pu.Gy){if(l)return;n=t.abiItem.name,s=t.abiItem.inputs?.some((e=>!("name"in e&&e.name)))}return xd(e,{args:s?[]:{},eventName:n})}})).filter(Boolean)}async function Id(e,{abi:t,address:n,args:s,blockHash:r,eventName:i,fromBlock:a,toBlock:o,strict:c}){const l=i?(0,hd.mE)({abi:t,name:i}):void 0,u=l?void 0:t.filter((e=>"event"===e.type));return Uu(e,Sd,"getLogs")({address:n,args:s,blockHash:r,event:l,events:u,fromBlock:a,toBlock:o,strict:c})}async function Cd(e,{blockCount:t,blockNumber:n,blockTag:s="latest",rewardPercentiles:r}){const i=n?(0,_u.eC)(n):void 0;return function(e){return{baseFeePerGas:e.baseFeePerGas.map((e=>BigInt(e))),gasUsedRatio:e.gasUsedRatio,oldestBlock:BigInt(e.oldestBlock),reward:e.reward?.map((e=>e.map((e=>BigInt(e)))))}}(await e.request({method:"eth_feeHistory",params:[(0,_u.eC)(t),i||s,r]}))}async function Td(e,{filter:t}){const n="strict"in t&&t.strict;return(await t.request({method:"eth_getFilterChanges",params:[t.id]})).map((e=>{if("string"==typeof e)return e;try{const{eventName:s,args:r}="abi"in t&&t.abi?_d({abi:t.abi,data:e.data,topics:e.topics,strict:n}):{eventName:void 0,args:void 0};return xd(e,{args:r,eventName:s})}catch(n){let s,r;if(n instanceof Pu.SM||n instanceof Pu.Gy){if("strict"in t&&t.strict)return;s=n.abiItem.name,r=n.abiItem.inputs?.some((e=>!("name"in e&&e.name)))}return xd(e,{args:r?[]:{},eventName:s})}})).filter(Boolean)}async function Od(e,{address:t,blockNumber:n,blockTag:s,storageKeys:r}){const i=s??"latest",a=void 0!==n?(0,_u.eC)(n):void 0;return function(e){return{...e,balance:e.balance?BigInt(e.balance):void 0,nonce:e.nonce?(0,Au.ly)(e.nonce):void 0,storageProof:e.storageProof?(t=e.storageProof,t.map((e=>({...e,value:BigInt(e.value)})))):void 0};var t}(await e.request({method:"eth_getProof",params:[t,r,a||i]}))}async function Nd(e,{blockHash:t,blockNumber:n,blockTag:s,hash:r,index:i}){const a=s||"latest",o=void 0!==n?(0,_u.eC)(n):void 0;let c=null;if(r?c=await e.request({method:"eth_getTransactionByHash",params:[r]}):t?c=await e.request({method:"eth_getTransactionByBlockHashAndIndex",params:[t,(0,_u.eC)(i)]}):(o||a)&&(c=await e.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[o||a,(0,_u.eC)(i)]})),!c)throw new Lu.Bh({blockHash:t,blockNumber:n,blockTag:a,hash:r,index:i});return(e.chain?.formatters?.transaction?.format||qu)(c)}const jd={"0x0":"reverted","0x1":"success"};function Ld(e){return{...e,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,contractAddress:e.contractAddress?e.contractAddress:null,cumulativeGasUsed:e.cumulativeGasUsed?BigInt(e.cumulativeGasUsed):null,effectiveGasPrice:e.effectiveGasPrice?BigInt(e.effectiveGasPrice):null,gasUsed:e.gasUsed?BigInt(e.gasUsed):null,logs:e.logs?e.logs.map((e=>xd(e))):null,to:e.to?e.to:null,transactionIndex:e.transactionIndex?(0,Au.ly)(e.transactionIndex):null,status:e.status?jd[e.status]:null,type:e.type?Wu[e.type]||e.type:null}}async function Bd(e,{hash:t}){const n=await e.request({method:"eth_getTransactionReceipt",params:[t]});if(!n)throw new Lu.Yb({hash:t});return(e.chain?.formatters?.transactionReceipt?.format||Ld)(n)}async function Rd(e,{filter:t}){return t.request({method:"eth_uninstallFilter",params:[t.id]})}const Md="Ethereum Signed Message:\n";const Ud="0x60806040523480156200001157600080fd5b50604051620007003803806200070083398101604081905262000034916200056f565b6000620000438484846200004f565b9050806000526001601ff35b600080846001600160a01b0316803b806020016040519081016040528181526000908060200190933c90507f6492649264926492649264926492649264926492649264926492649264926492620000a68462000451565b036200021f57600060608085806020019051810190620000c79190620005ce565b8651929550909350915060000362000192576000836001600160a01b031683604051620000f5919062000643565b6000604051808303816000865af19150503d806000811462000134576040519150601f19603f3d011682016040523d82523d6000602084013e62000139565b606091505b5050905080620001905760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b505b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90620001c4908b90869060040162000661565b602060405180830381865afa158015620001e2573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906200020891906200069d565b6001600160e01b031916149450505050506200044a565b805115620002b157604051630b135d3f60e11b808252906001600160a01b03871690631626ba7e9062000259908890889060040162000661565b602060405180830381865afa15801562000277573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906200029d91906200069d565b6001600160e01b031916149150506200044a565b8251604114620003195760405162461bcd60e51b815260206004820152603a6024820152600080516020620006e083398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e677468000000000000606482015260840162000187565b620003236200046b565b506020830151604080850151855186939260009185919081106200034b576200034b620006c9565b016020015160f81c9050601b81148015906200036b57508060ff16601c14155b15620003cf5760405162461bcd60e51b815260206004820152603b6024820152600080516020620006e083398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c75650000000000606482015260840162000187565b6040805160008152602081018083528a905260ff83169181019190915260608101849052608081018390526001600160a01b038a169060019060a0016020604051602081039080840390855afa1580156200042e573d6000803e3d6000fd5b505050602060405103516001600160a01b031614955050505050505b9392505050565b60006020825110156200046357600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b03811681146200049f57600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b83811015620004d5578181015183820152602001620004bb565b50506000910152565b600082601f830112620004f057600080fd5b81516001600160401b03808211156200050d576200050d620004a2565b604051601f8301601f19908116603f01168101908282118183101715620005385762000538620004a2565b816040528381528660208588010111156200055257600080fd5b62000565846020830160208901620004b8565b9695505050505050565b6000806000606084860312156200058557600080fd5b8351620005928162000489565b6020850151604086015191945092506001600160401b03811115620005b657600080fd5b620005c486828701620004de565b9150509250925092565b600080600060608486031215620005e457600080fd5b8351620005f18162000489565b60208501519093506001600160401b03808211156200060f57600080fd5b6200061d87838801620004de565b935060408601519150808211156200063457600080fd5b50620005c486828701620004de565b6000825162000657818460208701620004b8565b9190910192915050565b828152604060208201526000825180604084015262000688816060850160208701620004b8565b601f01601f1916919091016060019392505050565b600060208284031215620006b057600080fd5b81516001600160e01b0319811681146200044a57600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572";async function Dd(e,{address:t,hash:n,signature:s,...r}){const i=(0,ih.v)(s)?s:(0,_u.NC)(s);try{const{data:s}=await Uu(e,Wh.R,"call")({data:Cu({abi:Ch.$o,args:[t,n,i],bytecode:Ud}),...r});return a=s??"0x0",o="0x1",Sa((0,ih.v)(a)?(0,Rh.O0)(a):a,(0,ih.v)(o)?(0,Rh.O0)(o):o)}catch(e){if(e instanceof Lh.cg)return!1;throw e}var a,o}async function Fd(e,{address:t,message:n,signature:s,...r}){const i=function(e,t){const n="string"==typeof e?(0,Rh.qX)(e):e.raw instanceof Uint8Array?e.raw:(0,Rh.O0)(e.raw),s=(0,Rh.qX)(`${Md}${n.length}`);return(0,Mh.w)((0,xu.zo)([s,n]),t)}(n);return Dd(e,{address:t,hash:i,signature:s,...r})}function $d({domain:e,message:t,primaryType:n,types:s}){const r=void 0===e?{}:e,i={EIP712Domain:ph({domain:r}),...s};dh({domain:r,message:t,primaryType:n,types:i});const a=["0x1901"];return r&&a.push(function({domain:e,types:t}){return Gd({data:e,primaryType:"EIP712Domain",types:t})}({domain:r,types:i})),"EIP712Domain"!==n&&a.push(Gd({data:t,primaryType:n,types:i})),(0,Mh.w)((0,xu.zo)(a))}function Gd({data:e,primaryType:t,types:n}){const s=Hd({data:e,primaryType:t,types:n});return(0,Mh.w)(s)}function Hd({data:e,primaryType:t,types:n}){const s=[{type:"bytes32"}],r=[zd({primaryType:t,types:n})];for(const i of n[t]){const[t,a]=qd({types:n,name:i.name,type:i.type,value:e[i.name]});s.push(t),r.push(a)}return(0,Su.E)(s,r)}function zd({primaryType:e,types:t}){const n=(0,_u.NC)(function({primaryType:e,types:t}){let n="";const s=Wd({primaryType:e,types:t});s.delete(e);const r=[e,...Array.from(s).sort()];for(const e of r)n+=`${e}(${t[e].map((({name:e,type:t})=>`${t} ${e}`)).join(",")})`;return n}({primaryType:e,types:t}));return(0,Mh.w)(n)}function Wd({primaryType:e,types:t},n=new Set){const s=e.match(/^\w*/u),r=s?.[0];if(n.has(r)||void 0===t[r])return n;n.add(r);for(const e of t[r])Wd({primaryType:e.type,types:t},n);return n}function qd({types:e,name:t,type:n,value:s}){if(void 0!==e[n])return[{type:"bytes32"},(0,Mh.w)(Hd({data:s,primaryType:n,types:e}))];if("bytes"===n){return s=`0x${(s.length%2?"0":"")+s.slice(2)}`,[{type:"bytes32"},(0,Mh.w)(s)]}if("string"===n)return[{type:"bytes32"},(0,Mh.w)((0,_u.NC)(s))];if(n.lastIndexOf("]")===n.length-1){const r=n.slice(0,n.lastIndexOf("[")),i=s.map((n=>qd({name:t,type:r,types:e,value:n})));return[{type:"bytes32"},(0,Mh.w)((0,Su.E)(i.map((([e])=>e)),i.map((([,e])=>e))))]}return[{type:n},s]}const Vd=new Map,Kd=new Map;let Jd=0;function Qd(e,t,n){const s=++Jd,r=()=>Vd.get(e)||[],i=()=>{const t=Kd.get(e);1===r().length&&t&&t(),(()=>{const t=r();Vd.set(e,t.filter((e=>e.id!==s)))})()},a=r();if(Vd.set(e,[...a,{id:s,fns:t}]),a&&a.length>0)return i;const o={};for(const e in t)o[e]=(...t)=>{const n=r();if(0!==n.length)for(const s of n)s.fns[e]?.(...t)};const c=n(o);return"function"==typeof c&&Kd.set(e,c),i}function Yd(e,{emitOnBegin:t,initialWaitTime:n,interval:s}){let r=!0;const i=()=>r=!1;return(async()=>{let a;t&&(a=await e({unpoll:i}));const o=await(n?.(a))??s;await yh(o);const c=async()=>{r&&(await e({unpoll:i}),await yh(s),c())};c()})(),i}function Zd(e,{emitOnBegin:t=!1,emitMissed:n=!1,onBlockNumber:s,onError:r,poll:i,pollingInterval:a=e.pollingInterval}){let o;return(void 0!==i?i:"webSocket"!==e.transport.type)?Qd((0,ah.P)(["watchBlockNumber",e.uid,t,n,a]),{onBlockNumber:s,onError:r},(s=>Yd((async()=>{try{const t=await Uu(e,Ed,"getBlockNumber")({cacheTime:0});if(o){if(t===o)return;if(t-o>1&&n)for(let e=o+1n;e<t;e++)s.onBlockNumber(e,o),o=e}(!o||t>o)&&(s.onBlockNumber(t,o),o=t)}catch(e){s.onError?.(e)}}),{emitOnBegin:t,interval:a}))):(()=>{let t=!0,n=()=>t=!1;return(async()=>{try{const{unsubscribe:i}=await e.transport.subscribe({params:["newHeads"],onData(e){if(!t)return;const n=(0,Au.y_)(e.result?.number);s(n,o),o=n},onError(e){r?.(e)}});n=i,t||n()}catch(e){r?.(e)}})(),n})()}function Xd(e){return{call:t=>(0,Wh.R)(e,t),createBlockFilter:()=>async function(e){const t=od(e,{method:"eth_newBlockFilter"}),n=await e.request({method:"eth_newBlockFilter"});return{id:n,request:t(n),type:"block"}}(e),createContractEventFilter:t=>fd(e,t),createEventFilter:t=>gd(e,t),createPendingTransactionFilter:()=>md(e),estimateContractGas:t=>async function(e,{abi:t,address:n,args:s,functionName:r,...i}){const a=(0,fh.R)({abi:t,args:s,functionName:r});try{return await Uu(e,eh,"estimateGas")({data:a,to:n,...i})}catch(e){const a=i.account?(0,mu.T)(i.account):void 0;throw zh(e,{abi:t,address:n,args:s,docsPath:"/docs/contract/estimateContractGas",functionName:r,sender:a?.address})}}(e,t),estimateGas:t=>eh(e,t),getBalance:t=>async function(e,{address:t,blockNumber:n,blockTag:s="latest"}){const r=n?(0,_u.eC)(n):void 0,i=await e.request({method:"eth_getBalance",params:[t,r||s]});return BigInt(i)}(e,t),getBlock:t=>Ku(e,t),getBlockNumber:t=>Ed(e,t),getBlockTransactionCount:t=>async function(e,{blockHash:t,blockNumber:n,blockTag:s="latest"}={}){const r=void 0!==n?(0,_u.eC)(n):void 0;let i;return i=t?await e.request({method:"eth_getBlockTransactionCountByHash",params:[t]}):await e.request({method:"eth_getBlockTransactionCountByNumber",params:[r||s]}),(0,Au.ly)(i)}(e,t),getBytecode:t=>async function(e,{address:t,blockNumber:n,blockTag:s="latest"}){const r=void 0!==n?(0,_u.eC)(n):void 0,i=await e.request({method:"eth_getCode",params:[t,r||s]});if("0x"!==i)return i}(e,t),getChainId:()=>ku(e),getContractEvents:t=>Id(e,t),getEnsAddress:t=>async function(e,{blockNumber:t,blockTag:n,coinType:s,name:r,universalResolverAddress:i}){let a=i;if(!a){if(!e.chain)throw new Error("client chain not configured. universalResolverAddress is required.");a=(0,Oh.L)({blockNumber:t,chain:e.chain,contract:"ensUniversalResolver"})}try{const i=(0,fh.R)({abi:Ch.X$,functionName:"addr",...null!=s?{args:[Dh(r),BigInt(s)]}:{args:[Dh(r)]}}),o=await Uu(e,qh,"readContract")({address:a,abi:Ch.k3,functionName:"resolve",args:[(0,_u.NC)(Gh(r)),i],blockNumber:t,blockTag:n});if("0x"===o[0])return null;const c=(0,Th.k)({abi:Ch.X$,args:null!=s?[Dh(r),BigInt(s)]:void 0,functionName:"addr",data:o[0]});return"0x"===c||"0x00"===(0,Nh.f)(c)?null:c}catch(e){if(Bh(e,"resolve"))return null;throw e}}(e,t),getEnsAvatar:t=>async function(e,{blockNumber:t,blockTag:n,gatewayUrls:s,name:r,universalResolverAddress:i}){const a=await Uu(e,ad,"getEnsText")({blockNumber:t,blockTag:n,key:"avatar",name:r,universalResolverAddress:i});if(!a)return null;try{return await id(e,{record:a,gatewayUrls:s})}catch{return null}}(e,t),getEnsName:t=>async function(e,{address:t,blockNumber:n,blockTag:s,universalResolverAddress:r}){let i=r;if(!i){if(!e.chain)throw new Error("client chain not configured. universalResolverAddress is required.");i=(0,Oh.L)({blockNumber:n,chain:e.chain,contract:"ensUniversalResolver"})}const a=`${t.toLowerCase().substring(2)}.addr.reverse`;try{const[r,o]=await Uu(e,qh,"readContract")({address:i,abi:Ch.du,functionName:"reverse",args:[(0,_u.NC)(Gh(a))],blockNumber:n,blockTag:s});return t.toLowerCase()!==o.toLowerCase()?null:r}catch(e){if(Bh(e,"reverse"))return null;throw e}}(e,t),getEnsResolver:t=>async function(e,{blockNumber:t,blockTag:n,name:s,universalResolverAddress:r}){let i=r;if(!i){if(!e.chain)throw new Error("client chain not configured. universalResolverAddress is required.");i=(0,Oh.L)({blockNumber:t,chain:e.chain,contract:"ensUniversalResolver"})}const[a]=await Uu(e,qh,"readContract")({address:i,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[(0,_u.NC)(Gh(s))],blockNumber:t,blockTag:n});return a}(e,t),getEnsText:t=>ad(e,t),getFeeHistory:t=>Cd(e,t),estimateFeesPerGas:t=>async function(e,t){return Yu(e,t)}(e,t),getFilterChanges:e=>Td(0,e),getFilterLogs:e=>async function(e,{filter:t}){const n=t.strict??!1;return(await t.request({method:"eth_getFilterLogs",params:[t.id]})).map((e=>{try{const{eventName:s,args:r}="abi"in t&&t.abi?_d({abi:t.abi,data:e.data,topics:e.topics,strict:n}):{eventName:void 0,args:void 0};return xd(e,{args:r,eventName:s})}catch(n){let s,r;if(n instanceof Pu.SM||n instanceof Pu.Gy){if("strict"in t&&t.strict)return;s=n.abiItem.name,r=n.abiItem.inputs?.some((e=>!("name"in e&&e.name)))}return xd(e,{args:r?[]:{},eventName:s})}})).filter(Boolean)}(0,e),getGasPrice:()=>Ju(e),getLogs:t=>Sd(e,t),getProof:t=>Od(e,t),estimateMaxPriorityFeePerGas:t=>async function(e,t){return Qu(e,t)}(e,t),getStorageAt:t=>async function(e,{address:t,blockNumber:n,blockTag:s="latest",slot:r}){const i=void 0!==n?(0,_u.eC)(n):void 0;return await e.request({method:"eth_getStorageAt",params:[t,r,i||s]})}(e,t),getTransaction:t=>Nd(e,t),getTransactionConfirmations:t=>async function(e,{hash:t,transactionReceipt:n}){const[s,r]=await Promise.all([Uu(e,Ed,"getBlockNumber")({}),t?Uu(e,Nd,"getBlockNumber")({hash:t}):void 0]),i=n?.blockNumber||r?.blockNumber;return i?s-i+1n:0n}(e,t),getTransactionCount:t=>th(e,t),getTransactionReceipt:t=>Bd(e,t),multicall:t=>async function(e,t){const{allowFailure:n=!0,batchSize:s,blockNumber:r,blockTag:i,contracts:a,multicallAddress:o}=t,c=s??("object"==typeof e.batch?.multicall&&e.batch.multicall.batchSize||1024);let l=o;if(!l){if(!e.chain)throw new Error("client chain not configured. multicallAddress is required.");l=(0,Oh.L)({blockNumber:r,chain:e.chain,contract:"multicall3"})}const u=[[]];let h=0,d=0;for(let e=0;e<a.length;e++){const{abi:t,address:s,args:r,functionName:i}=a[e];try{const e=(0,fh.R)({abi:t,args:r,functionName:i});d+=(e.length-2)/2,c>0&&d>c&&u[h].length>0&&(h++,d=(e.length-2)/2,u[h]=[]),u[h]=[...u[h],{allowFailure:!0,callData:e,target:s}]}catch(e){const a=zh(e,{abi:t,address:s,args:r,docsPath:"/docs/contract/multicall",functionName:i});if(!n)throw a;u[h]=[...u[h],{allowFailure:!0,callData:"0x",target:s}]}}const p=await Promise.allSettled(u.map((t=>Uu(e,qh,"readContract")({abi:Ch.F8,address:l,args:[t],blockNumber:r,blockTag:i,functionName:"aggregate3"})))),f=[];for(let e=0;e<p.length;e++){const t=p[e];if("rejected"===t.status){if(!n)throw t.reason;for(let n=0;n<u[e].length;n++)f.push({status:"failure",error:t.reason,result:void 0});continue}const s=t.value;for(let t=0;t<s.length;t++){const{returnData:r,success:i}=s[t],{callData:o}=u[e][t],{abi:c,address:l,functionName:h,args:d}=a[f.length];try{if("0x"===o)throw new Pu.wb;if(!i)throw new Lh.VQ({data:r});const e=(0,Th.k)({abi:c,args:d,data:r,functionName:h});f.push(n?{result:e,status:"success"}:e)}catch(e){const t=zh(e,{abi:c,address:l,args:d,docsPath:"/docs/contract/multicall",functionName:h});if(!n)throw t;f.push({error:t,result:void 0,status:"failure"})}}}if(f.length!==a.length)throw new Vl.G("multicall results mismatch");return f}(e,t),prepareTransactionRequest:t=>nh(e,t),readContract:t=>qh(e,t),sendRawTransaction:t=>sh(e,t),simulateContract:t=>async function(e,{abi:t,address:n,args:s,dataSuffix:r,functionName:i,...a}){const o=a.account?(0,mu.T)(a.account):void 0,c=(0,fh.R)({abi:t,args:s,functionName:i});try{const{data:o}=await Uu(e,Wh.R,"call")({batch:!1,data:`${c}${r?r.replace("0x",""):""}`,to:n,...a});return{result:(0,Th.k)({abi:t,args:s,functionName:i,data:o||"0x"}),request:{abi:t,address:n,args:s,dataSuffix:r,functionName:i,...a}}}catch(e){throw zh(e,{abi:t,address:n,args:s,docsPath:"/docs/contract/simulateContract",functionName:i,sender:o?.address})}}(e,t),verifyMessage:t=>Fd(e,t),verifyTypedData:t=>async function(e,{address:t,signature:n,message:s,primaryType:r,types:i,domain:a,...o}){return Dd(e,{address:t,hash:$d({message:s,primaryType:r,types:i,domain:a}),signature:n,...o})}(e,t),uninstallFilter:e=>Rd(0,e),waitForTransactionReceipt:t=>async function(e,{confirmations:t=1,hash:n,onReplaced:s,pollingInterval:r=e.pollingInterval,timeout:i}){const a=(0,ah.P)(["waitForTransactionReceipt",e.uid,n]);let o,c,l,u=!1;return new Promise(((h,d)=>{i&&setTimeout((()=>d(new Lu.mc({hash:n}))),i);const p=Qd(a,{onReplaced:s,resolve:h,reject:d},(s=>{const i=Uu(e,Zd,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:r,async onBlockNumber(r){if(u)return;let a=r;const h=e=>{i(),e(),p()};try{if(l){if(t>1&&(!l.blockNumber||a-l.blockNumber+1n<t))return;return void h((()=>s.resolve(l)))}if(o||(u=!0,await bh((async()=>{o=await Uu(e,Nd,"getTransaction")({hash:n}),o.blockNumber&&(a=o.blockNumber)}),{delay:({count:e})=>200*~~(1<<e),retryCount:6}),u=!1),l=await Uu(e,Bd,"getTransactionReceipt")({hash:n}),t>1&&(!l.blockNumber||a-l.blockNumber+1n<t))return;h((()=>s.resolve(l)))}catch(n){if(o&&(n instanceof Lu.Bh||n instanceof Lu.Yb))try{c=o,u=!0;const n=await bh((()=>Uu(e,Ku,"getBlock")({blockNumber:a,includeTransactions:!0})),{delay:({count:e})=>200*~~(1<<e),retryCount:6,shouldRetry:({error:e})=>e instanceof zu});u=!1;const r=n.transactions.find((({from:e,nonce:t})=>e===c.from&&t===c.nonce));if(!r)return;if(l=await Uu(e,Bd,"getTransactionReceipt")({hash:r.hash}),t>1&&(!l.blockNumber||a-l.blockNumber+1n<t))return;let i="replaced";r.to===c.to&&r.value===c.value?i="repriced":r.from===r.to&&0n===r.value&&(i="cancelled"),h((()=>{s.onReplaced?.({reason:i,replacedTransaction:c,transaction:r,transactionReceipt:l}),s.resolve(l)}))}catch(e){h((()=>s.reject(e)))}else h((()=>s.reject(n)))}}})}))}))}(e,t),watchBlocks:t=>function(e,{blockTag:t="latest",emitMissed:n=!1,emitOnBegin:s=!1,onBlock:r,onError:i,includeTransactions:a,poll:o,pollingInterval:c=e.pollingInterval}){const l=void 0!==o?o:"webSocket"!==e.transport.type,u=a??!1;let h;return l?Qd((0,ah.P)(["watchBlocks",e.uid,n,s,u,c]),{onBlock:r,onError:i},(r=>Yd((async()=>{try{const s=await Uu(e,Ku,"getBlock")({blockTag:t,includeTransactions:u});if(s.number&&h?.number){if(s.number===h.number)return;if(s.number-h.number>1&&n)for(let t=h?.number+1n;t<s.number;t++){const n=await Uu(e,Ku,"getBlock")({blockNumber:t,includeTransactions:u});r.onBlock(n,h),h=n}}(!h?.number||"pending"===t&&!s?.number||s.number&&s.number>h.number)&&(r.onBlock(s,h),h=s)}catch(e){r.onError?.(e)}}),{emitOnBegin:s,interval:c}))):(()=>{let t=!0,n=()=>t=!1;return(async()=>{try{const{unsubscribe:s}=await e.transport.subscribe({params:["newHeads"],onData(n){if(!t)return;const s=(e.chain?.formatters?.block?.format||Vu)(n.result);r(s,h),h=s},onError(e){i?.(e)}});n=s,t||n()}catch(e){i?.(e)}})(),n})()}(e,t),watchBlockNumber:t=>Zd(e,t),watchContractEvent:t=>function(e,{abi:t,address:n,args:s,batch:r=!0,eventName:i,onError:a,onLogs:o,poll:c,pollingInterval:l=e.pollingInterval,strict:u}){return(void 0!==c?c:"webSocket"!==e.transport.type)?(()=>{const c=(0,ah.P)(["watchContractEvent",n,s,r,e.uid,i,l]),h=u??!1;return Qd(c,{onLogs:o,onError:a},(a=>{let o,c,u=!1;const d=Yd((async()=>{if(u)try{let l;if(c)l=await Uu(e,Td,"getFilterChanges")({filter:c});else{const r=await Uu(e,Ed,"getBlockNumber")({});l=o&&o!==r?await Uu(e,Id,"getContractEvents")({abi:t,address:n,args:s,eventName:i,fromBlock:o+1n,toBlock:r,strict:h}):[],o=r}if(0===l.length)return;if(r)a.onLogs(l);else for(const e of l)a.onLogs([e])}catch(e){c&&e instanceof nu&&(u=!1),a.onError?.(e)}else{try{c=await Uu(e,fd,"createContractEventFilter")({abi:t,address:n,args:s,eventName:i,strict:h})}catch{}u=!0}}),{emitOnBegin:!0,interval:l});return async()=>{c&&await Uu(e,Rd,"uninstallFilter")({filter:c}),d()}}))})():(()=>{let r=!0,c=()=>r=!1;return(async()=>{try{const l=i?dd({abi:t,eventName:i,args:s}):[],{unsubscribe:h}=await e.transport.subscribe({params:["logs",{address:n,topics:l}],onData(e){if(!r)return;const n=e.result;try{const{eventName:e,args:s}=_d({abi:t,data:n.data,topics:n.topics,strict:u}),r=xd(n,{args:s,eventName:e});o([r])}catch(e){let t,s;if(e instanceof Pu.SM||e instanceof Pu.Gy){if(u)return;t=e.abiItem.name,s=e.abiItem.inputs?.some((e=>!("name"in e&&e.name)))}const r=xd(n,{args:s?[]:{},eventName:t});o([r])}},onError(e){a?.(e)}});c=h,r||c()}catch(e){a?.(e)}})(),c})()}(e,t),watchEvent:t=>function(e,{address:t,args:n,batch:s=!0,event:r,events:i,onError:a,onLogs:o,poll:c,pollingInterval:l=e.pollingInterval,strict:u}){const h=void 0!==c?c:"webSocket"!==e.transport.type,d=u??!1;return h?Qd((0,ah.P)(["watchEvent",t,n,s,e.uid,r,l]),{onLogs:o,onError:a},(a=>{let o,c,u=!1;const h=Yd((async()=>{if(u)try{let l;if(c)l=await Uu(e,Td,"getFilterChanges")({filter:c});else{const s=await Uu(e,Ed,"getBlockNumber")({});l=o&&o!==s?await Uu(e,Sd,"getLogs")({address:t,args:n,event:r,events:i,fromBlock:o+1n,toBlock:s}):[],o=s}if(0===l.length)return;if(s)a.onLogs(l);else for(const e of l)a.onLogs([e])}catch(e){c&&e instanceof nu&&(u=!1),a.onError?.(e)}else{try{c=await Uu(e,gd,"createEventFilter")({address:t,args:n,event:r,events:i,strict:d})}catch{}u=!0}}),{emitOnBegin:!0,interval:l});return async()=>{c&&await Uu(e,Rd,"uninstallFilter")({filter:c}),h()}})):(()=>{let s=!0,c=()=>s=!1;return(async()=>{try{const l=i??(r?[r]:void 0);let h=[];l&&(h=[l.flatMap((e=>dd({abi:[e],eventName:e.name,args:n})))],r&&(h=h[0]));const{unsubscribe:p}=await e.transport.subscribe({params:["logs",{address:t,topics:h}],onData(e){if(!s)return;const t=e.result;try{const{eventName:e,args:n}=_d({abi:l,data:t.data,topics:t.topics,strict:d}),s=xd(t,{args:n,eventName:e});o([s])}catch(e){let n,s;if(e instanceof Pu.SM||e instanceof Pu.Gy){if(u)return;n=e.abiItem.name,s=e.abiItem.inputs?.some((e=>!("name"in e&&e.name)))}const r=xd(t,{args:s?[]:{},eventName:n});o([r])}},onError(e){a?.(e)}});c=p,s||c()}catch(e){a?.(e)}})(),c})()}(e,t),watchPendingTransactions:t=>function(e,{batch:t=!0,onError:n,onTransactions:s,poll:r,pollingInterval:i=e.pollingInterval}){return(void 0!==r?r:"webSocket"!==e.transport.type)?Qd((0,ah.P)(["watchPendingTransactions",e.uid,t,i]),{onTransactions:s,onError:n},(n=>{let s;const r=Yd((async()=>{try{if(!s)try{return void(s=await Uu(e,md,"createPendingTransactionFilter")({}))}catch(e){throw r(),e}const i=await Uu(e,Td,"getFilterChanges")({filter:s});if(0===i.length)return;if(t)n.onTransactions(i);else for(const e of i)n.onTransactions([e])}catch(e){n.onError?.(e)}}),{emitOnBegin:!0,interval:i});return async()=>{s&&await Uu(e,Rd,"uninstallFilter")({filter:s}),r()}})):(()=>{let t=!0,r=()=>t=!1;return(async()=>{try{const{unsubscribe:i}=await e.transport.subscribe({params:["newPendingTransactions"],onData(e){if(!t)return;const n=e.result;s([n])},onError(e){n?.(e)}});r=i,t||r()}catch(e){n?.(e)}})(),r})()}(e,t)}}function ep(e){const{key:t="public",name:n="Public Client"}=e;return Eu({...e,key:t,name:n,type:"publicClient"}).extend(Xd)}function tp(e,t={}){const{key:n="fallback",name:s="Fallback",rank:r=!1,retryCount:i,retryDelay:a}=t;return({chain:t,pollingInterval:o=4e3,timeout:c})=>{let l=e,u=()=>{};const h=Eh({key:n,name:s,async request({method:e,params:n}){const s=async(r=0)=>{const i=l[r]({chain:t,retryCount:0,timeout:c});try{const t=await i.request({method:e,params:n});return u({method:e,params:n,response:t,transport:i,status:"success"}),t}catch(t){if(u({error:t,method:e,params:n,transport:i,status:"error"}),wh(t))throw t;if(r===l.length-1)throw t;return s(r+1)}};return s()},retryCount:i,retryDelay:a,type:"fallback"},{onResponse:e=>u=e,transports:l.map((e=>e({chain:t,retryCount:0})))});if(r){const e="object"==typeof r?r:{};!function({chain:e,interval:t=4e3,onTransports:n,sampleCount:s=10,timeout:r=1e3,transports:i,weights:a={}}){const{stability:o=.7,latency:c=.3}=a,l=[],u=async()=>{const a=await Promise.all(i.map((async t=>{const n=t({chain:e,retryCount:0,timeout:r}),s=Date.now();let i,a;try{await n.request({method:"net_listening"}),a=1}catch{a=0}finally{i=Date.now()}return{latency:i-s,success:a}})));l.push(a),l.length>s&&l.shift();const h=Math.max(...l.map((e=>Math.max(...e.map((({latency:e})=>e)))))),d=i.map(((e,t)=>{const n=l.map((e=>e[t].latency)),s=1-n.reduce(((e,t)=>e+t),0)/n.length/h,r=l.map((e=>e[t].success)),i=r.reduce(((e,t)=>e+t),0)/r.length;return 0===i?[0,t]:[c*s+o*i,t]})).sort(((e,t)=>t[0]-e[0]));n(d.map((([,e])=>i[e]))),await yh(t),u()};u()}({chain:t,interval:e.interval??o,onTransports:e=>l=e,sampleCount:e.sampleCount,timeout:e.timeout,transports:l,weights:e.weights})}return h}}class np extends Vl.G{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro"})}}var sp=n(4426);const rp=function(){if("undefined"!=typeof WebSocket)return WebSocket;if(void 0!==global.WebSocket)return global.WebSocket;if(void 0!==window.WebSocket)return window.WebSocket;if(void 0!==self.WebSocket)return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}();function ip(e,{errorInstance:t=new Error("timed out"),timeout:n,signal:s}){return new Promise(((r,i)=>{(async()=>{let a;try{const o=new AbortController;n>0&&(a=setTimeout((()=>{s?o.abort():i(t)}),n)),r(await e({signal:o?.signal}))}catch(e){"AbortError"===e.name&&i(t),i(e)}finally{clearTimeout(a)}})()}))}let ap=0;const op=new Map;async function cp(e){let t=op.get(e);if(t)return t;const{schedule:n}=(0,sp.S)({id:e,fn:async()=>{const n=new rp(e),s=new Map,r=new Map,i=({data:e})=>{const t=JSON.parse(e),n="eth_subscription"===t.method,i=n?t.params.subscription:t.id,a=n?r:s,o=a.get(i);o&&o({data:e}),n||a.delete(i)},a=()=>{op.delete(e),n.removeEventListener("close",a),n.removeEventListener("message",i)};return n.addEventListener("close",a),n.addEventListener("message",i),n.readyState===rp.CONNECTING&&await new Promise(((e,t)=>{n&&(n.onopen=e,n.onerror=t)})),t=Object.assign(n,{requests:s,subscriptions:r}),op.set(e,t),[t]}}),[s,[r]]=await n();return r}const lp={http:async function(e,{body:t,fetchOptions:n={},timeout:s=1e4}){const{headers:r,method:i,signal:a}=n;try{const o=await ip((async({signal:o})=>await fetch(e,{...n,body:Array.isArray(t)?(0,ah.P)(t.map((e=>({jsonrpc:"2.0",id:e.id??ap++,...e})))):(0,ah.P)({jsonrpc:"2.0",id:t.id??ap++,...t}),headers:{...r,"Content-Type":"application/json"},method:i||"POST",signal:a||(s>0?o:void 0)})),{errorInstance:new Kl.W5({body:t,url:e}),timeout:s,signal:!0});let c;if(c=o.headers.get("Content-Type")?.startsWith("application/json")?await o.json():await o.text(),!o.ok)throw new Kl.Gg({body:t,details:(0,ah.P)(c.error)||o.statusText,headers:o.headers,status:o.status,url:e});return c}catch(n){if(n instanceof Kl.Gg)throw n;if(n instanceof Kl.W5)throw n;throw new Kl.Gg({body:t,details:n.message,url:e})}},webSocket:function(e,{body:t,onResponse:n}){if(e.readyState===e.CLOSED||e.readyState===e.CLOSING)throw new Kl.c9({body:t,url:e.url,details:"Socket is closed."});const s=ap++,r=({data:i})=>{const a=JSON.parse(i);"number"==typeof a.id&&s!==a.id||(n?.(a),"eth_subscribe"===t.method&&"string"==typeof a.result&&e.subscriptions.set(a.result,r),"eth_unsubscribe"===t.method&&e.subscriptions.delete(t.params?.[0]))};return e.requests.set(s,r),e.send(JSON.stringify({jsonrpc:"2.0",...t,id:s})),e},webSocketAsync:async function(e,{body:t,timeout:n=1e4}){return ip((()=>new Promise((n=>lp.webSocket(e,{body:t,onResponse:n})))),{errorInstance:new Kl.W5({body:t,url:e.url}),timeout:n})}};var up=n(3339);const hp=e=>(t,n,s)=>{const r=s.subscribe;s.subscribe=(e,t,n)=>{let i=e;if(t){const r=(null==n?void 0:n.equalityFn)||Object.is;let a=e(s.getState());i=n=>{const s=e(n);if(!r(a,s)){const e=a;t(a=s,e)}},(null==n?void 0:n.fireImmediately)&&t(a,a)}return r(i)};return e(t,n,s)};function dp(e,t){let n;try{n=e()}catch(e){return}return{getItem:e=>{var s;const r=e=>null===e?null:JSON.parse(e,null==t?void 0:t.reviver),i=null!=(s=n.getItem(e))?s:null;return i instanceof Promise?i.then(r):r(i)},setItem:(e,s)=>n.setItem(e,JSON.stringify(s,null==t?void 0:t.replacer)),removeItem:e=>n.removeItem(e)}}const pp=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then:e=>pp(e)(n),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>pp(t)(e)}}},fp=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?(console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),((e,t)=>(n,s,r)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},a=!1;const o=new Set,c=new Set;let l;try{l=i.getStorage()}catch(e){}if(!l)return e(((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...e)}),s,r);const u=pp(i.serialize),h=()=>{const e=i.partialize({...s()});let t;const n=u({state:e,version:i.version}).then((e=>l.setItem(i.name,e))).catch((e=>{t=e}));if(t)throw t;return n},d=r.setState;r.setState=(e,t)=>{d(e,t),h()};const p=e(((...e)=>{n(...e),h()}),s,r);let f;const g=()=>{var e;if(!l)return;a=!1,o.forEach((e=>e(s())));const t=(null==(e=i.onRehydrateStorage)?void 0:e.call(i,s()))||void 0;return pp(l.getItem.bind(l))(i.name).then((e=>{if(e)return i.deserialize(e)})).then((e=>{if(e){if("number"!=typeof e.version||e.version===i.version)return e.state;if(i.migrate)return i.migrate(e.state,e.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}})).then((e=>{var t;return f=i.merge(e,null!=(t=s())?t:p),n(f,!0),h()})).then((()=>{null==t||t(f,void 0),a=!0,c.forEach((e=>e(f)))})).catch((e=>{null==t||t(void 0,e)}))};return r.persist={setOptions:e=>{i={...i,...e},e.getStorage&&(l=e.getStorage())},clearStorage:()=>{null==l||l.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>g(),hasHydrated:()=>a,onHydrate:e=>(o.add(e),()=>{o.delete(e)}),onFinishHydration:e=>(c.add(e),()=>{c.delete(e)})},g(),f||p})(e,t)):((e,t)=>(n,s,r)=>{let i={storage:dp((()=>localStorage)),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},a=!1;const o=new Set,c=new Set;let l=i.storage;if(!l)return e(((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...e)}),s,r);const u=()=>{const e=i.partialize({...s()});return l.setItem(i.name,{state:e,version:i.version})},h=r.setState;r.setState=(e,t)=>{h(e,t),u()};const d=e(((...e)=>{n(...e),u()}),s,r);let p;r.getInitialState=()=>d;const f=()=>{var e,t;if(!l)return;a=!1,o.forEach((e=>{var t;return e(null!=(t=s())?t:d)}));const r=(null==(t=i.onRehydrateStorage)?void 0:t.call(i,null!=(e=s())?e:d))||void 0;return pp(l.getItem.bind(l))(i.name).then((e=>{if(e){if("number"!=typeof e.version||e.version===i.version)return e.state;if(i.migrate)return i.migrate(e.state,e.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}})).then((e=>{var t;return p=i.merge(e,null!=(t=s())?t:d),n(p,!0),u()})).then((()=>{null==r||r(p,void 0),p=s(),a=!0,c.forEach((e=>e(p)))})).catch((e=>{null==r||r(void 0,e)}))};return r.persist={setOptions:e=>{i={...i,...e},e.storage&&(l=e.storage)},clearStorage:()=>{null==l||l.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>f(),hasHydrated:()=>a,onHydrate:e=>(o.add(e),()=>{o.delete(e)}),onFinishHydration:e=>(c.add(e),()=>{c.delete(e)})},i.skipHydration||f(),p||d})(e,t),gp=e=>{let t;const n=new Set,s=(e,s)=>{const r="function"==typeof e?e(t):e;if(!Object.is(r,t)){const e=t;t=(null!=s?s:"object"!=typeof r||null===r)?r:Object.assign({},t,r),n.forEach((n=>n(t,e)))}},r=()=>t,i={setState:s,getState:r,getInitialState:()=>a,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},a=t=e(s,r,i);return i},mp=e=>e?gp(e):gp;var yp=n(6613);function bp(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,s]of e)if(!Object.is(s,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const s of n)if(!Object.prototype.hasOwnProperty.call(t,s)||!Object.is(e[s],t[s]))return!1;return!0}function wp(e,t,{batch:n={multicall:{wait:32}},pollingInterval:s=4e3,rank:r,retryCount:i,retryDelay:a,stallTimeout:o}={}){if(!e.length)throw new Error("must have at least one chain");let c=[];const l={},u={};for(const n of e){let e=!1;for(const s of t){const t=s(n);t&&(e=!0,c.some((({id:e})=>e===n.id))||(c=[...c,t.chain]),l[n.id]=[...l[n.id]||[],...t.rpcUrls.http],t.rpcUrls.webSocket&&(u[n.id]=[...u[n.id]||[],...t.rpcUrls.webSocket]))}if(!e)throw new Error([`Could not find valid provider configuration for chain "${n.name}".\n`,"You may need to add `jsonRpcProvider` to `configureChains` with the chain's RPC URLs.","Read more: https://wagmi.sh/core/providers/jsonRpc"].join("\n"))}return{chains:c,publicClient:({chainId:t})=>{const u=c.find((e=>e.id===t))??e[0],h=l[u.id];if(!h||!h[0])throw new Error(`No providers configured for chain "${u.id}"`);const d=ep({batch:n,chain:u,transport:tp(h.map((e=>function(e,t={}){const{batch:n,fetchOptions:s,key:r="http",name:i="HTTP JSON-RPC",retryDelay:a}=t;return({chain:o,retryCount:c,timeout:l})=>{const{batchSize:u=1e3,wait:h=0}="object"==typeof n?n:{},d=t.retryCount??c,p=l??t.timeout??1e4,f=e||o?.rpcUrls.default.http[0];if(!f)throw new np;return Eh({key:r,name:i,async request({method:t,params:r}){const i={method:t,params:r},{schedule:a}=(0,sp.S)({id:`${e}`,wait:h,shouldSplitBatch:e=>e.length>u,fn:e=>lp.http(f,{body:e,fetchOptions:s,timeout:p}),sort:(e,t)=>e.id-t.id}),[{error:o,result:c}]=await(async e=>n?a(e):[await lp.http(f,{body:e,fetchOptions:s,timeout:p})])(i);if(o)throw new Kl.bs({body:i,error:o,url:f});return c},retryCount:d,retryDelay:a,timeout:p,type:"http"},{fetchOptions:s,url:e})}}(e,{timeout:o}))),{rank:r,retryCount:i,retryDelay:a}),pollingInterval:s});return Object.assign(d,{chains:c})},webSocketPublicClient:({chainId:t})=>{const l=c.find((e=>e.id===t))??e[0],h=u[l.id];if(!h||!h[0])return;const d=ep({batch:n,chain:l,transport:tp(h.map((e=>function(e,t={}){const{key:n="webSocket",name:s="WebSocket JSON-RPC",retryDelay:r}=t;return({chain:i,retryCount:a,timeout:o})=>{const c=t.retryCount??a,l=o??t.timeout??1e4,u=e||i?.rpcUrls.default.webSocket?.[0];if(!u)throw new np;return Eh({key:n,name:s,async request({method:e,params:t}){const n={method:e,params:t},s=await cp(u),{error:r,result:i}=await lp.webSocketAsync(s,{body:n,timeout:l});if(r)throw new Kl.bs({body:n,error:r,url:u});return i},retryCount:c,retryDelay:r,timeout:l,type:"webSocket"},{getSocket:()=>cp(u),async subscribe({params:e,onData:t,onError:n}){const s=await cp(u),{result:r}=await new Promise(((r,i)=>lp.webSocket(s,{body:{method:"eth_subscribe",params:e},onResponse(e){if(e.error)return i(e.error),void n?.(e.error);"number"!=typeof e.id?"eth_subscription"===e.method&&t(e.params):r(e)}})));return{subscriptionId:r,unsubscribe:async()=>new Promise((e=>lp.webSocket(s,{body:{method:"eth_unsubscribe",params:[r]},onResponse:e})))}}})}}(e,{timeout:o}))),{rank:r,retryCount:i,retryDelay:a}),pollingInterval:s});return Object.assign(d,{chains:c})}}}Error;var vp=class extends Error{constructor({chainId:e,connectorId:t}){super(`Chain "${e}" not configured${t?` for connector "${t}"`:""}.`),this.name="ChainNotConfigured"}},Ep=class extends Error{constructor(){super(...arguments),this.name="ConnectorAlreadyConnectedError",this.message="Connector already connected"}},Ap=class extends Error{constructor(){super(...arguments),this.name="ConfigChainsNotFound",this.message="No chains were found on the wagmi config. Some functions that require a chain may not work."}},kp=class extends Error{constructor({connector:e}){super(`"${e.name}" does not support programmatic chain switching.`),this.name="SwitchChainNotSupportedError"}};var _p=(e,{find:t,replace:n})=>e&&t(e)?n(e):"object"!=typeof e?e:Array.isArray(e)?e.map((e=>_p(e,{find:t,replace:n}))):e instanceof Object?Object.entries(e).reduce(((e,[s,r])=>({...e,[s]:_p(r,{find:t,replace:n})})),{}):e;function Pp(e){const t=JSON.parse(e);return _p(t,{find:e=>"string"==typeof e&&e.startsWith("#bigint."),replace:e=>BigInt(e.replace("#bigint.",""))})}function xp(e){return"number"==typeof e?e:"wei"===e?0:Math.abs(up.Bd[e])}function Sp(e,t){return e.slice(0,t).join(".")||"."}function Ip(e,t){const{length:n}=e;for(let s=0;s<n;++s)if(e[s]===t)return s+1;return 0}function Cp(e,t,n,s){return JSON.stringify(e,function(e,t){const n="function"==typeof e,s="function"==typeof t,r=[],i=[];return function(a,o){if("object"==typeof o)if(r.length){const e=Ip(r,this);0===e?r[r.length]=this:(r.splice(e),i.splice(e)),i[i.length]=a;const n=Ip(r,o);if(0!==n)return s?t.call(this,a,o,Sp(i,n)):`[ref=${Sp(i,n)}]`}else r[0]=o,i[0]=a;return n?e.call(this,a,o):o}}(((e,n)=>{const s="bigint"==typeof n?`#bigint.${n.toString()}`:n;return t?.(e,s)||s}),s),n??void 0)}var Tp={getItem:e=>"",setItem:(e,t)=>null,removeItem:e=>null};function Op({deserialize:e=Pp,key:t="wagmi",serialize:n=Cp,storage:s}){return{...s,getItem:(n,r=null)=>{const i=s.getItem(`${t}.${n}`);try{return i?e(i):r}catch(e){return console.warn(e),r}},setItem:(e,r)=>{if(null===r)s.removeItem(`${t}.${e}`);else try{s.setItem(`${t}.${e}`,n(r))}catch(e){console.error(e)}},removeItem:e=>s.removeItem(`${t}.${e}`)}}var Np,jp,Lp,Bp,Rp,Mp="store",Up=class{constructor({autoConnect:e=!1,connectors:t=[new _h],publicClient:n,storage:s=Op({storage:"undefined"!=typeof window?window.localStorage:Tp}),logger:r={warn:console.warn},webSocketPublicClient:i}){Sh(this,Lp),this.publicClients=new Map,this.webSocketPublicClients=new Map,Sh(this,Np,void 0),Sh(this,jp,void 0),this.args={autoConnect:e,connectors:t,logger:r,publicClient:n,storage:s,webSocketPublicClient:i};let a,o="disconnected";if(e)try{const e=s.getItem(Mp),t=e?.state?.data;o=t?.account?"reconnecting":"connecting",a=t?.chain?.id}catch(e){}const c="function"==typeof t?t():t;var l,u,h;c.forEach((e=>e.setStorage(s))),this.store=mp(hp(fp((()=>({connectors:c,publicClient:this.getPublicClient({chainId:a}),status:o,webSocketPublicClient:this.getWebSocketPublicClient({chainId:a})})),{name:Mp,storage:s,partialize:t=>({...e&&{data:{account:t?.data?.account,chain:t?.data?.chain}},chains:t?.chains}),version:2}))),this.storage=s,Ih(this,jp,s?.getItem("wallet")),(l=this,u=Lp,h=Bp,Ph(l,u,"access private method"),h).call(this),e&&"undefined"!=typeof window&&setTimeout((async()=>await this.autoConnect()),0)}get chains(){return this.store.getState().chains}get connectors(){return this.store.getState().connectors}get connector(){return this.store.getState().connector}get data(){return this.store.getState().data}get error(){return this.store.getState().error}get lastUsedChainId(){return this.data?.chain?.id}get publicClient(){return this.store.getState().publicClient}get status(){return this.store.getState().status}get subscribe(){return this.store.subscribe}get webSocketPublicClient(){return this.store.getState().webSocketPublicClient}setState(e){const t="function"==typeof e?e(this.store.getState()):e;this.store.setState(t,!0)}clearState(){this.setState((e=>({...e,chains:void 0,connector:void 0,data:void 0,error:void 0,status:"disconnected"})))}async destroy(){this.connector&&await(this.connector.disconnect?.()),Ih(this,Np,!1),this.clearState(),this.store.destroy()}async autoConnect(){if(xh(this,Np))return;Ih(this,Np,!0),this.setState((e=>({...e,status:e.data?.account?"reconnecting":"connecting"})));const e=xh(this,jp)?[...this.connectors].sort((e=>e.id===xh(this,jp)?-1:1)):this.connectors;let t=!1;for(const n of e){if(!n.ready||!n.isAuthorized)continue;if(!await n.isAuthorized())continue;const e=await n.connect();this.setState((t=>({...t,connector:n,chains:n?.chains,data:e,status:"connected"}))),t=!0;break}return t||this.setState((e=>({...e,data:void 0,status:"disconnected"}))),Ih(this,Np,!1),this.data}setConnectors(e){this.args={...this.args,connectors:e};const t="function"==typeof e?e():e;t.forEach((e=>e.setStorage(this.args.storage))),this.setState((e=>({...e,connectors:t})))}getPublicClient({chainId:e}={}){let t=this.publicClients.get(-1);if(t&&t?.chain.id===e)return t;if(t=this.publicClients.get(e??-1),t)return t;const{publicClient:n}=this.args;return t="function"==typeof n?n({chainId:e}):n,this.publicClients.set(e??-1,t),t}setPublicClient(e){const t=this.data?.chain?.id;this.args={...this.args,publicClient:e},this.publicClients.clear(),this.setState((e=>({...e,publicClient:this.getPublicClient({chainId:t})})))}getWebSocketPublicClient({chainId:e}={}){let t=this.webSocketPublicClients.get(-1);if(t&&t?.chain.id===e)return t;if(t=this.webSocketPublicClients.get(e??-1),t)return t;const{webSocketPublicClient:n}=this.args;return t="function"==typeof n?n({chainId:e}):n,t&&this.webSocketPublicClients.set(e??-1,t),t}setWebSocketPublicClient(e){const t=this.data?.chain?.id;this.args={...this.args,webSocketPublicClient:e},this.webSocketPublicClients.clear(),this.setState((e=>({...e,webSocketPublicClient:this.getWebSocketPublicClient({chainId:t})})))}setLastUsedConnector(e=null){this.storage?.setItem("wallet",e)}};function Dp(){if(!Rp)throw new Error("No wagmi config found. Ensure you have set up a config: https://wagmi.sh/react/config");return Rp}async function Fp({chainId:e,connector:t}){const n=Dp(),s=n.connector;if(s&&t.id===s.id)throw new Ep;try{n.setState((e=>({...e,status:"connecting"})));const s=await t.connect({chainId:e});return n.setLastUsedConnector(t.id),n.setState((e=>({...e,connector:t,chains:t?.chains,data:s,status:"connected"}))),n.storage.setItem("connected",!0),{...s,connector:t}}catch(e){throw n.setState((e=>({...e,status:e.connector?"connected":"disconnected"}))),e}}async function $p(){const e=Dp();e.connector&&await e.connector.disconnect(),e.clearState(),e.storage.removeItem("connected")}Np=new WeakMap,jp=new WeakMap,Lp=new WeakSet,Bp=function(){const e=e=>{this.setState((t=>({...t,data:{...t.data,...e}})))},t=()=>{this.clearState()},n=e=>{this.setState((t=>({...t,error:e})))};this.store.subscribe((({connector:e})=>e),((s,r)=>{r?.off?.("change",e),r?.off?.("disconnect",t),r?.off?.("error",n),s&&(s.on?.("change",e),s.on?.("disconnect",t),s.on?.("error",n))}));const{publicClient:s,webSocketPublicClient:r}=this.args;("function"==typeof s||"function"==typeof r)&&this.store.subscribe((({data:e})=>e?.chain?.id),(e=>{this.setState((t=>({...t,publicClient:this.getPublicClient({chainId:e}),webSocketPublicClient:this.getWebSocketPublicClient({chainId:e})})))}))};var Gp=[{type:"event",name:"Approval",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"event",name:"Transfer",inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"function",name:"allowance",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],outputs:[{name:"",type:"uint256"}]},{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{name:"account",type:"address"}],outputs:[{name:"",type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{name:"",type:"uint8"}]},{type:"function",name:"name",stateMutability:"view",inputs:[],outputs:[{name:"",type:"string"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{name:"",type:"string"}]},{type:"function",name:"totalSupply",stateMutability:"view",inputs:[],outputs:[{name:"",type:"uint256"}]},{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],Hp=[{type:"event",name:"Approval",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"event",name:"Transfer",inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"function",name:"allowance",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],outputs:[{name:"",type:"uint256"}]},{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{name:"account",type:"address"}],outputs:[{name:"",type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{name:"",type:"uint8"}]},{type:"function",name:"name",stateMutability:"view",inputs:[],outputs:[{name:"",type:"bytes32"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{name:"",type:"bytes32"}]},{type:"function",name:"totalSupply",stateMutability:"view",inputs:[],outputs:[{name:"",type:"uint256"}]},{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}];function zp({chainId:e}={}){const t=Dp();return e&&t.getPublicClient({chainId:e})||t.publicClient}async function Wp({chainId:e}={}){const t=Dp();return await(t.connector?.getWalletClient?.({chainId:e}))||null}async function qp({chainId:e,contracts:t,blockNumber:n,blockTag:s,...r}){const i=zp({chainId:e});if(!i.chains)throw new Ap;if(e&&i.chain.id!==e)throw new vp({chainId:e});return i.multicall({allowFailure:r.allowFailure??!0,blockNumber:n,blockTag:s,contracts:t})}async function Vp({address:e,account:t,chainId:n,abi:s,args:r,functionName:i,blockNumber:a,blockTag:o}){return zp({chainId:n}).readContract({abi:s,address:e,account:t,functionName:i,args:r,blockNumber:a,blockTag:o})}async function Kp({contracts:e,blockNumber:t,blockTag:n,...s}){const{allowFailure:r=!0}=s;try{const s=zp(),i=e.reduce(((e,t,n)=>{const r=t.chainId??s.chain.id;return{...e,[r]:[...e[r]||[],{contract:t,index:n}]}}),{}),a=()=>Object.entries(i).map((([e,s])=>qp({allowFailure:r,chainId:parseInt(e),contracts:s.map((({contract:e})=>e)),blockNumber:t,blockTag:n}))),o=(await Promise.all(a())).flat(),c=Object.values(i).flatMap((e=>e.map((({index:e})=>e))));return o.reduce(((e,t,n)=>(e&&(e[c[n]]=t),e)),[])}catch(s){if(s instanceof Lh.uq)throw s;const i=()=>e.map((e=>Vp({...e,blockNumber:t,blockTag:n})));return r?(await Promise.allSettled(i())).map((e=>"fulfilled"===e.status?{result:e.value,status:"success"}:{error:e.reason,result:void 0,status:"failure"})):await Promise.all(i())}}async function Jp({address:e,chainId:t,formatUnits:n,token:s}){const r=Dp(),i=zp({chainId:t});if(s){const r=async({abi:r})=>{const i={abi:r,address:s,chainId:t},[a,o,c]=await Kp({allowFailure:!1,contracts:[{...i,functionName:"balanceOf",args:[e]},{...i,functionName:"decimals"},{...i,functionName:"symbol"}]});return{decimals:o,formatted:(0,yp.b)(a??"0",xp(n??o)),symbol:c,value:a}};try{return await r({abi:Gp})}catch(e){if(e instanceof Lh.uq){const{symbol:e,...t}=await r({abi:Hp});return{symbol:(0,Au.rR)((0,Nh.f)(e,{dir:"right"})),...t}}throw e}}const a=[...r.publicClient.chains||[],...r.chains??[]],o=await i.getBalance({address:e}),c=a.find((e=>e.id===i.chain.id));return{decimals:c?.nativeCurrency.decimals??18,formatted:(0,yp.b)(o??"0",xp(n??18)),symbol:c?.nativeCurrency.symbol??"ETH",value:o}}function Qp(){const{data:e,connector:t,status:n}=Dp();switch(n){case"connected":return{address:e?.account,connector:t,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:n};case"reconnecting":return{address:e?.account,connector:t,isConnected:!!e?.account,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:n};case"connecting":return{address:e?.account,connector:t,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:n};case"disconnected":return{address:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:n}}}function Yp(){const e=Dp(),t=e.data?.chain?.id,n=e.chains??[],s=[...e.publicClient?.chains||[],...n].find((e=>e.id===t))??{id:t,name:`Chain ${t}`,network:`${t}`,nativeCurrency:{name:"Ether",decimals:18,symbol:"ETH"},rpcUrls:{default:{http:[""]},public:{http:[""]}}};return{chain:t?{...s,...e.data?.chain,id:t}:void 0,chains:n}}async function Zp({chainId:e}){const{connector:t}=Dp();if(!t)throw new Ll;if(!t.switchChain)throw new kp({connector:t});return t.switchChain(e)}function Xp(e,{selector:t=(e=>e)}={}){return Dp().subscribe((({data:e,connector:n,status:s})=>t({address:e?.account,connector:n,status:s})),(()=>e(Qp())),{equalityFn:bp})}function ef(e,{selector:t=(e=>e)}={}){return Dp().subscribe((({data:e,chains:n})=>t({chainId:e?.chain?.id,chains:n})),(()=>e(Yp())),{equalityFn:bp})}async function tf({name:e,chainId:t}){const{normalize:s}=await n.e(846).then(n.bind(n,9846)),r=zp({chainId:t});return await r.getEnsAvatar({name:s(e)})}async function nf({address:e,chainId:t}){return zp({chainId:t}).getEnsName({address:(0,ql.K)(e)})}var sf,rf,af,of,cf,lf,uf,hf,df,pf,ff,gf,mf,yf,bf,wf,vf,Ef,Af,kf,_f=n(2006),Pf="eip155",xf="requestedChains",Sf="wallet_addEthereumChain",If=class extends Wl{constructor(e){super({...e,options:{isNewChainsStale:!0,...e.options}}),Gl(this,af),Gl(this,cf),Gl(this,uf),Gl(this,df),Gl(this,ff),Gl(this,mf),Gl(this,bf),Gl(this,vf),Gl(this,Af),this.id="walletConnect",this.name="WalletConnect",this.ready=!0,Gl(this,sf,void 0),Gl(this,rf,void 0),this.onAccountsChanged=e=>{0===e.length?this.emit("disconnect"):this.emit("change",{account:(0,ql.K)(e[0])})},this.onChainChanged=e=>{const t=Number(e),n=this.isChainUnsupported(t);this.emit("change",{chain:{id:t,unsupported:n}})},this.onDisconnect=()=>{zl(this,mf,yf).call(this,[]),this.emit("disconnect")},this.onDisplayUri=e=>{this.emit("message",{type:"display_uri",data:e})},this.onConnect=()=>{this.emit("connect",{})},zl(this,af,of).call(this)}async connect({chainId:e,pairingTopic:t}={}){try{let n=e;if(!n){const e=this.storage?.getItem("store"),t=e?.state?.data?.chain?.id;n=t&&!this.isChainUnsupported(t)?t:this.chains[0]?.id}if(!n)throw new Error("No chains found on connector.");const s=await this.getProvider();zl(this,df,pf).call(this);const r=zl(this,uf,hf).call(this);if(s.session&&r&&await s.disconnect(),!s.session||r){const e=this.chains.filter((e=>e.id!==n)).map((e=>e.id));this.emit("message",{type:"connecting"}),await s.connect({pairingTopic:t,optionalChains:[n,...e]}),zl(this,mf,yf).call(this,this.chains.map((({id:e})=>e)))}const i=await s.enable(),a=(0,ql.K)(i[0]),o=await this.getChainId();return{account:a,chain:{id:o,unsupported:this.isChainUnsupported(o)}}}catch(e){if(/user rejected/i.test(e?.message))throw new lu(e);throw e}}async disconnect(){const e=await this.getProvider();try{await e.disconnect()}catch(e){if(!/No matching key/i.test(e.message))throw e}finally{zl(this,ff,gf).call(this),zl(this,mf,yf).call(this,[])}}async getAccount(){const{accounts:e}=await this.getProvider();return(0,ql.K)(e[0])}async getChainId(){const{chainId:e}=await this.getProvider();return e}async getProvider({chainId:e}={}){return $l(this,sf)||await zl(this,af,of).call(this),e&&await this.switchChain(e),$l(this,sf)}async getWalletClient({chainId:e}={}){const[t,n]=await Promise.all([this.getProvider({chainId:e}),this.getAccount()]),s=this.chains.find((t=>t.id===e));if(!t)throw new Error("provider is required.");return mh({account:n,chain:s,transport:Ah(t)})}async isAuthorized(){try{const[e,t]=await Promise.all([this.getAccount(),this.getProvider()]),n=zl(this,uf,hf).call(this);if(!e)return!1;if(n&&t.session){try{await t.disconnect()}catch{}return!1}return!0}catch{return!1}}async switchChain(e){const t=this.chains.find((t=>t.id===e));if(!t)throw new fu(new Error("chain not found on connector."));try{const n=await this.getProvider(),s=zl(this,vf,Ef).call(this),r=zl(this,Af,kf).call(this);if(!s.includes(e)&&r.includes(Sf)){await n.request({method:Sf,params:[{chainId:(0,_u.eC)(t.id),blockExplorerUrls:[t.blockExplorers?.default?.url],chainName:t.name,nativeCurrency:t.nativeCurrency,rpcUrls:[...t.rpcUrls.default.http]}]});const s=zl(this,bf,wf).call(this);s.push(e),zl(this,mf,yf).call(this,s)}return await n.request({method:"wallet_switchEthereumChain",params:[{chainId:(0,_u.eC)(e)}]}),t}catch(e){if(/user rejected request/i.test("string"==typeof e?e:e?.message))throw new lu(e);throw new fu(e)}}};sf=new WeakMap,rf=new WeakMap,af=new WeakSet,of=async function(){return $l(this,rf)||"undefined"==typeof window||Hl(this,rf,zl(this,cf,lf).call(this)),$l(this,rf)},cf=new WeakSet,lf=async function(){const{EthereumProvider:e}=await n.e(408).then(n.bind(n,408)),t=this.chains.map((({id:e})=>e));if(t.length){const{projectId:n,showQrModal:s=!0,qrModalOptions:r,metadata:i,relayUrl:a}=this.options;Hl(this,sf,await e.init({showQrModal:s,qrModalOptions:r,projectId:n,optionalChains:t,rpcMap:Object.fromEntries(this.chains.map((e=>[e.id,e.rpcUrls.default.http[0]]))),metadata:i,relayUrl:a}))}},uf=new WeakSet,hf=function(){if(zl(this,Af,kf).call(this).includes(Sf))return!1;if(!this.options.isNewChainsStale)return!1;const e=zl(this,bf,wf).call(this),t=this.chains.map((({id:e})=>e)),n=zl(this,vf,Ef).call(this);return!(n.length&&!n.some((e=>t.includes(e))))&&!t.every((t=>e.includes(t)))},df=new WeakSet,pf=function(){$l(this,sf)&&(zl(this,ff,gf).call(this),$l(this,sf).on("accountsChanged",this.onAccountsChanged),$l(this,sf).on("chainChanged",this.onChainChanged),$l(this,sf).on("disconnect",this.onDisconnect),$l(this,sf).on("session_delete",this.onDisconnect),$l(this,sf).on("display_uri",this.onDisplayUri),$l(this,sf).on("connect",this.onConnect))},ff=new WeakSet,gf=function(){$l(this,sf)&&($l(this,sf).removeListener("accountsChanged",this.onAccountsChanged),$l(this,sf).removeListener("chainChanged",this.onChainChanged),$l(this,sf).removeListener("disconnect",this.onDisconnect),$l(this,sf).removeListener("session_delete",this.onDisconnect),$l(this,sf).removeListener("display_uri",this.onDisplayUri),$l(this,sf).removeListener("connect",this.onConnect))},mf=new WeakSet,yf=function(e){this.storage?.setItem(xf,e)},bf=new WeakSet,wf=function(){return this.storage?.getItem(xf)??[]},vf=new WeakSet,Ef=function(){if(!$l(this,sf))return[];const e=$l(this,sf).session?.namespaces;if(!e)return[];const t=(0,_f.fK)(e),n=t[Pf]?.chains?.map((e=>parseInt(e.split(":")[1]||"")));return n??[]},Af=new WeakSet,kf=function(){if(!$l(this,sf))return[];const e=$l(this,sf).session?.namespaces;if(!e)return[];const t=(0,_f.fK)(e),n=t[Pf]?.methods;return n??[]};class Cf{constructor(e,t){this.wagmi={},this.chains=[],this.namespace="eip155",this.disconnect=$p,this.getAccount=Qp,this.watchAccount=Xp,this.fetchBalance=Jp,this.getNetwork=Yp,this.watchNetwork=ef,this.switchNetwork=Zp,this.fetchEnsName=nf,this.fetchEnsAvatar=tf,this.wagmi=e,this.chains=t}getWalletConnectConnector(){const e=this.wagmi.connectors.find((e=>"walletConnect"===e.id));if(!e)throw new Error("WalletConnectConnector is required");return e}async connectWalletConnectProvider(e,t){return await e.getProvider(),new Promise((n=>{e.once("message",(e=>{"display_uri"===e.type&&(t(e.data),n())}))}))}getConnectorById(e){const t=this.wagmi.connectors.find((t=>t.id===e));if(!t)throw new Error(`Connector for id ${e} was not found`);return t}getConnectors(){return this.wagmi.connectors.filter((e=>!e.id.includes("walletConnect")))}async connectWalletConnect(e,t){const n=this.getWalletConnectConnector(),s={connector:n};return t&&(s.chainId=t),Promise.all([Fp(s),this.connectWalletConnectProvider(n,e)])}async connectConnector(e,t){const n={connector:this.getConnectorById(e)};return t&&(n.chainId=t),await Fp(n)}isInjectedProviderInstalled(){return typeof window.ethereum<"u"}safeCheckInjectedProvider(e){var t;try{const n=String(e);return Boolean(null==(t=window.ethereum)?void 0:t[n])}catch(e){return console.error(e),!1}}async getConnectedChainIds(){var e,t,n;const s=null==(t=null==(e=(await this.getWalletConnectConnector().getProvider()).signer)?void 0:e.session)?void 0:t.namespaces,r=null==(n=s?.[this.namespace])?void 0:n.methods;if(null!=r&&r.includes("wallet_addEthereumChain"))return"ALL";if(s){const e=[];return Object.keys(s).forEach((t=>{t.includes(this.namespace)&&e.push(...s[t].accounts)})),e?.map((e=>e.split(":")[1]))}return"ALL"}}function Tf({projectId:e}){return function({rpc:e}){return function(t){const n=e(t);return n&&""!==n.http?{chain:{...t,rpcUrls:{...t.rpcUrls,default:{http:[n.http]}}},rpcUrls:{http:[n.http],webSocket:n.webSocket?[n.webSocket]:void 0}}:null}}({rpc:t=>{var n;return[1,3,4,5,10,42,56,69,97,100,137,280,324,420,42161,42220,43114,80001,421611,421613,1313161554,1313161555].includes(t.id)?{http:`https://rpc.walletconnect.com/v1/?chainId=eip155:${t.id}&projectId=${e}`}:{http:t.rpcUrls.default.http[0],webSocket:null==(n=t.rpcUrls.default.webSocket)?void 0:n[0]}}})}function Of({chains:e,projectId:t}){return[new If({chains:e,options:{projectId:t,showQrModal:!1}}),new _h({chains:e,options:{shimDisconnect:!0}})]}var Nf=n(7190);class jf{constructor(e,t){this.openModal=Nf.jb.open,this.closeModal=Nf.jb.close,this.subscribeModal=Nf.jb.subscribe,this.setTheme=Nf.ThemeCtrl.setThemeConfig,this.setDefaultChain=Nf.OptionsCtrl.setSelectedChain,this.subscribeEvents=Nf.uA.subscribe,Nf.ThemeCtrl.setThemeConfig(e),Nf.Id.setEthereumClient(t),Nf.ConfigCtrl.setConfig(e),this.initUi()}async initUi(){if(typeof window<"u"){await Promise.all([n.e(81),n.e(953)]).then(n.bind(n,953));const e=document.createElement("w3m-modal");document.body.insertAdjacentElement("beforeend",e),Nf.OptionsCtrl.setIsUiLoaded(!0)}}}class Lf extends il{#D;constructor(e,t){D(e&&e.request,"invalid EIP-1193 provider","ethereum",e),super(t,{batchMaxCount:1}),this.#D=async(t,n)=>{const s={method:t,params:n};this.emit("debug",{action:"sendEip1193Request",payload:s});try{const t=await e.request(s);return this.emit("debug",{action:"receiveEip1193Result",result:t}),t}catch(e){const t=new Error(e.message);throw t.code=e.code,t.data=e.data,t.payload=s,this.emit("debug",{action:"receiveEip1193Error",error:t}),t}}}async send(e,t){return await this._start(),await super.send(e,t)}async _send(e){D(!Array.isArray(e),"EIP-1193 does not support batch request","payload",e);try{const t=await this.#D(e.method,e.params||[]);return[{id:e.id,result:t}]}catch(t){return[{id:e.id,error:{code:t.code,data:t.data,message:t.message}}]}}getRpcError(e,t){switch((t=JSON.parse(JSON.stringify(t))).error.code||-1){case 4001:t.error.message=`ethers-user-denied: ${t.error.message}`;break;case 4200:t.error.message=`ethers-unsupported: ${t.error.message}`}return super.getRpcError(e,t)}async hasSigner(e){null==e&&(e=0);const t=await this.send("eth_accounts",[]);return"number"==typeof e?t.length>e:(e=e.toLowerCase(),0!==t.filter((t=>t.toLowerCase()===e)).length)}async getSigner(e){if(null==e&&(e=0),!await this.hasSigner(e))try{await this.#D("eth_requestAccounts",[])}catch(e){const t=e.payload;throw this.getRpcError(t,{id:t.id,error:e})}return await super.getSigner(e)}}class Bf extends x.nd{web3modal;_resolveConnection;_rejectConnection;_connected=!1;get _address(){return Qp().address}get type(){return"walletconnect"}constructor(){super(),this.addAllowedEvents("accountChanged")}init(e,t){const{publicClient:n}=wp(t,[Tf({projectId:e})]),s=function(e){const t=new Up(e);return Rp=t,t}({autoConnect:!0,connectors:Of({projectId:e,chains:t}),publicClient:n}),r=new Cf(s,t),i=window.getComputedStyle(document.documentElement).getPropertyValue("--primary-color");this.web3modal=new jf({projectId:e,themeMode:"dark",themeVariables:{"--w3m-accent-color":i,"--w3m-background-color":i,"--w3m-z-index":"999999"}},r),this.web3modal.subscribeModal((e=>{!1===e.open&&this._rejectConnection&&(this._rejectConnection(new Error("User closed wallet modal")),this._rejectConnection=void 0,this._resolveConnection=void 0)})),this._connected=void 0!==this._address;let a=this._address;Xp((e=>{this._connected=void 0!==e.address,this._connected&&this._resolveConnection&&(this._resolveConnection(),this._resolveConnection=void 0,this._rejectConnection=void 0),a!==e.address&&(this.fireEvent("accountChanged"),a=e.address)}))}async connect(){return void 0!==this._address?(this._connected=!0,this.fireEvent("accountChanged"),!0):(await new Promise(((e,t)=>{this._resolveConnection=e,this._rejectConnection=t,this.web3modal.openModal()})),this._connected)}async open(){await this.web3modal.openModal(),await new Promise((e=>{setTimeout((()=>e()),1e3)}))}async connected(){return this._connected}async getAddress(){return this._address}async getChainId(){return Yp().chain?.id}async signMessage(e){if(!this._address)throw new Error("Wallet is not connected");return await async function(e){const t=await Wp();if(!t)throw new Ll;return await t.signMessage({message:e.message})}({message:e})}async switchChain(e){try{!0!==this._connected&&await this.connect(),await Zp({chainId:e})}catch(e){throw new x.hW({title:"Switch Network Error",message:e.message}),e}}async getSigner(){!0!==this._connected&&await this.connect();const e=await Wp();if(!e)throw new x.hW({title:(0,x.WI)("no-wallet-connected-title"),message:(0,x.WI)("no-wallet-connected-message")}),new Error("No wallet connected");const{chain:t}=Yp();if(!t)throw new x.hW({title:(0,x.WI)("invalid-network-title"),message:(0,x.WI)("invalid-network-message")}),new Error("Invalid network");const{account:n,transport:s}=e,r={chainId:t.id,name:t.name,ensAddress:t.contracts?.ensRegistry?.address},i=new Lf(s,r);return new sl(i,n.address)}}const Rf=new Bf;class Mf extends x.nd{wallets={walletconnect:Rf};openConnectPopup;async findWallet(e,t){const n=await Promise.all(Object.values(this.wallets).map((async e=>({wallet:e,address:await e.getAddress(),chainId:await e.getChainId()})))),s=n.find((n=>n.address===e&&n.chainId===t));if(s)return s.wallet;const r=n.find((t=>t.address===e));return r?(r.chainId!==t&&await r.wallet.switchChain(t),r.wallet):void 0}async connect(){const e=Object.values(this.wallets);if(1===e.length)return await e[0].connect(),e[0];if(this.openConnectPopup)return await this.openConnectPopup();throw new Error("No wallet to connect")}async openWallet(e){await(this.wallets[e]?.open())}}const Uf=new Mf;class Df extends Ol.w${constructor(){super("users_public","*",50)}}const Ff=new Df;class $f extends Ol.EX{async fetchUser(e){return await Ff.fetchUser(e)}get walletLinked(){return void 0!==this.user?.wallet_address}constructor(){super(),this.addAllowedEvents("walletLinked")}async init(e){await super.init(e),this.walletLinked&&(C.walletAddress=this.user.wallet_address)}async signIn(){await x.JA.signIn("twitter")}async linkWallet(){const e=await Uf.connect();if(!await e.connected()&&!await e.connect())throw new Error("Wallet connection failed");const t=await e.getAddress();if(!t)throw new Error("Wallet is not connected");const{data:n,error:s}=await x.JA.client.functions.invoke("new-wallet-linking-nonce",{body:{walletAddress:t}});if(s)throw s;await new Nl(t,e).wait();const r=await e.signMessage(`${ll.messageForWalletLinking}\n\nNonce: ${n.nonce}`),{error:i}=await x.JA.client.functions.invoke("link-wallet-to-user",{body:{walletType:e.type,walletAddress:t,signedMessage:r}});if(i)throw i;this.user&&(this.user.wallet_address=t,this.fireEvent("walletLinked"))}async openWallet(){this.user?.wallet_type&&await Uf.openWallet(this.user.wallet_type)}async getContractSigner(e){if(!this.user)throw new Error("User not signed in");if(!this.user.wallet_address)throw new Error("Wallet not linked");let t=await Uf.findWallet(this.user.wallet_address,e);if(!t&&(await Uf.connect(),t=await Uf.findWallet(this.user.wallet_address,e),!t))throw new Error("Wallet not found");return await t.getSigner()}}const Gf=new $f;class Hf extends x.GI{resolve;reject;constructor(){super(".login-required-popup",{barrierDismissible:!0}),this.header.append((0,x.el)("h1",new x.OL("lock"),(0,x.WI)("login-required-title"))),this.main.append((0,x.el)("p",(0,x.WI)("login-required-message",{serviceName:ll.serviceName}))),this.footer.append(new x.zx({tag:".cancel",title:(0,x.WI)("cancel-button"),click:()=>this.delete()}),new x.zx({tag:".login",title:(0,x.WI)("login-required-login-button"),click:async(e,t)=>{t.loading=!0;try{await Gf.signIn(),this.resolve?.(),this.reject=void 0,this.delete()}catch(e){console.error(e),t.loading=!1}}})),this.on("delete",(()=>this.reject?.("Canceled by user")))}async wait(){return new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class zf{abi;chain;address;viewContract;constructor(e,t,n){this.abi=e,this.chain=t,this.address=n,this.viewContract=new fr(n,e,new al(t.rpc))}async getWriteContract(){if(!Gf.signed)try{await(new Hf).wait()}catch(e){throw new Error("Not signed in")}if(!Gf.user?.wallet_address)try{await new x.I4({title:(0,x.WI)("no-wallet-linked-title"),message:(0,x.WI)("no-wallet-linked-message"),confirmTitle:(0,x.WI)("no-wallet-linked-confirm")},(async()=>await Gf.linkWallet())).wait()}catch(e){throw new Error("No wallet linked")}const e=await Gf.getContractSigner(this.chain.id);if(!e)throw new Error("No signer");return new fr(this.address,this.abi,e)}}const Wf=JSON.parse('{"Mt":[{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"holder","type":"address"},{"indexed":true,"internalType":"bytes32","name":"hashtag","type":"bytes32"},{"indexed":false,"internalType":"uint256","name":"fee","type":"uint256"}],"name":"ClaimHolderFee","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint8","name":"version","type":"uint8"}],"name":"Initialized","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"percent","type":"uint256"}],"name":"SetHolderFeePercent","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"oracle","type":"address"}],"name":"SetOracleAddress","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"destination","type":"address"}],"name":"SetProtocolFeeDestination","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"percent","type":"uint256"}],"name":"SetProtocolFeePercent","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"trader","type":"address"},{"indexed":true,"internalType":"bytes32","name":"hashtag","type":"bytes32"},{"indexed":true,"internalType":"bool","name":"isBuy","type":"bool"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"price","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"protocolFee","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"holderFee","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"additionalFee","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"supply","type":"uint256"}],"name":"Trade","type":"event"},{"inputs":[{"internalType":"bytes32[]","name":"_hashtags","type":"bytes32[]"}],"name":"batchClaimHolderFees","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32[]","name":"_hashtags","type":"bytes32[]"},{"internalType":"address","name":"holder","type":"address"}],"name":"batchClaimableHolderFees","outputs":[{"internalType":"uint256[]","name":"claimableFees","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"hashtag","type":"bytes32"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"bytes","name":"oracleSignature","type":"bytes"}],"name":"buy","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint256","name":"price","type":"uint256"},{"internalType":"bytes","name":"oracleSignature","type":"bytes"}],"name":"calculateAdditionalTokenOwnerFee","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"hashtag","type":"bytes32"}],"name":"claimHolderFee","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"hashtag","type":"bytes32"},{"internalType":"address","name":"holder","type":"address"}],"name":"claimableHolderFee","outputs":[{"internalType":"uint256","name":"claimableFee","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"hashtag","type":"bytes32"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"getBuyPrice","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"hashtag","type":"bytes32"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"getBuyPriceAfterFee","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"supply","type":"uint256"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"getPrice","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"hashtag","type":"bytes32"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"getSellPrice","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"hashtag","type":"bytes32"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"getSellPriceAfterFee","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"name":"hashtags","outputs":[{"internalType":"uint256","name":"supply","type":"uint256"},{"internalType":"uint256","name":"accFeePerUnit","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"holderFeePercent","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"","type":"bytes32"},{"internalType":"address","name":"","type":"address"}],"name":"holders","outputs":[{"internalType":"uint256","name":"balance","type":"uint256"},{"internalType":"int256","name":"feeDebt","type":"int256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_baseDivider","type":"uint256"},{"internalType":"address payable","name":"_protocolFeeDestination","type":"address"},{"internalType":"uint256","name":"_protocolFeePercent","type":"uint256"},{"internalType":"uint256","name":"_holderFeePercent","type":"uint256"}],"name":"initialize","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"oracleAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"protocolFeeDestination","outputs":[{"internalType":"address payable","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"protocolFeePercent","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"hashtag","type":"bytes32"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"bytes","name":"oracleSignature","type":"bytes"}],"name":"sell","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_feePercent","type":"uint256"}],"name":"setHolderFeePercent","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_oracle","type":"address"}],"name":"setOracleAddress","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address payable","name":"_feeDestination","type":"address"}],"name":"setProtocolFeeDestination","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_feePercent","type":"uint256"}],"name":"setProtocolFeePercent","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"}]}');class qf extends zf{constructor(e){super(Wf.Mt,ll.chains[e],ll.contractAddresses[e][Tl.HashtagTrade])}async keysBalance(e,t){return(await this.viewContract.holders(Il(e),t)).balance}async claimableHolderFee(e,t){return await this.viewContract.claimableHolderFee(Il(e),t)}async batchClaimableHolderFees(e,t){return await this.viewContract.batchClaimableHolderFees(e.map((e=>Il(e))),t)}async getBuyPrice(e,t){return await this.viewContract.getBuyPrice(Il(e),t)}async getBuyPriceAfterFee(e,t){return await this.viewContract.getBuyPriceAfterFee(Il(e),t)}async getSellPrice(e,t){return await this.viewContract.getSellPrice(Il(e),t)}async getSellPriceAfterFee(e,t){return await this.viewContract.getSellPriceAfterFee(Il(e),t)}async buy(e,t){const n=await this.getWriteContract();return(await n.buy(Il(e),t,"0x",{value:await this.getBuyPriceAfterFee(e,t)})).wait()}async sell(e,t){const n=await this.getWriteContract();return(await n.sell(Il(e),t,"0x")).wait()}async batchClaimHolderFees(e){const t=await this.getWriteContract();return(await t.batchClaimHolderFees(e.map((e=>Il(e))))).wait()}}const Vf=new class{getPrice(e,t,n,s){const r=ll.chains[e].assetBaseDivider;let i,a;s?(i=0n===t?0n:(t-1n)*t*(2n*(t-1n)+1n)/6n,a=0n===t&&1n===n?0n:(t-1n+n)*(t+n)*(2n*(t-1n+n)+1n)/6n):(i=t*(t+1n)*(2n*t+1n)/6n,a=(t+n)*(t+1n+n)*(2n*(t+n)+1n)/6n);return(a-i)*kl("1")/r}getBuyPrice(e,t,n,s){return this.getPrice(e,t,n,s)}getSellPrice(e,t,n,s){return this.getPrice(e,t-n,n,s)}getBuyPriceAfterFee(e,t,n,s){const r=ll.chains[e].assetFeePercent,i=this.getBuyPrice(e,t,n,s);return i+i*r/kl("1")}getSellPriceAfterFee(e,t,n,s){const r=ll.chains[e].assetFeePercent,i=this.getSellPrice(e,t,n,s);return i-i*r/kl("1")}};const Kf=new class{async track(e,t){await x.JA.client.functions.invoke("track-contract-events",{body:{chain:e,contractType:t}})}};class Jf extends x.TZ{constructor(){super("hashtags","*, total_trading_volume::text",50)}async fetch(e){return await this.safeSelect((t=>t.gt("last_message_sent_at",e??x.gz.UNIX_EPOCH_START_DATE).order("last_message_sent_at",{ascending:!1})))}async fetchLeaderboard(e){const{data:t,error:n}=await x.JA.client.rpc("get_hashtag_leaderboard",{last_rank:e,max_count:this.fetchLimit});if(n)throw n;return x.JA.safeResult(t??[])}async fetchSingle(e){return await this.safeSelectSingle((t=>t.eq("hashtag",e)))}async fetchAllSupplies(e){return await this.safeSelect((t=>t.in("hashtag",e)),-1,"hashtag, supply")}async fetchHolding(e){const{data:t,error:n}=await x.JA.client.rpc("get_holding_hashtags",{p_wallet_address:e});if(n)throw n;return x.JA.safeResult(t??[])}}const Qf=new Jf;class Yf extends x.nd{store=new x.yh("fsesf-signed-user-assets");holdingHashtags=[];constructor(){super(),this.addAllowedEvents("changed"),this.holdingHashtags=this.store.get("cached-holding-hashtags")??[]}async init(){try{await Promise.all([this.fetchHoldingHashtags()]),this.fireEvent("changed")}catch(e){console.error(e),new x.hW({title:"Failed to fetch user assets",message:e.message})}}async fetchHoldingHashtags(){const e=Gf.user?.wallet_address,t=e?await Qf.fetchHolding(e):[],n=e?await new qf(ll.defaultChain).batchClaimableHolderFees(t.map((e=>e.hashtag)),e):[],s=[];for(let e=0;e<t.length;e++)s.push({...t[e],feeEarned:n[e].toString()});this.store.set("cached-holding-hashtags",s,!0),this.holdingHashtags=s}increaseHoldingHashtag(e,t){const n=this.holdingHashtags.find((t=>t.hashtag===e.hashtag));n?(n.balance+=t,n.is_price_up=!0):this.holdingHashtags.push({...e,is_price_up:!0,balance:t,feeEarned:"0"}),this.store.set("cached-holding-hashtags",this.holdingHashtags,!0),this.fireEvent("changed")}decreaseHoldingHashtag(e,t){const n=this.holdingHashtags.find((t=>t.hashtag===e));n&&(n.balance-=t,n.is_price_up=!1,n.balance<=0&&(this.holdingHashtags=this.holdingHashtags.filter((t=>t.hashtag!==e))),this.store.set("cached-holding-hashtags",this.holdingHashtags,!0),this.fireEvent("changed"))}clearFeeEarned(e){for(const t of e){const e=this.holdingHashtags.find((e=>e.hashtag===t));e&&(e.feeEarned="0")}this.store.set("cached-holding-hashtags",this.holdingHashtags,!0),this.fireEvent("changed")}}const Zf=new Yf;class Xf extends x.GI{hashtagInfo;resolve;reject;priceDisplay;totalPriceDisplay1;totalPriceDisplay2;cancelButton;constructor(e){super(".buy-hashtag-popup",{barrierDismissible:!1}),this.hashtagInfo=e,this.header.append((0,x.el)("h1",`Buy 1 ${e.hashtag}`)),this.main.append((0,x.el)("p",`Buy 1 ${e.hashtag} for `,this.totalPriceDisplay1=(0,x.el)("span.price",new x.vE)),(0,x.el)("table",(0,x.el)("tr",(0,x.el)("th","Price"),this.priceDisplay=(0,x.el)("td",new x.vE)),(0,x.el)("tr",(0,x.el)("th","Total (including fee)"),this.totalPriceDisplay2=(0,x.el)("td",new x.vE)))),this.footer.append(this.cancelButton=new x.zx({tag:".cancel",title:(0,x.WI)("cancel-button"),click:()=>this.delete()}),new x.zx({tag:".buy",title:"Buy",click:async(e,t)=>{t.loading=!0,this.cancelButton.disable();try{await this.buyHashtag(),this.resolve?.(),this.reject=void 0,this.delete()}catch(e){console.error(e),t.loading=!1,this.cancelButton.enable()}}})),this.on("delete",(()=>this.reject?.("Canceled by user"))),this.fetchPrice(),this.fetchTotalPrice()}async fetchPrice(){const e=await new qf(ll.defaultChain).getBuyPrice(this.hashtagInfo.hashtag,1n);this.priceDisplay.empty().append(x.m7.numberWithCommas(Al(e))," ",ll.chains[ll.defaultChain].symbol)}async fetchTotalPrice(){const e=await new qf(ll.defaultChain).getBuyPriceAfterFee(this.hashtagInfo.hashtag,1n);[this.totalPriceDisplay1,this.totalPriceDisplay2].forEach((t=>t.empty().append(x.m7.numberWithCommas(Al(e))," ",ll.chains[ll.defaultChain].symbol)))}async buyHashtag(){await new qf(ll.defaultChain).buy(this.hashtagInfo.hashtag,1n),await Kf.track(ll.defaultChain,"hashtag-trade"),Zf.increaseHoldingHashtag(this.hashtagInfo,1)}async wait(){return new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class eg extends x.GI{infos;resolve;reject;cancelButton;constructor(e){super(".claim-hashtag-holder-fee-popup",{barrierDismissible:!0}),this.infos=e,this.header.append((0,x.el)("h1","Claim Earned Fees"));const t=(0,x.el)("table",(0,x.el)("thead",(0,x.el)("tr",(0,x.el)("th",x.m7.capitalize(ll.hashtagOptions.unit)),(0,x.el)("th","Fee Earned")))).appendTo(this.main),n=(0,x.el)("tbody").appendTo(t);for(const t of e)(0,x.el)("tr.hashtag",(0,x.el)("th",t.hashtag),(0,x.el)("td",x.m7.numberWithCommas(Al(t.feeEarned))," ",ll.chains[ll.defaultChain].symbol)).appendTo(n);const s=e.reduce(((e,t)=>e+BigInt(t.feeEarned)),0n);(0,x.el)("tr.total",(0,x.el)("th","Total"),(0,x.el)("td",x.m7.numberWithCommas(Al(s))," ",ll.chains[ll.defaultChain].symbol)).appendTo(n),this.footer.append(this.cancelButton=new x.zx({tag:".cancel",title:(0,x.WI)("cancel-button"),click:()=>this.delete()}),new x.zx({tag:".claim",title:"Claim",click:async(e,t)=>{t.loading=!0,this.cancelButton.disable();try{await this.claim(),this.resolve?.(),this.reject=void 0,this.delete()}catch(e){console.error(e),t.loading=!1,this.cancelButton.enable()}}})),this.on("delete",(()=>this.reject?.("Canceled by user")))}async claim(){const e=this.infos.map((e=>e.hashtag));await new qf(ll.defaultChain).batchClaimHolderFees(e),await Kf.track(ll.defaultChain,"hashtag-trade"),Zf.clearFeeEarned(e)}async wait(){return new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class tg extends x.TZ{constructor(){super("hashtag_holders","*",100)}async fetchHolding(e){return await this.safeSelect((t=>t.eq("wallet_address",e)),-1)}async fetchHolders(e,t){const{data:n,error:s}=await x.JA.client.rpc("get_hashtag_holders",{p_hashtag:e,last_balance:t,max_count:this.fetchLimit});if(s)throw s;return n}}const ng=new tg;class sg extends x.AE{constructor(e,t){super(".holding-hashtag-list-item");const n=x.m7.numberWithCommas(Al(Vf.getPrice(ll.defaultChain,BigInt(e.supply),1n,!1)));this.append((0,x.el)(".image-container",e.image_thumb?(0,x.el)("img.image",{src:e.image_thumb}):new x.OL("tag")),(0,x.el)(".info-container",(0,x.el)(".info",(0,x.el)("h3",e.hashtag),(0,x.el)("span.price"+(void 0===e.is_price_up?"":e.is_price_up?".up":".down"),n," ",ll.chains[ll.defaultChain].symbol)),(0,x.el)(".balance",`Balance: ${x.m7.numberWithCommas(String(t))}`))),this.onDom("click",(()=>new mg(e.hashtag,e)))}active(){this.addClass("active")}deactive(){this.deleteClass("active")}}class rg extends x._j{walletAddress;constructor(e){super(".holding-hashtag-list"),this.walletAddress=e,this.domElement.setAttribute("data-empty-message","No holding hashtags")}async load(){this.append(new x.td);const e=await Qf.fetchHolding(this.walletAddress);if(!this.deleted){this.empty();for(const t of e)new sg(t,t.balance).appendTo(this)}}}class ig extends x.TZ{constructor(){super("user_wallets","*, total_earned_trading_fees::text",50)}async fetch(e){return await this.safeSelectSingle((t=>t.eq("wallet_address",e)))}}const ag=new ig;class og extends x.AE{feesEarnedDisplay;portfolioValueDisplay;constructor(){super("section.metric-section"),this.append((0,x.el)("section.fees-earned",new x.OL("savings"),(0,x.el)(".value-container",(0,x.el)("label","Fees Earned"),this.feesEarnedDisplay=(0,x.el)(".value",new x.vE))),(0,x.el)("section.portfolio-value",new x.OL("account_balance"),(0,x.el)(".value-container",(0,x.el)("label","Portfolio Value"),this.portfolioValueDisplay=(0,x.el)(".value",new x.vE))))}loadMetrics(e){e?(this.loadFeesEarned(e),this.loadPortfolioValue(e)):(this.feesEarnedDisplay.empty().append("0 ",ll.chains[ll.defaultChain].symbol),this.portfolioValueDisplay.empty().append("0 ",ll.chains[ll.defaultChain].symbol))}async loadFeesEarned(e){const t=await ag.fetch(e);if(!this.deleted)if(t){const e=t.total_earned_trading_fees;this.feesEarnedDisplay.empty().append(x.m7.numberWithCommas(Al(e))," ",ll.chains[ll.defaultChain].symbol)}else this.feesEarnedDisplay.empty().append("0 ",ll.chains[ll.defaultChain].symbol)}async loadPortfolioValue(e){let t=BigInt(0);await Promise.all([(async()=>{const n=await ng.fetchHolding(e),s=n.map((e=>e.hashtag)),r=await Qf.fetchAllSupplies(s);for(const e of n){const n=r.find((t=>t.hashtag===e.hashtag));n&&(t+=Vf.getSellPrice(ll.defaultChain,BigInt(n.supply),BigInt(e.last_fetched_balance),!1))}})()]),this.deleted||this.portfolioValueDisplay.empty().append(x.m7.numberWithCommas(Al(t))," ",ll.chains[ll.defaultChain].symbol)}}class cg extends x.y2{async track(){Gf.user&&await this.channel.track({...Gf.user,onlineAt:(new Date).toISOString()})}}const lg=new cg;class ug extends x.AE{avatar;nameDisplay;lastSignInDisplay;constructor(e){super(".profile-section"),this.append(this.avatar=(0,x.el)(".avatar.loading"),this.nameDisplay=(0,x.el)("h2.name",new x.vE),this.lastSignInDisplay=(0,x.el)(".last-sign-in",new x.vE)),e&&(this.user=e)}set user(e){x.VM.selectLoadable(this.avatar.deleteClass("loading"),[e.avatar,e.stored_avatar]),this.nameDisplay.text=e.display_name??"Unknown",this.lastSignInDisplay.deleteClass("online"),lg.checkOnline(e.user_id)?(this.lastSignInDisplay.text="Online now",this.lastSignInDisplay.addClass("online")):e.last_sign_in_at&&(this.lastSignInDisplay.text="Last signed in "+x.Em.format(e.last_sign_in_at))}}class hg extends x.AE{currentXUsername;constructor(e){super("section.x-section"),this.append(new x.vE),this.xUsername=e}set xUsername(e){if(e===this.currentXUsername)return;this.currentXUsername=e,this.empty().append((0,x.el)(".link-container",(0,x.el)("h2",""),(0,x.el)(".link",(0,x.el)("a",`https://x.com/${e}`,{href:`https://x.com/${e}`,target:"_blank"}),(0,x.el)("button.copy",new x.OL("content_copy"),{click:(t,n)=>{navigator.clipboard.writeText(`https://x.com/${e}`),n.empty().append(new x.OL("check"))}}))));const t=(0,x.el)(".timeline-container").appendTo(this),n=(new x.vE).appendTo(t);window.twttr.widgets.createTimeline({sourceType:"profile",screenName:e},t.domElement,{height:300,theme:x.Ve.showingTheme}).then((()=>{this.deleted||n.delete()}))}}class dg extends x.SN{userId;profile;metric;xSection;tabs;holdingHashtagList;constructor(e,t){super(".user-info-modal",{barrierDismissible:!0}),this.userId=e,this.title="User Info",this.main.append(this.profile=new ug(t),this.metric=new og,this.xSection=new hg(t?.x_username)),this.loadUser()}async loadUser(){const e=await Ff.fetchUser(this.userId);!this.deleted&&e&&(this.profile.user=e,this.metric.loadMetrics(e.wallet_address),this.xSection.xUsername=e.x_username,e.wallet_address&&(this.main.append((0,x.el)(".holding-asset-list",this.tabs=new x.mQ("user-info-modal",[{id:"holding-hashtags",label:`Holding ${x.m7.capitalize(ll.hashtagOptions.unit)}s`}]),this.holdingHashtagList=new rg(e.wallet_address))),this.tabs.on("select",(e=>{[this.holdingHashtagList].forEach((e=>e?.hide())),"holding-hashtags"===e&&this.holdingHashtagList?.show()})).init()))}}class pg extends x.AE{constructor(e,t){super(".hashtag-holder-list-item");const n=(0,x.el)(".avatar");x.VM.selectLoadable(n,[e.avatar_thumb,e.stored_avatar_thumb]),this.append(n,(0,x.el)(".name",e.display_name),(0,x.el)(".balance",`Balance: ${x.m7.numberWithCommas(String(t))}`)),this.onDom("click",(()=>new dg(e.user_id,e)))}}class fg extends x._j{hashtag;lastBalance;constructor(e){super(".hashtag-holder-list"),this.hashtag=e,this.domElement.setAttribute("data-empty-message","No holders yet")}async load(){this.append(new x.td);const e=await ng.fetchHolders(this.hashtag,this.lastBalance);if(!this.deleted){this.empty();for(const t of e)new pg(t,t.balance).appendTo(this);this.lastBalance=e[e.length-1]?.balance}}}class gg extends x.GI{hashtag;resolve;reject;priceDisplay;totalPriceDisplay1;totalPriceDisplay2;cancelButton;constructor(e){super(".sell-hashtag-popup",{barrierDismissible:!1}),this.hashtag=e,this.header.append((0,x.el)("h1",`Sell 1 ${e}`)),this.main.append((0,x.el)("p","You will receive ",this.totalPriceDisplay1=(0,x.el)("span.price",new x.vE)),(0,x.el)("table",(0,x.el)("tr",(0,x.el)("th","Price"),this.priceDisplay=(0,x.el)("td",new x.vE)),(0,x.el)("tr",(0,x.el)("th","Total (excluding fee)"),this.totalPriceDisplay2=(0,x.el)("td",new x.vE)))),this.footer.append(this.cancelButton=new x.zx({tag:".cancel",title:(0,x.WI)("cancel-button"),click:()=>this.delete()}),new x.zx({tag:".sell",title:"Sell",click:async(e,t)=>{t.loading=!0,this.cancelButton.disable();try{await this.sellHashtag(),this.resolve?.(),this.reject=void 0,this.delete()}catch(e){console.error(e),t.loading=!1,this.cancelButton.enable()}}})),this.on("delete",(()=>this.reject?.("Canceled by user"))),this.fetchPrice(),this.fetchTotalPrice()}async fetchPrice(){const e=await new qf(ll.defaultChain).getSellPrice(this.hashtag,1n);this.priceDisplay.empty().append(x.m7.numberWithCommas(Al(e))," ",ll.chains[ll.defaultChain].symbol)}async fetchTotalPrice(){const e=await new qf(ll.defaultChain).getSellPriceAfterFee(this.hashtag,1n);[this.totalPriceDisplay1,this.totalPriceDisplay2].forEach((t=>t.empty().append(x.m7.numberWithCommas(Al(e))," ",ll.chains[ll.defaultChain].symbol)))}async sellHashtag(){await new qf(ll.defaultChain).sell(this.hashtag,1n),await Kf.track(ll.defaultChain,"hashtag-trade"),Zf.decreaseHoldingHashtag(this.hashtag,1)}async wait(){return new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class mg extends x.SN{hashtag;imageContainer;priceDisplay;tradingVolumeDisplay;balanceDisplay;feesEarnedDisplay;sellButton;claimFeesButton;tabs;holderList;activityList;_info;balance=0n;feeEarned=0n;constructor(e,t){super(".hashtag-info-modal",{barrierDismissible:!0}),this.hashtag=e,this.title=[this.imageContainer=(0,x.el)(".image-container",new x.OL("tag")),(0,x.el)(".hashtag",e)],this.main.append((0,x.el)(".actions",new x.zx({type:x.L$.Outlined,title:"Enter chatroom",click:()=>{this.delete(),x.F0.go(`${ll.hashtagOptions.baseUri}/${this.hashtag}`)}})),(0,x.el)(".metrics",(0,x.el)("section.price",new x.OL("attach_money"),(0,x.el)(".value-container",(0,x.el)("label","Price"),this.priceDisplay=(0,x.el)(".value",new x.vE))),(0,x.el)("section.trading-volume",new x.OL("trending_up"),(0,x.el)(".value-container",(0,x.el)("label","Trading Volume"),this.tradingVolumeDisplay=(0,x.el)(".value",new x.vE))),(0,x.el)("section.balance",new x.OL("account_balance"),(0,x.el)(".value-container",(0,x.el)("label","Your Balance"),this.balanceDisplay=(0,x.el)(".value",new x.vE))),(0,x.el)("section.fees-earned",new x.OL("savings"),(0,x.el)(".value-container",(0,x.el)("label","Fees You've Earned"),this.feesEarnedDisplay=(0,x.el)(".value",new x.vE)))),(0,x.el)(".trade",new x.zx({tag:".buy",type:x.L$.Contained,title:"Buy",click:async(e,t)=>{if(this._info){t.loading=!0;try{await new Xf(this._info).wait(),this.balance>0n?(this.refresh(),t.loading=!1):(this.delete(),x.F0.go(`${ll.hashtagOptions.baseUri}/${this.hashtag}`))}catch(e){console.error(e),t.loading=!1}}}}),this.sellButton=new x.zx({tag:".sell",type:x.L$.Contained,title:"Sell",click:async(e,t)=>{t.loading=!0;try{await new gg(this.hashtag).wait(),this.refresh(),t.loading=!1}catch(e){console.error(e),t.loading=!1}}}),this.claimFeesButton=new x.zx({tag:".claim-fees",type:x.L$.Contained,title:"Claim Fees",click:async(e,t)=>{if(this._info){t.loading=!0;try{const e={...this._info,balance:Number(this.balance),feeEarned:this.feeEarned.toString()};await new eg([e]).wait(),this.loadFeesEarned(),t.loading=!1}catch(e){console.error(e),t.loading=!1}}}})),this.tabs=new x.mQ("hashtag-info-modal",[{id:"holders",label:"Holders"},{id:"activities",label:"Activities"}]),this.holderList=new fg(e),this.activityList=new Sl(ll.defaultChain,"hashtag-trade",e)),this.tabs.on("select",(e=>{[this.holderList,this.activityList].forEach((e=>e?.hide())),"holders"===e?this.holderList?.show():"activities"===e&&this.activityList?.show()})).init(),t?this.info=t:this.loadInfo(),this.loadRealPrice(),this.loadBalance(),this.loadFeesEarned()}set info(e){this._info=e,this.imageContainer.empty().append(e.image_thumb?(0,x.el)("img.image",{src:e.image_thumb}):new x.OL("tag")),0===e.supply||0n===this.balance?this.sellButton.disable():this.sellButton.enable();const t=Vf.getPrice(ll.defaultChain,BigInt(e.supply),1n,!1);this.priceDisplay.empty().append(x.m7.numberWithCommas(Al(t))," ",ll.chains[ll.defaultChain].symbol),this.tradingVolumeDisplay.empty().append(x.m7.numberWithCommas(Al(e.total_trading_volume))," ",ll.chains[ll.defaultChain].symbol)}async loadInfo(){const e=await Qf.fetchSingle(this.hashtag);e&&!this.deleted&&(this.info=e)}async loadRealPrice(){try{const e=await new qf(ll.defaultChain).getBuyPrice(this.hashtag,1n);this.deleted||this.priceDisplay.empty().append(x.m7.numberWithCommas(Al(e))," ",ll.chains[ll.defaultChain].symbol)}catch(e){console.error(e)}}async loadBalance(){const e=Gf.user?.wallet_address;if(e)try{this.balance=await new qf(ll.defaultChain).keysBalance(this.hashtag,e),this.deleted||(this.balanceDisplay.text=x.m7.numberWithCommas(this.balance.toString()))}catch(e){console.error(e)}else this.balance=0n,this.balanceDisplay.empty().append("0 ",ll.chains[ll.defaultChain].symbol);0===this._info?.supply||0n===this.balance?this.sellButton.disable():this.sellButton.enable()}async loadFeesEarned(){const e=Gf.user?.wallet_address;if(e)try{this.feesEarnedDisplay.empty().append(new x.vE),this.feeEarned=await new qf(ll.defaultChain).claimableHolderFee(this.hashtag,e),this.deleted||(this.feesEarnedDisplay.empty().append(x.m7.numberWithCommas(Al(this.feeEarned))," ",ll.chains[ll.defaultChain].symbol),this.feeEarned>0n?this.claimFeesButton.enable():this.claimFeesButton.disable())}catch(e){console.error(e)}else this.feeEarned=0n,this.feesEarnedDisplay.empty().append("0 ",ll.chains[ll.defaultChain].symbol),this.claimFeesButton.disable()}refresh(){this.loadInfo(),this.loadRealPrice(),this.loadBalance(),this.loadFeesEarned()}}class yg extends x.AE{userId;constructor(e,t,...n){super(".user-avatar",...n),this.userId=e,x.VM.selectLoadable(this,t),this.checkAndShowOnline(),this.onDelegate(lg,"onlineUsersChanged",(()=>this.checkAndShowOnline()))}checkAndShowOnline(){lg.checkOnline(this.userId)?this.hasClass("online")||this.addClass("online"):this.hasClass("online")&&this.deleteClass("online")}}class bg extends x.AE{event;constructor(e,t){super(".activity-list-item"+(t?".new":"")),this.event=e,setTimeout((()=>{this.deleted||this.deleteClass("new")}),1e3);const n=(0,x.el)(".asset-image",{click:()=>this.openAssetInfoModal()});"hashtag-trade"===e.contract_type&&(e.asset_image_thumb?x.VM.selectLoadable(n,[e.asset_image_thumb]):n.append(new x.OL("tag")));const s=(0,x.el)("a",e.asset_name,{click:()=>this.openAssetInfoModal()});let r="";"hashtag-trade"===e.contract_type&&(r=ll.hashtagOptions.unit);const i=e.user?new yg(e.user.user_id,[e.user.avatar_thumb,e.user.stored_avatar_thumb],{click:()=>this.openUserInfoModal()}):void 0,a=(0,x.el)("a",e.user?e.user.display_name:x.m7.shortenEthereumAddress(e.wallet_address),{click:()=>this.openUserInfoModal()}),o=(0,x.el)("span.date",x.Em.fromNow(ul.blockToTime(e.chain,e.block_number)));if("Trade"===e.event_name){const t="true"===e.args[2],c=x.m7.numberWithCommas(e.args[3]),l=x.m7.numberWithCommas(Al(e.args[4]));"1"!==c&&r&&(r+="s"),this.append((0,x.el)("header",i,n),(0,x.el)("main",(0,x.el)(".description",...(0,x.nL)(t?"activity-list-item-bought-message":"activity-list-item-sold-message",{userName:a,assetName:s,assetUnit:r,amount:c})),(0,x.el)(".info",(0,x.el)("span.price"+(t?".up":".down"),l," ",ll.chains[ll.defaultChain].symbol,", "),o)))}}openAssetInfoModal(){"hashtag-trade"===this.event.contract_type&&new mg(this.event.asset_id,void 0)}openUserInfoModal(){this.event.user?new dg(this.event.user.user_id,this.event.user):open(`https://etherscan.io/address/${this.event.wallet_address}`)}}const wg=["TicketCreated","TicketDeleted","Trade"];class vg extends x.nd{store=new x.yh("fsesf-activities");currentEvents=[];constructor(){super(),this.addAllowedEvents("loaded","eventAdded"),this.currentEvents=this.store.get("cached-events")??[]}async init(){x.JA.client.channel("contract-event-changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"contract_events",filter:`event_name=in.(${wg.join(",")})`},(async e=>{const t=await Pl.fetchEvent(e.new.chain,e.new.contract_type,e.new.block_number,e.new.log_index);if(t){const e=this.store.get("cached-events");e&&(e.unshift(t),this.store.set("cached-events",e,!0),this.currentEvents=e),this.fireEvent("eventAdded",t)}})).subscribe();const e=await Pl.fetchRecently(void 0);this.store.set("cached-events",e,!0),this.currentEvents=e,this.fireEvent("loaded")}}const Eg=new vg;class Ag extends x.AE{constructor(){super(".activity-list"),this.domElement.setAttribute("data-empty-message","No activities yet"),this.render(),this.onDelegate(Eg,"loaded",(()=>this.render())),this.onDelegate(Eg,"eventAdded",(e=>new bg(e,!0).appendTo(this,0)))}render(){this.empty();for(const e of Eg.currentEvents)new bg(e,!1).appendTo(this)}}const kg=new class{escape(e){const t=e.match(/\p{L}|\p{N}/gu);return null===t?"":t.join("").toLowerCase()}available(e){return Mt(e).length<32}};class _g extends x.AE{input;constructor(){super("form.hashtag-search-bar"),this.append((0,x.el)("label",new x.OL("search"),this.input=(0,x.el)("input",{placeholder:`Join or create a ${ll.hashtagOptions.unit} room`,maxLength:31,autocapitalize:"none"}))),this.onDom("submit",(e=>{e.preventDefault();const t=kg.escape(this.input.domElement.value);x.F0.go(`${ll.hashtagOptions.baseUri}/${t}`),this.input.domElement.value=""}))}}class Pg extends x.TZ{constructor(){super("subscribed_hashtags","hashtag",100)}async fetchAll(e){return await this.safeSelect((t=>t.eq("user_id",e)),1e3)}async subscribe(e,t){await this.safeInsert({user_id:e,hashtag:t})}async unsubscribe(e,t){await this.safeDelete((n=>n.eq("user_id",e).eq("hashtag",t)))}}const xg=new Pg;class Sg extends x.nd{subscribedHashtags=new Set;constructor(){super(),this.addAllowedEvents("subscribe","unsubscribe")}async loadSignedUserSubscribedHashtags(e){const t=await xg.fetchAll(e);for(const e of t)this.subscribedHashtags.add(e.hashtag)}async subscribe(e){const t=Gf.user?.user_id;t&&(this.subscribedHashtags.add(e),this.fireEvent("subscribe",e),await xg.subscribe(t,e))}async unsubscribe(e){const t=Gf.user?.user_id;t&&(this.subscribedHashtags.delete(e),this.fireEvent("unsubscribe",e),await xg.unsubscribe(t,e))}isSubscribed(e){return this.subscribedHashtags.has(e)}}const Ig=new Sg;class Cg extends x.h_{constructor(e,t,n){super({tag:".hashtag-menu",left:t.left,top:t.top,items:[{icon:new x.OL("info"),title:"Info",click:()=>new mg(e,n)},Ig.isSubscribed(e)?{icon:new x.OL("notifications_off"),title:"Disable Notifications",click:()=>Ig.unsubscribe(e)}:{icon:new x.OL("notifications"),title:"Enable Notifications",click:()=>Ig.subscribe(e)}]})}}class Tg extends x.AE{hashtagInfo;priceDisplay;get hashtag(){return this.hashtagInfo.hashtag}constructor(e){super(".hashtag-leaderboard-item"),this.hashtagInfo=e;x.m7.numberWithCommas(Al(Vf.getPrice(ll.defaultChain,BigInt(e.supply),1n,!1)));this.append((0,x.el)(".rank",String(e.rank)),(0,x.el)(".image-container",e.image_thumb?(0,x.el)("img.image",{src:e.image_thumb}):new x.OL("tag")),(0,x.el)(".info-container",(0,x.el)(".info",(0,x.el)("h3",e.hashtag),this.priceDisplay=(0,x.el)("span.price")))),this.setSupply(e.supply,e.is_price_up),this.onDom("click",(()=>x.F0.go(`${ll.hashtagOptions.baseUri}/${e.hashtag}`,void 0,e))),x.FY.addContextmenuListener(this,(t=>{t.preventDefault(),new Cg(e.hashtag,{left:t.clientX,top:t.clientY},e)}))}setSupply(e,t){const n=x.m7.numberWithCommas(Al(Vf.getPrice(ll.defaultChain,BigInt(e),1n,!1)));this.priceDisplay.deleteClass("up","down"),void 0!==t&&this.priceDisplay.addClass(t?"up":"down"),this.priceDisplay.empty().append(n," ",ll.chains[ll.defaultChain].symbol)}active(){this.addClass("active")}deactive(){this.deleteClass("active")}}var Og;!function(e){e.App="app",e.Discord="discord",e.Telegram="telegram"}(Og||(Og={}));const Ng=Og;class jg extends x.TZ{constructor(){super("hashtag_messages",Ol.QC,100)}async upload(e){const t={files:[]};return await Promise.all(e.map((async e=>{if(Gf.user)try{const n=await x.c7.uploadAttachment("hashtag_chat_upload_files",Gf.user.user_id,e,2592e3);t.files?.push({url:n,fileName:e.name,fileType:e.type,fileSize:e.size})}catch(e){throw"Payload too large"===e.error?new x.hW({title:(0,x.WI)("file-too-large-alert-title"),message:(0,x.WI)("file-too-large-alert-message",{maxFileSize:"1 MB"})}):"invalid_mime_type"===e.error&&new x.hW({title:"File Upload Failed",message:e.message}),e}}))),t}async sendMessage(e,t,n){const s=n.length?await this.upload(n):void 0;return await this.safeInsertAndSelect({source:Ng.App,hashtag:e,message:t,rich:s})}async fetch(e){return await this.safeSelect((t=>t.eq("hashtag",e).order("id",{ascending:!1})))}async fetchMore(e,t){return await this.safeSelect((n=>n.eq("hashtag",e).lt("id",t).order("id",{ascending:!1})))}async fetchSingle(e,t){return await this.safeSelectSingle((n=>n.eq("hashtag",e).eq("id",t)))}async updateMessage(e,t,n){await this.safeUpdate((n=>n.eq("hashtag",e).eq("id",t)),{hashtag:e,id:t,message:n})}async deleteMessage(e,t){await this.safeDelete((n=>n.eq("hashtag",e).eq("id",t)))}}const Lg=new jg;class Bg extends x.nd{hashtagWeights={};channel;hashtagStore=new x.yh("fsesf-hashtags");lastSeenMessageIdStore=new x.yh("hashtag-last-seen-message-ids");constructor(){super(),this.addAllowedEvents("messageAdded","messageSent","messageUpdated","messageDeleted","lastSeenMessageIdChanged","priceChanged")}manage(e,t){for(const t of e)void 0===this.hashtagWeights[t]&&(this.hashtagWeights[t]=0),this.hashtagWeights[t]+=1;for(const e of t){if(void 0===this.hashtagWeights[e])throw new Error("Hashtag not found");this.hashtagWeights[e]-=1,0===this.hashtagWeights[e]&&delete this.hashtagWeights[e]}this.channel?.unsubscribe();Object.keys(this.hashtagWeights).length>0?this.channel=x.JA.client.channel("hashtag-message-changes").on("postgres_changes",{event:"*",schema:"public",table:"hashtag_messages"},(async e=>{if("INSERT"===e.eventType){const t=await Lg.fetchSingle(e.new.hashtag,e.new.id);t&&(this.addLastMessage(t.hashtag,{last_message_id:t.id,last_message_sender:t.author?.display_name,last_message:t.message,last_message_sent_at:t.created_at}),this.fireEvent("messageSent",t))}else if("UPDATE"===e.eventType){const t=await Lg.fetchSingle(e.new.hashtag,e.new.id);t&&this.fireEvent("messageUpdated",t)}else"DELETE"===e.eventType&&this.fireEvent("messageDeleted",e.old)})).subscribe():this.channel=void 0,ll.dev&&console.log(this.hashtagWeights),this.onDelegate(Eg,"eventAdded",(e=>{if("Trade"===e.event_name&&"hashtag-trade"===e.contract_type){const t=parseInt(e.args[8]),n="true"===e.args[2],s=this.hashtagStore.get("cached-hashtags");if(s){const r=s.find((t=>t.hashtag===e.asset_id));r&&(r.supply=t,r.is_price_up=n,this.hashtagStore.set("cached-hashtags",s,!0))}this.fireEvent("priceChanged",e.asset_id,t,n)}}))}addLastMessage(e,t){const n=this.hashtagStore.get("cached-hashtags");if(n){const s=n.find((t=>t.hashtag===e));if(s)s.last_message_id=t.last_message_id,s.last_message_sender=t.last_message_sender,s.last_message=t.last_message,s.last_message_sent_at=t.last_message_sent_at;else{const s={hashtag:e,supply:0,total_trading_volume:"0",holder_count:0,last_purchased_at:x.gz.UNIX_EPOCH_START_DATE,created_at:(new Date).toISOString(),...t};n.push(s)}this.hashtagStore.set("cached-hashtags",n,!0)}this.fireEvent("messageAdded",e,t)}setLastSeenMessageId(e,t){t>=0&&(this.lastSeenMessageIdStore.set(e,t),this.fireEvent("lastSeenMessageIdChanged",e,t))}getLastSeenMessageId(e){return this.lastSeenMessageIdStore.get(e)}}const Rg=new Bg;class Mg extends x.AE{store=new x.yh("hashtag-leaderboard");lastRank;activedHashtag;constructor(){super(".hashtag-leaderboard"),this.domElement.setAttribute("data-empty-message","No hashtags found");const e=this.store.get("cached-hashtags");if(e&&e.length>0)for(const t of e)this.addItem(t);this.loadHashtags(),this.onDelegate(Rg,"priceChanged",((e,t,n)=>{const s=this.findItem(e);s&&s.setSupply(t,n)}))}addItem(e){if(kg.available(e.hashtag))return new Tg(e).appendTo(this)}findItem(e){return this.children.find((t=>t.hashtag===e))}async loadHashtags(){const e=await Qf.fetchLeaderboard(this.lastRank);if(this.store.set("cached-hashtags",e,!0),!this.deleted){this.empty();for(const t of e){const e=this.addItem(t);e&&t.hashtag===this.activedHashtag&&e.active()}}}activeHashtag(e){this.deactiveHashtag(),this.findItem(e)?.active(),this.activedHashtag=e}deactiveHashtag(){this.activedHashtag&&this.findItem(this.activedHashtag)?.deactive()}}class Ug extends x.TZ{constructor(){super("hashtag_chat_users","*",50)}async fetchByUser(e,t){return await this.safeSelect((n=>n.in("hashtag",e).eq("user_id",t)))}async updateLastSeenMessageId(e,t,n){return await this.safeUpsert((n=>n.eq("hashtag",e).eq("user_id",t)),{hashtag:e,user_id:t,last_seen_message_id:n})}}const Dg=new Ug;class Fg extends x.gT{hashtagInfo;imageContainer;lastMessageDisplay;priceDisplay;currentLastMessage;get hashtag(){return this.hashtagInfo.hashtag}constructor(e,t){super(".hashtag-list-item"+(t?".new":"")),this.hashtagInfo=e,setTimeout((()=>{this.deleted||this.deleteClass("new")}),1e3),this.append(this.imageContainer=(0,x.el)(".image-container"),(0,x.el)(".info-container",(0,x.el)(".info",(0,x.el)("h3",e.hashtag),this.priceDisplay=(0,x.el)("span.price")),this.lastMessageDisplay=(0,x.el)(".last-message"))),this.setSupply(e.supply,e.is_price_up),this.onDom("click",(()=>x.F0.go(`${ll.hashtagOptions.baseUri}/${e.hashtag}`,void 0,e))),x.FY.addContextmenuListener(this,(t=>{t.preventDefault(),new Cg(e.hashtag,{left:t.clientX,top:t.clientY},e)})),this.icon=e.image_thumb,this.lastMessage=e}set icon(e){this.imageContainer.empty().append(e?(0,x.el)("img.image",{src:e}):new x.OL("tag"))}set lastMessage(e){this.currentLastMessage=e;const t=Rg.getLastSeenMessageId(this.hashtagInfo.hashtag),n=void 0!==e.last_message_id&&void 0!==t?e.last_message_id-t:0;this.lastMessageDisplay.empty().append((0,x.el)(".sender",e.last_message_sender?e.last_message_sender+":":void 0),(0,x.el)(".message",e.last_message?.replace(/\n/g," ")),n>0?(0,x.el)(".new-message-count",String(n)):(0,x.el)(".sent-at",e.last_message_sent_at===x.gz.NEGATIVE_INFINITY?"":x.Em.fromNow(e.last_message_sent_at)))}refreshLastMessage(){this.lastMessage=this.currentLastMessage}setSupply(e,t){const n=x.m7.numberWithCommas(Al(Vf.getPrice(ll.defaultChain,BigInt(e),1n,!1)));this.priceDisplay.deleteClass("up","down"),void 0!==t&&this.priceDisplay.addClass(t?"up":"down"),this.priceDisplay.empty().append(n," ",ll.chains[ll.defaultChain].symbol)}get sortValue(){return this.currentLastMessage.last_message_sent_at===x.gz.NEGATIVE_INFINITY?0:new Date(this.currentLastMessage.last_message_sent_at).getTime()}active(){this.addClass("active")}deactive(){this.deleteClass("active")}}class $g extends x.pp{store=new x.yh("fsesf-hashtags");lastMessageSentAt;managingHashtags=[];activedHashtag;constructor(){super(".hashtag-list"),this.domElement.setAttribute("data-empty-message","No hashtags found");const e=this.store.get("cached-hashtags");if(e&&e.length>0){for(const t of e)this.addItem(t,!1);this.sortItems(!1)}this.managingHashtags=e?e.map((e=>e.hashtag)):[],Rg.manage(this.managingHashtags,[]),this.loadHashtags(),this.onDelegate(Rg,"messageAdded",((e,t)=>{const n=this.findItem(e);if(n)n.lastMessage=t;else{const n={hashtag:e,supply:0,total_trading_volume:"0",holder_count:0,last_purchased_at:x.gz.UNIX_EPOCH_START_DATE,created_at:(new Date).toISOString(),...t},s=this.addItem(n,!0);s&&e===this.activedHashtag&&s.active()}this.sortItems(!1)})),this.onDelegate(Rg,"lastSeenMessageIdChanged",(e=>{const t=this.findItem(e);t?.refreshLastMessage()})),this.onDelegate(Rg,"priceChanged",((e,t,n)=>{const s=this.findItem(e);s&&s.setSupply(t,n)}))}addItem(e,t){if(kg.available(e.hashtag))return new Fg(e,t).appendTo(this)}findItem(e){return this.children.find((t=>t.hashtag===e))}async loadHashtags(){const e=await Qf.fetch(this.lastMessageSentAt);if(this.store.set("cached-hashtags",e,!0),this.loadLastSeenMessageIds(e.map((e=>e.hashtag))),!this.deleted){for(const t of e){if(!this.managingHashtags.includes(t.hashtag))this.addItem(t,!0);else{const e=this.findItem(t.hashtag);e&&(e.icon=t.image_thumb,e.lastMessage=t,e.setSupply(t.supply,t.is_price_up))}}this.lastMessageSentAt=e[e.length-1]?.last_message_sent_at;const t=this.managingHashtags;this.managingHashtags=e.map((e=>e.hashtag));for(const e of t)this.managingHashtags.includes(e)||this.findItem(e)?.delete();this.sortItems(!1),Rg.manage(this.managingHashtags,t)}}async loadLastSeenMessageIds(e){const t=Gf.user?.user_id;if(t){const n=await Dg.fetchByUser(e,t);for(const e of n)Rg.setLastSeenMessageId(e.hashtag,e.last_seen_message_id)}}async loadMore(){}delete(){Rg.manage([],this.managingHashtags),super.delete()}activeHashtag(e){this.deactiveHashtag(),this.findItem(e)?.active(),this.activedHashtag=e}deactiveHashtag(){this.activedHashtag&&this.findItem(this.activedHashtag)?.deactive()}}class Gg extends x.kj{hashtag;input;emojiPicker;constructor(e,t){super(".hashtag-message-form"),this.hashtag=e,this.addAllowedEvents("send"),this.append(this.uploadPreviewArea=(0,x.el)(".upload-preview-area"),(0,x.el)("main",(0,x.el)("section.rich",new x.zx({type:x.L$.Circle,tag:".attachment",icon:new x.OL("attach_file"),click:()=>this.openFileSelector()})),x.yO.isMobileDevice?void 0:(0,x.el)("section.emoji",new x.zx({type:x.L$.Circle,tag:".emoji",icon:new x.OL("insert_emoticon"),click:(e,t)=>{if(this.emojiPicker?.showing)this.emojiPicker.hide();else{const e=t.rect;this.emojiPicker?.show(e.left,e.top-320)}}}),this.emojiPicker=new Ol.h5),(0,x.el)("form",(0,x.el)(".input-container",this.input=new x.Ao({tag:"p.message-input",contenteditable:!0},(e=>this.appendFiles(e))),{click:()=>this.input.domElement.focus()}),new x.zx({type:x.L$.Circle,tag:".send",icon:new x.OL("send")}),{submit:e=>this.submit(e)}))),this.emojiPicker?.on("select",(e=>{this.input.domElement.innerText+=e})),this.input.onDom("keydown",(e=>{"Enter"!==e.key||e.shiftKey||229===e.keyCode||this.submit(e)})),this.input.onDom("focus",(()=>{Gf.signed||(new Hf,this.input.domElement.blur())})),x.yO.isAndroid&&Gf.signed&&t&&this.on("visible",(()=>this.input.domElement.focus()))}submit(e){e.preventDefault();const t=this.input.domElement.innerText?.trim();(t||this.toUploadFiles.length>0)&&(this.sendMessage(""===t?void 0:t,this.toUploadFiles),this.input.domElement.innerText="",this.clearUploads())}async sendMessage(e,t){if(e&&e.length>1e3)return void new x.hW({title:(0,x.WI)("message-too-long-alert-title"),message:(0,x.WI)("message-too-long-alert-message",{maxLength:1e3})});if(!Gf.signed)throw new Hf,new Error("You must be signed in to send messages");this.fireEvent("send",e,t);const n=await Lg.sendMessage(this.hashtag,e,t);Rg.setLastSeenMessageId(this.hashtag,n.id)}}class Hg extends x.h_{constructor(e,t){super({tag:".hashtag-message-menu",left:t.left,top:t.top,items:[{icon:new x.OL("content_copy"),title:"Copy",click:()=>{e.message&&navigator.clipboard.writeText(e.message)}},...Gf.user&&Gf.user?.user_id===e.author?.user_id?[{icon:new x.OL("edit"),title:"Edit",click:()=>{new x.NL({title:"Edit Message",message:"Edit your message",value:e.message,multiline:!0,confirmTitle:"Edit"},(t=>Lg.updateMessage(e.hashtag,e.id,t.trim())))}},{icon:new x.OL("delete"),title:"Delete",click:()=>{new x.I4({title:"Delete Message",message:"Are you sure you want to delete this message?",confirmTitle:"Delete"},(()=>Lg.deleteMessage(e.hashtag,e.id)))}}]:[]]})}}class zg extends x.AE{richDisplay;currentMessage;constructor(e,t,n){super("li.hashtag-message-display"+(t?".new":"")+(n?".waiting":"")),this.addAllowedEvents("imageLoaded"),this.render(e,n)}render(e,t=!1){this.currentMessage?.message===e.message&&x.QI.checkEqual(this.currentMessage?.rich,e.rich)||(this.currentMessage=e,this.empty().append(e.rich?this.richDisplay=new x.Fi(e.rich,t):void 0,e.message?(0,x.el)(".message-container",(0,x.el)("p.message",...x.m7.convertTextToHyperlinks(e.message.trim())),(0,x.el)(".date",x.Em.fromNow(e.created_at))):(0,x.el)(".date",x.Em.fromNow(e.created_at))),this.richDisplay?.on("imageLoaded",(e=>this.fireEvent("imageLoaded",e))),x.FY.addContextmenuListener(this,(t=>{t.preventDefault(),new Hg(e,{left:t.clientX,top:t.clientY})})),e.author&&e.author.user_id===Gf.user?.user_id&&this.addClass("authored"))}done(){this.deleteClass("waiting"),this.richDisplay?.uploadDone()}}class Wg extends x.AE{messages;firstMessage;lastMessage;messageList;messageDisplays=new Map;constructor(e,t,n){if(super(".hashtag-message-list-item"),this.messages=e,this.addAllowedEvents("imageLoaded"),this.firstMessage=e[0],this.lastMessage=e[e.length-1],this.firstMessage){const s=new yg(this.firstMessage.author?this.firstMessage.author.user_id:this.firstMessage.external_author_id,[this.firstMessage.author?.avatar_thumb,this.firstMessage.author?.stored_avatar_thumb,this.firstMessage.external_author_avatar],{click:e=>this.openAuthorProfile(e)}),r=(0,x.el)(".author",(0,x.el)("h5.name",this.firstMessage.author?this.firstMessage.author.display_name:this.firstMessage.external_author_name,{click:e=>this.openAuthorProfile(e)})),i=e.map((e=>this.createDisplay(e,t,n)));this.append(s,(0,x.el)("main",r,this.messageList=(0,x.el)("ul",...i))),this.firstMessage.author&&this.firstMessage.author.user_id===Gf.user?.user_id&&this.addClass("authored")}}openAuthorProfile(e){e.stopPropagation();const t=this.messages[0]?.author;t&&new dg(t.user_id,t)}createDisplay(e,t,n){const s=new zg(e,t,n).on("imageLoaded",(e=>this.fireEvent("imageLoaded",e)));return this.messageDisplays.set(e.id,s),s}updateMessage(e){const t=this.messageDisplays.get(e.id);return!!t&&(t.render(e),!0)}updateOrAddMessage(e,t){!this.updateMessage(e)&&this.messageList&&(this.createDisplay(e,!0,t).appendTo(this.messageList),this.lastMessage=e)}deleteMessage(e){const t=this.messageDisplays.get(e);return!(!t||(this.messageDisplays.delete(e),t.delete(),0!==this.messageDisplays.size))&&(this.delete(),!0)}getDisplay(e){return this.messageDisplays.get(e)}replaceMessageId(e,t){const n=this.messageDisplays.get(e);n&&(n.done(),this.messageDisplays.delete(e),this.messageDisplays.set(t,n))}}const qg=new class{groupByAuthor(e){const t=[];let n=[],s=null,r=null;for(const i of e){const e=new Date(i.created_at),a=i.author?i.author.user_id:i.external_author_id;(a!==s||r&&e.getTime()-r.getTime()>=6e4)&&(n.length>0&&t.push(n),n=[]),n.push(i),s=a,r=e}return n.length>0&&t.push(n),t}};class Vg extends x.AE{hashtag;store;items=new Map;tempMessages=[];nextTempMessageId=-1;loadingMore=!1;constructor(e){super(".hashtag-message-list"),this.hashtag=e,this.store=new x.yh(`hashtag-${e}-chat-messages`),this.domElement.setAttribute("data-empty-message","No messages");const t=this.store.get("cached-messages");if(t&&t.length>0){const e=qg.groupByAuthor(t);for(const t of e)this.addItem(t,!1,!1)}this.on("visible",(()=>{this.style({display:"none"}),setTimeout((()=>{this.deleted||(this.style({display:"flex"}),this.scrollToBottom())}))})),this.onDom("scroll",(()=>{0===this.domElement.scrollTop&&this.loadMore()})),this.loadMessages(),this.onDelegate(Rg,"messageSent",(e=>{if(e.hashtag===this.hashtag){const t=this.tempMessages.findIndex((t=>t.author?.user_id===e.author?.user_id&&t.message===e.message)),n=this.tempMessages[t];n?(this.replaceMessageId(n.id,e.id),this.tempMessages.splice(t,1)):this.addNewMessage(e,!1);const s=this.store.get("cached-messages")??[];s.push(e),this.store.set("cached-messages",s,!0)}})),this.onDelegate(Rg,"messageUpdated",(e=>{if(e.hashtag===this.hashtag){const t=this.items.get(e.id);t?.updateOrAddMessage(e,!1);const n=this.store.get("cached-messages")??[],s=n.findIndex((t=>t.id===e.id));-1!==s&&(n[s]=e,this.store.set("cached-messages",n,!0))}})),this.onDelegate(Rg,"messageDeleted",(e=>{if(e.hashtag===this.hashtag){const t=this.items.get(e.id);t?.deleteMessage(e.id)&&this.items.delete(e.id);const n=this.store.get("cached-messages")??[],s=n.findIndex((t=>t.id===e.id));-1!==s&&(n.splice(s,1),this.store.set("cached-messages",n,!0))}}))}async loadMessages(){let e;0===this.children.length&&this.append(e=new x.td);const t=(await Lg.fetch(this.hashtag)).reverse();if(this.store.set("cached-messages",t,!0),!this.deleted){const e=qg.groupByAuthor(t);for(const t of e)this.addItem(t,!0,!1);this.scrollToBottom();const n=t[t.length-1];n&&this.updateLastSeenMessageId(n.id)}e&&e.delete()}async loadMore(){if(this.loadingMore)return;const e=this.children[0]?.firstMessage;if(e){this.loadingMore=!0;const t=(new x.TK).appendTo(this,0),n=(await Lg.fetchMore(this.hashtag,e.id)).reverse();if(n.length>0){const e=qg.groupByAuthor(n);for(const t of e.reverse())this.addItem(t,!1,!1,0)}t.delete(),this.loadingMore=!1}}updateLastSeenMessageId(e){const t=Gf.user?.user_id;t&&(Rg.setLastSeenMessageId(this.hashtag,e),Dg.updateLastSeenMessageId(this.hashtag,t,e))}addItem(e,t,n,s){let r;for(const t of e)if(r=this.items.get(t.id),r)break;if(!r){const r=new Wg(e,t,n).appendTo(this,s).on("imageLoaded",(e=>this.checkAndScrollToBottom(e)));for(const t of e)this.items.set(t.id,r);return r}for(const t of e)r.updateOrAddMessage(t,n)}addNewMessage(e,t){const n=this.checkScrollToBottom(),s=this.children.length?this.children[this.children.length-1]:void 0,r=s?.lastMessage?.author?s.lastMessage.author.user_id:s?.lastMessage?.external_author_id,i=e.author?e.author.user_id:e.external_author_id,a=s?.lastMessage?.created_at?new Date(s.lastMessage.created_at):void 0,o=new Date(e.created_at);r!==i||a&&o.getTime()-a.getTime()>=6e4?this.addItem([e],!0,t):s&&(s.updateOrAddMessage(e,t),this.items.set(e.id,s)),this.updateLastSeenMessageId(e.id),n&&this.scrollToBottom()}checkScrollToBottom(e=0){return this.domElement.scrollTop>=this.domElement.scrollHeight-this.domElement.clientHeight-100-e}checkAndScrollToBottom(e=0){this.checkScrollToBottom(e)&&this.scrollToBottom()}scrollToBottom(){this.domElement.scrollTo(0,this.domElement.scrollHeight)}replaceMessageId(e,t){const n=this.items.get(e);n&&(n.replaceMessageId(e,t),this.items.delete(e),this.items.set(t,n))}addTempMessage(e,t){const n={hashtag:this.hashtag,id:this.nextTempMessageId-=1,source:Ng.App,author:Gf.user,message:e,rich:{files:t.map((e=>({fileName:e.name,fileSize:e.size,fileType:e.type,url:URL.createObjectURL(e)})))},created_at:(new Date).toISOString()};this.tempMessages.push(n),this.addNewMessage(n,!0)}}class Kg extends x.AE{hashtag;imageContainer;infoContainer;_info;constructor(e,t){super(".hashtag-room-title-bar"),this.hashtag=e,this.append(new x.zx({tag:".back",type:x.L$.Circle,icon:new x.OL("arrow_back"),click:()=>1===history.length?x.F0.goNoHistory("/"):history.back()}),this.imageContainer=(0,x.el)(".image-container",new x.OL("tag"),{click:()=>new mg(e,this.info)}),this.infoContainer=(0,x.el)(".info-container",(0,x.el)("h1",e),{click:()=>new mg(e,this.info)}),new x.zx({tag:".menu",type:x.L$.Circle,icon:new x.OL("menu"),click:(n,s)=>{n.stopPropagation();const r=s.rect;new Cg(e,{left:r.right-200,top:r.bottom},t)}})),t?this.info=t:this.loadInfo(),this.onDelegate(Eg,"eventAdded",(e=>{"Trade"===e.event_name&&"hashtag-trade"===e.contract_type&&e.asset_id===this.hashtag&&this.loadInfo()}))}set info(e){if(this._info=e,this.imageContainer.empty(),this.infoContainer.empty(),e){this.imageContainer.append(e.image_thumb?(0,x.el)("img.image",{src:e.image_thumb}):new x.OL("tag"));const t=x.m7.numberWithCommas(Al(Vf.getPrice(ll.defaultChain,BigInt(e.supply),1n,!1)));this.infoContainer.append((0,x.el)("h1",e.hashtag),(0,x.el)(".info",String(e.holder_count),1===e.holder_count?" holder, ":" holders, ",(0,x.el)("span.price"+(void 0===e.is_price_up?"":e.is_price_up?".up":".down"),t," ",ll.chains[ll.defaultChain].symbol)))}}get info(){return this._info}async loadInfo(){const e=await Qf.fetchSingle(this.hashtag);e&&!this.deleted&&(this.info=e)}}class Jg extends x.AE{currentHashtag;messageList;constructor(e,t){super(".hashtag-room"),this.enter(e,t),window.visualViewport?.addEventListener("resize",this.setViewportHeight)}enter(e,t){let n;e=kg.escape(e),Rg.manage([e],this.currentHashtag?[this.currentHashtag]:[]),this.currentHashtag=e,this.empty().append(new Kg(e,t),this.messageList=new Vg(e),n=new Gg(e,!0)),n.on("send",((t,n)=>{const s=Gf.user?.display_name;s&&(t||n.length>0)&&(Rg.addLastMessage(e,{last_message_sender:s,last_message:t,last_message_sent_at:(new Date).toISOString()}),this.messageList.addTempMessage(t,n))}))}setViewportHeight=()=>{x.yO.isMobileDevice&&window.visualViewport&&(x.yO.isAndroid&&this.style({top:`${window.visualViewport.offsetTop}px`,height:`${window.visualViewport.height}px`}),this.messageList.scrollToBottom())};delete(){this.currentHashtag&&Rg.manage([],[this.currentHashtag]),window.visualViewport?.removeEventListener("resize",this.setViewportHeight),super.delete()}}const Qg={"login-required-title":"Login Required","login-required-message":"To use all services of {serviceName}, you need to log in.","login-required-login-button":"Login with ","no-wallet-connected-title":"No wallet connected","no-wallet-connected-message":"You need to connect a wallet to perform this action.","no-wallet-linked-title":"No wallet linked","no-wallet-linked-message":"You need to link a wallet to perform this action.","no-wallet-linked-confirm":"Link wallet","file-too-large-alert-title":"File Too Large","file-too-large-alert-message":"Sorry, your file is too large to upload. Our maximum file size limit is {maxFileSize}. Please select a smaller file.","activity-list-item-created-ticket-message":"{userName} created {ticketName}.","activity-list-item-bought-message":"{userName} bought {amount} {assetName} {assetUnit}.","activity-list-item-sold-message":"{userName} sold {amount} {assetName} {assetUnit}.","invalid-network-title":"Invalid network","invalid-network-message":"You need to be on the {chain} network to perform this action."},Yg=null,Zg=null,Xg=null,em=null;function tm(){(0,Ol.lx)(),x.WI.setMessages({en:Qg,zh:Zg,"zh-tw":em,"zh-hk":Xg,ja:Yg})}class nm extends x.AE{hashtagInfo;get hashtag(){return this.hashtagInfo.hashtag}constructor(e,t,n){super(".signed-user-holding-hashtag-list-item"),this.hashtagInfo=e;const s=x.m7.numberWithCommas(Al(Vf.getPrice(ll.defaultChain,BigInt(e.supply),1n,!1)));this.append((0,x.el)(".image-container",e.image_thumb?(0,x.el)("img.image",{src:e.image_thumb}):new x.OL("tag")),(0,x.el)(".info-container",(0,x.el)(".info",(0,x.el)("h3",e.hashtag),(0,x.el)("span.price"+(void 0===e.is_price_up?"":e.is_price_up?".up":".down"),s," ",ll.chains[ll.defaultChain].symbol)),(0,x.el)(".balance-and-fee-earned",(0,x.el)(".balance",`Your balance: ${x.m7.numberWithCommas(String(t))}`),(0,x.el)(".fee-earned",`Fee earned: ${x.m7.numberWithCommas(Al(n))} `,ll.chains[ll.defaultChain].symbol)))),this.onDom("click",(()=>x.F0.go(`${ll.hashtagOptions.baseUri}/${e.hashtag}`,void 0,e))),x.FY.addContextmenuListener(this,(t=>{t.preventDefault(),new Cg(e.hashtag,{left:t.clientX,top:t.clientY},e)}))}active(){this.addClass("active")}deactive(){this.deleteClass("active")}}class sm extends x.AE{activedHashtag;constructor(){super(".signed-user-holding-hashtag-list"),this.domElement.setAttribute("data-empty-message","You don't have any hashtags."),this.render(),this.onDelegate(Zf,"changed",(()=>this.render()))}render(){this.empty();for(const e of Zf.holdingHashtags)if(kg.available(e.hashtag)){const t=new nm(e,e.balance,e.feeEarned).appendTo(this);t&&e.hashtag===this.activedHashtag&&t.active()}}findItem(e){return this.children.find((t=>t.hashtag===e))}activeHashtag(e){this.deactiveHashtag(),this.findItem(e)?.active(),this.activedHashtag=e}deactiveHashtag(){this.activedHashtag&&this.findItem(this.activedHashtag)?.deactive()}}class rm extends x.AE{constructor(e){super(".coinbase-pay-button"+(C.instanceReady?"":".disabled")),this.addAllowedEvents("exit","success"),this.append(`Buy ${e} with Coinbase Pay`),C.instanceReady||this.onDelegate(C,"instanceCreated",(()=>this.deleteClass("disabled"))),this.onDom("click",(()=>C.open())),this.onDelegate(C,"exit",(()=>this.fireEvent("exit"))),this.onDelegate(C,"success",(()=>this.fireEvent("success")))}}class im extends x.AE{chain;walletAddress;balanceDisplay;coinbasePayButton;constructor(e,t,n){super(".chain-info-display"),this.chain=t,this.walletAddress=n,this.append((0,x.el)("h3",(0,x.el)("img.icon",{src:`https://resources.gaia.cc/images/chain-icons/${e}.svg`}),e),(0,x.el)(".balance",(0,x.el)("labal","Balance: "),this.balanceDisplay=(0,x.el)("span.value",new x.vE)),t.bridgeUrl?new x.zx({type:x.L$.Contained,icon:new x.OL("open_in_new"),title:`${e} Bridge`,href:t.bridgeUrl,target:"_blank"}):void 0,C.checkSupport(e)?this.coinbasePayButton=new rm(t.symbol):void 0),this.loadBalance(),this.coinbasePayButton?.on(["exit","success"],(()=>this.loadBalance()))}async loadBalance(){try{const e=new al(this.chain.rpc),t=await e.getBalance(this.walletAddress);this.deleted||(this.balanceDisplay.text=`${x.m7.numberWithCommas(Al(t),5)} ${this.chain.symbol}`)}catch(e){console.error(e),this.balanceDisplay.text="Error loading balance."}}}class am extends x.SN{constructor(){super(".wallet-settings-modal",{barrierDismissible:!0}),this.title="Your Wallet",this.render(),this.container.onDelegate(Gf,"walletLinked",(()=>this.render()))}async render(){if(this.main.empty(),Gf.walletLinked){const e=Gf.user.wallet_address,t=Object.entries(ll.chains);this.main.append((0,x.el)(".wallet-address-container",(0,x.el)("h3","Your Wallet Address"),(0,x.el)("a.wallet-address",e,{href:`${1===t.length?t[0][1].explorerUrl:"https://blockscan.com"}/address/${e}`,target:"_blank"}),(0,x.el)(".button-container",new x.zx({type:x.L$.Contained,title:"Open Wallet",click:async(e,t)=>{t.loading=!0;try{await Gf.openWallet()}catch(e){console.error(e)}t.loading=!1}}),new x.zx({type:x.L$.Contained,title:"Relink Wallet",click:async(e,t)=>{t.loading=!0;try{await Gf.linkWallet()}catch(e){console.error(e),t.loading=!1}}}))));for(const[n,s]of t)this.main.append(new im(n,s,e))}else this.main.append((0,x.el)("p","You have not linked a wallet yet."),new x.zx({title:"Link Wallet",click:async(e,t)=>{t.loading=!0;try{await Gf.linkWallet()}catch(e){console.error(e),t.loading=!1}}}))}}class om extends x.AE{constructor(){super(".login-required"),this.append(new x.OL("lock"),(0,x.el)("main",(0,x.el)("p",(0,x.WI)("login-required-message",{serviceName:ll.serviceName})),new x.zx({type:x.L$.Contained,title:(0,x.WI)("login-required-login-button"),click:()=>Gf.signIn()})))}}class cm extends x.AE{holdingHashtagList;constructor(){if(super(".me-panel"),Gf.user){const e=(0,x.el)(".avatar");x.VM.selectLoadable(e,[Gf.user.avatar_thumb,Gf.user.stored_avatar_thumb]),this.append((0,x.el)(".signed-user",e,(0,x.el)(".info",(0,x.el)("h3.name",Gf.user.display_name),(0,x.el)(".x-username",`@${Gf.user.x_username}`)),new x.zx({type:x.L$.Circle,icon:new x.OL("info")}),{click:()=>{Gf.user&&new dg(Gf.user.user_id,Gf.user)}})),this.append((0,x.el)("header",(0,x.el)("h2","Settings")));const t=(0,x.el)("section.menu").appendTo(this);Gf.user.wallet_address?t.append(new x.zx({icon:new x.OL("account_balance_wallet"),title:"Wallet",click:()=>new am})):t.append(new x.zx({icon:new x.OL("error"),title:"Wallet Link Required",click:async(e,t)=>{t.loading=!0;try{await Gf.linkWallet(),new x.zx({icon:new x.OL("account_balance_wallet"),title:"Wallet",click:()=>new am}).appendTo(t.parent,t.parent.children.findIndex((e=>e===t))),t.delete()}catch(e){console.error(e),t.loading=!1}}})),window.Notification&&"granted"!==Notification.permission&&t.append(new x.zx({icon:new x.OL("notifications"),title:"Enable notifications",click:async()=>{await Ol.iy.requestPermissionAndSaveToken()||new Ol.Gy(ll.serviceName)}})),t.append(new x.zx({icon:new x.OL("info"),title:`About ${ll.serviceName}`,decapitalize:!0,href:ll.overviewUrl,target:"_blank"})),x.yO.installed||t.append(new x.zx({icon:new x.OL("download"),title:"Install app",click:()=>new Ol.c5(ll.serviceName)})),t.append(new x.zx({icon:new x.OL("feedback"),title:"Leave feedback",click:()=>new Ol.zZ(Gf.user?.user_id)}),new x.zx({icon:new x.OL("logout"),title:"Log out",click:()=>Gf.signOut()})),this.append((0,x.el)("header",(0,x.el)("h2",`Holding ${x.m7.capitalize(ll.hashtagOptions.unit)}s`),new x.zx({tag:".claim-fees",type:x.L$.Outlined,title:"Claim Total Earned Fees",click:async(e,t)=>{t.loading=!0;try{await new eg(Zf.holdingHashtags).wait()}catch(e){console.error(e)}t.loading=!1}})),this.holdingHashtagList=new sm)}else{this.append((0,x.el)("header",(0,x.el)("h2","Settings")));const e=(0,x.el)("section.menu").appendTo(this);e.append(new x.zx({icon:new x.OL("info"),title:`About ${ll.serviceName}`,decapitalize:!0,href:ll.overviewUrl,target:"_blank"})),x.yO.installed||e.append(new x.zx({icon:new x.OL("download"),title:"Install app",click:()=>new Ol.c5(ll.serviceName)})),e.append(new x.zx({icon:new x.OL("feedback"),title:"Leave feedback",click:()=>new Ol.zZ(Gf.user?.user_id)})),this.append(new om)}const e=(0,x.el)("footer").appendTo(this);for(const t of Object.keys(ll.socialUrls))new x.zx({type:x.L$.Circle,icon:(0,x.el)("img",{src:`https://resources.gaia.cc/images/social-icons/${t}-${x.Ve.showingTheme}.svg`,width:20,height:20}),href:ll.socialUrls[t],target:"_blank"}).appendTo(e)}activeHashtag(e){this.deactiveHashtag(),this.holdingHashtagList?.activeHashtag(e)}deactiveHashtag(){this.holdingHashtagList?.deactiveHashtag()}}class lm extends x.GI{constructor(){super(".link-wallet-popup",{barrierDismissible:!1}),this.header.append((0,x.el)("h1","Link Your Crypto Wallet")),this.main.append((0,x.el)("p",`Your account is not currently linked to a crypto wallet. By linking your wallet, you will have access to all features of ${ll.serviceName}. Would you like to link your wallet now?`)),this.footer.append(new x.zx({tag:".cancel",title:(0,x.WI)("cancel-button"),click:()=>this.delete()}),new x.zx({title:"Link Wallet",click:async(e,t)=>{t.loading=!0;try{await Gf.linkWallet(),this.delete()}catch(e){console.error(e),t.loading=!1}}}))}}},7190:(e,t,n)=>{"use strict";n.d(t,{AccountCtrl:()=>_,Id:()=>g,ConfigCtrl:()=>E,zv:()=>p,uA:()=>y,ExplorerCtrl:()=>G,jb:()=>q,OptionsCtrl:()=>w,AV:()=>d,ThemeCtrl:()=>X,ToastCtrl:()=>te,WcConnectionCtrl:()=>z});var s=n(7104);const r=e=>"object"==typeof e&&null!==e,i=new WeakMap,a=new WeakSet,o=(e=Object.is,t=((e,t)=>new Proxy(e,t)),n=(e=>r(e)&&!a.has(e)&&(Array.isArray(e)||!(Symbol.iterator in e))&&!(e instanceof WeakMap)&&!(e instanceof WeakSet)&&!(e instanceof Error)&&!(e instanceof Number)&&!(e instanceof Date)&&!(e instanceof String)&&!(e instanceof RegExp)&&!(e instanceof ArrayBuffer)),o=(e=>e.configurable&&e.enumerable&&e.writable),c=(e=>{switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e}}),l=new WeakMap,u=((e,t,n=c)=>{const r=l.get(e);if((null==r?void 0:r[0])===t)return r[1];const o=Array.isArray(e)?[]:Object.create(Object.getPrototypeOf(e));return(0,s.jc)(o,!0),l.set(e,[t,o]),Reflect.ownKeys(e).forEach((t=>{if(Object.getOwnPropertyDescriptor(o,t))return;const r=Reflect.get(e,t),c={value:r,enumerable:!0,configurable:!0};if(a.has(r))(0,s.jc)(r,!1);else if(r instanceof Promise)delete c.value,c.get=()=>n(r);else if(i.has(r)){const[e,t]=i.get(r);c.value=u(e,t(),n)}Object.defineProperty(o,t,c)})),Object.preventExtensions(o)}),h=new WeakMap,d=[1,1],p=(c=>{if(!r(c))throw new Error("object required");const l=h.get(c);if(l)return l;let f=d[0];const g=new Set,m=(e,t=++d[0])=>{f!==t&&(f=t,g.forEach((n=>n(e,t))))};let y=d[1];const b=e=>(t,n)=>{const s=[...t];s[1]=[e,...s[1]],m(s,n)},w=new Map,v=e=>{var t;const n=w.get(e);n&&(w.delete(e),null==(t=n[1])||t.call(n))},E=Array.isArray(c)?[]:Object.create(Object.getPrototypeOf(c)),A=(t,o,c,l,u)=>{if(t&&(e(o,l)||h.has(l)&&e(o,h.get(l))))return;v(c),r(l)&&(l=(0,s.o5)(l)||l);let d=l;if(l instanceof Promise)l.then((e=>{l.status="fulfilled",l.value=e,m(["resolve",[c],e])})).catch((e=>{l.status="rejected",l.reason=e,m(["reject",[c],e])}));else{!i.has(l)&&n(l)&&(d=p(l));const e=!a.has(d)&&i.get(d);e&&((e,t)=>{if(w.has(e))throw new Error("prop listener already exists");if(g.size){const n=t[3](b(e));w.set(e,[t,n])}else w.set(e,[t])})(c,e)}u(d),m(["set",[c],l,o])},k=t(E,{deleteProperty(e,t){const n=Reflect.get(e,t);v(t);const s=Reflect.deleteProperty(e,t);return s&&m(["delete",[t],n]),s},set(e,t,n,s){const r=Reflect.has(e,t),i=Reflect.get(e,t,s);return A(r,i,t,n,(n=>{Reflect.set(e,t,n,s)})),!0},defineProperty(e,t,n){if(o(n)){const s=Reflect.getOwnPropertyDescriptor(e,t);if(!s||o(s))return A(!!s&&"value"in s,null==s?void 0:s.value,t,n.value,(s=>{Reflect.defineProperty(e,t,{...n,value:s})})),!0}return Reflect.defineProperty(e,t,n)}});h.set(c,k);const _=[E,(e=++d[1])=>(y===e||g.size||(y=e,w.forEach((([t])=>{const n=t[1](e);n>f&&(f=n)}))),f),u,e=>{g.add(e),1===g.size&&w.forEach((([e,t],n)=>{if(t)throw new Error("remove already exists");const s=e[3](b(n));w.set(n,[e,s])}));return()=>{g.delete(e),0===g.size&&w.forEach((([e,t],n)=>{t&&(t(),w.set(n,[e]))}))}}];return i.set(k,_),Reflect.ownKeys(c).forEach((e=>{const t=Object.getOwnPropertyDescriptor(c,e);"value"in t&&(k[e]=c[e],delete t.value,delete t.writable),Object.defineProperty(E,e,t)})),k}))=>[p,i,a,e,t,n,o,c,l,u,h,d],[c]=o();function l(e={}){return c(e)}function u(e,t,n){const s=i.get(e);let r;s||console.warn("Please use proxy object");const a=[],o=s[3];let c=!1;const l=o((e=>{a.push(e),n?t(a.splice(0)):r||(r=Promise.resolve().then((()=>{r=void 0,c&&t(a.splice(0))})))}));return c=!0,()=>{c=!1,l()}}const h=l({history:["ConnectWallet"],view:"ConnectWallet",data:void 0}),d={state:h,subscribe:e=>u(h,(()=>e(h))),push(e,t){e!==h.view&&(h.view=e,t&&(h.data=t),h.history.push(e))},reset(e){h.view=e,h.history=[e]},replace(e){h.history.length>1&&(h.history[h.history.length-1]=e,h.view=e)},goBack(){if(h.history.length>1){h.history.pop();const[e]=h.history.slice(-1);h.view=e}},setData(e){h.data=e}},p={WALLETCONNECT_DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",W3M_VERSION:"W3M_VERSION",W3M_PREFER_INJECTED_URL_FLAG:"w3mPreferInjected",RECOMMENDED_WALLET_AMOUNT:9,isMobile:()=>typeof window<"u"&&Boolean(window.matchMedia("(pointer:coarse)").matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)),isAndroid:()=>p.isMobile()&&navigator.userAgent.toLowerCase().includes("android"),isIos(){const e=navigator.userAgent.toLowerCase();return p.isMobile()&&(e.includes("iphone")||e.includes("ipad"))},isHttpUrl:e=>e.startsWith("http://")||e.startsWith("https://"),isArray:e=>Array.isArray(e)&&e.length>0,formatNativeUrl(e,t,n){if(p.isHttpUrl(e))return this.formatUniversalUrl(e,t,n);let s=e;s.includes("://")||(s=e.replaceAll("/","").replaceAll(":",""),s=`${s}://`),s.endsWith("/")||(s=`${s}/`),this.setWalletConnectDeepLink(s,n);return`${s}wc?uri=${encodeURIComponent(t)}`},formatUniversalUrl(e,t,n){if(!p.isHttpUrl(e))return this.formatNativeUrl(e,t,n);let s=e;s.endsWith("/")||(s=`${s}/`),this.setWalletConnectDeepLink(s,n);return`${s}wc?uri=${encodeURIComponent(t)}`},wait:async e=>new Promise((t=>{setTimeout(t,e)})),openHref(e,t){window.open(e,t,"noreferrer noopener")},setWalletConnectDeepLink(e,t){try{localStorage.setItem(p.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},setWalletConnectAndroidDeepLink(e){try{const[t]=e.split("?");localStorage.setItem(p.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:t,name:"Android"}))}catch{console.info("Unable to set WalletConnect android deep link")}},removeWalletConnectDeepLink(){try{localStorage.removeItem(p.WALLETCONNECT_DEEPLINK_CHOICE)}catch{console.info("Unable to remove WalletConnect deep link")}},setWeb3ModalVersionInStorage(){try{typeof localStorage<"u"&&localStorage.setItem(p.W3M_VERSION,"2.7.1")}catch{console.info("Unable to set Web3Modal version in storage")}},getWalletRouterData(){var e;const t=null==(e=d.state.data)?void 0:e.Wallet;if(!t)throw new Error('Missing "Wallet" view data');return t},getSwitchNetworkRouterData(){var e;const t=null==(e=d.state.data)?void 0:e.SwitchNetwork;if(!t)throw new Error('Missing "SwitchNetwork" view data');return t},isPreferInjectedFlag:()=>typeof location<"u"&&new URLSearchParams(location.search).has(p.W3M_PREFER_INJECTED_URL_FLAG)};let f;const g={ethereumClient:void 0,setEthereumClient(e){f=e},client(){if(f)return f;throw new Error("ClientCtrl has no client set")}},m=l({enabled:typeof location<"u"&&(location.hostname.includes("localhost")||location.protocol.includes("https")),userSessionId:"",events:[],connectedWalletId:void 0}),y={state:m,subscribe:e=>u(m.events,(()=>e(function(e,t){const n=i.get(e);n||console.warn("Please use proxy object");const[s,r,a]=n;return a(s,r(),t)}(m.events[m.events.length-1])))),initialize(){m.enabled&&typeof(null==crypto?void 0:crypto.randomUUID)<"u"&&(m.userSessionId=crypto.randomUUID())},setConnectedWalletId(e){m.connectedWalletId=e},click(e){if(m.enabled){const t={type:"CLICK",name:e.name,userSessionId:m.userSessionId,timestamp:Date.now(),data:e};m.events.push(t)}},track(e){if(m.enabled){const t={type:"TRACK",name:e.name,userSessionId:m.userSessionId,timestamp:Date.now(),data:e};m.events.push(t)}},view(e){if(m.enabled){const t={type:"VIEW",name:e.name,userSessionId:m.userSessionId,timestamp:Date.now(),data:e};m.events.push(t)}}},b=l({selectedChain:void 0,chains:void 0,isCustomDesktop:!1,isCustomMobile:!1,isDataLoaded:!1,isUiLoaded:!1,isPreferInjected:!1}),w={state:b,subscribe:e=>u(b,(()=>e(b))),setChains(e){b.chains=e},getSelectedChain(){const e=g.client().getNetwork().chain;return e&&(b.selectedChain=e),b.selectedChain},setSelectedChain(e){b.selectedChain=e},setIsCustomDesktop(e){b.isCustomDesktop=e},setIsCustomMobile(e){b.isCustomMobile=e},setIsDataLoaded(e){b.isDataLoaded=e},setIsUiLoaded(e){b.isUiLoaded=e},setIsPreferInjected(e){b.isPreferInjected=e}},v=l({projectId:"",mobileWallets:void 0,desktopWallets:void 0,walletImages:void 0,chainImages:void 0,tokenImages:void 0,tokenContracts:void 0,enableNetworkView:!1,enableAccountView:!0,enableExplorer:!0,defaultChain:void 0,explorerExcludedWalletIds:void 0,explorerRecommendedWalletIds:void 0,termsOfServiceUrl:void 0,privacyPolicyUrl:void 0}),E={state:v,subscribe:e=>u(v,(()=>e(v))),setConfig(e){var t,n;y.initialize(),w.setIsCustomMobile(Boolean(null==(t=e.mobileWallets)?void 0:t.length)),w.setIsCustomDesktop(Boolean(null==(n=e.desktopWallets)?void 0:n.length)),w.setChains(g.client().chains),w.setIsPreferInjected(g.client().isInjectedProviderInstalled()&&p.isPreferInjectedFlag()),e.defaultChain&&w.setSelectedChain(e.defaultChain),p.setWeb3ModalVersionInStorage(),Object.assign(v,e)}},A={async getIdentity(e,t){const{projectId:n}=E.state,s=`https://rpc.walletconnect.com/v1/identity/${e}?chainId=${`eip155:${t}`}&projectId=${n}`;return(await fetch(s)).json()}},k=l({address:void 0,profileName:void 0,profileAvatar:void 0,profileLoading:!1,balanceLoading:!1,balance:void 0,isConnected:!1}),_={state:k,subscribe:e=>u(k,(()=>e(k))),getAccount(){const e=g.client().getAccount();k.address=e.address,k.isConnected=e.isConnected},async fetchProfile(e,t){var n;try{k.profileLoading=!0,k.profileName=null,k.profileAvatar=null;const s=t??k.address,r=1,i=null==(n=w.state.chains)?void 0:n.find((e=>e.id===r));if(s&&i){try{const e=await A.getIdentity(s,r);k.profileName=e.name,k.profileAvatar=e.avatar}catch{const e=await g.client().fetchEnsName({address:s,chainId:r});if(k.profileName=e,e){const t=await g.client().fetchEnsAvatar({name:e,chainId:r});k.profileAvatar=t}}k.profileAvatar&&await e(k.profileAvatar)}}finally{k.profileLoading=!1}},async fetchBalance(e){try{const{chain:t}=g.client().getNetwork(),{tokenContracts:n}=E.state;let s;t&&n&&(s=n[t.id]),k.balanceLoading=!0;const r=e??k.address;if(r){const e=await g.client().fetchBalance({address:r,token:s});k.balance={amount:e.formatted,symbol:e.symbol}}}finally{k.balanceLoading=!1}},setAddress(e){k.address=e},setIsConnected(e){k.isConnected=e},resetBalance(){k.balance=void 0},resetAccount(){k.address=void 0,k.isConnected=!1,k.profileName=void 0,k.profileAvatar=void 0,k.balance=void 0}};var P=Object.defineProperty,x=Object.getOwnPropertySymbols,S=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable,C=(e,t,n)=>t in e?P(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const T="https://explorer-api.walletconnect.com",O="w3m",N="js-2.7.1";async function j(e,t){const n=((e,t)=>{for(var n in t||(t={}))S.call(t,n)&&C(e,n,t[n]);if(x)for(var n of x(t))I.call(t,n)&&C(e,n,t[n]);return e})({sdkType:O,sdkVersion:N},t),s=new URL(e,T);return s.searchParams.append("projectId",E.state.projectId),Object.entries(n).forEach((([e,t])=>{t&&s.searchParams.append(e,String(t))})),(await fetch(s)).json()}const L={getDesktopListings:async e=>j("/w3m/v1/getDesktopListings",e),getMobileListings:async e=>j("/w3m/v1/getMobileListings",e),getInjectedListings:async e=>j("/w3m/v1/getInjectedListings",e),getAllListings:async e=>j("/w3m/v1/getAllListings",e),getWalletImageUrl:e=>`${T}/w3m/v1/getWalletImage/${e}?projectId=${E.state.projectId}&sdkType=${O}&sdkVersion=${N}`,getAssetImageUrl:e=>`${T}/w3m/v1/getAssetImage/${e}?projectId=${E.state.projectId}&sdkType=${O}&sdkVersion=${N}`};var B=Object.defineProperty,R=Object.getOwnPropertySymbols,M=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable,D=(e,t,n)=>t in e?B(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const F=p.isMobile(),$=l({wallets:{listings:[],total:0,page:1},injectedWallets:[],search:{listings:[],total:0,page:1},recomendedWallets:[]}),G={state:$,async getRecomendedWallets(){const{explorerRecommendedWalletIds:e,explorerExcludedWalletIds:t}=E.state;if("NONE"===e||"ALL"===t&&!e)return $.recomendedWallets;if(p.isArray(e)){const t={recommendedIds:e.join(",")},{listings:n}=await L.getAllListings(t),s=Object.values(n);s.sort(((t,n)=>e.indexOf(t.id)-e.indexOf(n.id))),$.recomendedWallets=s}else{const e=p.isArray(t),n={page:1,entries:p.RECOMMENDED_WALLET_AMOUNT,version:2,excludedIds:e?t.join(","):void 0},{listings:s}=F?await L.getMobileListings(n):await L.getDesktopListings(n);$.recomendedWallets=Object.values(s)}return $.recomendedWallets},async getWallets(e){const t=((e,t)=>{for(var n in t||(t={}))M.call(t,n)&&D(e,n,t[n]);if(R)for(var n of R(t))U.call(t,n)&&D(e,n,t[n]);return e})({},e),{explorerRecommendedWalletIds:n,explorerExcludedWalletIds:s}=E.state,{recomendedWallets:r}=$;if("ALL"===s)return $.wallets;r.length?t.excludedIds=r.map((e=>e.id)).join(","):p.isArray(n)&&(t.excludedIds=n.join(",")),p.isArray(s)&&(t.excludedIds=[t.excludedIds,s].filter(Boolean).join(","));const{page:i,search:a}=e,{listings:o,total:c}=F?await L.getMobileListings(t):await L.getDesktopListings(t),l=Object.values(o),u=a?"search":"wallets";return $[u]={listings:[...$[u].listings,...l],total:c,page:i??1},{listings:l,total:c}},async getInjectedWallets(){const{listings:e}=await L.getInjectedListings({}),t=Object.values(e);return $.injectedWallets=t,$.injectedWallets},getWalletImageUrl:e=>L.getWalletImageUrl(e),getAssetImageUrl:e=>L.getAssetImageUrl(e),resetSearch(){$.search={listings:[],total:0,page:1}}},H=l({pairingEnabled:!1,pairingUri:"",pairingError:!1}),z={state:H,subscribe:e=>u(H,(()=>e(H))),setPairingUri(e){H.pairingUri=e},setPairingError(e){H.pairingError=e},setPairingEnabled(e){H.pairingEnabled=e}},W=l({open:!1}),q={state:W,subscribe:e=>u(W,(()=>e(W))),open:async e=>new Promise((t=>{const{isUiLoaded:n,isDataLoaded:s,isPreferInjected:r,selectedChain:i}=w.state,{isConnected:a}=_.state,{enableNetworkView:o}=E.state;if(z.setPairingEnabled(!0),a||p.removeWalletConnectDeepLink(),null!=e&&e.route)d.reset(e.route);else if(a)d.reset("Account");else if(o)d.reset("SelectNetwork");else{if(r)return g.client().connectConnector("injected",i?.id).catch((e=>console.error(e))),void t();d.reset("ConnectWallet")}const{pairingUri:c}=z.state;if(n&&s&&(c||a))W.open=!0,t();else{const e=setInterval((()=>{const n=w.state,s=z.state;n.isUiLoaded&&n.isDataLoaded&&(s.pairingUri||a)&&(clearInterval(e),W.open=!0,t())}),200)}})),close(){W.open=!1}};var V=Object.defineProperty,K=Object.getOwnPropertySymbols,J=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable,Y=(e,t,n)=>t in e?V(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const Z=l({themeMode:typeof matchMedia<"u"&&matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}),X={state:Z,subscribe:e=>u(Z,(()=>e(Z))),setThemeConfig(e){const{themeMode:t,themeVariables:n}=e;t&&(Z.themeMode=t),n&&(Z.themeVariables=((e,t)=>{for(var n in t||(t={}))J.call(t,n)&&Y(e,n,t[n]);if(K)for(var n of K(t))Q.call(t,n)&&Y(e,n,t[n]);return e})({},n))}},ee=l({open:!1,message:"",variant:"success"}),te={state:ee,subscribe:e=>u(ee,(()=>e(ee))),openToast(e,t){ee.open=!0,ee.message=e,ee.variant=t},closeToast(){ee.open=!1}}},6127:(e,t,n)=>{"use strict";n.d(t,{E:()=>r});var s=n(6523);function r(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?(0,s.P)(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}},5609:(e,t,n)=>{"use strict";n.d(t,{z:()=>i});var s=n(6127),r=n(6523);function i(e,t){t||(t=e.reduce(((e,t)=>e+t.length),0));const n=(0,s.E)(t);let i=0;for(const t of e)n.set(t,i),i+=t.length;return(0,r.P)(n)}},2818:(e,t,n)=>{"use strict";n.d(t,{m:()=>i});var s=n(7854),r=n(6523);function i(e,t="utf8"){const n=s.Z[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?n.decoder.decode(`${n.prefix}${e}`):(0,r.P)(globalThis.Buffer.from(e,"utf-8"))}},1627:(e,t,n)=>{"use strict";n.d(t,{BB:()=>i.B,mL:()=>r.m,zo:()=>s.z});var s=n(5609),r=n(2818),i=n(466)},466:(e,t,n)=>{"use strict";n.d(t,{B:()=>r});var s=n(7854);function r(e,t="utf8"){const n=s.Z[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?n.encoder.encode(e).substring(1):globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}},6523:(e,t,n)=>{"use strict";function s(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}n.d(t,{P:()=>s})},7854:(e,t,n)=>{"use strict";n.d(t,{Z:()=>ze});var s={};n.r(s),n.d(s,{identity:()=>I});var r={};n.r(r),n.d(r,{base2:()=>C});var i={};n.r(i),n.d(i,{base8:()=>T});var a={};n.r(a),n.d(a,{base10:()=>O});var o={};n.r(o),n.d(o,{base16:()=>N,base16upper:()=>j});var c={};n.r(c),n.d(c,{base32:()=>L,base32hex:()=>U,base32hexpad:()=>F,base32hexpadupper:()=>$,base32hexupper:()=>D,base32pad:()=>R,base32padupper:()=>M,base32upper:()=>B,base32z:()=>G});var l={};n.r(l),n.d(l,{base36:()=>H,base36upper:()=>z});var u={};n.r(u),n.d(u,{base58btc:()=>W,base58flickr:()=>q});var h={};n.r(h),n.d(h,{base64:()=>V,base64pad:()=>K,base64url:()=>J,base64urlpad:()=>Q});var d={};n.r(d),n.d(d,{base256emoji:()=>ee});var p={};n.r(p),n.d(p,{sha256:()=>Pe,sha512:()=>xe});var f={};n.r(f),n.d(f,{identity:()=>Ie});var g={};n.r(g),n.d(g,{code:()=>Te,decode:()=>Ne,encode:()=>Oe,name:()=>Ce});var m={};n.r(m),n.d(m,{code:()=>Re,decode:()=>Ue,encode:()=>Me,name:()=>Be});var y=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),s=0;s<n.length;s++)n[s]=255;for(var r=0;r<e.length;r++){var i=e.charAt(r),a=i.charCodeAt(0);if(255!==n[a])throw new TypeError(i+" is ambiguous");n[a]=r}var o=e.length,c=e.charAt(0),l=Math.log(o)/Math.log(256),u=Math.log(256)/Math.log(o);function h(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var s=0,r=0;e[t]===c;)s++,t++;for(var i=(e.length-t)*l+1>>>0,a=new Uint8Array(i);e[t];){var u=n[e.charCodeAt(t)];if(255===u)return;for(var h=0,d=i-1;(0!==u||h<r)&&-1!==d;d--,h++)u+=o*a[d]>>>0,a[d]=u%256>>>0,u=u/256>>>0;if(0!==u)throw new Error("Non-zero carry");r=h,t++}if(" "!==e[t]){for(var p=i-r;p!==i&&0===a[p];)p++;for(var f=new Uint8Array(s+(i-p)),g=s;p!==i;)f[g++]=a[p++];return f}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var n=0,s=0,r=0,i=t.length;r!==i&&0===t[r];)r++,n++;for(var a=(i-r)*u+1>>>0,l=new Uint8Array(a);r!==i;){for(var h=t[r],d=0,p=a-1;(0!==h||d<s)&&-1!==p;p--,d++)h+=256*l[p]>>>0,l[p]=h%o>>>0,h=h/o>>>0;if(0!==h)throw new Error("Non-zero carry");s=d,r++}for(var f=a-s;f!==a&&0===l[f];)f++;for(var g=c.repeat(n);f<a;++f)g+=e.charAt(l[f]);return g},decodeUnsafe:h,decode:function(e){var n=h(e);if(n)return n;throw new Error(`Non-${t} character`)}}};const b=y,w=(new Uint8Array(0),e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")});class v{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class E{constructor(e,t,n){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return k(this,e)}}class A{constructor(e){this.decoders=e}or(e){return k(this,e)}decode(e){const t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const k=(e,t)=>new A({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class _{constructor(e,t,n,s){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=s,this.encoder=new v(e,t,n),this.decoder=new E(e,t,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const P=({name:e,prefix:t,encode:n,decode:s})=>new _(e,t,n,s),x=({prefix:e,name:t,alphabet:n})=>{const{encode:s,decode:r}=b(n,t);return P({prefix:e,name:t,encode:s,decode:e=>w(r(e))})},S=({name:e,prefix:t,bitsPerChar:n,alphabet:s})=>P({prefix:t,name:e,encode:e=>((e,t,n)=>{const s="="===t[t.length-1],r=(1<<n)-1;let i="",a=0,o=0;for(let s=0;s<e.length;++s)for(o=o<<8|e[s],a+=8;a>n;)a-=n,i+=t[r&o>>a];if(a&&(i+=t[r&o<<n-a]),s)for(;i.length*n&7;)i+="=";return i})(e,s,n),decode:t=>((e,t,n,s)=>{const r={};for(let e=0;e<t.length;++e)r[t[e]]=e;let i=e.length;for(;"="===e[i-1];)--i;const a=new Uint8Array(i*n/8|0);let o=0,c=0,l=0;for(let t=0;t<i;++t){const i=r[e[t]];if(void 0===i)throw new SyntaxError(`Non-${s} character`);c=c<<n|i,o+=n,o>=8&&(o-=8,a[l++]=255&c>>o)}if(o>=n||255&c<<8-o)throw new SyntaxError("Unexpected end of data");return a})(t,s,n,e)}),I=P({prefix:"\0",name:"identity",encode:e=>{return t=e,(new TextDecoder).decode(t);var t},decode:e=>(e=>(new TextEncoder).encode(e))(e)}),C=S({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),T=S({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),O=x({prefix:"9",name:"base10",alphabet:"0123456789"}),N=S({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),j=S({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),L=S({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),B=S({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),R=S({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),M=S({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),U=S({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),D=S({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),F=S({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),$=S({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),G=S({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),H=x({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),z=x({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),W=x({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),q=x({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),V=S({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),K=S({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),J=S({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Q=S({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Y=Array.from(""),Z=Y.reduce(((e,t,n)=>(e[n]=t,e)),[]),X=Y.reduce(((e,t,n)=>(e[t.codePointAt(0)]=n,e)),[]);const ee=P({prefix:"",name:"base256emoji",encode:function(e){return e.reduce(((e,t)=>e+=Z[t]),"")},decode:function(e){const t=[];for(const n of e){const e=X[n.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${n}`);t.push(e)}return new Uint8Array(t)}});var te=function e(t,n,s){n=n||[];var r=s=s||0;for(;t>=re;)n[s++]=255&t|ne,t/=128;for(;t&se;)n[s++]=255&t|ne,t>>>=7;return n[s]=0|t,e.bytes=s-r+1,n},ne=128,se=-128,re=Math.pow(2,31);var ie=function e(t,n){var s,r=0,i=0,a=n=n||0,o=t.length;do{if(a>=o)throw e.bytes=0,new RangeError("Could not decode varint");s=t[a++],r+=i<28?(s&oe)<<i:(s&oe)*Math.pow(2,i),i+=7}while(s>=ae);return e.bytes=a-n,r},ae=128,oe=127;var ce=Math.pow(2,7),le=Math.pow(2,14),ue=Math.pow(2,21),he=Math.pow(2,28),de=Math.pow(2,35),pe=Math.pow(2,42),fe=Math.pow(2,49),ge=Math.pow(2,56),me=Math.pow(2,63);const ye={encode:te,decode:ie,encodingLength:function(e){return e<ce?1:e<le?2:e<ue?3:e<he?4:e<de?5:e<pe?6:e<fe?7:e<ge?8:e<me?9:10}},be=(e,t,n=0)=>(ye.encode(e,t,n),t),we=e=>ye.encodingLength(e),ve=(e,t)=>{const n=t.byteLength,s=we(e),r=s+we(n),i=new Uint8Array(r+n);return be(e,i,0),be(n,i,s),i.set(t,r),new Ee(e,n,t,i)};class Ee{constructor(e,t,n,s){this.code=e,this.size=t,this.digest=n,this.bytes=s}}const Ae=({name:e,code:t,encode:n})=>new ke(e,t,n);class ke{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?ve(this.code,t):t.then((e=>ve(this.code,e)))}throw Error("Unknown type, must be binary type")}}const _e=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),Pe=Ae({name:"sha2-256",code:18,encode:_e("SHA-256")}),xe=Ae({name:"sha2-512",code:19,encode:_e("SHA-512")}),Se=w,Ie={code:0,name:"identity",encode:Se,digest:e=>ve(0,Se(e))},Ce="raw",Te=85,Oe=e=>w(e),Ne=e=>w(e),je=new TextEncoder,Le=new TextDecoder,Be="json",Re=512,Me=e=>je.encode(JSON.stringify(e)),Ue=e=>JSON.parse(Le.decode(e));Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom");Symbol.for("@ipld/js-cid/CID");const De={...s,...r,...i,...a,...o,...c,...l,...u,...h,...d};var Fe=n(6127);function $e(e,t,n,s){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:s}}}const Ge=$e("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),He=$e("ascii","a",(e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}),(e=>{e=e.substring(1);const t=(0,Fe.E)(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t})),ze={utf8:Ge,"utf-8":Ge,hex:De.base16,latin1:He,ascii:He,binary:He,...De}},589:(e,t,n)=>{"use strict";function s(e){return"string"==typeof e?{address:e,type:"json-rpc"}:e}n.d(t,{T:()=>s})},8411:(e,t,n)=>{"use strict";n.d(t,{R:()=>w});var s=n(589),r=n(6597);const i="0x82ad56cb";var a=n(2671),o=n(7033),c=n(935),l=n(1982),u=n(1106),h=n(6137),d=n(8138),p=n(2675),f=n(9966);var g=n(2090),m=n(6011),y=n(4426),b=n(9362);async function w(e,t){const{account:w=e.account,batch:v=Boolean(e.batch?.multicall),blockNumber:E,blockTag:A="latest",accessList:k,data:_,gas:P,gasPrice:x,maxFeePerGas:S,maxPriorityFeePerGas:I,nonce:C,to:T,value:O,...N}=t,j=w?(0,s.T)(w):void 0;try{(0,b.F)(t);const n=(E?(0,d.eC)(E):void 0)||A,s=e.chain?.formatters?.transactionRequest?.format,a=(s||m.tG)({...(0,g.K)(N,{format:s}),from:j?.address,accessList:k,data:_,gas:P,gasPrice:x,maxFeePerGas:S,maxPriorityFeePerGas:I,nonce:C,to:T,value:O});if(v&&function({request:e}){const{data:t,to:n,...s}=e;return!!t&&(!t.startsWith(i)&&(!!n&&!(Object.values(s).filter((e=>void 0!==e)).length>0)))}({request:a}))try{return await async function(e,t){const{batchSize:n=1024,wait:s=0}="object"==typeof e.batch?.multicall?e.batch.multicall:{},{blockNumber:i,blockTag:a="latest",data:p,multicallAddress:f,to:g}=t;let m=f;if(!m){if(!e.chain)throw new o.pZ;m=(0,h.L)({blockNumber:i,chain:e.chain,contract:"multicall3"})}const b=i?(0,d.eC)(i):void 0,w=b||a,{schedule:v}=(0,y.S)({id:`${e.uid}.${w}`,wait:s,shouldSplitBatch(e){const t=e.reduce(((e,{data:t})=>e+(t.length-2)),0);return t>2*n},fn:async t=>{const n=t.map((e=>({allowFailure:!0,callData:e.data,target:e.to}))),s=(0,u.R)({abi:r.F8,args:[n],functionName:"aggregate3"}),i=await e.request({method:"eth_call",params:[{data:s,to:m},w]});return(0,l.k)({abi:r.F8,args:[n],functionName:"aggregate3",data:i||"0x"})}}),[{returnData:E,success:A}]=await v({data:p,to:g});if(!A)throw new c.VQ({data:E});return"0x"===E?{data:void 0}:{data:E}}(e,{...a,blockNumber:E,blockTag:A})}catch(e){if(!(e instanceof o.pZ||e instanceof o.mm))throw e}const p=await e.request({method:"eth_call",params:n?[a,n]:[a]});return"0x"===p?{data:void 0}:{data:p}}catch(s){const r=function(e){if(!(e instanceof a.G))return;const t=e.walk();return"object"==typeof t.data?t.data.data:t.data}(s),{offchainLookup:i,offchainLookupSignature:o}=await n.e(93).then(n.bind(n,1093));if(r?.slice(0,10)===o&&T)return{data:await i(e,{data:r,to:T})};throw function(e,{docsPath:t,...n}){const s=(()=>{const t=(0,f.k)(e,n);return t instanceof p.cj?e:t})();return new c.cg(s,{docsPath:t,...n})}(s,{...t,account:j,chain:e.chain})}}},6597:(e,t,n)=>{"use strict";n.d(t,{$o:()=>l,F8:()=>s,X$:()=>c,du:()=>a,k3:()=>i,nZ:()=>o});const s=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],r=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"}],i=[...r,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],a=[...r,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],o=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],c=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],l=[{inputs:[{internalType:"address",name:"_signer",type:"address"},{internalType:"bytes32",name:"_hash",type:"bytes32"},{internalType:"bytes",name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"}]},1151:(e,t,n)=>{"use strict";n.d(t,{$:()=>s,Up:()=>r,hZ:()=>i});const s={1:"An `assert` condition failed.",17:"Arithmic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},r={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},i={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"}},3339:(e,t,n)=>{"use strict";n.d(t,{Bd:()=>i,Zn:()=>r,ez:()=>s});const s={gwei:9,wei:18},r={ether:-9,wei:9},i={ether:-18,gwei:-9}},1417:(e,t,n)=>{"use strict";n.d(t,{CI:()=>_,FM:()=>f,Gy:()=>A,KY:()=>v,M4:()=>h,MX:()=>b,S4:()=>w,SM:()=>E,cO:()=>o,dh:()=>k,fM:()=>a,fs:()=>d,gr:()=>u,hn:()=>P,lC:()=>g,mv:()=>m,wM:()=>x,wb:()=>l,xB:()=>c,xL:()=>y,yP:()=>p});var s=n(1909),r=n(9402),i=n(2671);class a extends i.G{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join("\n"),{docsPath:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiConstructorNotFoundError"})}}class o extends i.G{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join("\n"),{docsPath:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiConstructorParamsNotFoundError"})}}i.G;class c extends i.G{constructor({data:e,params:t,size:n}){super([`Data size of ${n} bytes is too small for given parameters.`].join("\n"),{metaMessages:[`Params: (${(0,s.h)(t,{includeName:!0})})`,`Data:   ${e} (${n} bytes)`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=t,this.size=n}}class l extends i.G{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.'),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiDecodingZeroDataError"})}}class u extends i.G{constructor({expectedLength:e,givenLength:t,type:n}){super([`ABI encoding array length mismatch for type ${n}.`,`Expected length: ${e}`,`Given length: ${t}`].join("\n")),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEncodingArrayLengthMismatchError"})}}class h extends i.G{constructor({expectedSize:e,value:t}){super(`Size of bytes "${t}" (bytes${(0,r.d)(t)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEncodingBytesSizeMismatchError"})}}class d extends i.G{constructor({expectedLength:e,givenLength:t}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${t}`].join("\n")),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEncodingLengthMismatchError"})}}i.G;i.G;class p extends i.G{constructor(e,{docsPath:t}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join("\n"),{docsPath:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class f extends i.G{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEventSignatureEmptyTopicsError"})}}class g extends i.G{constructor(e,{docsPath:t}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join("\n"),{docsPath:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEventSignatureNotFoundError"})}}class m extends i.G{constructor(e,{docsPath:t}={}){super([`Event ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join("\n"),{docsPath:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEventNotFoundError"})}}class y extends i.G{constructor(e,{docsPath:t}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join("\n"),{docsPath:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiFunctionNotFoundError"})}}class b extends i.G{constructor(e,{docsPath:t}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join("\n"),{docsPath:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiFunctionOutputsNotFoundError"})}}i.G;class w extends i.G{constructor(e,t){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${(0,s.t)(e.abiItem)}\`, and`,`\`${t.type}\` in \`${(0,s.t)(t.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItemAmbiguityError"})}}class v extends i.G{constructor({expectedSize:e,givenSize:t}){super(`Expected bytes${e}, got bytes${t}.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BytesSizeMismatchError"})}}class E extends i.G{constructor({abiItem:e,data:t,params:n,size:r}){super([`Data size of ${r} bytes is too small for non-indexed event parameters.`].join("\n"),{metaMessages:[`Params: (${(0,s.h)(n,{includeName:!0})})`,`Data:   ${t} (${r} bytes)`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=t,this.params=n,this.size=r}}class A extends i.G{constructor({abiItem:e,param:t}){super([`Expected a topic for indexed event parameter${t.name?` "${t.name}"`:""} on event "${(0,s.t)(e,{includeName:!0})}".`].join("\n")),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class k extends i.G{constructor(e,{docsPath:t}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join("\n"),{docsPath:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiEncodingType"})}}class _ extends i.G{constructor(e,{docsPath:t}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join("\n"),{docsPath:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiDecodingType"})}}class P extends i.G{constructor(e){super([`Value "${e}" is not a valid array.`].join("\n")),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidArrayError"})}}class x extends i.G{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join("\n")),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidDefinitionTypeError"})}}i.G},31:(e,t,n)=>{"use strict";n.d(t,{b:()=>r});var s=n(2671);class r extends s.G{constructor({address:e}){super(`Address "${e}" is invalid.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAddressError"})}}},2671:(e,t,n)=>{"use strict";n.d(t,{G:()=>r});var s=n(8167);class r extends Error{constructor(e,t={}){super(),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ViemError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:(0,s.bo)()});const n=t.cause instanceof r?t.cause.details:t.cause?.message?t.cause.message:t.details,i=t.cause instanceof r&&t.cause.docsPath||t.docsPath;this.message=[e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...i?[`Docs: https://viem.sh${i}.html${t.docsSlug?`#${t.docsSlug}`:""}`]:[],...n?[`Details: ${n}`]:[],`Version: ${this.version}`].join("\n"),t.cause&&(this.cause=t.cause),this.details=n,this.docsPath=i,this.metaMessages=t.metaMessages,this.shortMessage=e}walk(e){return i(this,e)}}function i(e,t){return t?.(e)?e:e&&"object"==typeof e&&"cause"in e?i(e.cause,t):t?null:e}},7033:(e,t,n)=>{"use strict";n.d(t,{Bk:()=>a,Yl:()=>i,mm:()=>r,pZ:()=>o});var s=n(2671);class r extends s.G{constructor({blockNumber:e,chain:t,contract:n}){super(`Chain "${t.name}" does not support contract "${n.name}".`,{metaMessages:["This could be due to any of the following:",...e&&n.blockCreated&&n.blockCreated>e?[`- The contract "${n.name}" was not deployed until block ${n.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${n.name}" configured.`]]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainDoesNotSupportContract"})}}class i extends s.G{constructor({chain:e,currentChainId:t}){super(`The current chain of the wallet (id: ${t}) does not match the target chain for the transaction (id: ${e.id}  ${e.name}).`,{metaMessages:[`Current Chain ID:  ${t}`,`Expected Chain ID: ${e.id}  ${e.name}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainMismatchError"})}}class a extends s.G{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join("\n")),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotFoundError"})}}class o extends s.G{constructor(){super("No chain was provided to the Client."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ClientChainNotConfiguredError"})}}s.G},935:(e,t,n)=>{"use strict";n.d(t,{cg:()=>m,uq:()=>y,Lu:()=>b,Dk:()=>w,VQ:()=>v});var s=n(589),r=n(1151),i=n(3680),a=n(1909),o=n(305);function c({abiItem:e,args:t,includeFunctionName:n=!0,includeName:s=!1}){if("name"in e&&"inputs"in e&&e.inputs)return`${n?e.name:""}(${e.inputs.map(((e,n)=>`${s&&e.name?`${e.name}: `:""}${"object"==typeof t[n]?(0,o.P)(t[n]):t[n]}`)).join(", ")})`}var l=n(3058),u=n(7631),h=n(9589),d=n(1417),p=n(2671),f=n(9955),g=n(8167);class m extends p.G{constructor(e,{account:t,docsPath:n,chain:r,data:i,gas:a,gasPrice:o,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:d,to:p,value:g}){const m=t?(0,s.T)(t):void 0,y=(0,f.xr)({from:m?.address,to:p,value:void 0!==g&&`${(0,u.d)(g)} ${r?.nativeCurrency?.symbol||"ETH"}`,data:i,gas:a,gasPrice:void 0!==o&&`${(0,h.o)(o)} gwei`,maxFeePerGas:void 0!==c&&`${(0,h.o)(c)} gwei`,maxPriorityFeePerGas:void 0!==l&&`${(0,h.o)(l)} gwei`,nonce:d});super(e.shortMessage,{cause:e,docsPath:n,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",y].filter(Boolean)}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CallExecutionError"}),this.cause=e}}class y extends p.G{constructor(e,{abi:t,args:n,contractAddress:s,docsPath:r,functionName:i,sender:o}){const u=(0,l.mE)({abi:t,args:n,name:i}),h=u?c({abiItem:u,args:n,includeFunctionName:!1,includeName:!1}):void 0,d=u?(0,a.t)(u,{includeName:!0}):void 0,p=(0,f.xr)({address:s&&(0,g.CR)(s),function:d,args:h&&"()"!==h&&`${[...Array(i?.length??0).keys()].map((()=>" ")).join("")}${h}`,sender:o});super(e.shortMessage||`An unknown error occurred while executing the contract function "${i}".`,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Contract Call:",p].filter(Boolean)}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ContractFunctionExecutionError"}),this.abi=t,this.args=n,this.cause=e,this.contractAddress=s,this.functionName=i,this.sender=o}}class b extends p.G{constructor({abi:e,data:t,functionName:n,message:s}){let o,l,u,h,p;if(t&&"0x"!==t)try{l=(0,i.p)({abi:e,data:t});const{abiItem:n,errorName:s,args:o}=l;if("Error"===s)h=o[0];else if("Panic"===s){const[e]=o;h=r.$[e]}else{const e=n?(0,a.t)(n,{includeName:!0}):void 0,t=n&&o?c({abiItem:n,args:o,includeFunctionName:!1,includeName:!1}):void 0;u=[e?`Error: ${e}`:"",t&&"()"!==t?`       ${[...Array(s?.length??0).keys()].map((()=>" ")).join("")}${t}`:""]}}catch(e){o=e}else s&&(h=s);o instanceof d.yP&&(p=o.signature,u=[`Unable to decode signature "${p}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${p}.`]),super(h&&"execution reverted"!==h||p?[`The contract function "${n}" reverted with the following ${p?"signature":"reason"}:`,h||p].join("\n"):`The contract function "${n}" reverted.`,{cause:o,metaMessages:u}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=l,this.reason=h,this.signature=p}}class w extends p.G{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ContractFunctionZeroDataError"})}}class v extends p.G{constructor({data:e,message:t}){super(t||""),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RawContractError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}},1371:(e,t,n)=>{"use strict";n.d(t,{$:()=>i,m:()=>r});var s=n(2671);class r extends s.G{constructor({offset:e,position:t,size:n}){super(`Slice ${"start"===t?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${n}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SliceOffsetOutOfBoundsError"})}}class i extends s.G{constructor({size:e,targetSize:t,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SizeExceedsPaddingSizeError"})}}},5390:(e,t,n)=>{"use strict";n.d(t,{Cd:()=>i,J5:()=>r,M6:()=>a});var s=n(2671);s.G;s.G;class r extends s.G{constructor({max:e,min:t,signed:n,size:s,value:r}){super(`Number "${r}" is not in safe ${s?`${8*s}-bit ${n?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"IntegerOutOfRangeError"})}}s.G;class i extends s.G{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidHexBooleanError"})}}s.G;s.G;class a extends s.G{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SizeOverflowError"})}}},2675:(e,t,n)=>{"use strict";n.d(t,{C_:()=>h,G$:()=>o,Hh:()=>a,M_:()=>i,WF:()=>d,ZI:()=>c,cj:()=>m,cs:()=>g,dR:()=>p,pZ:()=>f,se:()=>u,vU:()=>l});var s=n(9589),r=n(2671);class i extends r.G{constructor({cause:e,message:t}={}){const n=t?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${n?`with reason: ${n}`:"for an unknown reason"}.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ExecutionRevertedError"})}}Object.defineProperty(i,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(i,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class a extends r.G{constructor({cause:e,maxFeePerGas:t}={}){super(`The fee cap (\`maxFeePerGas\`${t?` = ${(0,s.o)(t)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"FeeCapTooHigh"})}}Object.defineProperty(a,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class o extends r.G{constructor({cause:e,maxFeePerGas:t}={}){super(`The fee cap (\`maxFeePerGas\`${t?` = ${(0,s.o)(t)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"FeeCapTooLow"})}}Object.defineProperty(o,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class c extends r.G{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}is higher than the next one expected.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"NonceTooHighError"})}}Object.defineProperty(c,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class l extends r.G{constructor({cause:e,nonce:t}={}){super([`Nonce provided for the transaction ${t?`(${t}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join("\n"),{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"NonceTooLowError"})}}Object.defineProperty(l,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class u extends r.G{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}exceeds the maximum allowed nonce.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"NonceMaxValueError"})}}Object.defineProperty(u,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class h extends r.G{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join("\n"),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InsufficientFundsError"})}}Object.defineProperty(h,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds/});class d extends r.G{constructor({cause:e,gas:t}={}){super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"IntrinsicGasTooHighError"})}}Object.defineProperty(d,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class p extends r.G{constructor({cause:e,gas:t}={}){super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction is too low.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"IntrinsicGasTooLowError"})}}Object.defineProperty(p,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class f extends r.G{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TransactionTypeNotSupportedError"})}}Object.defineProperty(f,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class g extends r.G{constructor({cause:e,maxPriorityFeePerGas:t,maxFeePerGas:n}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${t?` = ${(0,s.o)(t)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${n?` = ${(0,s.o)(n)} gwei`:""}).`].join("\n"),{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TipAboveFeeCapError"})}}Object.defineProperty(g,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class m extends r.G{constructor({cause:e}){super(`An error occurred while executing: ${e?.shortMessage}`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownNodeError"})}}},3731:(e,t,n)=>{"use strict";n.d(t,{Gg:()=>a,W5:()=>l,bs:()=>c,c9:()=>o});var s=n(305),r=n(2671),i=n(8167);class a extends r.G{constructor({body:e,details:t,headers:n,status:r,url:a}){super("HTTP request failed.",{details:t,metaMessages:[r&&`Status: ${r}`,`URL: ${(0,i.Gr)(a)}`,e&&`Request body: ${(0,s.P)(e)}`].filter(Boolean)}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=n,this.status=r,this.url=a}}class o extends r.G{constructor({body:e,details:t,url:n}){super("WebSocket request failed.",{details:t,metaMessages:[`URL: ${(0,i.Gr)(n)}`,`Request body: ${(0,s.P)(e)}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WebSocketRequestError"})}}class c extends r.G{constructor({body:e,error:t,url:n}){super("RPC Request failed.",{cause:t,details:t.message,metaMessages:[`URL: ${(0,i.Gr)(n)}`,`Request body: ${(0,s.P)(e)}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=t.code}}class l extends r.G{constructor({body:e,url:t}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${(0,i.Gr)(t)}`,`Request body: ${(0,s.P)(e)}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TimeoutError"})}}},9955:(e,t,n)=>{"use strict";n.d(t,{Bh:()=>u,Yb:()=>h,j3:()=>c,mc:()=>d,mk:()=>l,xY:()=>o,xr:()=>a});var s=n(7631),r=n(9589),i=n(2671);function a(e){const t=Object.entries(e).map((([e,t])=>void 0===t||!1===t?null:[e,t])).filter(Boolean),n=t.reduce(((e,[t])=>Math.max(e,t.length)),0);return t.map((([e,t])=>`  ${`${e}:`.padEnd(n+1)}  ${t}`)).join("\n")}class o extends i.G{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join("\n")),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"FeeConflictError"})}}i.G;class c extends i.G{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",a(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- a Legacy Transaction with `gasPrice`"]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSerializableTransactionError"})}}i.G;i.G;i.G;class l extends i.G{constructor(e,{account:t,docsPath:n,chain:i,data:o,gas:c,gasPrice:l,maxFeePerGas:u,maxPriorityFeePerGas:h,nonce:d,to:p,value:f}){const g=a({chain:i&&`${i?.name} (id: ${i?.id})`,from:t?.address,to:p,value:void 0!==f&&`${(0,s.d)(f)} ${i?.nativeCurrency?.symbol||"ETH"}`,data:o,gas:c,gasPrice:void 0!==l&&`${(0,r.o)(l)} gwei`,maxFeePerGas:void 0!==u&&`${(0,r.o)(u)} gwei`,maxPriorityFeePerGas:void 0!==h&&`${(0,r.o)(h)} gwei`,nonce:d});super(e.shortMessage,{cause:e,docsPath:n,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",g].filter(Boolean)}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TransactionExecutionError"}),this.cause=e}}class u extends i.G{constructor({blockHash:e,blockNumber:t,blockTag:n,hash:s,index:r}){let i="Transaction";n&&void 0!==r&&(i=`Transaction at block time "${n}" at index "${r}"`),e&&void 0!==r&&(i=`Transaction at block hash "${e}" at index "${r}"`),t&&void 0!==r&&(i=`Transaction at block number "${t}" at index "${r}"`),s&&(i=`Transaction with hash "${s}"`),super(`${i} could not be found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TransactionNotFoundError"})}}class h extends i.G{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TransactionReceiptNotFoundError"})}}class d extends i.G{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WaitForTransactionReceiptTimeoutError"})}}},8167:(e,t,n)=>{"use strict";n.d(t,{CR:()=>s,Gr:()=>r,bo:()=>i});const s=e=>e,r=e=>e,i=()=>"viem@1.21.3"},2549:(e,t,n)=>{"use strict";n.d(t,{r:()=>u});var s=n(1417),r=n(6731),i=n(9402),a=n(7913),o=n(2050),c=n(4702),l=n(1778);function u(e,t){if("0x"===t&&e.length>0)throw new s.wb;if((0,i.d)(t)&&(0,i.d)(t)<32)throw new s.xB({data:t,params:e,size:(0,i.d)(t)});return function({data:e,params:t}){const n=[];let r=0;for(let a=0;a<t.length;a++){if(r>=(0,i.d)(e))throw new s.xB({data:e,params:t,size:(0,i.d)(e)});const o=t[a],{consumed:c,value:l}=h({data:e,param:o,position:r});n.push(l),r+=c}return n}({data:t,params:e})}function h({data:e,param:t,position:n}){const i=(0,l.S)(t.type);if(i){const[s,r]=i;return function(e,{param:t,length:n,position:s}){if(!n){const n=(0,c.ly)((0,a.tP)(e,s,s+32,{strict:!0})),r=(0,c.ly)((0,a.tP)(e,n,n+32,{strict:!0}));let i=0;const o=[];for(let s=0;s<r;++s){const s=h({data:(0,a.tP)(e,n+32),param:t,position:i});i+=s.consumed,o.push(s.value)}return{value:o,consumed:32}}if(d(t)){const r=(0,l.S)(t.type),i=!r?.[0];let o=0;const u=[];for(let r=0;r<n;++r){const n=(0,c.ly)((0,a.tP)(e,s,s+32,{strict:!0})),l=h({data:(0,a.tP)(e,n),param:t,position:i?o:32*r});o+=l.consumed,u.push(l.value)}return{value:u,consumed:32}}let r=0;const i=[];for(let a=0;a<n;++a){const n=h({data:e,param:t,position:s+r});r+=n.consumed,i.push(n.value)}return{value:i,consumed:r}}(e,{length:s,param:{...t,type:r},position:n})}if("tuple"===t.type)return function(e,{param:t,position:n}){const s=0===t.components.length||t.components.some((({name:e})=>!e)),r=s?[]:{};let i=0;if(d(t)){const o=(0,c.ly)((0,a.tP)(e,n,n+32,{strict:!0}));for(let n=0;n<t.components.length;++n){const c=t.components[n],l=h({data:(0,a.tP)(e,o),param:c,position:i});i+=l.consumed,r[s?n:c?.name]=l.value}return{consumed:32,value:r}}for(let a=0;a<t.components.length;++a){const o=t.components[a],c=h({data:e,param:o,position:n+i});i+=c.consumed,r[s?a:o?.name]=c.value}return{consumed:i,value:r}}(e,{param:t,position:n});if("string"===t.type)return function(e,{position:t}){const n=(0,c.ly)((0,a.tP)(e,t,t+32,{strict:!0})),s=(0,c.ly)((0,a.tP)(e,n,n+32,{strict:!0}));if(0===s)return{consumed:32,value:""};const r=(0,c.rR)((0,o.f)((0,a.tP)(e,n+32,n+32+s,{strict:!0})));return{consumed:32,value:r}}(e,{position:n});if(t.type.startsWith("bytes"))return function(e,{param:t,position:n}){const[s,r]=t.type.split("bytes");if(!r){const t=(0,c.ly)((0,a.tP)(e,n,n+32,{strict:!0})),s=(0,c.ly)((0,a.tP)(e,t,t+32,{strict:!0}));if(0===s)return{consumed:32,value:"0x"};return{consumed:32,value:(0,a.tP)(e,t+32,t+32+s,{strict:!0})}}const i=(0,a.tP)(e,n,n+parseInt(r),{strict:!0});return{consumed:32,value:i}}(e,{param:t,position:n});const u=(0,a.tP)(e,n,n+32,{strict:!0});if(t.type.startsWith("uint")||t.type.startsWith("int"))return function(e,{param:t}){const n=t.type.startsWith("int"),s=parseInt(t.type.split("int")[1]||"256");return{consumed:32,value:s>48?(0,c.y_)(e,{signed:n}):(0,c.ly)(e,{signed:n})}}(u,{param:t});if("address"===t.type)return function(e){return{consumed:32,value:(0,r.x)((0,a.tP)(e,-20))}}(u);if("bool"===t.type)return function(e){return{consumed:32,value:(0,c.XA)(e)}}(u);throw new s.CI(t.type,{docsPath:"/docs/contract/decodeAbiParameters"})}function d(e){const{type:t}=e;if("string"===t)return!0;if("bytes"===t)return!0;if(t.endsWith("[]"))return!0;if("tuple"===t)return e.components?.some(d);const n=(0,l.S)(e.type);return!(!n||!d({...e,type:n[1]}))}},3680:(e,t,n)=>{"use strict";n.d(t,{p:()=>l});var s=n(1151),r=n(1417),i=n(7913),a=n(5686),o=n(2549),c=n(1909);function l({abi:e,data:t}){const n=(0,i.tP)(t,0,4);if("0x"===n)throw new r.wb;const l=[...e||[],s.Up,s.hZ].find((e=>"error"===e.type&&n===(0,a.o)((0,c.t)(e))));if(!l)throw new r.yP(n,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:l,args:"inputs"in l&&l.inputs&&l.inputs.length>0?(0,o.r)(l.inputs,(0,i.tP)(t,4)):void 0,errorName:l.name}}},1982:(e,t,n)=>{"use strict";n.d(t,{k:()=>o});var s=n(1417),r=n(2549),i=n(3058);const a="/docs/contract/decodeFunctionResult";function o({abi:e,args:t,functionName:n,data:o}){let c=e[0];if(n&&(c=(0,i.mE)({abi:e,args:t,name:n}),!c))throw new s.xL(n,{docsPath:a});if("function"!==c.type)throw new s.xL(void 0,{docsPath:a});if(!c.outputs)throw new s.MX(c.name,{docsPath:a});const l=(0,r.r)(c.outputs,o);return l&&l.length>1?l:l&&1===l.length?l[0]:void 0}},1778:(e,t,n)=>{"use strict";n.d(t,{E:()=>h,S:()=>f});var s=n(1417),r=n(31),i=n(151),a=n(1466),o=n(4221),c=n(9402),l=n(7913),u=n(8138);function h(e,t){if(e.length!==t.length)throw new s.fs({expectedLength:e.length,givenLength:t.length});const n=function({params:e,values:t}){const n=[];for(let s=0;s<e.length;s++)n.push(d({param:e[s],value:t[s]}));return n}({params:e,values:t}),r=p(n);return 0===r.length?"0x":r}function d({param:e,value:t}){const n=f(e.type);if(n){const[r,i]=n;return function(e,{length:t,param:n}){const r=null===t;if(!Array.isArray(e))throw new s.hn(e);if(!r&&e.length!==t)throw new s.gr({expectedLength:t,givenLength:e.length,type:`${n.type}[${t}]`});let i=!1;const o=[];for(let t=0;t<e.length;t++){const s=d({param:n,value:e[t]});s.dynamic&&(i=!0),o.push(s)}if(r||i){const e=p(o);if(r){const t=(0,u.eC)(o.length,{size:32});return{dynamic:!0,encoded:o.length>0?(0,a.zo)([t,e]):t}}if(i)return{dynamic:!0,encoded:e}}return{dynamic:!1,encoded:(0,a.zo)(o.map((({encoded:e})=>e)))}}(t,{length:r,param:{...e,type:i}})}if("tuple"===e.type)return function(e,{param:t}){let n=!1;const s=[];for(let r=0;r<t.components.length;r++){const i=t.components[r],a=d({param:i,value:e[Array.isArray(e)?r:i.name]});s.push(a),a.dynamic&&(n=!0)}return{dynamic:n,encoded:n?p(s):(0,a.zo)(s.map((({encoded:e})=>e)))}}(t,{param:e});if("address"===e.type)return function(e){if(!(0,i.U)(e))throw new r.b({address:e});return{dynamic:!1,encoded:(0,o.gc)(e.toLowerCase())}}(t);if("bool"===e.type)return function(e){return{dynamic:!1,encoded:(0,o.gc)((0,u.C4)(e))}}(t);if(e.type.startsWith("uint")||e.type.startsWith("int")){return function(e,{signed:t}){return{dynamic:!1,encoded:(0,u.eC)(e,{size:32,signed:t})}}(t,{signed:e.type.startsWith("int")})}if(e.type.startsWith("bytes"))return function(e,{param:t}){const[,n]=t.type.split("bytes"),r=(0,c.d)(e);if(!n){let t=e;return r%32!=0&&(t=(0,o.gc)(t,{dir:"right",size:32*Math.ceil((e.length-2)/2/32)})),{dynamic:!0,encoded:(0,a.zo)([(0,o.gc)((0,u.eC)(r,{size:32})),t])}}if(r!==parseInt(n))throw new s.M4({expectedSize:parseInt(n),value:e});return{dynamic:!1,encoded:(0,o.gc)(e,{dir:"right"})}}(t,{param:e});if("string"===e.type)return function(e){const t=(0,u.$G)(e),n=Math.ceil((0,c.d)(t)/32),s=[];for(let e=0;e<n;e++)s.push((0,o.gc)((0,l.tP)(t,32*e,32*(e+1)),{dir:"right"}));return{dynamic:!0,encoded:(0,a.zo)([(0,o.gc)((0,u.eC)((0,c.d)(t),{size:32})),...s])}}(t);throw new s.dh(e.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function p(e){let t=0;for(let n=0;n<e.length;n++){const{dynamic:s,encoded:r}=e[n];t+=s?32:(0,c.d)(r)}const n=[],s=[];let r=0;for(let i=0;i<e.length;i++){const{dynamic:a,encoded:o}=e[i];a?(n.push((0,u.eC)(t+r,{size:32})),s.push(o),r+=(0,c.d)(o)):n.push(o)}return(0,a.zo)([...n,...s])}function f(e){const t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}},1106:(e,t,n)=>{"use strict";n.d(t,{R:()=>l});var s=n(1417),r=n(1466),i=n(5686),a=n(1778),o=n(1909),c=n(3058);function l({abi:e,args:t,functionName:n}){let l=e[0];if(n&&(l=(0,c.mE)({abi:e,args:t,name:n}),!l))throw new s.xL(n,{docsPath:"/docs/contract/encodeFunctionData"});if("function"!==l.type)throw new s.xL(void 0,{docsPath:"/docs/contract/encodeFunctionData"});const u=(0,o.t)(l),h=(0,i.o)(u),d="inputs"in l&&l.inputs?(0,a.E)(l.inputs,t??[]):void 0;return(0,r.SM)([h,d??"0x"])}},1909:(e,t,n)=>{"use strict";n.d(t,{h:()=>i,t:()=>r});var s=n(1417);function r(e,{includeName:t=!1}={}){if("function"!==e.type&&"event"!==e.type&&"error"!==e.type)throw new s.wM(e.type);return`${e.name}(${i(e.inputs,{includeName:t})})`}function i(e,{includeName:t=!1}={}){return e?e.map((e=>function(e,{includeName:t}){if(e.type.startsWith("tuple"))return`(${i(e.components,{includeName:t})})${e.type.slice(5)}`;return e.type+(t&&e.name?` ${e.name}`:"")}(e,{includeName:t}))).join(t?", ":","):""}},3058:(e,t,n)=>{"use strict";n.d(t,{mE:()=>c});var s=n(1417),r=n(8426),i=n(4664),a=n(5686),o=n(151);function c({abi:e,args:t=[],name:n}){const o=(0,r.v)(n,{strict:!1}),c=e.filter((e=>o?"function"===e.type?(0,a.o)(e)===n:"event"===e.type&&(0,i.e)(e)===n:"name"in e&&e.name===n));if(0===c.length)return;if(1===c.length)return c[0];let h;for(const e of c){if(!("inputs"in e))continue;if(!t||0===t.length){if(!e.inputs||0===e.inputs.length)return e;continue}if(!e.inputs)continue;if(0===e.inputs.length)continue;if(e.inputs.length!==t.length)continue;if(t.every(((t,n)=>{const s="inputs"in e&&e.inputs[n];return!!s&&l(t,s)}))){if(h&&"inputs"in h&&h.inputs){const n=u(e.inputs,h.inputs,t);if(n)throw new s.S4({abiItem:e,type:n[0]},{abiItem:h,type:n[1]})}h=e}}return h||c[0]}function l(e,t){const n=typeof e,s=t.type;switch(s){case"address":return(0,o.U)(e);case"bool":return"boolean"===n;case"function":case"string":return"string"===n;default:return"tuple"===s&&"components"in t?Object.values(t.components).every(((t,n)=>l(Object.values(e)[n],t))):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(s)?"number"===n||"bigint"===n:/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(s)?"string"===n||e instanceof Uint8Array:!!/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(s)&&(Array.isArray(e)&&e.every((e=>l(e,{...t,type:s.replace(/(\[[0-9]{0,}\])$/,"")}))))}}function u(e,t,n){for(const s in e){const r=e[s],i=t[s];if("tuple"===r.type&&"tuple"===i.type&&"components"in r&&"components"in i)return u(r.components,i.components,n[s]);const a=[r.type,i.type];if(!(!a.includes("address")||!a.includes("bytes20"))||(a.includes("address")&&a.includes("string")||!(!a.includes("address")||!a.includes("bytes")))&&(0,o.U)(n[s]))return a}}},6731:(e,t,n)=>{"use strict";n.d(t,{K:()=>c,x:()=>o});var s=n(31),r=n(860),i=n(5031),a=n(151);function o(e,t){const n=t?`${t}${e.toLowerCase()}`:e.substring(2).toLowerCase(),s=(0,i.w)((0,r.qX)(n),"bytes"),a=(t?n.substring(`${t}0x`.length):n).split("");for(let e=0;e<40;e+=2)s[e>>1]>>4>=8&&a[e]&&(a[e]=a[e].toUpperCase()),(15&s[e>>1])>=8&&a[e+1]&&(a[e+1]=a[e+1].toUpperCase());return`0x${a.join("")}`}function c(e,t){if(!(0,a.U)(e))throw new s.b({address:e});return o(e,t)}},151:(e,t,n)=>{"use strict";n.d(t,{U:()=>r});const s=/^0x[a-fA-F0-9]{40}$/;function r(e){return s.test(e)}},6137:(e,t,n)=>{"use strict";n.d(t,{L:()=>r});var s=n(7033);function r({blockNumber:e,chain:t,contract:n}){const r=t?.contracts?.[n];if(!r)throw new s.mm({chain:t,contract:{name:n}});if(e&&r.blockCreated&&r.blockCreated>e)throw new s.mm({blockNumber:e,chain:t,contract:{name:n,blockCreated:r.blockCreated}});return r.address}},1466:(e,t,n)=>{"use strict";function s(e){return"string"==typeof e[0]?r(e):function(e){let t=0;for(const n of e)t+=n.length;const n=new Uint8Array(t);let s=0;for(const t of e)n.set(t,s),s+=t.length;return n}(e)}function r(e){return`0x${e.reduce(((e,t)=>e+t.replace("0x","")),"")}`}n.d(t,{SM:()=>r,zo:()=>s})},8426:(e,t,n)=>{"use strict";function s(e,{strict:t=!0}={}){return!!e&&("string"==typeof e&&(t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x")))}n.d(t,{v:()=>s})},4221:(e,t,n)=>{"use strict";n.d(t,{gc:()=>i,vk:()=>r});var s=n(1371);function r(e,{dir:t,size:n=32}={}){return"string"==typeof e?i(e,{dir:t,size:n}):function(e,{dir:t,size:n=32}={}){if(null===n)return e;if(e.length>n)throw new s.$({size:e.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i="right"===t;r[i?s:n-s-1]=e[i?s:e.length-s-1]}return r}(e,{dir:t,size:n})}function i(e,{dir:t,size:n=32}={}){if(null===n)return e;const r=e.replace("0x","");if(r.length>2*n)throw new s.$({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r["right"===t?"padEnd":"padStart"](2*n,"0")}`}},9402:(e,t,n)=>{"use strict";n.d(t,{d:()=>r});var s=n(8426);function r(e){return(0,s.v)(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}},7913:(e,t,n)=>{"use strict";n.d(t,{tP:()=>a});var s=n(1371),r=n(8426),i=n(9402);function a(e,t,n,{strict:s}={}){return(0,r.v)(e,{strict:!1})?function(e,t,n,{strict:s}={}){o(e,t);const r=`0x${e.replace("0x","").slice(2*(t??0),2*(n??e.length))}`;s&&c(r,t,n);return r}(e,t,n,{strict:s}):function(e,t,n,{strict:s}={}){o(e,t);const r=e.slice(t,n);s&&c(r,t,n);return r}(e,t,n,{strict:s})}function o(e,t){if("number"==typeof t&&t>0&&t>(0,i.d)(e)-1)throw new s.m({offset:t,position:"start",size:(0,i.d)(e)})}function c(e,t,n){if("number"==typeof t&&"number"==typeof n&&(0,i.d)(e)!==n-t)throw new s.m({offset:n,position:"end",size:(0,i.d)(e)})}},2050:(e,t,n)=>{"use strict";function s(e,{dir:t="left"}={}){let n="string"==typeof e?e.replace("0x",""):e,s=0;for(let e=0;e<n.length-1&&"0"===n["left"===t?e:n.length-e-1].toString();e++)s++;return n="left"===t?n.slice(s):n.slice(0,n.length-s),"string"==typeof e?(1===n.length&&"right"===t&&(n=`${n}0`),`0x${n.length%2==1?`0${n}`:n}`):n}n.d(t,{f:()=>s})},4702:(e,t,n)=>{"use strict";n.d(t,{XA:()=>l,Yf:()=>o,ly:()=>u,rR:()=>h,y_:()=>c});var s=n(5390),r=n(9402),i=n(2050),a=n(860);function o(e,{size:t}){if((0,r.d)(e)>t)throw new s.M6({givenSize:(0,r.d)(e),maxSize:t})}function c(e,t={}){const{signed:n}=t;t.size&&o(e,{size:t.size});const s=BigInt(e);if(!n)return s;const r=(e.length-2)/2;return s<=(1n<<8n*BigInt(r)-1n)-1n?s:s-BigInt(`0x${"f".padStart(2*r,"f")}`)-1n}function l(e,t={}){let n=e;if(t.size&&(o(n,{size:t.size}),n=(0,i.f)(n)),"0x00"===(0,i.f)(n))return!1;if("0x01"===(0,i.f)(n))return!0;throw new s.Cd(n)}function u(e,t={}){return Number(c(e,t))}function h(e,t={}){let n=(0,a.nr)(e);return t.size&&(o(n,{size:t.size}),n=(0,i.f)(n,{dir:"right"})),(new TextDecoder).decode(n)}},860:(e,t,n)=>{"use strict";n.d(t,{O0:()=>l,nr:()=>d,qX:()=>p});var s=n(2671),r=n(8426),i=n(4221),a=n(4702),o=n(8138);const c=new TextEncoder;function l(e,t={}){return"number"==typeof e||"bigint"==typeof e?function(e,t){const n=(0,o.eC)(e,t);return d(n)}(e,t):"boolean"==typeof e?function(e,t={}){const n=new Uint8Array(1);if(n[0]=Number(e),"number"==typeof t.size)return(0,a.Yf)(n,{size:t.size}),(0,i.vk)(n,{size:t.size});return n}(e,t):(0,r.v)(e)?d(e,t):p(e,t)}const u={zero:48,nine:57,A:65,F:70,a:97,f:102};function h(e){return e>=u.zero&&e<=u.nine?e-u.zero:e>=u.A&&e<=u.F?e-(u.A-10):e>=u.a&&e<=u.f?e-(u.a-10):void 0}function d(e,t={}){let n=e;t.size&&((0,a.Yf)(n,{size:t.size}),n=(0,i.vk)(n,{dir:"right",size:t.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const o=r.length/2,c=new Uint8Array(o);for(let e=0,t=0;e<o;e++){const n=h(r.charCodeAt(t++)),i=h(r.charCodeAt(t++));if(void 0===n||void 0===i)throw new s.G(`Invalid byte sequence ("${r[t-2]}${r[t-1]}" in "${r}").`);c[e]=16*n+i}return c}function p(e,t={}){const n=c.encode(e);return"number"==typeof t.size?((0,a.Yf)(n,{size:t.size}),(0,i.vk)(n,{dir:"right",size:t.size})):n}},8138:(e,t,n)=>{"use strict";n.d(t,{$G:()=>d,C4:()=>c,NC:()=>o,ci:()=>l,eC:()=>u});var s=n(5390),r=n(4221),i=n(4702);const a=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function o(e,t={}){return"number"==typeof e||"bigint"==typeof e?u(e,t):"string"==typeof e?d(e,t):"boolean"==typeof e?c(e,t):l(e,t)}function c(e,t={}){const n=`0x${Number(e)}`;return"number"==typeof t.size?((0,i.Yf)(n,{size:t.size}),(0,r.vk)(n,{size:t.size})):n}function l(e,t={}){let n="";for(let t=0;t<e.length;t++)n+=a[e[t]];const s=`0x${n}`;return"number"==typeof t.size?((0,i.Yf)(s,{size:t.size}),(0,r.vk)(s,{dir:"right",size:t.size})):s}function u(e,t={}){const{signed:n,size:i}=t,a=BigInt(e);let o;i?o=n?(1n<<8n*BigInt(i)-1n)-1n:2n**(8n*BigInt(i))-1n:"number"==typeof e&&(o=BigInt(Number.MAX_SAFE_INTEGER));const c="bigint"==typeof o&&n?-o-1n:0;if(o&&a>o||a<c){const t="bigint"==typeof e?"n":"";throw new s.J5({max:o?`${o}${t}`:void 0,min:`${c}${t}`,signed:n,size:i,value:`${e}${t}`})}const l=`0x${(n&&a<0?(1n<<BigInt(8*i))+BigInt(a):a).toString(16)}`;return i?(0,r.vk)(l,{size:i}):l}const h=new TextEncoder;function d(e,t={}){return l(h.encode(e),t)}},9966:(e,t,n)=>{"use strict";n.d(t,{k:()=>i});var s=n(2671),r=n(2675);function i(e,t){const n=(e.details||"").toLowerCase(),i=e.walk((e=>e.code===r.M_.code));return i instanceof s.G?new r.M_({cause:e,message:i.details}):r.M_.nodeMessage.test(n)?new r.M_({cause:e,message:e.details}):r.Hh.nodeMessage.test(n)?new r.Hh({cause:e,maxFeePerGas:t?.maxFeePerGas}):r.G$.nodeMessage.test(n)?new r.G$({cause:e,maxFeePerGas:t?.maxFeePerGas}):r.ZI.nodeMessage.test(n)?new r.ZI({cause:e,nonce:t?.nonce}):r.vU.nodeMessage.test(n)?new r.vU({cause:e,nonce:t?.nonce}):r.se.nodeMessage.test(n)?new r.se({cause:e,nonce:t?.nonce}):r.C_.nodeMessage.test(n)?new r.C_({cause:e}):r.WF.nodeMessage.test(n)?new r.WF({cause:e,gas:t?.gas}):r.dR.nodeMessage.test(n)?new r.dR({cause:e,gas:t?.gas}):r.pZ.nodeMessage.test(n)?new r.pZ({cause:e}):r.cs.nodeMessage.test(n)?new r.cs({cause:e,maxFeePerGas:t?.maxFeePerGas,maxPriorityFeePerGas:t?.maxPriorityFeePerGas}):new r.cj({cause:e})}},2090:(e,t,n)=>{"use strict";function s(e,{format:t}){if(!t)return{};const n={};return function t(s){const r=Object.keys(s);for(const i of r)i in e&&(n[i]=e[i]),s[i]&&"object"==typeof s[i]&&!Array.isArray(s[i])&&t(s[i])}(t(e||{})),n}n.d(t,{K:()=>s})},6011:(e,t,n)=>{"use strict";n.d(t,{tG:()=>i});var s=n(8138);const r={legacy:"0x0",eip2930:"0x1",eip1559:"0x2"};function i(e){return{...e,gas:void 0!==e.gas?(0,s.eC)(e.gas):void 0,gasPrice:void 0!==e.gasPrice?(0,s.eC)(e.gasPrice):void 0,maxFeePerGas:void 0!==e.maxFeePerGas?(0,s.eC)(e.maxFeePerGas):void 0,maxPriorityFeePerGas:void 0!==e.maxPriorityFeePerGas?(0,s.eC)(e.maxPriorityFeePerGas):void 0,nonce:void 0!==e.nonce?(0,s.eC)(e.nonce):void 0,type:void 0!==e.type?r[e.type]:void 0,value:void 0!==e.value?(0,s.eC)(e.value):void 0}}},4664:(e,t,n)=>{"use strict";n.d(t,{e:()=>a});var s=n(860),r=n(2034);var i=n(5031);const a=e=>{return t=(e=>(0,r.r)(e))(e),(0,i.w)((0,s.O0)(t));var t}},5686:(e,t,n)=>{"use strict";n.d(t,{o:()=>o});var s=n(7913),r=n(860),i=n(2034),a=n(5031);const o=e=>{return(0,s.tP)((t=(0,i.r)(e),(0,a.w)((0,r.O0)(t))),0,4);var t}},2034:(e,t,n)=>{"use strict";n.d(t,{r:()=>o});const s=/^tuple(?<array>(\[(\d*)\])*)$/;function r(e){let t=e.type;if(s.test(e.type)&&"components"in e){t="(";const n=e.components.length;for(let s=0;s<n;s++){t+=r(e.components[s]),s<n-1&&(t+=", ")}const i=function(e,t){const n=e.exec(t);return n?.groups}(s,e.type);return t+=`)${i?.array??""}`,r({...e,type:t})}return"indexed"in e&&e.indexed&&(t=`${t} indexed`),e.name?`${t} ${e.name}`:t}function i(e){let t="";const n=e.length;for(let s=0;s<n;s++){t+=r(e[s]),s!==n-1&&(t+=", ")}return t}var a=n(2671);const o=e=>{var t;return function(e){let t=!0,n="",s=0,r="",i=!1;for(let a=0;a<e.length;a++){const o=e[a];if(["(",")",","].includes(o)&&(t=!0),"("===o&&s++,")"===o&&s--,t)if(0!==s)" "!==o?(r+=o,n+=o):","!==e[a-1]&&","!==n&&",("!==n&&(n="",t=!1);else if(" "===o&&["event","function",""].includes(r))r="";else if(r+=o,")"===o){i=!0;break}}if(!i)throw new a.G("Unable to normalize signature.");return r}("string"==typeof e?e:"function"===(t=e).type?`function ${t.name}(${i(t.inputs)})${t.stateMutability&&"nonpayable"!==t.stateMutability?` ${t.stateMutability}`:""}${t.outputs.length?` returns (${i(t.outputs)})`:""}`:"event"===t.type?`event ${t.name}(${i(t.inputs)})`:"error"===t.type?`error ${t.name}(${i(t.inputs)})`:"constructor"===t.type?`constructor(${i(t.inputs)})${"payable"===t.stateMutability?" payable":""}`:"fallback"===t.type?"fallback()":"receive() external payable")}},5031:(e,t,n)=>{"use strict";function s(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function r(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function i(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function a(e,t){r(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}n.d(t,{w:()=>M});const o=BigInt(2**32-1),c=BigInt(32);function l(e,t=!1){return t?{h:Number(e&o),l:Number(e>>c&o)}:{h:0|Number(e>>c&o),l:0|Number(e&o)}}function u(e,t=!1){let n=new Uint32Array(e.length),s=new Uint32Array(e.length);for(let r=0;r<e.length;r++){const{h:i,l:a}=l(e[r],t);[n[r],s[r]]=[i,a]}return[n,s]}const h=(e,t,n)=>e<<n|t>>>32-n,d=(e,t,n)=>t<<n|e>>>32-n,p=(e,t,n)=>t<<n-32|e>>>64-n,f=(e,t,n)=>e<<n-32|t>>>64-n;const g=e=>e instanceof Uint8Array;if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");function m(e){if("string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),!g(e))throw new Error("expected Uint8Array, got "+typeof e);return e}class y{clone(){return this._cloneInto()}}const[b,w,v]=[[],[],[]],E=BigInt(0),A=BigInt(1),k=BigInt(2),_=BigInt(7),P=BigInt(256),x=BigInt(113);for(let e=0,t=A,n=1,s=0;e<24;e++){[n,s]=[s,(2*n+3*s)%5],b.push(2*(5*s+n)),w.push((e+1)*(e+2)/2%64);let r=E;for(let e=0;e<7;e++)t=(t<<A^(t>>_)*x)%P,t&k&&(r^=A<<(A<<BigInt(e))-A);v.push(r)}const[S,I]=u(v,!0),C=(e,t,n)=>n>32?p(e,t,n):h(e,t,n),T=(e,t,n)=>n>32?f(e,t,n):d(e,t,n);class O extends y{constructor(e,t,n,r=!1,i=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=r,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,s(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");var a;this.state=new Uint8Array(200),this.state32=(a=this.state,new Uint32Array(a.buffer,a.byteOffset,Math.floor(a.byteLength/4)))}keccak(){!function(e,t=24){const n=new Uint32Array(10);for(let s=24-t;s<24;s++){for(let t=0;t<10;t++)n[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const s=(t+8)%10,r=(t+2)%10,i=n[r],a=n[r+1],o=C(i,a,1)^n[s],c=T(i,a,1)^n[s+1];for(let n=0;n<50;n+=10)e[t+n]^=o,e[t+n+1]^=c}let t=e[2],r=e[3];for(let n=0;n<24;n++){const s=w[n],i=C(t,r,s),a=T(t,r,s),o=b[n];t=e[o],r=e[o+1],e[o]=i,e[o+1]=a}for(let t=0;t<50;t+=10){for(let s=0;s<10;s++)n[s]=e[t+s];for(let s=0;s<10;s++)e[t+s]^=~n[(s+2)%10]&n[(s+4)%10]}e[0]^=S[s],e[1]^=I[s]}n.fill(0)}(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){i(this);const{blockLen:t,state:n}=this,s=(e=m(e)).length;for(let r=0;r<s;){const i=Math.min(t-this.pos,s-r);for(let t=0;t<i;t++)n[this.pos++]^=e[r++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:n,blockLen:s}=this;e[n]^=t,0!=(128&t)&&n===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){i(this,!1),r(e),this.finish();const t=this.state,{blockLen:n}=this;for(let s=0,r=e.length;s<r;){this.posOut>=n&&this.keccak();const i=Math.min(n-this.posOut,r-s);e.set(t.subarray(this.posOut,this.posOut+i),s),this.posOut+=i,s+=i}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return s(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(a(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:n,outputLen:s,rounds:r,enableXOF:i}=this;return e||(e=new O(t,n,s,i,r)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=r,e.suffix=n,e.outputLen=s,e.enableXOF=i,e.destroyed=this.destroyed,e}}const N=(e,t,n)=>function(e){const t=t=>e().update(m(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}((()=>new O(t,e,n))),j=N(1,136,32);var L=n(8426),B=n(860),R=n(8138);function M(e,t){const n=t||"hex",s=j((0,L.v)(e,{strict:!1})?(0,B.O0)(e):e);return"bytes"===n?s:(0,R.NC)(s)}},4426:(e,t,n)=>{"use strict";n.d(t,{S:()=>r});const s=new Map;function r({fn:e,id:t,shouldSplitBatch:n,wait:r=0,sort:i}){const a=async()=>{const t=c();o();const n=t.map((({args:e})=>e));0!==n.length&&e(n).then((e=>{i&&Array.isArray(e)&&e.sort(i);for(let n=0;n<t.length;n++){const{pendingPromise:s}=t[n];s.resolve?.([e[n],e])}})).catch((e=>{for(let n=0;n<t.length;n++){const{pendingPromise:s}=t[n];s.reject?.(e)}}))},o=()=>s.delete(t),c=()=>s.get(t)||[],l=e=>s.set(t,[...c(),e]);return{flush:o,async schedule(e){const t={},s=new Promise(((e,n)=>{t.resolve=e,t.reject=n})),i=n?.([...c().map((({args:e})=>e)),e]);i&&a();return c().length>0?(l({args:e,pendingPromise:t}),s):(l({args:e,pendingPromise:t}),setTimeout(a,r),s)}}}},305:(e,t,n)=>{"use strict";n.d(t,{P:()=>s});const s=(e,t,n)=>JSON.stringify(e,((e,n)=>{const s="bigint"==typeof n?n.toString():n;return"function"==typeof t?t(e,s):s}),n)},9362:(e,t,n)=>{"use strict";n.d(t,{F:()=>c});var s=n(589),r=n(31),i=n(2675),a=n(9955),o=n(151);function c(e){const{account:t,gasPrice:n,maxFeePerGas:c,maxPriorityFeePerGas:l,to:u}=e,h=t?(0,s.T)(t):void 0;if(h&&!(0,o.U)(h.address))throw new r.b({address:h.address});if(u&&!(0,o.U)(u))throw new r.b({address:u});if(void 0!==n&&(void 0!==c||void 0!==l))throw new a.xY;if(c&&c>2n**256n-1n)throw new i.Hh({maxFeePerGas:c});if(l&&c&&l>c)throw new i.cs({maxFeePerGas:c,maxPriorityFeePerGas:l})}},7631:(e,t,n)=>{"use strict";n.d(t,{d:()=>i});var s=n(3339),r=n(6613);function i(e,t="wei"){return(0,r.b)(e,s.ez[t])}},9589:(e,t,n)=>{"use strict";n.d(t,{o:()=>i});var s=n(3339),r=n(6613);function i(e,t="wei"){return(0,r.b)(e,s.Zn[t])}},6613:(e,t,n)=>{"use strict";function s(e,t){let n=e.toString();const s=n.startsWith("-");s&&(n=n.slice(1)),n=n.padStart(t,"0");let[r,i]=[n.slice(0,n.length-t),n.slice(n.length-t)];return i=i.replace(/(0+)$/,""),`${s?"-":""}${r||"0"}${i?`.${i}`:""}`}n.d(t,{b:()=>s})},9990:(e,t,n)=>{"use strict";n.d(t,{h5:()=>et,iy:()=>ar,zZ:()=>lr,QC:()=>tt,KW:()=>i,c5:()=>r,Gy:()=>ur,EX:()=>yr,w$:()=>br,lx:()=>mr});var s=n(6342);class r extends s.GI{constructor(e){super(".pwa-install-popup",{barrierDismissible:!0}),s.yO.isMobileDevice?s.yO.isAndroid?(this.header.append((0,s.el)("h1",(0,s.WI)("pwa-install-popup-android-title",{serviceName:e})),new s.zx({tag:".close",type:s.L$.Circle,icon:new s.OL("close"),click:()=>this.delete()})),this.main.append((0,s.el)("p",(0,s.WI)("pwa-install-popup-android-message-1",{serviceName:e})),(0,s.el)("ol",(0,s.el)("li",(0,s.WI)("pwa-install-popup-android-step-1",{serviceName:e}),(0,s.el)("img",{src:"/images/pwa-install-popup/android/1.jpg"})),(0,s.el)("li",(0,s.WI)("pwa-install-popup-android-step-2",{serviceName:e}),(0,s.el)("img",{src:"/images/pwa-install-popup/android/2.jpg"})),(0,s.el)("li",(0,s.WI)("pwa-install-popup-android-step-3",{serviceName:e}),(0,s.el)("img",{src:"/images/pwa-install-popup/android/3.jpg"})),(0,s.el)("li",(0,s.WI)("pwa-install-popup-android-step-4",{serviceName:e}))),(0,s.el)("p",(0,s.WI)("pwa-install-popup-android-message-2",{serviceName:e})))):(this.header.append((0,s.el)("h1",(0,s.WI)("pwa-install-popup-ios-title",{serviceName:e})),new s.zx({tag:".close",type:s.L$.Circle,icon:new s.OL("close"),click:()=>this.delete()})),this.main.append((0,s.el)("p",(0,s.WI)("pwa-install-popup-ios-message-1",{serviceName:e})),(0,s.el)("ol",(0,s.el)("li",(0,s.WI)("pwa-install-popup-ios-step-1",{serviceName:e}),(0,s.el)("img",{src:"/images/pwa-install-popup/ios/1.jpg"})),(0,s.el)("li",(0,s.WI)("pwa-install-popup-ios-step-2",{serviceName:e}),(0,s.el)("img",{src:"/images/pwa-install-popup/ios/2.jpg"})),(0,s.el)("li",(0,s.WI)("pwa-install-popup-ios-step-3",{serviceName:e}),(0,s.el)("img",{src:"/images/pwa-install-popup/ios/3.jpg"})),(0,s.el)("li",(0,s.WI)("pwa-install-popup-ios-step-4",{serviceName:e}),(0,s.el)("img",{src:"/images/pwa-install-popup/ios/4.jpg"}))),(0,s.el)("p",(0,s.WI)("pwa-install-popup-ios-message-2",{serviceName:e})))):(this.header.append((0,s.el)("h1",(0,s.WI)("pwa-install-popup-pc-title",{serviceName:e})),new s.zx({tag:".close",type:s.L$.Circle,icon:new s.OL("close"),click:()=>this.delete()})),this.main.append((0,s.el)("p",(0,s.WI)("pwa-install-popup-pc-message-1",{serviceName:e})),(0,s.el)("ol",(0,s.el)("li",(0,s.WI)("pwa-install-popup-pc-step-1",{serviceName:e}),(0,s.el)("img",{src:"/images/pwa-install-popup/pc/1.jpg"})),(0,s.el)("li",(0,s.WI)("pwa-install-popup-pc-step-2",{serviceName:e}),(0,s.el)("img",{src:"/images/pwa-install-popup/pc/2.jpg"}))),(0,s.el)("p",(0,s.WI)("pwa-install-popup-pc-message-2",{serviceName:e})))),this.footer.append(new s.zx({tag:".confirm",title:"OK",click:()=>this.delete()}))}}class i extends s.AE{constructor(e,t){super(".pwa-install-overlay"),this.append((0,s.el)("main",(0,s.el)("h1",e),(0,s.el)("img.icon",{src:"/images/logo.png",alt:"Logo"}),(0,s.el)("h2","Add To Home Screen"),(0,s.el)("p",`To install ${e} app, you need to add this website to your home screen.`),new s.zx({type:s.L$.Contained,icon:new s.OL("download"),title:"How to Install",click:()=>new r(e)}),(0,s.el)("a.help",`What is ${e}?`,{href:t,target:"_blank"})),(0,s.el)("footer",(0,s.el)("a.cancel","Maybe later",{click:()=>this.delete()})))}}function a(e){if("string"!=typeof e||!e)throw new Error("expected a non-empty string, got: "+e)}function o(e){if("number"!=typeof e)throw new Error("expected a number, got: "+e)}const c=1,l=1,u="emoji",h="keyvalue",d="favorites",p="tokens",f="tokens",g="unicode",m="count",y="group",b="order",w="group-order",v="eTag",E="url",A="skinTone",k="readonly",_="readwrite",P="skinUnicodes",x="skinUnicodes";function S(e){return function(e,t){const n=new Set,s=[];for(const r of e){const e=t(r);n.has(e)||(n.add(e),s.push(r))}return s}(e,(e=>e.unicode))}const I={},C={},T={};function O(e,t,n){n.onerror=()=>t(n.error),n.onblocked=()=>t(new Error("IDB blocked")),n.onsuccess=()=>e(n.result)}async function N(e){const t=await new Promise(((t,n)=>{const s=indexedDB.open(e,c);I[e]=s,s.onupgradeneeded=e=>{e.oldVersion<l&&function(e){function t(t,n,s){const r=n?e.createObjectStore(t,{keyPath:n}):e.createObjectStore(t);if(s)for(const[e,[t,n]]of Object.entries(s))r.createIndex(e,t,{multiEntry:n});return r}t(h),t(u,g,{[f]:[p,!0],[w]:[[y,b]],[P]:[x,!0]}),t(d,void 0,{[m]:[""]})}(s.result)},O(t,n,s)}));return t.onclose=()=>L(e),t}function j(e,t,n,s){return new Promise(((r,i)=>{const a=e.transaction(t,n,{durability:"relaxed"}),o="string"==typeof t?a.objectStore(t):t.map((e=>a.objectStore(e)));let c;s(o,a,(e=>{c=e})),a.oncomplete=()=>r(c),a.onerror=()=>i(a.error)}))}function L(e){const t=I[e],n=t&&t.result;if(n){n.close();const t=T[e];if(t)for(const e of t)e()}delete I[e],delete C[e],delete T[e]}const B=new Set([":D","XD",":'D","O:)",":X",":P",";P","XP",":L",":Z",":j","8D","XO","8)",":B",":O",":S",":'o","Dx","X(","D:",":C",">0)",":3","</3","<3","\\M/",":E","8#"]);function R(e){return e.split(/[\s_]+/).map((e=>!e.match(/\w/)||B.has(e)?e.toLowerCase():e.replace(/[)(:,]/g,"").replace(//g,"'").toLowerCase())).filter(Boolean)}const M=2;function U(e){return e.filter(Boolean).map((e=>e.toLowerCase())).filter((e=>e.length>=M))}function D(e,t,n,s){e[t](n).onsuccess=e=>s&&s(e.target.result)}function F(e,t,n){D(e,"get",t,n)}function $(e,t,n){D(e,"getAll",t,n)}function G(e){e.commit&&e.commit()}function H(e,t){const n=function(e,t){let n=e[0];for(let s=1;s<e.length;s++){const r=e[s];t(n)>t(r)&&(n=r)}return n}(e,(e=>e.length)),s=[];for(const r of n)e.some((e=>-1===e.findIndex((e=>t(e)===t(r)))))||s.push(r);return s}async function z(e,t,n,s){try{const r=function(e){const t=e.map((({annotation:e,emoticon:t,group:n,order:s,shortcodes:r,skins:i,tags:a,emoji:o,version:c})=>{const l=[...new Set(U([...(r||[]).map(R).flat(),...a.map(R).flat(),...R(e),t]))].sort(),u={annotation:e,group:n,order:s,tags:a,tokens:l,unicode:o,version:c};if(t&&(u.emoticon=t),r&&(u.shortcodes=r),i){u.skinTones=[],u.skinUnicodes=[],u.skinVersions=[];for(const{tone:e,emoji:t,version:n}of i)u.skinTones.push(e),u.skinUnicodes.push(t),u.skinVersions.push(n)}return u}));return t}(t);await j(e,[u,h],_,(([e,t],i)=>{let a,o,c=0;function l(){2==++c&&function(){if(a===s&&o===n)return;e.clear();for(const t of r)e.put(t);t.put(s,v),t.put(n,E),G(i)}()}F(t,v,(e=>{a=e,l()})),F(t,E,(e=>{o=e,l()}))}))}finally{}}async function W(e,t){const n=U(R(t));return n.length?j(e,u,k,((e,t,s)=>{const r=[],i=()=>{const e=H(r,(e=>e.unicode));s(e.sort(((e,t)=>e.order<t.order?-1:1)))};for(let t=0;t<n.length;t++){const s=n[t],a=t===n.length-1?IDBKeyRange.bound(s,s+"",!1,!0):IDBKeyRange.only(s);$(e.index(f),a,(e=>{r.push(e),r.length===n.length&&i()}))}})):[]}async function q(e,t){const n=await W(e,t);if(!n.length){const n=e=>(e.shortcodes||[]).includes(t.toLowerCase());return await async function(e,t){return j(e,u,k,((e,n,s)=>{let r;const i=()=>{e.getAll(r&&IDBKeyRange.lowerBound(r,!0),50).onsuccess=e=>{const n=e.target.result;for(const e of n)if(r=e.unicode,t(e))return s(e);if(n.length<50)return s();i()}};i()}))}(e,n)||null}return n.filter((e=>{const n=(e.shortcodes||[]).map((e=>e.toLowerCase()));return n.includes(t.toLowerCase())}))[0]||null}function V(e,t,n){return j(e,t,k,((e,t,s)=>F(e,n,s)))}const K="";const J=["name","url"];function Q(e){!function(e){const t=e&&Array.isArray(e),n=t&&e.length&&(!e[0]||J.some((t=>!(t in e[0]))));if(!t||n)throw new Error("Custom emojis are in the wrong format")}(e);const t=(e,t)=>e.name.toLowerCase()<t.name.toLowerCase()?-1:1,n=e.sort(t),s=function(e,t){const n=new Map;for(const s of e){const e=t(s);for(const t of e){let e=n;for(let n=0;n<t.length;n++){const s=t.charAt(n);let r=e.get(s);r||(r=new Map,e.set(s,r)),e=r}let r=e.get(K);r||(r=[],e.set(K,r)),r.push(s)}}return(e,t)=>{let s=n;for(let t=0;t<e.length;t++){const n=e.charAt(t),r=s.get(n);if(!r)return[];s=r}if(t)return s.get(K)||[];const r=[],i=[s];for(;i.length;){const e=[...i.shift().entries()].sort(((e,t)=>e[0]<t[0]?-1:1));for(const[t,n]of e)t===K?r.push(...n):i.push(n)}return r}}(e,(e=>[...new Set((e.shortcodes||[]).map((e=>R(e))).flat())])),r=e=>s(e,!0),i=e=>s(e,!1),a=new Map,o=new Map;for(const t of e){o.set(t.name.toLowerCase(),t);for(const e of t.shortcodes||[])a.set(e.toLowerCase(),t)}return{all:n,search:e=>{const n=R(e);return H(n.map(((e,t)=>(t<n.length-1?r:i)(e))),(e=>e.name)).sort(t)},byShortcode:e=>a.get(e.toLowerCase()),byName:e=>o.get(e.toLowerCase())}}const Y="undefined"!=typeof wrappedJSObject;function Z(e){if(!e)return e;if(Y&&(e=structuredClone(e)),delete e.tokens,e.skinTones){const t=e.skinTones.length;e.skins=Array(t);for(let n=0;n<t;n++)e.skins[n]={tone:e.skinTones[n],unicode:e.skinUnicodes[n],version:e.skinVersions[n]};delete e.skinTones,delete e.skinUnicodes,delete e.skinVersions}return e}function X(e){e||console.warn("emoji-picker-element is more efficient if the dataSource server exposes an ETag header.")}const ee=["annotation","emoji","group","order","tags","version"];function te(e,t){if(2!==Math.floor(e.status/100))throw new Error("Failed to fetch: "+t+":  "+e.status)}async function ne(e){const t=await fetch(e);te(t,e);const n=t.headers.get("etag");X(n);const s=await t.json();return function(e){if(!e||!Array.isArray(e)||!e[0]||"object"!=typeof e[0]||ee.some((t=>!(t in e[0]))))throw new Error("Emoji data is in the wrong format")}(s),[n,s]}async function se(e){let t=function(e){for(var t=e.length,n=new ArrayBuffer(t),s=new Uint8Array(n),r=-1;++r<t;)s[r]=e.charCodeAt(r);return n}(JSON.stringify(e));const n=function(e){for(var t="",n=new Uint8Array(e),s=n.byteLength,r=-1;++r<s;)t+=String.fromCharCode(n[r]);return t}(await crypto.subtle.digest("SHA-1",t));return btoa(n)}async function re(e,t){let n,s=await async function(e){const t=await fetch(e,{method:"HEAD"});te(t,e);const n=t.headers.get("etag");return X(n),n}(t);if(!s){const e=await ne(t);s=e[0],n=e[1],s||(s=await se(n))}if(await async function(e,t,n){const[s,r]=await Promise.all([v,E].map((t=>V(e,h,t))));return s===n&&r===t}(e,t,s));else{if(!n){n=(await ne(t))[1]}await z(e,n,t,s)}}class ie{constructor({dataSource:e="https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json",locale:t="en",customEmoji:n=[]}={}){this.dataSource=e,this.locale=t,this._dbName=`emoji-picker-element-${this.locale}`,this._db=void 0,this._lazyUpdate=void 0,this._custom=Q(n),this._clear=this._clear.bind(this),this._ready=this._init()}async _init(){const e=this._db=await(t=this._dbName,C[t]||(C[t]=N(t)),C[t]);var t;!function(e,t){let n=T[e];n||(n=T[e]=[]),n.push(t)}(this._dbName,this._clear);const n=this.dataSource,s=await async function(e){return!await V(e,h,E)}(e);s?await async function(e,t){let[n,s]=await ne(t);n||(n=await se(s)),await z(e,s,t,n)}(e,n):this._lazyUpdate=re(e,n)}async ready(){const e=async()=>(this._ready||(this._ready=this._init()),this._ready);await e(),this._db||await e()}async getEmojiByGroup(e){return o(e),await this.ready(),S(await async function(e,t){return j(e,u,k,((e,n,s)=>{const r=IDBKeyRange.bound([t,0],[t+1,0],!1,!0);$(e.index(w),r,s)}))}(this._db,e)).map(Z)}async getEmojiBySearchQuery(e){a(e),await this.ready();return[...this._custom.search(e),...S(await W(this._db,e)).map(Z)]}async getEmojiByShortcode(e){a(e),await this.ready();const t=this._custom.byShortcode(e);return t||Z(await q(this._db,e))}async getEmojiByUnicodeOrName(e){a(e),await this.ready();const t=this._custom.byName(e);return t||Z(await async function(e,t){return j(e,u,k,((e,n,s)=>F(e,t,(n=>{if(n)return s(n);F(e.index(P),t,(e=>s(e||null)))}))))}(this._db,e))}async getPreferredSkinTone(){return await this.ready(),await V(this._db,h,A)||0}async setPreferredSkinTone(e){return o(e),await this.ready(),t=this._db,n=A,s=e,j(t,h,_,((e,t)=>{e.put(s,n),G(t)}));var t,n,s}async incrementFavoriteEmojiCount(e){return a(e),await this.ready(),t=this._db,n=e,j(t,d,_,((e,t)=>F(e,n,(s=>{e.put((s||0)+1,n),G(t)}))));var t,n}async getTopFavoriteEmoji(e){return o(e),await this.ready(),(await function(e,t,n){return 0===n?[]:j(e,[d,u],k,(([e,s],r,i)=>{const a=[];e.index(m).openCursor(void 0,"prev").onsuccess=e=>{const r=e.target.result;if(!r)return i(a);function o(e){if(a.push(e),a.length===n)return i(a);r.continue()}const c=r.primaryKey,l=t.byName(c);if(l)return o(l);F(s,c,(e=>{if(e)return o(e);r.continue()}))}}))}(this._db,this._custom,e)).map(Z)}set customEmoji(e){this._custom=Q(e)}get customEmoji(){return this._custom.all}async _shutdown(){await this.ready();try{await this._lazyUpdate}catch(e){}}_clear(){this._db=this._ready=this._lazyUpdate=void 0}async close(){await this._shutdown(),await L(this._dbName)}async delete(){var e;await this._shutdown(),await(e=this._dbName,new Promise(((t,n)=>{L(e),O(t,n,indexedDB.deleteDatabase(e))})))}}const ae=[[-1,"","custom"],[0,"","smileys-emotion"],[1,"","people-body"],[3,"","animals-nature"],[4,"","food-drink"],[5,"","travel-places"],[6,"","activities"],[7,"","objects"],[8,"","symbols"],[9,"","flags"]].map((([e,t,n])=>({id:e,emoji:t,name:n}))),oe=ae.slice(1),ce="function"==typeof requestIdleCallback?requestIdleCallback:setTimeout;function le(e){return e.unicode.includes("")}const ue={"":15.1,"":14,"":13.1,"":12.1,"":11,"":5,"":4,"":3,"":2,"":1,"":.7,"":.6},he=["","","","","","","","","","","","","",""],de='"Twemoji Mozilla","Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji","EmojiOne Color","Android Emoji",sans-serif',pe=(e,t)=>e<t?-1:e>t?1:0,fe=(e,t)=>{const n=document.createElement("canvas");n.width=n.height=1;const s=n.getContext("2d");return s.textBaseline="top",s.font=`100px ${de}`,s.fillStyle=t,s.scale(.01,.01),s.fillText(e,0,0),s.getImageData(0,0,1,1).data},ge=(e,t)=>{const n=[...e].join(",");return n===[...t].join(",")&&!n.startsWith("0,0,0,")};function me(e){const t=fe(e,"#000"),n=fe(e,"#fff");return t&&n&&ge(t,n)}let ye;const be=()=>(ye||(ye=new Promise((e=>ce((()=>e(function(){const e=Object.entries(ue);try{for(const[t,n]of e)if(me(t))return n}catch(e){}return e[0][1]}())))))),ye),we=new Map,ve="",Ee="\ud83c",Ae="",ke=127995,_e=57339;function Pe(e){e.preventDefault(),e.stopPropagation()}function xe(e,t,n){return(t+=e?-1:1)<0?t=n.length-1:t>=n.length&&(t=0),t}function Se(e,t){const n=new Set,s=[];for(const r of e){const e=t(r);n.has(e)||(n.add(e),s.push(r))}return s}const Ie=requestAnimationFrame;let Ce,Te="function"==typeof ResizeObserver;function Oe(e){{const t=document.createRange();return t.selectNode(e.firstChild),t.getBoundingClientRect().width}}function Ne(e,t,n){let s=e.get(t);return s||(s=n(),e.set(t,s)),s}function je(e){return""+e}const Le=new WeakMap,Be=new WeakMap,Re=Symbol("un-keyed"),Me="replaceChildren"in Element.prototype;function Ue(e,t){const{targetNode:n}=t;let{targetParentNode:s}=t,r=!1;s?r=function(e,t){let n=e.firstChild,s=0;for(;n;){if(t[s]!==n)return!0;n=n.nextSibling,s++}return s!==t.length}(s,e):(r=!0,t.targetNode=void 0,t.targetParentNode=s=n.parentNode),r&&function(e,t){Me?e.replaceChildren(...t):(e.innerHTML="",e.append(...t))}(s,e)}function De(e){let t="",n=!1,s=!1,r=-1;const i=new Map,a=[];for(let o=0,c=e.length;o<c;o++){const l=e[o];if(t+=l,o===c-1)break;for(let e=0;e<l.length;e++){switch(l.charAt(e)){case"<":"/"===l.charAt(e+1)?a.pop():(n=!0,a.push(++r));break;case">":n=!1,s=!1;break;case"=":s=!0}}const u=Ne(i,a[a.length-1],(()=>[]));let h,d,p;if(s){const t=/(\S+)="?([^"=]*)$/.exec(l);h=t[1],d=t[2],p=/^[^">]*/.exec(e[o+1])[0]}const f={attributeName:h,attributeValuePre:d,attributeValuePost:p,expressionIndex:o};u.push(f),n||s||(t+=" ")}const o=function(e){const t=document.createElement("template");return t.innerHTML=e,t}(t);return{template:o,elementsToBindings:i}}function Fe(e){const{template:t,elementsToBindings:n}=Ne(Le,e,(()=>De(e))),s=t.cloneNode(!0).content.firstElementChild,r=function(e,t){const n=[],s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT);let r=e,i=-1;do{const e=t.get(++i);if(e)for(let t=0;t<e.length;t++){const s=e[t],i={binding:s,targetNode:s.attributeName?r:r.firstChild,targetParentNode:void 0,currentExpression:void 0};n.push(i)}}while(r=s.nextNode());return n}(s,n);return function(e){return function(e,t){for(const n of t){const{targetNode:t,currentExpression:s,binding:{expressionIndex:r,attributeName:i,attributeValuePre:a,attributeValuePost:o}}=n,c=e[r];if(s!==c)if(n.currentExpression=c,i)t.setAttribute(i,a+je(c)+o);else{let e;Array.isArray(c)?Ue(c,n):c instanceof Element?(e=c,t.replaceWith(e)):t.nodeValue=je(c),e&&(n.targetNode=e)}}}(e,r),s}}function $e(e,t,n,s,r,i,a,o){const{labelWithSkin:c,titleForEmoji:l,unicodeWithSkin:u}=n,{html:h,map:d}=function(e){const t=Ne(Be,e,(()=>new Map));let n=Re;return{map:function(e,t,s){return e.map(((e,r)=>{const i=n;n=s(e);try{return t(e,r)}finally{n=i}}))},html:function(e,...s){const r=Ne(t,e,(()=>new Map));return Ne(r,n,(()=>Fe(e)))(s)}}}(t);function p(e,n,s){return d(e,((e,r)=>h`<button role="${n?"option":"menuitem"}" aria-selected="${t.searchMode?r===t.activeSearchItem:""}" aria-label="${c(e,t.currentSkinTone)}" title="${l(e)}" class="emoji ${n&&r===t.activeSearchItem?"active":""}" id="${`${s}-${e.id}`}">${e.unicode?u(e,t.currentSkinTone):h`<img class="custom-emoji" src="${e.url}" alt="" loading="lazy">`}</button>`),(e=>`${s}-${e.id}`))}const f=h`<section data-ref="rootElement" class="picker" aria-label="${t.i18n.regionLabel}" style="${t.pickerStyle}"><div class="pad-top"></div><div class="search-row"><div class="search-wrapper"><input id="search" class="search" type="search" role="combobox" enterkeyhint="search" placeholder="${t.i18n.searchLabel}" autocapitalize="none" autocomplete="off" spellcheck="true" aria-expanded="${!(!t.searchMode||!t.currentEmojis.length)}" aria-controls="search-results" aria-describedby="search-description" aria-autocomplete="list" aria-activedescendant="${t.activeSearchItemId?`emo-${t.activeSearchItemId}`:""}" data-ref="searchElement" data-on-input="onSearchInput" data-on-keydown="onSearchKeydown"><label class="sr-only" for="search">${t.i18n.searchLabel}</label> <span id="search-description" class="sr-only">${t.i18n.searchDescription}</span></div><div class="skintone-button-wrapper ${t.skinTonePickerExpandedAfterAnimation?"expanded":""}"><button id="skintone-button" class="emoji ${t.skinTonePickerExpanded?"hide-focus":""}" aria-label="${t.skinToneButtonLabel}" title="${t.skinToneButtonLabel}" aria-describedby="skintone-description" aria-haspopup="listbox" aria-expanded="${t.skinTonePickerExpanded}" aria-controls="skintone-list" data-on-click="onClickSkinToneButton">${t.skinToneButtonText}</button></div><span id="skintone-description" class="sr-only">${t.i18n.skinToneDescription}</span><div data-ref="skinToneDropdown" id="skintone-list" class="skintone-list hide-focus ${t.skinTonePickerExpanded?"":"hidden no-animate"}" style="transform:translateY(${t.skinTonePickerExpanded?0:"calc(-1 * var(--num-skintones) * var(--total-emoji-size))"})" role="listbox" aria-label="${t.i18n.skinTonesLabel}" aria-activedescendant="skintone-${t.activeSkinTone}" aria-hidden="${!t.skinTonePickerExpanded}" tabIndex="-1" data-on-focusout="onSkinToneOptionsFocusOut" data-on-click="onSkinToneOptionsClick" data-on-keydown="onSkinToneOptionsKeydown" data-on-keyup="onSkinToneOptionsKeyup">${d(t.skinTones,((e,n)=>h`<div id="skintone-${n}" class="emoji ${n===t.activeSkinTone?"active":""}" aria-selected="${n===t.activeSkinTone}" role="option" title="${t.i18n.skinTones[n]}" aria-label="${t.i18n.skinTones[n]}">${e}</div>`),(e=>e))}</div></div><div class="nav" role="tablist" style="grid-template-columns:repeat(${t.groups.length},1fr)" aria-label="${t.i18n.categoriesLabel}" data-on-keydown="onNavKeydown" data-on-click="onNavClick">${d(t.groups,(e=>h`<button role="tab" class="nav-button" aria-controls="tab-${e.id}" aria-label="${t.i18n.categories[e.name]}" aria-selected="${!t.searchMode&&t.currentGroup.id===e.id}" title="${t.i18n.categories[e.name]}" data-group-id="${e.id}"><div class="nav-emoji emoji">${e.emoji}</div></button>`),(e=>e.id))}</div><div class="indicator-wrapper"><div class="indicator" style="transform:translateX(${(t.isRtl?-1:1)*t.currentGroupIndex*100}%)"></div></div><div class="message ${t.message?"":"gone"}" role="alert" aria-live="polite">${t.message}</div><div data-ref="tabpanelElement" class="tabpanel ${!t.databaseLoaded||t.message?"gone":""}" role="${t.searchMode?"region":"tabpanel"}" aria-label="${t.searchMode?t.i18n.searchResultsLabel:t.i18n.categories[t.currentGroup.name]}" id="${t.searchMode?"":`tab-${t.currentGroup.id}`}" tabIndex="0" data-on-click="onEmojiClick"><div data-action="calculateEmojiGridStyle">${d(t.currentEmojisWithCategories,((e,n)=>h`<div><div id="menu-label-${n}" class="category ${1===t.currentEmojisWithCategories.length&&""===t.currentEmojisWithCategories[0].category?"gone":""}" aria-hidden="true">${t.searchMode?t.i18n.searchResultsLabel:e.category?e.category:t.currentEmojisWithCategories.length>1?t.i18n.categories.custom:t.i18n.categories[t.currentGroup.name]}</div><div class="emoji-menu" role="${t.searchMode?"listbox":"menu"}" aria-labelledby="menu-label-${n}" id="${t.searchMode?"search-results":""}">${p(e.emojis,t.searchMode,"emo")}</div></div>`),(e=>e.category))}</div></div><div class="favorites emoji-menu ${t.message?"gone":""}" role="menu" aria-label="${t.i18n.favoritesLabel}" style="padding-inline-end:${`${t.scrollbarWidth}px`}" data-on-click="onEmojiClick">${p(t.currentFavorites,!1,"fav")}</div><button data-ref="baselineEmoji" aria-hidden="true" tabindex="-1" class="abs-pos hidden emoji baseline-emoji"></button></section>`;if(o){e.appendChild(f);const t=(t,n)=>{for(const s of e.querySelectorAll(`[${t}]`))n(s,s.getAttribute(t))};for(const e of["click","focusout","input","keydown","keyup"])t(`data-on-${e}`,((t,n)=>{t.addEventListener(e,s[n])}));t("data-ref",((e,t)=>{i[t]=e})),t("data-action",((e,t)=>{r[t](e)})),a.addEventListener("abort",(()=>{e.removeChild(f)}))}}const Ge="function"==typeof queueMicrotask?queueMicrotask:e=>Promise.resolve().then(e);function He(e,t,n){if(e.length!==t.length)return!1;for(let s=0;s<e.length;s++)if(!n(e[s],t[s]))return!1;return!0}const ze=[],{assign:We}=Object;function qe(e,t){const n={},s=new AbortController,r=s.signal,{state:i,createEffect:a}=function(e){let t,n=!1;const s=new Map,r=new Set;let i;const a=()=>{if(n)return;const e=[...r];r.clear();try{for(const t of e)t()}finally{i=!1,r.size&&(i=!0,Ge(a))}},o=new Proxy({},{get(e,n){if(t){let e=s.get(n);e||(e=new Set,s.set(n,e)),e.add(t)}return e[n]},set(e,t,n){e[t]=n;const o=s.get(t);if(o){for(const e of o)r.add(e);i||(i=!0,Ge(a))}return!0}});return e.addEventListener("abort",(()=>{n=!0})),{state:o,createEffect:e=>{const n=()=>{const s=t;t=n;try{return e()}finally{t=s}};return n()}}}(r);We(i,{skinToneEmoji:void 0,i18n:void 0,database:void 0,customEmoji:void 0,customCategorySorting:void 0,emojiVersion:void 0}),We(i,t),We(i,{initialLoad:!0,currentEmojis:[],currentEmojisWithCategories:[],rawSearchText:"",searchText:"",searchMode:!1,activeSearchItem:-1,message:void 0,skinTonePickerExpanded:!1,skinTonePickerExpandedAfterAnimation:!1,currentSkinTone:0,activeSkinTone:0,skinToneButtonText:void 0,pickerStyle:void 0,skinToneButtonLabel:"",skinTones:[],currentFavorites:[],defaultFavoriteEmojis:void 0,numColumns:8,isRtl:!1,scrollbarWidth:0,currentGroupIndex:0,groups:oe,databaseLoaded:!1,activeSearchItemId:void 0}),a((()=>{i.currentGroup!==i.groups[i.currentGroupIndex]&&(i.currentGroup=i.groups[i.currentGroupIndex])}));const o=t=>{e.getElementById(t).focus()},c=t=>e.getElementById(`emo-${t.id}`),l=(e,t)=>{n.rootElement.dispatchEvent(new CustomEvent(e,{detail:t,bubbles:!0,composed:!0}))},u=(e,t)=>e.id===t.id,h=(e,t)=>{const{category:n,emojis:s}=e,{category:r,emojis:i}=t;return n===r&&He(s,i,u)},d=e=>{He(i.currentEmojis,e,u)||(i.currentEmojis=e)},p=e=>{i.searchMode!==e&&(i.searchMode=e)},f=(e,t)=>t&&e.skins&&e.skins[t]||e.unicode,g={labelWithSkin:(e,t)=>{return(n=[e.name||f(e,t),e.annotation,...e.shortcodes||ze].filter(Boolean),Se(n,(e=>e))).join(", ");var n},titleForEmoji:e=>e.annotation||(e.shortcodes||ze).join(", "),unicodeWithSkin:f},m={onClickSkinToneButton:function(e){i.skinTonePickerExpanded=!i.skinTonePickerExpanded,i.activeSkinTone=i.currentSkinTone,i.skinTonePickerExpanded&&(Pe(e),Ie((()=>o("skintone-list"))))},onEmojiClick:async function(e){const{target:t}=e;if(!t.classList.contains("emoji"))return;Pe(e);k(t.id.substring(4))},onNavClick:function(e){const{target:t}=e,s=t.closest(".nav-button");if(!s)return;const r=parseInt(s.dataset.groupId,10);n.searchElement.value="",i.rawSearchText="",i.searchText="",i.activeSearchItem=-1,i.currentGroupIndex=i.groups.findIndex((e=>e.id===r))},onNavKeydown:function(e){const{target:t,key:n}=e,s=t=>{t&&(Pe(e),t.focus())};switch(n){case"ArrowLeft":return s(t.previousElementSibling);case"ArrowRight":return s(t.nextElementSibling);case"Home":return s(t.parentElement.firstElementChild);case"End":return s(t.parentElement.lastElementChild)}},onSearchKeydown:function(e){if(!i.searchMode||!i.currentEmojis.length)return;const t=t=>{Pe(e),i.activeSearchItem=xe(t,i.activeSearchItem,i.currentEmojis)};switch(e.key){case"ArrowDown":return t(!1);case"ArrowUp":return t(!0);case"Enter":if(-1!==i.activeSearchItem)return Pe(e),k(i.currentEmojis[i.activeSearchItem].id);i.activeSearchItem=0}},onSkinToneOptionsClick:function(e){const{target:{id:t}}=e,n=t&&t.match(/^skintone-(\d)/);if(!n)return;Pe(e);_(parseInt(n[1],10))},onSkinToneOptionsFocusOut:async function(e){const{relatedTarget:t}=e;t&&"skintone-list"===t.id||(i.skinTonePickerExpanded=!1)},onSkinToneOptionsKeydown:function(e){if(!i.skinTonePickerExpanded)return;const t=async t=>{Pe(e),i.activeSkinTone=t};switch(e.key){case"ArrowUp":return t(xe(!0,i.activeSkinTone,i.skinTones));case"ArrowDown":return t(xe(!1,i.activeSkinTone,i.skinTones));case"Home":return t(0);case"End":return t(i.skinTones.length-1);case"Enter":return Pe(e),_(i.activeSkinTone);case"Escape":return Pe(e),i.skinTonePickerExpanded=!1,o("skintone-button")}},onSkinToneOptionsKeyup:function(e){if(!i.skinTonePickerExpanded)return;if(" "===e.key)return Pe(e),_(i.activeSkinTone)},onSearchInput:function(e){i.rawSearchText=e.target.value}},y={calculateEmojiGridStyle:function(e){!function(e,t,n){let s;Te?(s=new ResizeObserver((e=>n(e[0].contentRect.width))),s.observe(e)):Ie((()=>n(e.getBoundingClientRect().width))),t.addEventListener("abort",(()=>{s&&s.disconnect()}))}(e,r,(t=>{{const s=getComputedStyle(n.rootElement),r=parseInt(s.getPropertyValue("--num-columns"),10),a="rtl"===s.getPropertyValue("direction"),o=e.parentElement.getBoundingClientRect().width-t;i.numColumns=r,i.scrollbarWidth=o,i.isRtl=a}}))}};let b=!0;function w(){i.database.customEmoji=i.customEmoji||ze}function v(e){return!e.unicode||!le(e)||we.get(e.unicode)}async function E(e){const t=i.emojiVersion||await be();return e.filter((({version:e})=>!e||e<=t))}async function A(e){return function(e,t){const n=e=>{const n={};for(const s of e)"number"==typeof s.tone&&s.version<=t&&(n[s.tone]=s.unicode);return n};return e.map((({unicode:e,skins:t,shortcodes:s,url:r,name:i,category:a,annotation:o})=>({unicode:e,name:i,shortcodes:s,url:r,category:a,annotation:o,id:e||i,skins:t&&n(t)})))}(e,i.emojiVersion||await be())}async function k(e){const t=await i.database.getEmojiByUnicodeOrName(e),n=[...i.currentEmojis,...i.currentFavorites].find((t=>t.id===e)),s=n.unicode&&f(n,i.currentSkinTone);await i.database.incrementFavoriteEmojiCount(e),l("emoji-click",{emoji:t,skinTone:i.currentSkinTone,...s&&{unicode:s},...n.name&&{name:n.name}})}function _(e){i.currentSkinTone=e,i.skinTonePickerExpanded=!1,o("skintone-button"),l("skin-tone-change",{skinTone:e}),i.database.setPreferredSkinTone(e)}return a((()=>{$e(e,i,g,m,y,n,r,b),b=!1})),i.emojiVersion||be().then((e=>{e||(i.message=i.i18n.emojiUnsupportedMessage)})),a((()=>{i.database&&async function(){let e=!1;const t=setTimeout((()=>{e=!0,i.message=i.i18n.loadingMessage}),1e3);try{await i.database.ready(),i.databaseLoaded=!0}catch(e){console.error(e),i.message=i.i18n.networkErrorMessage}finally{clearTimeout(t),e&&(e=!1,i.message="")}}()})),a((()=>{i.pickerStyle=`\n      --num-groups: ${i.groups.length}; \n      --indicator-opacity: ${i.searchMode?0:1}; \n      --num-skintones: 6;`})),a((()=>{i.customEmoji&&i.database&&w()})),a((()=>{i.customEmoji&&i.customEmoji.length?i.groups!==ae&&(i.groups=ae):i.groups!==oe&&(i.currentGroupIndex&&i.currentGroupIndex--,i.groups=oe)})),a((()=>{!async function(){i.databaseLoaded&&(i.currentSkinTone=await i.database.getPreferredSkinTone())}()})),a((()=>{i.skinTones=Array(6).fill().map(((e,t)=>function(e,t){if(0===t)return e;const n=e.indexOf(Ae);return-1!==n?e.substring(0,n)+String.fromCodePoint(ke+t-1)+e.substring(n):(e.endsWith(ve)&&(e=e.substring(0,e.length-1)),e+Ee+String.fromCodePoint(_e+t-1))}(i.skinToneEmoji,t)))})),a((()=>{i.skinToneButtonText=i.skinTones[i.currentSkinTone]})),a((()=>{i.skinToneButtonLabel=i.i18n.skinToneLabel.replace("{skinTone}",i.i18n.skinTones[i.currentSkinTone])})),a((()=>{i.databaseLoaded&&async function(){const{database:e}=i,t=(await Promise.all(he.map((t=>e.getEmojiByUnicodeOrName(t))))).filter(Boolean);i.defaultFavoriteEmojis=t}()})),a((()=>{i.databaseLoaded&&i.defaultFavoriteEmojis&&async function(){w();const{database:e,defaultFavoriteEmojis:t,numColumns:n}=i,s=await e.getTopFavoriteEmoji(n),r=await A(Se([...s,...t],(e=>e.unicode||e.name)).slice(0,n));i.currentFavorites=r}()})),a((()=>{!async function(){const{searchText:e,currentGroup:t,databaseLoaded:n,customEmoji:s}=i;if(n)if(e.length>=2){const t=await async function(e){return A(await E(await i.database.getEmojiBySearchQuery(e)))}(e);i.searchText===e&&(d(t),p(!0))}else{const{id:e}=t;if(-1!==e||s&&s.length){const t=await async function(e){const t=-1===e?i.customEmoji:await i.database.getEmojiByGroup(e);return A(await E(t))}(e);i.currentGroup.id===e&&(d(t),p(!1))}}else i.currentEmojis=[],i.searchMode=!1}()})),a((()=>{const{currentEmojis:e,emojiVersion:t}=i,s=e.filter((e=>e.unicode)).filter((e=>le(e)&&!we.has(e.unicode)));if(!t&&s.length)d(e),Ie((()=>function(e){(function(e,t,n){for(const s of e){const e=Oe(n(s));void 0===Ce&&(Ce=Oe(t));const r=e/1.8<Ce;we.set(s.unicode,r)}})(e,n.baselineEmoji,c),i.currentEmojis=i.currentEmojis}(s)));else{const s=t?e:e.filter(v);d(s),Ie((()=>{var e;(e=n.tabpanelElement)&&(e.scrollTop=0)}))}})),a((()=>{})),a((()=>{(e=>{He(i.currentEmojisWithCategories,e,h)||(i.currentEmojisWithCategories=e)})(function(){const{searchMode:e,currentEmojis:t}=i;if(e)return[{category:"",emojis:t}];const n=new Map;for(const e of t){const t=e.category||"";let s=n.get(t);s||(s=[],n.set(t,s)),s.push(e)}return[...n.entries()].map((([e,t])=>({category:e,emojis:t}))).sort(((e,t)=>i.customCategorySorting(e.category,t.category)))}())})),a((()=>{i.activeSearchItemId=-1!==i.activeSearchItem&&i.currentEmojis[i.activeSearchItem].id})),a((()=>{const{rawSearchText:e}=i;ce((()=>{i.searchText=(e||"").trim(),i.activeSearchItem=-1}))})),a((()=>{i.skinTonePickerExpanded?n.skinToneDropdown.addEventListener("transitionend",(()=>{i.skinTonePickerExpandedAfterAnimation=!0}),{once:!0}):i.skinTonePickerExpandedAfterAnimation=!1})),{$set(e){We(i,e)},$destroy(){s.abort()}}}var Ve={categoriesLabel:"Categories",emojiUnsupportedMessage:"Your browser does not support color emoji.",favoritesLabel:"Favorites",loadingMessage:"Loading",networkErrorMessage:"Could not load emoji.",regionLabel:"Emoji picker",searchDescription:"When search results are available, press up or down to select and enter to choose.",searchLabel:"Search",searchResultsLabel:"Search results",skinToneDescription:"When expanded, press up or down to select and enter to choose.",skinToneLabel:"Choose a skin tone (currently {skinTone})",skinTonesLabel:"Skin tones",skinTones:["Default","Light","Medium-Light","Medium","Medium-Dark","Dark"],categories:{custom:"Custom","smileys-emotion":"Smileys and emoticons","people-body":"People and body","animals-nature":"Animals and nature","food-drink":"Food and drink","travel-places":"Travel and places",activities:"Activities",objects:"Objects",symbols:"Symbols",flags:"Flags"}};const Ke=["customEmoji","customCategorySorting","database","dataSource","i18n","locale","skinToneEmoji","emojiVersion"],Je=`:host{--emoji-font-family:${de}}`;class Qe extends HTMLElement{constructor(e){super(),this.attachShadow({mode:"open"});const t=document.createElement("style");t.textContent=":host{--emoji-size:1.375rem;--emoji-padding:0.5rem;--category-emoji-size:var(--emoji-size);--category-emoji-padding:var(--emoji-padding);--indicator-height:3px;--input-border-radius:0.5rem;--input-border-size:1px;--input-font-size:1rem;--input-line-height:1.5;--input-padding:0.25rem;--num-columns:8;--outline-size:2px;--border-size:1px;--skintone-border-radius:1rem;--category-font-size:1rem;display:flex;width:min-content;height:400px}:host,:host(.light){color-scheme:light;--background:#fff;--border-color:#e0e0e0;--indicator-color:#385ac1;--input-border-color:#999;--input-font-color:#111;--input-placeholder-color:#999;--outline-color:#999;--category-font-color:#111;--button-active-background:#e6e6e6;--button-hover-background:#d9d9d9}:host(.dark){color-scheme:dark;--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}@media (prefers-color-scheme:dark){:host{color-scheme:dark;--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}}:host([hidden]){display:none}button{margin:0;padding:0;border:0;background:0 0;box-shadow:none;-webkit-tap-highlight-color:transparent}button::-moz-focus-inner{border:0}input{padding:0;margin:0;line-height:1.15;font-family:inherit}input[type=search]{-webkit-appearance:none}:focus{outline:var(--outline-color) solid var(--outline-size);outline-offset:calc(-1*var(--outline-size))}:host([data-js-focus-visible]) :focus:not([data-focus-visible-added]){outline:0}:focus:not(:focus-visible){outline:0}.hide-focus{outline:0}*{box-sizing:border-box}.picker{contain:content;display:flex;flex-direction:column;background:var(--background);border:var(--border-size) solid var(--border-color);width:100%;height:100%;overflow:hidden;--total-emoji-size:calc(var(--emoji-size) + (2 * var(--emoji-padding)));--total-category-emoji-size:calc(var(--category-emoji-size) + (2 * var(--category-emoji-padding)))}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}.hidden{opacity:0;pointer-events:none}.abs-pos{position:absolute;left:0;top:0}.gone{display:none!important}.skintone-button-wrapper,.skintone-list{background:var(--background);z-index:3}.skintone-button-wrapper.expanded{z-index:1}.skintone-list{position:absolute;inset-inline-end:0;top:0;z-index:2;overflow:visible;border-bottom:var(--border-size) solid var(--border-color);border-radius:0 0 var(--skintone-border-radius) var(--skintone-border-radius);will-change:transform;transition:transform .2s ease-in-out;transform-origin:center 0}@media (prefers-reduced-motion:reduce){.skintone-list{transition-duration:.001s}}@supports not (inset-inline-end:0){.skintone-list{right:0}}.skintone-list.no-animate{transition:none}.tabpanel{overflow-y:auto;-webkit-overflow-scrolling:touch;will-change:transform;min-height:0;flex:1;contain:content}.emoji-menu{display:grid;grid-template-columns:repeat(var(--num-columns),var(--total-emoji-size));justify-content:space-around;align-items:flex-start;width:100%}.category{padding:var(--emoji-padding);font-size:var(--category-font-size);color:var(--category-font-color)}.custom-emoji,.emoji,button.emoji{height:var(--total-emoji-size);width:var(--total-emoji-size)}.emoji,button.emoji{font-size:var(--emoji-size);display:flex;align-items:center;justify-content:center;border-radius:100%;line-height:1;overflow:hidden;font-family:var(--emoji-font-family);cursor:pointer}@media (hover:hover) and (pointer:fine){.emoji:hover,button.emoji:hover{background:var(--button-hover-background)}}.emoji.active,.emoji:active,button.emoji.active,button.emoji:active{background:var(--button-active-background)}.custom-emoji{padding:var(--emoji-padding);object-fit:contain;pointer-events:none;background-repeat:no-repeat;background-position:center center;background-size:var(--emoji-size) var(--emoji-size)}.nav,.nav-button{align-items:center}.nav{display:grid;justify-content:space-between;contain:content}.nav-button{display:flex;justify-content:center}.nav-emoji{font-size:var(--category-emoji-size);width:var(--total-category-emoji-size);height:var(--total-category-emoji-size)}.indicator-wrapper{display:flex;border-bottom:1px solid var(--border-color)}.indicator{width:calc(100%/var(--num-groups));height:var(--indicator-height);opacity:var(--indicator-opacity);background-color:var(--indicator-color);will-change:transform,opacity;transition:opacity .1s linear,transform .25s ease-in-out}@media (prefers-reduced-motion:reduce){.indicator{will-change:opacity;transition:opacity .1s linear}}.pad-top,input.search{background:var(--background);width:100%}.pad-top{height:var(--emoji-padding);z-index:3}.search-row{display:flex;align-items:center;position:relative;padding-inline-start:var(--emoji-padding);padding-bottom:var(--emoji-padding)}.search-wrapper{flex:1;min-width:0}input.search{padding:var(--input-padding);border-radius:var(--input-border-radius);border:var(--input-border-size) solid var(--input-border-color);color:var(--input-font-color);font-size:var(--input-font-size);line-height:var(--input-line-height)}input.search::placeholder{color:var(--input-placeholder-color)}.favorites{display:flex;flex-direction:row;border-top:var(--border-size) solid var(--border-color);contain:content}.message{padding:var(--emoji-padding)}"+Je,this.shadowRoot.appendChild(t),this._ctx={locale:"en",dataSource:"https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json",skinToneEmoji:"",customCategorySorting:pe,customEmoji:null,i18n:Ve,emojiVersion:null,...e};for(const e of Ke)"database"!==e&&Object.prototype.hasOwnProperty.call(this,e)&&(this._ctx[e]=this[e],delete this[e]);this._dbFlush()}connectedCallback(){this._cmp||(this._cmp=qe(this.shadowRoot,this._ctx))}disconnectedCallback(){Ge((()=>{if(!this.isConnected&&this._cmp){this._cmp.$destroy(),this._cmp=void 0;const{database:e}=this._ctx;e.close().catch((e=>console.error(e)))}}))}static get observedAttributes(){return["locale","data-source","skin-tone-emoji","emoji-version"]}attributeChangedCallback(e,t,n){this._set(e.replace(/-([a-z])/g,((e,t)=>t.toUpperCase())),"emoji-version"===e?parseFloat(n):n)}_set(e,t){this._ctx[e]=t,this._cmp&&this._cmp.$set({[e]:t}),["locale","dataSource"].includes(e)&&this._dbFlush()}_dbCreate(){const{locale:e,dataSource:t,database:n}=this._ctx;n&&n.locale===e&&n.dataSource===t||this._set("database",new ie({locale:e,dataSource:t}))}_dbFlush(){Ge((()=>this._dbCreate()))}}const Ye={};for(const e of Ke)Ye[e]={get(){return"database"===e&&this._dbCreate(),this._ctx[e]},set(t){if("database"===e)throw new Error("database is read-only");this._set(e,t)}};Object.defineProperties(Qe.prototype,Ye),customElements.get("emoji-picker")||customElements.define("emoji-picker",Qe);class Ze extends s.AE{constructor(e,...t){super(e+".social-component"),this.append(...t)}}const Xe=new Qe;class et extends Ze{showing=!1;constructor(){super(".emoji-picker"),this.addAllowedEvents("select"),Xe.addEventListener("emoji-click",this.emojiClick),this.domElement.appendChild(Xe)}emojiClick=e=>{this.fireEvent("select",e.detail.unicode)};_hide=e=>{this.domElement.contains(e.target)||this.hide()};show(e,t){this.showing=!0,this.style({left:e,top:t}),setTimeout((()=>this.onWindow("click",this._hide)))}hide(){this.showing=!1,this.style({left:-999999,top:-999999}),this.offWindow("click",this._hide)}delete(){Xe.removeEventListener("emoji-click",this.emojiClick),this.domElement.removeChild(Xe),super.delete()}}const tt="*, author(user_id, display_name, avatar, avatar_thumb, stored_avatar, stored_avatar_thumb, x_username)";var nt=n(4155);const st=function(e){const t=[];let n=0;for(let s=0;s<e.length;s++){let r=e.charCodeAt(s);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296==(64512&r)&&s+1<e.length&&56320==(64512&e.charCodeAt(s+1))?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++s)),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t},rt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let t=0;t<e.length;t+=3){const r=e[t],i=t+1<e.length,a=i?e[t+1]:0,o=t+2<e.length,c=o?e[t+2]:0,l=r>>2,u=(3&r)<<4|a>>4;let h=(15&a)<<2|c>>6,d=63&c;o||(d=64,i||(h=64)),s.push(n[l],n[u],n[h],n[d])}return s.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(st(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,s=0;for(;n<e.length;){const r=e[n++];if(r<128)t[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=e[n++];t[s++]=String.fromCharCode((31&r)<<6|63&i)}else if(r>239&&r<365){const i=((7&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[s++]=String.fromCharCode(55296+(i>>10)),t[s++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],a=e[n++];t[s++]=String.fromCharCode((15&r)<<12|(63&i)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let t=0;t<e.length;){const r=n[e.charAt(t++)],i=t<e.length?n[e.charAt(t)]:0;++t;const a=t<e.length?n[e.charAt(t)]:64;++t;const o=t<e.length?n[e.charAt(t)]:64;if(++t,null==r||null==i||null==a||null==o)throw new it;const c=r<<2|i>>4;if(s.push(c),64!==a){const e=i<<4&240|a>>2;if(s.push(e),64!==o){const e=a<<6&192|o;s.push(e)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class it extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const at=function(e){return function(e){const t=st(e);return rt.encodeByteArray(t,!0)}(e).replace(/\./g,"")},ot=function(e){try{return rt.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};const ct=()=>function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,lt=()=>{try{return ct()||(()=>{if(void 0===nt||void 0===nt.env)return;const e=nt.env.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=e&&ot(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},ut=()=>{var e;return null===(e=lt())||void 0===e?void 0:e.config};class ht{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function dt(){try{return"object"==typeof indexedDB}catch(e){return!1}}function pt(){return new Promise(((e,t)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var e;t((null===(e=r.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}}))}class ft extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,ft.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gt.prototype.create)}}class gt{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},s=`${this.service}/${e}`,r=this.errors[e],i=r?function(e,t){return e.replace(mt,((e,n)=>{const s=t[n];return null!=s?String(s):`<${n}?>`}))}(r,n):"Error",a=`${this.serviceName}: ${i} (${s}).`;return new ft(s,a,n)}}const mt=/\{\$([^}]+)}/g;function yt(e,t){if(e===t)return!0;const n=Object.keys(e),s=Object.keys(t);for(const r of n){if(!s.includes(r))return!1;const n=e[r],i=t[r];if(bt(n)&&bt(i)){if(!yt(n,i))return!1}else if(n!==i)return!1}for(const e of s)if(!n.includes(e))return!1;return!0}function bt(e){return null!==e&&"object"==typeof e}function wt(e){return e&&e._delegate?e._delegate:e}class vt{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Et="[DEFAULT]";class At{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new ht;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),s=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(s)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(s)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Et})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e=Et){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e=Et){return this.instances.has(e)}getOptions(e=Et){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(e)&&t.resolve(s)}return s}onInit(e,t){var n;const s=this.normalizeInstanceIdentifier(t),r=null!==(n=this.onInitCallbacks.get(s))&&void 0!==n?n:new Set;r.add(e),this.onInitCallbacks.set(s,r);const i=this.instances.get(s);return i&&e(i,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(s=e,s===Et?void 0:s),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}var s;return n||null}normalizeInstanceIdentifier(e=Et){return this.component?this.component.multipleInstances?e:Et:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class kt{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new At(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const _t=[];var Pt;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Pt||(Pt={}));const xt={debug:Pt.DEBUG,verbose:Pt.VERBOSE,info:Pt.INFO,warn:Pt.WARN,error:Pt.ERROR,silent:Pt.SILENT},St=Pt.INFO,It={[Pt.DEBUG]:"log",[Pt.VERBOSE]:"log",[Pt.INFO]:"info",[Pt.WARN]:"warn",[Pt.ERROR]:"error"},Ct=(e,t,...n)=>{if(t<e.logLevel)return;const s=(new Date).toISOString(),r=It[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[r](`[${s}]  ${e.name}:`,...n)};const Tt=(e,t)=>t.some((t=>e instanceof t));let Ot,Nt;const jt=new WeakMap,Lt=new WeakMap,Bt=new WeakMap,Rt=new WeakMap,Mt=new WeakMap;let Ut={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Lt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Bt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return $t(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Dt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Nt||(Nt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(Gt(this),t),$t(jt.get(this))}:function(...t){return $t(e.apply(Gt(this),t))}:function(t,...n){const s=e.call(Gt(this),t,...n);return Bt.set(s,t.sort?t.sort():[t]),$t(s)}}function Ft(e){return"function"==typeof e?Dt(e):(e instanceof IDBTransaction&&function(e){if(Lt.has(e))return;const t=new Promise(((t,n)=>{const s=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",i),e.removeEventListener("abort",i)},r=()=>{t(),s()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",r),e.addEventListener("error",i),e.addEventListener("abort",i)}));Lt.set(e,t)}(e),Tt(e,Ot||(Ot=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Ut):e)}function $t(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const s=()=>{e.removeEventListener("success",r),e.removeEventListener("error",i)},r=()=>{t($t(e.result)),s()},i=()=>{n(e.error),s()};e.addEventListener("success",r),e.addEventListener("error",i)}));return t.then((t=>{t instanceof IDBCursor&&jt.set(t,e)})).catch((()=>{})),Mt.set(t,e),t}(e);if(Rt.has(e))return Rt.get(e);const t=Ft(e);return t!==e&&(Rt.set(e,t),Mt.set(t,e)),t}const Gt=e=>Mt.get(e);function Ht(e,t,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const a=indexedDB.open(e,t),o=$t(a);return s&&a.addEventListener("upgradeneeded",(e=>{s($t(a.result),e.oldVersion,e.newVersion,$t(a.transaction),e)})),n&&a.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),o.then((e=>{i&&e.addEventListener("close",(()=>i())),r&&e.addEventListener("versionchange",(e=>r(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),o}function zt(e,{blocked:t}={}){const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",(e=>t(e.oldVersion,e))),$t(n).then((()=>{}))}const Wt=["get","getKey","getAll","getAllKeys","count"],qt=["put","add","delete","clear"],Vt=new Map;function Kt(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(Vt.get(t))return Vt.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,r=qt.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!r&&!Wt.includes(n))return;const i=async function(e,...t){const i=this.transaction(e,r?"readwrite":"readonly");let a=i.store;return s&&(a=a.index(t.shift())),(await Promise.all([a[n](...t),r&&i.done]))[0]};return Vt.set(t,i),i}Ut=(e=>({...e,get:(t,n,s)=>Kt(t,n)||e.get(t,n,s),has:(t,n)=>!!Kt(t,n)||e.has(t,n)}))(Ut);class Jt{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const Qt="@firebase/app",Yt="0.9.28",Zt=new class{constructor(e){this.name=e,this._logLevel=St,this._logHandler=Ct,this._userLogHandler=null,_t.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?xt[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pt.DEBUG,...e),this._logHandler(this,Pt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pt.VERBOSE,...e),this._logHandler(this,Pt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pt.INFO,...e),this._logHandler(this,Pt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pt.WARN,...e),this._logHandler(this,Pt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pt.ERROR,...e),this._logHandler(this,Pt.ERROR,...e)}}("@firebase/app"),Xt="[DEFAULT]",en={[Qt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},tn=new Map,nn=new Map;function sn(e,t){try{e.container.addComponent(t)}catch(n){Zt.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function rn(e){const t=e.name;if(nn.has(t))return Zt.debug(`There were multiple attempts to register component ${t}.`),!1;nn.set(t,e);for(const t of tn.values())sn(t,e);return!0}function an(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const on=new gt("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class cn{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new vt("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw on.create("app-deleted",{appName:this._name})}}function ln(e,t={}){let n=e;if("object"!=typeof t){t={name:t}}const s=Object.assign({name:Xt,automaticDataCollectionEnabled:!1},t),r=s.name;if("string"!=typeof r||!r)throw on.create("bad-app-name",{appName:String(r)});if(n||(n=ut()),!n)throw on.create("no-options");const i=tn.get(r);if(i){if(yt(n,i.options)&&yt(s,i.config))return i;throw on.create("duplicate-app",{appName:r})}const a=new kt(r);for(const e of nn.values())a.addComponent(e);const o=new cn(n,s,a);return tn.set(r,o),o}function un(e,t,n){var s;let r=null!==(s=en[e])&&void 0!==s?s:e;n&&(r+=`-${n}`);const i=r.match(/\s|\//),a=t.match(/\s|\//);if(i||a){const e=[`Unable to register library "${r}" with version "${t}":`];return i&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void Zt.warn(e.join(" "))}rn(new vt(`${r}-version`,(()=>({library:r,version:t})),"VERSION"))}const hn="firebase-heartbeat-database",dn=1,pn="firebase-heartbeat-store";let fn=null;function gn(){return fn||(fn=Ht(hn,dn,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(pn)}catch(e){console.warn(e)}}}).catch((e=>{throw on.create("idb-open",{originalErrorMessage:e.message})}))),fn}async function mn(e,t){try{const n=(await gn()).transaction(pn,"readwrite"),s=n.objectStore(pn);await s.put(t,yn(e)),await n.done}catch(e){if(e instanceof ft)Zt.warn(e.message);else{const t=on.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});Zt.warn(t.message)}}}function yn(e){return`${e.name}!${e.options.appId}`}class bn{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new vn(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=wn();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==s&&!this._heartbeatsCache.heartbeats.some((e=>e.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=wn(),{heartbeatsToSend:n,unsentEntries:s}=function(e,t=1024){const n=[];let s=e.slice();for(const r of e){const e=n.find((e=>e.agent===r.agent));if(e){if(e.dates.push(r.date),En(n)>t){e.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),En(n)>t){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}(this._heartbeatsCache.heartbeats),r=at(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function wn(){return(new Date).toISOString().substring(0,10)}class vn{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!dt()&&pt().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await gn()).transaction(pn),n=await t.objectStore(pn).get(yn(e));return await t.done,n}catch(e){if(e instanceof ft)Zt.warn(e.message);else{const t=on.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});Zt.warn(t.message)}}}(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return mn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return mn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function En(e){return at(JSON.stringify({version:2,heartbeats:e})).length}var An;An="",rn(new vt("platform-logger",(e=>new Jt(e)),"PRIVATE")),rn(new vt("heartbeat",(e=>new bn(e)),"PRIVATE")),un(Qt,Yt,An),un(Qt,Yt,"esm2017"),un("fire-js","");un("firebase","10.8.1","app");const kn="@firebase/installations",_n="0.6.5",Pn=1e4,xn=`w:${_n}`,Sn="FIS_v2",In="https://firebaseinstallations.googleapis.com/v1",Cn=36e5,Tn=new gt("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function On(e){return e instanceof ft&&e.code.includes("request-failed")}function Nn({projectId:e}){return`${In}/projects/${e}/installations`}function jn(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function Ln(e,t){const n=(await t.json()).error;return Tn.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function Bn({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function Rn(e,{refreshToken:t}){const n=Bn(e);return n.append("Authorization",function(e){return`${Sn} ${e}`}(t)),n}async function Mn(e){const t=await e();return t.status>=500&&t.status<600?e():t}function Un(e){return new Promise((t=>{setTimeout(t,e)}))}const Dn=/^[cdef][\w-]{21}$/,Fn="";function $n(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(n=e,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}(e);return Dn.test(t)?t:Fn}catch(e){return Fn}}function Gn(e){return`${e.appName}!${e.appId}`}const Hn=new Map;function zn(e,t){const n=Gn(e);Wn(n,t),function(e,t){const n=Vn();n&&n.postMessage({key:e,fid:t});Kn()}(n,t)}function Wn(e,t){const n=Hn.get(e);if(n)for(const e of n)e(t)}let qn=null;function Vn(){return!qn&&"BroadcastChannel"in self&&(qn=new BroadcastChannel("[Firebase] FID Change"),qn.onmessage=e=>{Wn(e.data.key,e.data.fid)}),qn}function Kn(){0===Hn.size&&qn&&(qn.close(),qn=null)}const Jn="firebase-installations-database",Qn=1,Yn="firebase-installations-store";let Zn=null;function Xn(){return Zn||(Zn=Ht(Jn,Qn,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Yn)}})),Zn}async function es(e,t){const n=Gn(e),s=(await Xn()).transaction(Yn,"readwrite"),r=s.objectStore(Yn),i=await r.get(n);return await r.put(t,n),await s.done,i&&i.fid===t.fid||zn(e,t.fid),t}async function ts(e){const t=Gn(e),n=(await Xn()).transaction(Yn,"readwrite");await n.objectStore(Yn).delete(t),await n.done}async function ns(e,t){const n=Gn(e),s=(await Xn()).transaction(Yn,"readwrite"),r=s.objectStore(Yn),i=await r.get(n),a=t(i);return void 0===a?await r.delete(n):await r.put(a,n),await s.done,!a||i&&i.fid===a.fid||zn(e,a.fid),a}async function ss(e){let t;const n=await ns(e.appConfig,(n=>{const s=function(e){const t=e||{fid:$n(),registrationStatus:0};return as(t)}(n),r=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(Tn.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},s=async function(e,t){try{const n=await async function({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const s=Nn(e),r=Bn(e),i=t.getImmediate({optional:!0});if(i){const e=await i.getHeartbeatsHeader();e&&r.append("x-firebase-client",e)}const a={fid:n,authVersion:Sn,appId:e.appId,sdkVersion:xn},o={method:"POST",headers:r,body:JSON.stringify(a)},c=await Mn((()=>fetch(s,o)));if(c.ok){const e=await c.json();return{fid:e.fid||n,registrationStatus:2,refreshToken:e.refreshToken,authToken:jn(e.authToken)}}throw await Ln("Create Installation",c)}(e,t);return es(e.appConfig,n)}catch(n){throw On(n)&&409===n.customData.serverCode?await ts(e.appConfig):await es(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}(e,n);return{installationEntry:n,registrationPromise:s}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:rs(e)}:{installationEntry:t}}(e,s);return t=r.registrationPromise,r.installationEntry}));return n.fid===Fn?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function rs(e){let t=await is(e.appConfig);for(;1===t.registrationStatus;)await Un(100),t=await is(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await ss(e);return n||t}return t}function is(e){return ns(e,(e=>{if(!e)throw Tn.create("installation-not-found");return as(e)}))}function as(e){return 1===(t=e).registrationStatus&&t.registrationTime+Pn<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function os({appConfig:e,heartbeatServiceProvider:t},n){const s=function(e,{fid:t}){return`${Nn(e)}/${t}/authTokens:generate`}(e,n),r=Rn(e,n),i=t.getImmediate({optional:!0});if(i){const e=await i.getHeartbeatsHeader();e&&r.append("x-firebase-client",e)}const a={installation:{sdkVersion:xn,appId:e.appId}},o={method:"POST",headers:r,body:JSON.stringify(a)},c=await Mn((()=>fetch(s,o)));if(c.ok){return jn(await c.json())}throw await Ln("Generate Auth Token",c)}async function cs(e,t=!1){let n;const s=await ns(e.appConfig,(s=>{if(!us(s))throw Tn.create("not-registered");const r=s.authToken;if(!t&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+Cn}(e)}(r))return s;if(1===r.requestStatus)return n=async function(e,t){let n=await ls(e.appConfig);for(;1===n.authToken.requestStatus;)await Un(100),n=await ls(e.appConfig);const s=n.authToken;return 0===s.requestStatus?cs(e,t):s}(e,t),s;{if(!navigator.onLine)throw Tn.create("app-offline");const t=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(s);return n=async function(e,t){try{const n=await os(e,t),s=Object.assign(Object.assign({},t),{authToken:n});return await es(e.appConfig,s),n}catch(n){if(!On(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await es(e.appConfig,n)}else await ts(e.appConfig);throw n}}(e,t),t}}));return n?await n:s.authToken}function ls(e){return ns(e,(e=>{if(!us(e))throw Tn.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+Pn<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var n}))}function us(e){return void 0!==e&&2===e.registrationStatus}async function hs(e,t=!1){const n=e;await async function(e){const{registrationPromise:t}=await ss(e);t&&await t}(n);return(await cs(n,t)).token}function ds(e){return Tn.create("missing-app-config-values",{valueName:e})}const ps="installations",fs=e=>{const t=an(e.getProvider("app").getImmediate(),ps).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:s}=await ss(t);return s?s.catch(console.error):cs(t).catch(console.error),n.fid}(t),getToken:e=>hs(t,e)}};rn(new vt(ps,(e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw ds("App Configuration");if(!e.name)throw ds("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw ds(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:an(t,"heartbeat"),_delete:()=>Promise.resolve()}}),"PUBLIC")),rn(new vt("installations-internal",fs,"PRIVATE")),un(kn,_n),un(kn,_n,"esm2017");const gs="/firebase-messaging-sw.js",ms="/firebase-cloud-messaging-push-scope",ys="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",bs="https://fcmregistrations.googleapis.com/v1",ws="google.c.a.c_id",vs="google.c.a.c_l",Es="google.c.a.ts";var As,ks;function _s(e){const t=new Uint8Array(e);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ps(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),s=new Uint8Array(n.length);for(let e=0;e<n.length;++e)s[e]=n.charCodeAt(e);return s}!function(e){e[e.DATA_MESSAGE=1]="DATA_MESSAGE",e[e.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"}(As||(As={})),function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"}(ks||(ks={}));const xs="fcm_token_details_db",Ss=5,Is="fcm_token_object_Store";const Cs="firebase-messaging-database",Ts=1,Os="firebase-messaging-store";let Ns=null;function js(){return Ns||(Ns=Ht(Cs,Ts,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Os)}})),Ns}async function Ls(e){const t=Rs(e),n=await js(),s=await n.transaction(Os).objectStore(Os).get(t);if(s)return s;{const t=await async function(e){if("databases"in indexedDB){const e=(await indexedDB.databases()).map((e=>e.name));if(!e.includes(xs))return null}let t=null;return(await Ht(xs,Ss,{upgrade:async(n,s,r,i)=>{var a;if(s<2)return;if(!n.objectStoreNames.contains(Is))return;const o=i.objectStore(Is),c=await o.index("fcmSenderId").get(e);if(await o.clear(),c)if(2===s){const e=c;if(!e.auth||!e.p256dh||!e.endpoint)return;t={token:e.fcmToken,createTime:null!==(a=e.createTime)&&void 0!==a?a:Date.now(),subscriptionOptions:{auth:e.auth,p256dh:e.p256dh,endpoint:e.endpoint,swScope:e.swScope,vapidKey:"string"==typeof e.vapidKey?e.vapidKey:_s(e.vapidKey)}}}else if(3===s){const e=c;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:_s(e.auth),p256dh:_s(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:_s(e.vapidKey)}}}else if(4===s){const e=c;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:_s(e.auth),p256dh:_s(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:_s(e.vapidKey)}}}}})).close(),await zt(xs),await zt("fcm_vapid_details_db"),await zt("undefined"),function(e){if(!e||!e.subscriptionOptions)return!1;const{subscriptionOptions:t}=e;return"number"==typeof e.createTime&&e.createTime>0&&"string"==typeof e.token&&e.token.length>0&&"string"==typeof t.auth&&t.auth.length>0&&"string"==typeof t.p256dh&&t.p256dh.length>0&&"string"==typeof t.endpoint&&t.endpoint.length>0&&"string"==typeof t.swScope&&t.swScope.length>0&&"string"==typeof t.vapidKey&&t.vapidKey.length>0}(t)?t:null}(e.appConfig.senderId);if(t)return await Bs(e,t),t}}async function Bs(e,t){const n=Rs(e),s=(await js()).transaction(Os,"readwrite");return await s.objectStore(Os).put(t,n),await s.done,t}function Rs({appConfig:e}){return e.appId}const Ms=new gt("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});async function Us(e,t){const n={method:"DELETE",headers:await Fs(e)};try{const s=await fetch(`${Ds(e.appConfig)}/${t}`,n),r=await s.json();if(r.error){const e=r.error.message;throw Ms.create("token-unsubscribe-failed",{errorInfo:e})}}catch(e){throw Ms.create("token-unsubscribe-failed",{errorInfo:null==e?void 0:e.toString()})}}function Ds({projectId:e}){return`${bs}/projects/${e}/registrations`}async function Fs({appConfig:e,installations:t}){const n=await t.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function $s({p256dh:e,auth:t,endpoint:n,vapidKey:s}){const r={web:{endpoint:n,auth:t,p256dh:e}};return s!==ys&&(r.web.applicationPubKey=s),r}const Gs=6048e5;async function Hs(e){const t=await async function(e,t){const n=await e.pushManager.getSubscription();if(n)return n;return e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ps(t)})}(e.swRegistration,e.vapidKey),n={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:t.endpoint,auth:_s(t.getKey("auth")),p256dh:_s(t.getKey("p256dh"))},s=await Ls(e.firebaseDependencies);if(s){if(function(e,t){const n=t.vapidKey===e.vapidKey,s=t.endpoint===e.endpoint,r=t.auth===e.auth,i=t.p256dh===e.p256dh;return n&&s&&r&&i}(s.subscriptionOptions,n))return Date.now()>=s.createTime+Gs?async function(e,t){try{const n=await async function(e,t){const n=await Fs(e),s=$s(t.subscriptionOptions),r={method:"PATCH",headers:n,body:JSON.stringify(s)};let i;try{const n=await fetch(`${Ds(e.appConfig)}/${t.token}`,r);i=await n.json()}catch(e){throw Ms.create("token-update-failed",{errorInfo:null==e?void 0:e.toString()})}if(i.error){const e=i.error.message;throw Ms.create("token-update-failed",{errorInfo:e})}if(!i.token)throw Ms.create("token-update-no-token");return i.token}(e.firebaseDependencies,t),s=Object.assign(Object.assign({},t),{token:n,createTime:Date.now()});return await Bs(e.firebaseDependencies,s),n}catch(t){throw await zs(e),t}}(e,{token:s.token,createTime:Date.now(),subscriptionOptions:n}):s.token;try{await Us(e.firebaseDependencies,s.token)}catch(e){console.warn(e)}return Ws(e.firebaseDependencies,n)}return Ws(e.firebaseDependencies,n)}async function zs(e){const t=await Ls(e.firebaseDependencies);t&&(await Us(e.firebaseDependencies,t.token),await async function(e){const t=Rs(e),n=(await js()).transaction(Os,"readwrite");await n.objectStore(Os).delete(t),await n.done}(e.firebaseDependencies));const n=await e.swRegistration.pushManager.getSubscription();return!n||n.unsubscribe()}async function Ws(e,t){const n=await async function(e,t){const n=await Fs(e),s=$s(t),r={method:"POST",headers:n,body:JSON.stringify(s)};let i;try{const t=await fetch(Ds(e.appConfig),r);i=await t.json()}catch(e){throw Ms.create("token-subscribe-failed",{errorInfo:null==e?void 0:e.toString()})}if(i.error){const e=i.error.message;throw Ms.create("token-subscribe-failed",{errorInfo:e})}if(!i.token)throw Ms.create("token-subscribe-no-token");return i.token}(e,t),s={token:n,createTime:Date.now(),subscriptionOptions:t};return await Bs(e,s),s.token}function qs(e){const t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcmMessageId};return function(e,t){if(!t.notification)return;e.notification={};const n=t.notification.title;n&&(e.notification.title=n);const s=t.notification.body;s&&(e.notification.body=s);const r=t.notification.image;r&&(e.notification.image=r);const i=t.notification.icon;i&&(e.notification.icon=i)}(t,e),function(e,t){if(!t.data)return;e.data=t.data}(t,e),function(e,t){var n,s,r,i,a;if(!t.fcmOptions&&!(null===(n=t.notification)||void 0===n?void 0:n.click_action))return;e.fcmOptions={};const o=null!==(r=null===(s=t.fcmOptions)||void 0===s?void 0:s.link)&&void 0!==r?r:null===(i=t.notification)||void 0===i?void 0:i.click_action;o&&(e.fcmOptions.link=o);const c=null===(a=t.fcmOptions)||void 0===a?void 0:a.analytics_label;c&&(e.fcmOptions.analyticsLabel=c)}(t,e),t}function Vs(e,t){const n=[];for(let s=0;s<e.length;s++)n.push(e.charAt(s)),s<t.length&&n.push(t.charAt(s));return n.join("")}function Ks(e){return Ms.create("missing-app-config-values",{valueName:e})}Vs("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Vs("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Js{constructor(e,t,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const s=function(e){if(!e||!e.options)throw Ks("App Configuration Object");if(!e.name)throw Ks("App Name");const t=["projectId","apiKey","appId","messagingSenderId"],{options:n}=e;for(const e of t)if(!n[e])throw Ks(e);return{appName:e.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:s,installations:t,analyticsProvider:n}}_delete(){return Promise.resolve()}}async function Qs(e){try{e.swRegistration=await navigator.serviceWorker.register(gs,{scope:ms}),e.swRegistration.update().catch((()=>{}))}catch(e){throw Ms.create("failed-service-worker-registration",{browserErrorMessage:null==e?void 0:e.message})}}async function Ys(e,t){if(!navigator)throw Ms.create("only-available-in-window");if("default"===Notification.permission&&await Notification.requestPermission(),"granted"!==Notification.permission)throw Ms.create("permission-blocked");return await async function(e,t){t?e.vapidKey=t:e.vapidKey||(e.vapidKey=ys)}(e,null==t?void 0:t.vapidKey),await async function(e,t){if(t||e.swRegistration||await Qs(e),t||!e.swRegistration){if(!(t instanceof ServiceWorkerRegistration))throw Ms.create("invalid-sw-registration");e.swRegistration=t}}(e,null==t?void 0:t.serviceWorkerRegistration),Hs(e)}async function Zs(e,t,n){const s=function(e){switch(e){case ks.NOTIFICATION_CLICKED:return"notification_open";case ks.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t);(await e.firebaseDependencies.analyticsProvider.get()).logEvent(s,{message_id:n[ws],message_name:n[vs],message_time:n[Es],message_device_time:Math.floor(Date.now()/1e3)})}async function Xs(e,t){const n=t.data;if(!n.isFirebaseMessaging)return;e.onMessageHandler&&n.messageType===ks.PUSH_RECEIVED&&("function"==typeof e.onMessageHandler?e.onMessageHandler(qs(n)):e.onMessageHandler.next(qs(n)));const s=n.data;var r;"object"==typeof(r=s)&&r&&ws in r&&"1"===s["google.c.a.e"]&&await Zs(e,n.messageType,s)}const er="@firebase/messaging",tr="0.12.6",nr=e=>{const t=e.getProvider("messaging").getImmediate();return{getToken:e=>Ys(t,e)}};async function sr(){try{await pt()}catch(e){return!1}return"undefined"!=typeof window&&dt()&&!("undefined"==typeof navigator||!navigator.cookieEnabled)&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function rr(e=function(e=Xt){const t=tn.get(e);if(!t&&e===Xt&&ut())return ln();if(!t)throw on.create("no-app",{appName:e});return t}()){return sr().then((e=>{if(!e)throw Ms.create("unsupported-browser")}),(e=>{throw Ms.create("indexed-db-unsupported")})),an(wt(e),"messaging").getImmediate()}rn(new vt("messaging",(e=>{const t=new Js(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",(e=>Xs(t,e))),t}),"PUBLIC")),rn(new vt("messaging-internal",nr,"PRIVATE")),un(er,tr),un(er,tr,"esm2017");class ir extends s.nd{vapidKey;app;messaging;init(e,t){this.app=ln(e),this.messaging=rr(this.app),this.vapidKey=t}async requestPermissionAndSaveToken(){if("granted"===("granted"===Notification.permission?"granted":await new Promise((e=>{Notification.requestPermission((t=>e(t)))})))){const e=await async function(e,t){return Ys(e=wt(e),t)}(this.messaging,{vapidKey:this.vapidKey}),{error:t}=await s.JA.client.functions.invoke("store-fcm-token",{body:{fcmToken:e}});if(t)throw t;return!0}return!1}async closeAllNotifications(e){const t=await navigator.serviceWorker.getRegistration("/firebase-cloud-messaging-push-scope");if(t){const n=await t.getNotifications({tag:e});for(const e of n)e.close()}}}const ar=new ir;class or extends s.TZ{constructor(){super("feedbacks","*",50)}async createFeedback(e){await this.safeInsert(e)}}const cr=new or;class lr extends s.SN{input;submitButton;constructor(e){super(".leave-feedback-modal",{barrierDismissible:!0}),this.title="Leave Feedback",this.main.append((0,s.el)("form",this.input=(0,s.el)("textarea",{placeholder:"Leave feedback here"}),this.submitButton=new s.zx({tag:".submit",type:s.L$.Contained,title:"Submit"}),{submit:async t=>{t.preventDefault(),this.submitButton.loading=!0;try{await cr.createFeedback({user_id:e,feedback:this.input.domElement.value}),new s.bZ({title:"Feedback submitted",message:"Thank you for your feedback!"}),this.delete()}catch(e){console.error(e),this.submitButton.loading=!1}}}))}}class ur extends s.GI{constructor(e){super(".push-setting-popup",{barrierDismissible:!0}),s.yO.isMobileDevice?s.yO.isAndroid?s.yO.installed?(this.header.append((0,s.el)("h1",(0,s.WI)("push-setting-popup-android-app-title",{serviceName:e}),new s.zx({tag:".close",type:s.L$.Circle,icon:new s.OL("close"),click:()=>this.delete()}))),this.main.append((0,s.el)("p",(0,s.WI)("push-setting-popup-android-app-message-1",{serviceName:e})),(0,s.el)("ol",(0,s.el)("li",(0,s.WI)("push-setting-popup-android-app-step-1",{serviceName:e}),(0,s.el)("img",{src:"/images/push-setting-popup/android/app/1.jpg"})),(0,s.el)("li",(0,s.WI)("push-setting-popup-android-app-step-2",{serviceName:e}),(0,s.el)("img",{src:"/images/push-setting-popup/android/app/2.jpg"})),(0,s.el)("li",(0,s.WI)("push-setting-popup-android-app-step-3",{serviceName:e}),(0,s.el)("img",{src:"/images/push-setting-popup/android/app/3.jpg"}))),(0,s.el)("p",(0,s.WI)("push-setting-popup-android-app-message-2",{serviceName:e})))):(this.header.append((0,s.el)("h1",(0,s.WI)("push-setting-popup-android-web-title",{serviceName:e}),new s.zx({tag:".close",type:s.L$.Circle,icon:new s.OL("close"),click:()=>this.delete()}))),this.main.append((0,s.el)("p",(0,s.WI)("push-setting-popup-android-web-message-1",{serviceName:e})),(0,s.el)("ol",(0,s.el)("li",(0,s.WI)("push-setting-popup-android-web-step-1",{serviceName:e}),(0,s.el)("img",{src:"/images/push-setting-popup/android/web/1.jpg"})),(0,s.el)("li",(0,s.WI)("push-setting-popup-android-web-step-2",{serviceName:e}),(0,s.el)("img",{src:"/images/push-setting-popup/android/web/2.jpg"})),(0,s.el)("li",(0,s.WI)("push-setting-popup-android-web-step-3",{serviceName:e}),(0,s.el)("img",{src:"/images/push-setting-popup/android/web/3.jpg"})),(0,s.el)("li",(0,s.WI)("push-setting-popup-android-web-step-4",{serviceName:e}),(0,s.el)("img",{src:"/images/push-setting-popup/android/web/4.jpg"}))),(0,s.el)("p",(0,s.WI)("push-setting-popup-android-web-message-2",{serviceName:e})))):(this.header.append((0,s.el)("h1",(0,s.WI)("push-setting-popup-ios-title",{serviceName:e})),new s.zx({tag:".close",type:s.L$.Circle,icon:new s.OL("close"),click:()=>this.delete()})),this.main.append((0,s.el)("p",(0,s.WI)("push-setting-popup-ios-message-1",{serviceName:e})),(0,s.el)("ol",(0,s.el)("li",(0,s.WI)("push-setting-popup-ios-step-1",{serviceName:e}),(0,s.el)("img",{src:"/images/push-setting-popup/ios/1.jpg"})),(0,s.el)("li",(0,s.WI)("push-setting-popup-ios-step-2",{serviceName:e}),(0,s.el)("img",{src:"/images/push-setting-popup/ios/2.jpg"})),(0,s.el)("li",(0,s.WI)("push-setting-popup-ios-step-3",{serviceName:e}),(0,s.el)("img",{src:"/images/push-setting-popup/ios/3.jpg"}))),(0,s.el)("p",(0,s.WI)("push-setting-popup-ios-message-2",{serviceName:e})))):s.yO.installed?(this.header.append((0,s.el)("h1",(0,s.WI)("push-setting-popup-pc-app-title",{serviceName:e}),new s.zx({tag:".close",type:s.L$.Circle,icon:new s.OL("close"),click:()=>this.delete()}))),this.main.append((0,s.el)("p",(0,s.WI)("push-setting-popup-pc-app-message-1",{serviceName:e})),(0,s.el)("ol",(0,s.el)("li",(0,s.WI)("push-setting-popup-pc-app-step-1",{serviceName:e}),(0,s.el)("img",{src:"/images/push-setting-popup/pc/app/1.jpg"})),(0,s.el)("li",(0,s.WI)("push-setting-popup-pc-app-step-2",{serviceName:e}),(0,s.el)("img",{src:"/images/push-setting-popup/pc/app/2.jpg"})),(0,s.el)("li",(0,s.WI)("push-setting-popup-pc-app-step-3",{serviceName:e}),(0,s.el)("img",{src:"/images/push-setting-popup/pc/app/3.jpg"})),(0,s.el)("li",(0,s.WI)("push-setting-popup-pc-app-step-4",{serviceName:e}),(0,s.el)("img",{src:"/images/push-setting-popup/pc/app/4.jpg"}))),(0,s.el)("p",(0,s.WI)("push-setting-popup-pc-app-message-2",{serviceName:e})))):(this.header.append((0,s.el)("h1",(0,s.WI)("push-setting-popup-pc-web-title",{serviceName:e}),new s.zx({tag:".close",type:s.L$.Circle,icon:new s.OL("close"),click:()=>this.delete()}))),this.main.append((0,s.el)("p",(0,s.WI)("push-setting-popup-pc-web-message-1",{serviceName:e})),(0,s.el)("ol",(0,s.el)("li",(0,s.WI)("push-setting-popup-pc-web-step-1",{serviceName:e}),(0,s.el)("img",{src:"/images/push-setting-popup/pc/web/1.jpg"})),(0,s.el)("li",(0,s.WI)("push-setting-popup-pc-web-step-2",{serviceName:e}),(0,s.el)("img",{src:"/images/push-setting-popup/pc/web/2.jpg"})),(0,s.el)("li",(0,s.WI)("push-setting-popup-pc-web-step-3",{serviceName:e}),(0,s.el)("img",{src:"/images/push-setting-popup/pc/web/3.jpg"})),(0,s.el)("li",(0,s.WI)("push-setting-popup-pc-web-step-4",{serviceName:e}),(0,s.el)("img",{src:"/images/push-setting-popup/pc/web/4.jpg"})),(0,s.el)("li",(0,s.WI)("push-setting-popup-pc-web-step-5",{serviceName:e}),(0,s.el)("img",{src:"/images/push-setting-popup/pc/web/5.jpg"}))),(0,s.el)("p",(0,s.WI)("push-setting-popup-pc-web-message-2",{serviceName:e})))),this.footer.append(new s.zx({tag:".confirm",title:"OK",click:()=>this.delete()}))}}const hr={"post-form-post-button":"Post","post-form-posting-button":"Posting...","global-post-list-empty-message":"No posts yet","following-post-list-empty-message":"No posts from followed users yet","getting-email-from-x-error-message":"Error getting user email from external provider. Please add an email in your X account settings and allow email access.\n","message-too-long-alert-title":"Message Length Exceeded","message-too-long-alert-message":"Your message is too long. The maximum allowed length is {maxLength} characters. Please shorten your message.","pwa-install-popup-pc-title":"Installing {serviceName} on Your Computer","pwa-install-popup-pc-message-1":"Follow these simple steps to install {serviceName} to your computer for quick and easy access:\n","pwa-install-popup-pc-step-1":"Navigate to {serviceName} in your browser and click the install icon.","pwa-install-popup-pc-step-2":'In the "Install app?" popup, click "Install" to complete the process.',"pwa-install-popup-pc-message-2":"By following these simple steps, you can easily install {serviceName} on your computer and access it conveniently.","pwa-install-popup-android-title":"Installing {serviceName} on Android","pwa-install-popup-android-message-1":"Follow these simple steps to add {serviceName} to your Android device's home screen for quick and easy access:\n","pwa-install-popup-android-step-1":"Open {serviceName} website in your Android phone's web browser and tap on the three-dot menu icon located at the top right corner of the browser.","pwa-install-popup-android-step-2":'From the dropdown menu that appears, select the "Add to Home screen" option.',"pwa-install-popup-android-step-3":'A popup window titled "Add to Home screen" will open, displaying the name of the app. Tap on the "Add" button to confirm the installation.',"pwa-install-popup-android-step-4":"{serviceName} will now be installed on your Android phone's home screen, acting as a standalone app. You can launch it directly from the home screen, just like any other app.\n","pwa-install-popup-android-message-2":"By following these simple steps, you can easily install {serviceName} on your Android device and access it conveniently from your home screen.","pwa-install-popup-ios-title":"Installing {serviceName} on iOS","pwa-install-popup-ios-message-1":"You can easily install {serviceName} on your iOS device for quick access. Just follow these simple steps:\n","pwa-install-popup-ios-step-1":'While viewing {serviceName} website in Safari, tap the "Share" button (square with an up arrow) located at the bottom of the screen.',"pwa-install-popup-ios-step-2":"Scroll down the list of options in the Share menu that appears.","pwa-install-popup-ios-step-3":'Find and tap the "Add to Home Screen" option in the list.',"pwa-install-popup-ios-step-4":'Tap the "Add" button in the upper-right corner to finish adding {serviceName} to your iOS device\'s Home Screen.',"pwa-install-popup-ios-message-2":"The app will now appear on your Home Screen like a native app icon. Tapping this icon will quickly launch {serviceName} in a full-screen, app-like interface for easy access and use.","push-setting-popup-pc-app-title":"Enabling Push Notifications","push-setting-popup-pc-app-message-1":"Follow these steps to allow push notifications from {serviceName} on your your computer:\n","push-setting-popup-pc-app-step-1":"Open {serviceName} app. Click on the three-dot icon in the upper right corner of the screen to open the menu.","push-setting-popup-pc-app-step-2":'From the dropdown menu, select "App info".',"push-setting-popup-pc-app-step-3":"In the app info screen, click on the Settings (gear) icon in the upper right corner.","push-setting-popup-pc-app-step-4":'In the App settings screen, toggle the switch to the right of "Notifications" to enable push notifications for {serviceName} app.',"push-setting-popup-pc-app-message-2":'Once enabled, you will be able to receive push notifications from {serviceName} on your computer. Notifications can be disabled at any time by following the same steps and turning off the "Notifications" switch.',"push-setting-popup-pc-web-title":"Enabling Push Notifications","push-setting-popup-pc-web-message-1":"Follow these steps to allow push notifications from {serviceName} on your your computer:\n","push-setting-popup-pc-web-step-1":"Open the options menu by clicking the settings icon in the top left corner of the app.","push-setting-popup-pc-web-step-2":'Select "Site settings" from the options that appear.',"push-setting-popup-pc-web-step-3":'In the site settings, scroll down to the "Notifications" permission.',"push-setting-popup-pc-web-step-4":'Click the drop-down next to Notifications and select "Allow" to enable push notifications for {serviceName}.',"push-setting-popup-pc-web-step-5":"Reload the page to apply your updated notification settings.","push-setting-popup-pc-web-message-2":"Once enabled, you will be able to receive push notifications from {serviceName} on your computer. You can always change this permission later from the site settings if desired.","push-setting-popup-android-app-title":"Enabling Push Notifications","push-setting-popup-android-app-message-1":"Follow these steps to allow push notifications from {serviceName} on your Android device:\n","push-setting-popup-android-app-step-1":"Long press {serviceName} icon to open the Site Settings menu.","push-setting-popup-android-app-step-2":"In the Site Settings, tap on Notifications.","push-setting-popup-android-app-step-3":'Tap the switch next to "Allow notifications" to enable push notifications from {serviceName}.',"push-setting-popup-android-app-message-2":'Once enabled, you will be able to receive push notifications from {serviceName} on your Android device. Notifications can be disabled at any time by following the same steps and turning off the "Allow notifications" switch.',"push-setting-popup-android-web-title":"Enabling Push Notifications","push-setting-popup-android-web-message-1":"Follow these steps to allow push notifications from {serviceName} on your Android device:\n","push-setting-popup-android-web-step-1":"Open {serviceName} in your Android browser and tap the browser menu icon (typically three dots in the upper right corner).","push-setting-popup-android-web-step-2":'In the menu that appears, select "Permissions".',"push-setting-popup-android-web-step-3":'Tap on "Notifications" to open the notification permission settings for {serviceName}.',"push-setting-popup-android-web-step-4":'Tap the switch next to "Allow notifications" to enable push notifications from {serviceName}.',"push-setting-popup-android-web-message-2":'Once enabled, you will be able to receive push notifications from {serviceName} on your Android device. Notifications can be disabled at any time by following the same steps and turning off the "Allow notifications" switch.',"push-setting-popup-ios-title":"Enabling Push Notifications","push-setting-popup-ios-message-1":"Follow these steps to allow push notifications from {serviceName} on your iOS device:\n","push-setting-popup-ios-step-1":'Open the Settings app on your device and scroll down until you see the "Notifications" option and tap on it to open the Notifications settings screen.',"push-setting-popup-ios-step-2":'Scroll down the list of apps until you find "{serviceName}". Tap on it to open the notification settings for {serviceName}.',"push-setting-popup-ios-step-3":'On {serviceName} notification settings screen, tap the toggle switch next to "Allow Notifications" to turn on push notifications for the app.',"push-setting-popup-ios-message-2":'Once enabled, you will be able to receive push notifications from {serviceName} on your iOS device. Notifications can be disabled at any time by following the same steps and turning off the "Allow Notifications" switch.'},dr=null,pr=null,fr=null,gr=null;function mr(){s.WI.setMessages({en:hr,zh:pr,"zh-tw":gr,"zh-hk":fr,ja:dr})}class yr extends s.nd{user;get signed(){return void 0!==this.user}async init(e){const{data:t,error:n}=await s.JA.client.auth.getSession();if(n)throw n;const r=t?.session?.user;r&&([this.user]=await Promise.all([this.fetchUser(r.id),e?.(r.id)]),ar.requestPermissionAndSaveToken())}async signOut(){await s.JA.signOut(),location.reload()}async deleteAccount(){const{error:e}=await s.JA.client.functions.invoke("delete-account");if(e)throw e;this.signOut()}}class br extends s.KD{async fetchByXUsername(e){return await this.safeSelectSingle((t=>t.eq("x_username",e)))}}}},c={};function l(e){var t=c[e];if(void 0!==t)return t.exports;var n=c[e]={id:e,loaded:!1,exports:{}};return o[e].call(n.exports,n,n.exports,l),n.loaded=!0,n.exports}l.m=o,e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",s=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},l.a=(r,i,a)=>{var o;a&&((o=[]).d=-1);var c,l,u,h=new Set,d=r.exports,p=new Promise(((e,t)=>{u=t,l=e}));p[t]=d,p[e]=e=>(o&&e(o),h.forEach(e),p.catch((e=>{}))),r.exports=p,i((r=>{var i;c=(r=>r.map((r=>{if(null!==r&&"object"==typeof r){if(r[e])return r;if(r.then){var i=[];i.d=0,r.then((e=>{a[t]=e,s(i)}),(e=>{a[n]=e,s(i)}));var a={};return a[e]=e=>e(i),a}}var o={};return o[e]=e=>{},o[t]=r,o})))(r);var a=()=>c.map((e=>{if(e[n])throw e[n];return e[t]})),l=new Promise((t=>{(i=()=>t(a)).r=0;var n=e=>e!==o&&!h.has(e)&&(h.add(e),e&&!e.d&&(i.r++,e.push(i)));c.map((t=>t[e](n)))}));return i.r?l:a()}),(e=>(e?u(p[n]=e):l(d),s(o)))),o&&o.d<0&&(o.d=0)},l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},i=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,l.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var n=Object.create(null);l.r(n);var s={};r=r||[null,i({}),i([]),i(i)];for(var a=2&t&&e;"object"==typeof a&&!~r.indexOf(a);a=i(a))Object.getOwnPropertyNames(a).forEach((t=>s[t]=()=>e[t]));return s.default=()=>e,l.d(n,s),n},l.d=(e,t)=>{for(var n in t)l.o(t,n)&&!l.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},l.f={},l.e=e=>Promise.all(Object.keys(l.f).reduce(((t,n)=>(l.f[n](e,t),t)),[])),l.u=e=>e+".js",l.miniCssF=e=>{},l.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a={},l.l=(e,t,n,s)=>{if(a[e])a[e].push(t);else{var r,i;if(void 0!==n)for(var o=document.getElementsByTagName("script"),c=0;c<o.length;c++){var u=o[c];if(u.getAttribute("src")==e){r=u;break}}r||(i=!0,(r=document.createElement("script")).charset="utf-8",r.timeout=120,l.nc&&r.setAttribute("nonce",l.nc),r.src=e),a[e]=[t];var h=(t,n)=>{r.onerror=r.onload=null,clearTimeout(d);var s=a[e];if(delete a[e],r.parentNode&&r.parentNode.removeChild(r),s&&s.forEach((e=>e(n))),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=h.bind(null,r.onerror),r.onload=h.bind(null,r.onload),i&&document.head.appendChild(r)}},l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e;l.g.importScripts&&(e=l.g.location+"");var t=l.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var s=n.length-1;s>-1&&!e;)e=n[s--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),l.p=e})(),(()=>{var e={296:0};l.f.j=(t,n)=>{var s=l.o(e,t)?e[t]:void 0;if(0!==s)if(s)n.push(s[2]);else{var r=new Promise(((n,r)=>s=e[t]=[n,r]));n.push(s[2]=r);var i=l.p+l.u(t),a=new Error;l.l(i,(n=>{if(l.o(e,t)&&(0!==(s=e[t])&&(e[t]=void 0),s)){var r=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;a.message="Loading chunk "+t+" failed.\n("+r+": "+i+")",a.name="ChunkLoadError",a.type=r,a.request=i,s[1](a)}}),"chunk-"+t,t)}};var t=(t,n)=>{var s,r,[i,a,o]=n,c=0;if(i.some((t=>0!==e[t]))){for(s in a)l.o(a,s)&&(l.m[s]=a[s]);if(o)o(l)}for(t&&t(n);c<i.length;c++)r=i[c],l.o(e,r)&&e[r]&&e[r][0](),e[r]=0},n=self.webpackChunk=self.webpackChunk||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();l(5168)})();